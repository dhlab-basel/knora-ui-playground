{"version":3,"sources":["ng://@knora/core/lib/core.module.ts","node_modules/tslib/tslib.es6.js","ng://@knora/core/lib/declarations/api/knora-constants.ts","ng://@knora/core/lib/declarations/core.config.ts","ng://@knora/core/lib/declarations/api-service-result.ts","ng://@knora/core/lib/declarations/api-service-error.ts","ng://@knora/core/lib/declarations/utils.ts","ng://@knora/core/lib/declarations/api/shared/date.ts","ng://@knora/core/lib/declarations/api/shared/strings.ts","ng://@knora/core/lib/services/v2/ontology-cache.service.ts","ng://@knora/core/lib/declarations/api/admin/authentication/authentication-response.ts","ng://@knora/core/lib/declarations/api/admin/projects/project.ts","ng://@knora/core/lib/declarations/api/admin/groups/group.ts","ng://@knora/core/lib/declarations/api/admin/groups/group-response.ts","ng://@knora/core/lib/declarations/api/admin/groups/groups-response.ts","ng://@knora/core/lib/declarations/api/admin/lists/list-info.ts","ng://@knora/core/lib/declarations/api/admin/lists/list-node.ts","ng://@knora/core/lib/declarations/api/admin/lists/list.ts","ng://@knora/core/lib/declarations/api/admin/lists/list-info-response.ts","ng://@knora/core/lib/declarations/api/admin/lists/list-node-info.ts","ng://@knora/core/lib/declarations/api/admin/lists/list-node-info-response.ts","ng://@knora/core/lib/declarations/api/admin/lists/list-response.ts","ng://@knora/core/lib/declarations/api/admin/lists/lists-response.ts","ng://@knora/core/lib/declarations/api/admin/ontologies/ontology-info-short.ts","ng://@knora/core/lib/declarations/api/admin/permissions/permission-data.ts","ng://@knora/core/lib/declarations/api/admin/users/user.ts","ng://@knora/core/lib/declarations/api/admin/projects/project-members-response.ts","ng://@knora/core/lib/declarations/api/admin/projects/project-response.ts","ng://@knora/core/lib/declarations/api/admin/projects/projects-response.ts","ng://@knora/core/lib/declarations/api/admin/users/users-response.ts","ng://@knora/core/lib/declarations/api/admin/users/user-response.ts","ng://@knora/core/lib/declarations/api/v2/properties/read-property-item.ts","ng://@knora/core/lib/declarations/api/v2/resources/read-resource.ts","ng://@knora/core/lib/services/api.service.ts","ng://@knora/core/lib/services/v2/ontology.service.ts","ng://@knora/core/lib/declarations/api/v2/resources/read-resources-sequence.ts","ng://@knora/core/lib/declarations/api/v2/count-query/count-query-result.ts","ng://@knora/core/lib/declarations/api/v2/representations/audio-representation.ts","ng://@knora/core/lib/declarations/api/v2/representations/fileRepresentation.ts","ng://@knora/core/lib/declarations/api/v2/representations/moving-image-representation.ts","ng://@knora/core/lib/declarations/api/v2/representations/still-image-representation.ts","ng://@knora/core/lib/declarations/api/v2/representations/region.ts","ng://@knora/core/lib/declarations/api/v2/representations/sequence.ts","ng://@knora/core/lib/services/admin/groups.service.ts","ng://@knora/core/lib/services/admin/lists.service.ts","ng://@knora/core/lib/services/admin/projects.service.ts","ng://@knora/core/lib/services/admin/users.service.ts","ng://@knora/core/lib/services/admin/language.service.ts","ng://@knora/core/lib/services/admin/status-msg.service.ts","ng://@knora/core/lib/services/v2/convert-jsonld.ts","ng://@knora/core/lib/services/v2/search.service.ts","ng://@knora/core/lib/services/v2/incoming.service.ts","ng://@knora/core/lib/services/v2/resource.service.ts","ng://@knora/core/lib/services/v2/search-params.service.ts","ng://@knora/core/lib/services/v2/grav-search.service.ts","ng://@knora/core/lib/services/v2/store.service.ts","ng://@knora/core/lib/services/v2/basic-ontology.service.ts","ng://@knora/core/lib/services/v2/resource-types.service.ts","ng://@knora/core/lib/services/v2/list.service.ts","ng://@knora/core/lib/services/v2/list-cache.service.ts","ng://@knora/core/lib/declarations/api/operators.ts"],"names":["KuiCoreConfigToken","InjectionToken","KuiCoreModule","forRoot","config","ngModule","providers","provide","useValue","NgModule","args","imports","CommonModule","HttpClientModule","declarations","exports","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__metadata","metadataKey","metadataValue","metadata","__values","o","m","Symbol","iterator","call","next","value","done","KnoraSchema","KuiCoreConfig","name","undefined","app","api","media","ontologyIRI","tslib_1.__decorate","JsonProperty","String","JsonObject","ApiServiceResult","status","statusText","url","getBody","classObject","jsonConvert","deserialize","body","JsonConvert","OperationMode","ENABLE","ValueCheckingMode","ALLOW_NULL","ApiServiceError","errorInfo","KnoraConstants","KnoraVersion","KnoraApi","PathSeparator","KnoraBase","KnoraOntologyPath","DefaultSharedOntologyIRI","KnoraAdmin","SystemProjectIRI","SystemAdminGroupIRI","ProjectAdminGroupIRI","ProjectMemberGroupIRI","KnoraApiV2WithValueObjectPath","KnoraApiV2SimplePath","SalsahGuiOrder","SalsahGuiOntology","SalsahGuiAttribute","StandoffOntology","Resource","TextValue","IntValue","BooleanValue","UriValue","DecimalValue","DateValue","ColorValue","GeomValue","ListValue","IntervalValue","LinkValue","GeonameValue","FileValue","AudioFileValue","DDDFileValue","DocumentFileValue","StillImageFileValue","MovingImageFileValue","TextFileValue","IsResourceClass","IsValueClass","ForbiddenResource","XMLToStandoffMapping","ListNode","ArkUrl","versionArkUrl","ObjectType","ResourceIcon","isEditable","isLinkProperty","isLinkValueProperty","hasGeometry","schemaName","schemaNumberOfItems","schemaItemListElement","RdfProperty","RdfsLabel","RdfsSchema","RdfsComment","RdfsSubclassOf","subPropertyOf","OwlClass","owl","OwlObjectProperty","OwlDatatypeProperty","OwlAnnotationProperty","OwlOnProperty","OwlMaxCardinality","OwlMinCardinality","OwlCardinality","OwlRestriction","creationDate","lastModificationDate","hasPermissions","userHasPermission","attachedToProject","attachedToUser","Region","ReadTextValueAsHtml","ReadTextValueAsString","ReadTextValueAsXml","ReadDateValue","ReadLinkValue","ReadIntegerValue","ReadDecimalValue","ReadStillImageFileValue","ReadMovingImageFileValue","ReadAudioFileValue","ReadTextFileValue","ReadDDDFileValue","ReadDocumentFileValue","ReadGeomValue","ReadColorValue","ReadUriValue","ReadBooleanValue","ReadIntervalValue","ReadListValue","valueAsString","textValueAsHtml","textValueAsXml","textValueHasMapping","hasStandoffLinkToValue","dateValueHasStartYear","dateValueHasEndYear","dateValueHasStartEra","dateValueHasEndEra","dateValueHasStartMonth","dateValueHasEndMonth","dateValueHasStartDay","dateValueHasEndDay","dateValueHasCalendar","linkValueHasTarget","linkValueHasSource","linkValueHasSourceIri","linkValueHasTargetIri","integerValueAsInteger","decimalValueAsDecimal","fileValueAsUrl","fileValueIsPreview","fileValueHasFilename","hasStillImageFileValue","stillImageFileValueHasDimX","stillImageFileValueHasDimY","stillImageFileValueHasIIIFBaseUrl","hasMovingImageFileValue","movingImageFileValueHasDimX","movingImageFileValueHasDimY","movingImageFileValueHasDuration","movingImageFileValueHasFps","hasAudioFileValue","audioFileValueHasDuration","hasDocumentFileValue","hasDDDFileValue","colorValueAsColor","geometryValueAsGeometry","uriValueAsUri","booleanValueAsBoolean","intervalValueHasStart","intervalValueHasEnd","listValueAsListNode","xsdString","Xsd","xsdBoolean","xsdInteger","xsdDecimal","xsdUri","resourceSimple","dateSimple","intervalSimple","geomSimple","colorSimple","geonameSimple","fileSimple","listNodeSimple","matchFunction","EqualsComparisonOperator","EqualsComparisonLabel","NotEqualsComparisonOperator","NotEqualsComparisonLabel","GreaterThanComparisonOperator","GreaterThanComparisonLabel","GreaterThanEqualsComparisonOperator","GreaterThanEqualsComparisonLabel","LessThanComparisonOperator","LessThanComparisonLabel","LessThanEqualsComparisonOperator","LessThanQualsComparisonLabel","ExistsComparisonOperator","ExistsComparisonLabel","LikeComparisonOperator","LikeComparisonLabel","MatchComparisonOperator","MatchComparisonLabel","SalsahLink","RefMarker","GNDPrefix","GNDResolver","VIAFPrefix","VIAFResolver","Precision","Utils","getOntologyIriFromEntityIri","entityIri","segments","split","console","error","convertComplexKnoraApiEntityIritoSimple","complexEntityIri","RegexEmail","RegexUsername","RegexUrl","RegexPassword","RegexHex","RegexShortname","filterOutDuplicates","elem","index","self","indexOf","StringLiteral","language","CardinalityOccurrence","DateSalsah","calendar","era","year","month","day","precision","yearPrecision","monthPrecision","dayPrecision","getDateAsStringWithoutCalendar","dateString","toString","separator","getDateAsString","DateRangeSalsah","start","end","AuthenticationResponse","token","Project","id","shortname","shortcode","longname","description","keywords","logo","institution","ontologies","selfjoin","Boolean","Group","project","GroupResponse","group","GroupsResponse","groups","ListInfo","projectIri","labels","comments","label","children","level","position","ListNode_1","Number","List","listinfo","ListInfoResponse","ListNodeInfo","isRootNode","ListNodeInfoResponse","nodeinfo","ListResponse","list","ListsResponse","lists","OntologyInfoShort","ontologyIri","ontologyName","PermissionData","groupsPerProject","administrativePermissionsPerProject","User","email","username","password","givenName","familyName","lang","projects","sessionId","permissions","systemAdmin","ProjectMembersResponse","members","ProjectResponse","ProjectsResponse","UsersResponse","users","UserResponse","user","ReadTextValue","type","_super","propIri","str","_this","tslib_1.__extends","getClassName","getContent","ReferredResourcesByStandoffLink","html","referredResources","getReferredResourceInfo","resourceIri","ontologyInfo","resClassLabel","getLabelForResourceClass","xml","mappingIri","startYear","endYear","startEra","endEra","startMonth","endMonth","startDay","endDay","getDateSalsah","referredResourceIri","referredResource","integer","decimal","imageFilename","imageServerIIIFBaseURL","imagePath","dimX","dimY","isPreview","endsWith","makeIIIFUrl","reduceFactor","percentage","Math","floor","filename","path","duration","fps","textFilename","textFileURL","colorHex","Point2D","x","y","RegionGeometry","lineColor","lineWidth","points","radius","geometryString","geometryJSON","JSON","parse","_b","tslib_1.__values","_c","point","push","geometry","uri","bool","intervalStart","intervalEnd","listNodeIri","ReadResource","incomingRegions","incomingStillImageRepresentations","incomingLinks","stillImageRepresentationsToDisplay","properties","incomingAnnotations","incomingFileRepresentations","fileRepresentationsToDisplay","jsonld","require","semver","ApiService","http","loading","httpGet","params","get","observe","pipe","map","response","result","header","server","headers","compareVersion","catchError","handleRequestError","processJSONLD","resourceResponse","resPromise","promises","compact","from","httpPost","post","httpPut","put","httpDelete","delete","serviceError","message","throwError","handleJsonError","expected","existing","diff","warn","Injectable","providedIn","HttpClient","Inject","OntologyService","getOntologiesMetadata","getAllOntologies","getProjectOntologies","encodeURIComponent","getAllEntityDefinitionsForOntologies","getResourceClasses","resourceClassIris","Observable","observer","resClassUriEnc","forEach","resClassIri","getProperties","propertyIris","propertiesUriEnc","createOntology","data","ontology","knora-api:ontologyName","knora-api:attachedToProject","@id","rdfs:label","@context","rdfs","knora-api","OntologyCacheError","Error","OntologyMetadata","Cardinality","occurrence","property","GuiOrder","ResourceClass","icon","comment","cardinalities","guiOrder","ResourceClasses","Property","objectType","guiAttribute","Properties","ResourceClassIrisForOntology","OntologyCache","resourceClassIrisForOntology","resourceClasses","OntologyInformation","resourceClassesForOntology","sortFunc","a","labelA","toLowerCase","labelB","updateOntologyInformation","newResourceClassesForOntology","getResourceClassForOntology","newResClassForOntology","newResourceClasses","newResClass","newProperties","newProp","getResourceClassesAsArray","sortAsc","resClasses","resClass","sort","reverse","resClassDef","log","getPropertiesAsArray","prop","getLabelForProperty","propDef","OntologyCacheService","_ontologyService","excludedOntologies","excludedProperties","nonResourceClasses","cacheOntology","getOntologiesMetadataFromKnora","mergeMap","ontRes","ontPromise","getAllEntityDefinitionsForOntologyFromKnora","convertAndWriteOntologiesMetadataToCache","getAllOntologiesMetadataFromCache","getResourceClassIrisFromOntologyResponse","classDefinitions","classDefinitions_1","classDefinitions_1_1","classDef","classIri","convertAndWriteAllEntityDefinitionsForOntologyToCache","graph","classDefs","filter","entity","propertyDefs","entityType","convertAndWriteEntityDefinitionsToCache","getOntologyInformationFromCache","ontologyIris","allResourceClassIris","ontologyIris_1","ontologyIris_1_1","concat","getResourceClassDefinitions","resClassDefs","resourceClassDefinitions","propertyClassDefinitions","resourceClassDefinitions_1","resourceClassDefinitions_1_1","subclassOfCollection","isArray","subclassOfCollection_1","subclassOfCollection_1_1","curCard","newCard","minCard","card","TypeError","maxCard","newGuiOrder","resClassObj","convertAndWriteKnoraPropertyDefinitionsToOntologyCache","getResourceClassDefinitionsFromCache","resClassIris","getPropertyDefinitions","propDefs","propertyDefinitionsFromKnora","propertyDefinitionsFromKnora_1","propertyDefinitionsFromKnora_1_1","superProp","_d","attr","getPropertyDefinitionsFromCache","onto","of","getAndCacheOntologies","observables","forkJoin","getEntityDefinitionsForOntologies","ontologyIrisToQuery","resClassIrisToQueryFor","propertiesToQuery","results","ReadResourcesSequence","resources","numberOfResources","ontologyInformation","ResourcesSequence","CountQueryResult","numberOfResults","AudioRepresentation","audioFileValue","sequences","oldFileRepresentation","fileValue","regions","FileRepresentation","stillImage","movingImage","audio","MovingImageRepresentation","movingImageFileValue","StillImageRepresentation","stillImageFileValue","regionResource","getGeometries","Sequence","sequenceResource","getIntervals","GroupsService","apply","getAllGroups","getGroupByIri","iri","ListsService","getLists","getList","listIri","getListInfo","getListNodeInfo","nodeIri","createList","payload","updateListInfo","ProjectsService","getAllProjects","getProjectByIri","getProject","getProjectByShortname","getProjectByShortcode","getProjectMembersByIri","getProjectMembers","getProjectMembersByShortname","getProjectMembersByShortcode","createProject","updateProject","activateProject","deleteProject","UsersService","getAllUsers","getUser","identifier","identifierType","getUserByIri","getUserByEmail","getUserByUsername","getUsersGroupMemberships","userIri","createUser","addUserToProject","removeUserFromProject","addUserToProjectAdmin","removeUserFromProjectAdmin","addUserToGroup","groupIri","removeUserFromGroup","addUserToSystemAdmin","updateUserSystemAdmin","removeUserFromSystemAdmin","activateUser","updateOwnPassword","oldPassword","newPassword","requesterPassword","updateUsersPassword","updateBasicUserInformation","deleteUser","LanguageService","subject","Subject","setLanguage","var","getLanguage","asObservable","StatusMsgService","_http","getStatusMsg","res","err","ConvertJSONLD","getPropertyNames","propName","constructReadResource","resourceJSONLD","constructReadProperties","constructResource","createValueSpecificProp","propValue","standoffLinkValues","valueSpecificProp","textValue","standoffLinkValues_1","standoffLinkValues_1_1","referredRes","stringify","linkValue","incomingResource","incomingResourceIri","decVal","parseFloat","intStart","intEnd","standoffLinkValuesJSONLD","standoffLinkValuesJSONLD_1","standoffLinkValuesJSONLD_1_1","standoffVal","propNames","keys","propNames_1","propNames_1_1","propValues","_e","getReferredResourceClasses","referredResourceClasses","propNames_2","propNames_2_1","createReadResourcesSequenceFromJsonLD","resourcesResponseJSONLD","resourcesGraph","resourcesGraph_1","resourcesGraph_1_1","resource","createResourcesSequenceFromJsonLD","resourcesGraph_2","resourcesGraph_2_1","getResourceClassesFromJsonLD","resourcesGraph_3","resourcesGraph_3_1","createCountQueryResult","countQueryJSONLD","SearchService","_ontologyCacheService","convertJSONLDToReadResourceSequence","resSeq","ontoInfo","convertJSONLDToResourcesSequence","processFulltextSearchParams","httpParams","searchParams","limitToProject","set","limitToResourceClass","limitToStandoffClass","processSearchByLabelParams","doFulltextSearch","searchTerm","offset","HttpParams","doFullTextSearchReadResourceSequence","doFulltextSearchCountQuery","doFullTextSearchCountQueryCountQueryResult","doExtendedSearch","gravsearchQuery","doExtendedSearchReadResourceSequence","doExtendedSearchResourcesSequence","doExtendedSearchCountQuery","doExtendedSearchCountQueryCountQueryResult","searchByLabel","searchByLabelReadResourceSequence","IncomingService","getIncomingRegions","resourceIRI","sparqlQueryStr","getStillImageRepresentationsForCompoundResource","getIncomingLinksForResource","getIncomingLinks","ResourceService","_incomingService","getResource","res0","propKeys","includes","imgRepresentations","imagesToDisplay","image","imagesToDisplay_1","imagesToDisplay_1_1","img","subscribe","incomingFiles","incomingImgRepresentations","incomingImagesToDisplay","incomingImagesToDisplay_1","incomingImagesToDisplay_1_1","incomingRes","getResourcesSequence","requestIncomingResources","sequence","getReadResource","ExtendedSearchParams","generateGravsearch","SearchParamsService","_currentSearchParams","BehaviorSubject","changeSearchParamsMsg","getSearchParams","getValue","GravsearchGenerationService","_searchParamsService","createGravsearchQuery","mainResourceClassOption","mainResourceClass","orderByCriteria","returnStatements","props","propWithVal","valueLiteral","comparisonOperator","toSparql","complex","statement","restriction","propValueLiteral","complexTypeToProp","isSortCriterion","orderByStatement","join","gravsearchTemplate","offsetTemplate","localOffset","typeConversionComplexToSimple","http://api.knora.org/ontology/knora-api/v2#IntValue","http://api.knora.org/ontology/knora-api/v2#DecimalValue","http://api.knora.org/ontology/knora-api/v2#BooleanValue","http://api.knora.org/ontology/knora-api/v2#TextValue","http://api.knora.org/ontology/knora-api/v2#DateValue","http://api.knora.org/ontology/knora-api/v2#IntervalValue","http://api.knora.org/ontology/knora-api/v2#GeomValue","http://api.knora.org/ontology/knora-api/v2#ColorValue","http://api.knora.org/ontology/knora-api/v2#GeonameValue","http://api.knora.org/ontology/knora-api/v2#UriValue","http://api.knora.org/ontology/knora-api/v2#StillImageFileValue","http://api.knora.org/ontology/knora-api/v2#FileValue","http://api.knora.org/ontology/knora-api/v2#MovingImageFileValue","http://api.knora.org/ontology/knora-api/v2#DDDFileValue","http://api.knora.org/ontology/knora-api/v2#AudioFileValue","http://api.knora.org/ontology/knora-api/v2#DocumentFileValue","http://api.knora.org/ontology/knora-api/v2#TextFileValue","http://api.knora.org/ontology/knora-api/v2#ListValue","StoreService","resetTriplestoreContent","rdfDataObjects","BasicOntologyService","getBasicOntology","ResourceTypesService","getResourceTypesByVoc","getResourceType","ListService","getListFromKnora","rootNodeIri","getListNodeFromKnora","getListNode","ListNodeV2","hasRootNode","ListCache","ListNodeIriToListNodeV2","ListCacheService","_listService","listCache","listNodeIriToListNodeV2","convertJSONLDToListNode","listJSONLD","listNode","subListNode","hasRoot","listNodeJSONLD","completeList","Equals","NotEquals","GreaterThanEquals","GreaterThan","LessThan","LessThanEquals","Exists","Like","Match","ComparisonOperatorAndValue","ValueLiteral","schema","literalType","simple","IRI","PropertyWithValue"],"mappings":"8rBAKaA,EAAqB,IAAIC,EAAAA,eAA8B,0CAEpEC,EAAA,WAAA,SAAAA,KA0BA,OAVWA,EAAAC,QAAP,SAAeC,GAGX,MAAO,CACHC,SAAUH,EACVI,UAAW,CACP,CAACC,QAASP,EAAoBQ,SAAUJ,0BAtBvDK,EAAAA,SAAQC,KAAA,CAAC,CACNC,QAAS,CACLC,EAAAA,aACAC,EAAAA,kBAEJC,aAAc,GACdC,QAAS,CACLF,EAAAA,sBAmBRX,EA1BA,GCSIc,EAAgB,SAASC,EAAGC,GAI5B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAG5B,SAAgBO,EAAUR,EAAGC,GAEzB,SAASQ,IAAOC,KAAKC,YAAcX,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEY,UAAkB,OAANX,EAAaC,OAAOW,OAAOZ,IAAMQ,EAAGG,UAAYX,EAAEW,UAAW,IAAIH,GAGnF,SAqBgBK,EAAWC,EAAYC,EAAQC,EAAKC,GAChD,IAA2HlB,EAAvHmB,EAAIC,UAAUC,OAAQC,EAAIH,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAOhB,OAAOqB,yBAAyBP,EAAQC,GAAOC,EACrH,GAAuB,iBAAZM,SAAoD,mBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASV,EAAYC,EAAQC,EAAKC,QACpH,IAAK,IAAIQ,EAAIX,EAAWM,OAAS,EAAQ,GAALK,EAAQA,KAAS1B,EAAIe,EAAWW,MAAIJ,GAAKH,EAAI,EAAInB,EAAEsB,GAAS,EAAJH,EAAQnB,EAAEgB,EAAQC,EAAKK,GAAKtB,EAAEgB,EAAQC,KAASK,GAChJ,OAAW,EAAJH,GAASG,GAAKpB,OAAOyB,eAAeX,EAAQC,EAAKK,GAAIA,EAGhE,SAIgBM,EAAWC,EAAaC,GACpC,GAAuB,iBAAZN,SAAoD,mBAArBA,QAAQO,SAAyB,OAAOP,QAAQO,SAASF,EAAaC,GAGpH,SAyCgBE,EAASC,GACrB,IAAIC,EAAsB,mBAAXC,QAAyBF,EAAEE,OAAOC,UAAWV,EAAI,EAChE,OAAIQ,EAAUA,EAAEG,KAAKJ,GACd,CACHK,KAAM,WAEF,OADIL,GAAKP,GAAKO,EAAEZ,SAAQY,OAAI,GACrB,CAAEM,MAAON,GAAKA,EAAEP,KAAMc,MAAOP,SCyHpCQ,eCjOZ,SAAAC,IAQWhC,KAAAiC,KAAeC,UAOflC,KAAAmC,IAAcD,UAOdlC,KAAAoC,IAAcF,UAOdlC,KAAAqC,MAAgBH,UAOhBlC,KAAAsC,YAAsBJ,UAEjC,OA9BIK,EAAAA,CADCC,EAAAA,aAAa,OAAQC,4DAQtBF,EAAAA,CADCC,EAAAA,aAAa,MAAOC,2DAQrBF,EAAAA,CADCC,EAAAA,aAAa,MAAOC,2DAQrBF,EAAAA,CADCC,EAAAA,aAAa,QAASC,6DAQvBF,EAAAA,CADCC,EAAAA,aAAa,cAAeC,mEAlCpBT,EAAa5B,EAAA,CADzBsC,EAAAA,WAAW,kBACCV,MCHbW,EAAA,WAAA,SAAAA,IAYI3C,KAAA4C,OAAS,EAKT5C,KAAA6C,WAAa,GAKb7C,KAAA8C,IAAM,GAoBV,OANIH,EAAAzC,UAAA6C,QAAA,SAAQC,GAEJ,OAAOL,EAAiBM,YAAYC,YAAYlD,KAAKmD,KAAMH,IApChDL,EAAAM,YAA2B,IAAIG,EAAAA,YAAYC,EAAAA,cAAcC,OAAQC,EAAAA,kBAAkBC,YAwCtGb,EA1CA,GCFAc,EAAA,SAAAA,KAWIzD,KAAA4C,OAAS,EAKT5C,KAAA6C,WAAa,GAKb7C,KAAA8C,IAAM,GAKN9C,KAAA0D,UAAY,iBH9BhB,SAAAC,KAsOA,OAnOkBA,EAAAC,aAAuB,QAEvBD,EAAAE,SAAmB,0CACnBF,EAAAG,cAAwB,IAGxBH,EAAAI,WADAJ,EAAAK,kBAA4B,iCAC2B,cAGvDL,EAAAM,0BAFAN,EAAAO,WAAqBP,EAAeK,kBAAoB,gBAEO,kCAC/DL,EAAAQ,iBAA2BR,EAAeO,WAAa,iBACvDP,EAAAS,oBAA8BT,EAAeO,WAAa,eAC1DP,EAAAU,qBAA+BV,EAAeO,WAAa,gBAC3DP,EAAAW,sBAAgCX,EAAeO,WAAa,iBAE5DP,EAAAY,8BAAwCZ,EAAeE,SAAW,MAAQF,EAAeG,cACzFH,EAAAa,qBAA+Bb,EAAeE,SAAW,aAAeF,EAAeG,cAIvFH,EAAAc,gBAFAd,EAAAe,kBAA4B,+CAEgC,YAC5Df,EAAAgB,mBAA6BhB,EAAee,kBAAoB,gBAEhEf,EAAAiB,iBAA2B,4CAE3BjB,EAAAkB,SAAmBlB,EAAeY,8BAAgC,WAClEZ,EAAAmB,UAAoBnB,EAAeY,8BAAgC,YACnEZ,EAAAoB,SAAmBpB,EAAeY,8BAAgC,WAClEZ,EAAAqB,aAAuBrB,EAAeY,8BAAgC,eACtEZ,EAAAsB,SAAmBtB,EAAeY,8BAAgC,WAClEZ,EAAAuB,aAAuBvB,EAAeY,8BAAgC,eACtEZ,EAAAwB,UAAoBxB,EAAeY,8BAAgC,YACnEZ,EAAAyB,WAAqBzB,EAAeY,8BAAgC,aACpEZ,EAAA0B,UAAoB1B,EAAeY,8BAAgC,YACnEZ,EAAA2B,UAAoB3B,EAAeY,8BAAgC,YACnEZ,EAAA4B,cAAwB5B,EAAeY,8BAAgC,gBACvEZ,EAAA6B,UAAoB7B,EAAeY,8BAAgC,YACnEZ,EAAA8B,aAAuB9B,EAAeY,8BAAgC,eACtEZ,EAAA+B,UAAoB/B,EAAeY,8BAAgC,YACnEZ,EAAAgC,eAAyBhC,EAAeY,8BAAgC,iBACxEZ,EAAAiC,aAAuBjC,EAAeY,8BAAgC,eACtEZ,EAAAkC,kBAA4BlC,EAAeY,8BAAgC,oBAC3EZ,EAAAmC,oBAA8BnC,EAAeY,8BAAgC,sBAC7EZ,EAAAoC,qBAA+BpC,EAAeY,8BAAgC,uBAC9EZ,EAAAqC,cAAwBrC,EAAeY,8BAAgC,gBACvEZ,EAAAsC,gBAA0BtC,EAAeY,8BAAgC,kBACzEZ,EAAAuC,aAAuBvC,EAAeY,8BAAgC,eACtEZ,EAAAwC,kBAA4BxC,EAAeY,8BAAgC,oBAC3EZ,EAAAyC,qBAA+BzC,EAAeY,8BAAgC,uBAC9EZ,EAAA0C,SAAmB1C,EAAeY,8BAAgC,WAElEZ,EAAA2C,OAAiB3C,EAAeY,8BAAgC,SAChEZ,EAAA4C,cAAwB5C,EAAeY,8BAAgC,gBACvEZ,EAAA6C,WAAa7C,EAAeY,8BAAgC,aAE5DZ,EAAA8C,aAAuB9C,EAAeY,8BAAgC,eACtEZ,EAAA+C,WAAqB/C,EAAeY,8BAAgC,aACpEZ,EAAAgD,eAAyBhD,EAAeY,8BAAgC,iBACxEZ,EAAAiD,oBAA8BjD,EAAeY,8BAAgC,sBAC7EZ,EAAAkD,YAAsBlD,EAAeY,8BAAgC,cAErEZ,EAAAmD,WAAqB,yBACrBnD,EAAAoD,oBAA8B,kCAC9BpD,EAAAqD,sBAAgC,oCAEhCrD,EAAAsD,YAAsB,sDAEtBtD,EAAAuD,WADAvD,EAAAwD,WAAqB,uCAAyCxD,EAAeG,eAC7B,QAChDH,EAAAyD,YAAsBzD,EAAewD,WAAa,UAClDxD,EAAA0D,eAAyB1D,EAAewD,WAAa,aACrDxD,EAAA2D,cAAwB3D,EAAewD,WAAa,gBAIpDxD,EAAA4D,UAFA5D,EAAA6D,IAAc,iCAE0B,SACxC7D,EAAA8D,kBAA4B9D,EAAe6D,IAAM,kBACjD7D,EAAA+D,oBAA8B/D,EAAe6D,IAAM,oBACnD7D,EAAAgE,sBAAgChE,EAAe6D,IAAM,sBACrD7D,EAAAiE,cAAwBjE,EAAe6D,IAAM,cAC7C7D,EAAAkE,kBAA4BlE,EAAe6D,IAAM,kBACjD7D,EAAAmE,kBAA4BnE,EAAe6D,IAAM,kBACjD7D,EAAAoE,eAAyBpE,EAAe6D,IAAM,eAC9C7D,EAAAqE,eAAyBrE,EAAe6D,IAAM,eAE9C7D,EAAAsE,aAAuBtE,EAAeY,8BAAgC,eACtEZ,EAAAuE,qBAA+BvE,EAAeY,8BAAgC,uBAC9EZ,EAAAwE,eAAyBxE,EAAeY,8BAAgC,iBACxEZ,EAAAyE,kBAA4BzE,EAAeY,8BAAgC,oBAC3EZ,EAAA0E,kBAA4B1E,EAAeY,8BAAgC,oBAC3EZ,EAAA2E,eAAyB3E,EAAeY,8BAAgC,iBAExEZ,EAAA4E,OAAiB5E,EAAeY,8BAAgC,SAEhEZ,EAAA6E,oBAA8B,sBAC9B7E,EAAA8E,sBAAgC,wBAChC9E,EAAA+E,mBAA6B,qBAC7B/E,EAAAgF,cAAwB,gBACxBhF,EAAAiF,cAAwB,gBACxBjF,EAAAkF,iBAA2B,mBAC3BlF,EAAAmF,iBAA2B,mBAC3BnF,EAAAoF,wBAAkC,0BAClCpF,EAAAqF,yBAAmC,2BACnCrF,EAAAsF,mBAA6B,qBAC7BtF,EAAAuF,kBAA4B,oBAC5BvF,EAAAwF,iBAA2B,mBAC3BxF,EAAAyF,sBAAgC,wBAChCzF,EAAA0F,cAAwB,gBACxB1F,EAAA2F,eAAyB,iBACzB3F,EAAA4F,aAAuB,eACvB5F,EAAA6F,iBAA2B,mBAC3B7F,EAAA8F,kBAA4B,oBAC5B9F,EAAA+F,cAAwB,gBAExB/F,EAAAgG,cAAwBhG,EAAeY,8BAAgC,gBAEvEZ,EAAAiG,gBAA0BjG,EAAeY,8BAAgC,kBACzEZ,EAAAkG,eAAyBlG,EAAeY,8BAAgC,iBACxEZ,EAAAmG,oBAA8BnG,EAAeY,8BAAgC,sBAE7EZ,EAAAoG,uBAAiCpG,EAAeY,8BAAgC,yBAEhFZ,EAAAqG,sBAAgCrG,EAAeY,8BAAgC,wBAC/EZ,EAAAsG,oBAA8BtG,EAAeY,8BAAgC,sBAC7EZ,EAAAuG,qBAA+BvG,EAAeY,8BAAgC,uBAC9EZ,EAAAwG,mBAA6BxG,EAAeY,8BAAgC,qBAC5EZ,EAAAyG,uBAAiCzG,EAAeY,8BAAgC,yBAChFZ,EAAA0G,qBAA+B1G,EAAeY,8BAAgC,uBAC9EZ,EAAA2G,qBAA+B3G,EAAeY,8BAAgC,uBAC9EZ,EAAA4G,mBAA6B5G,EAAeY,8BAAgC,qBAC5EZ,EAAA6G,qBAA+B7G,EAAeY,8BAAgC,uBAE9EZ,EAAA8G,mBAA6B9G,EAAeY,8BAAgC,qBAC5EZ,EAAA+G,mBAA6B/G,EAAeY,8BAAgC,qBAC5EZ,EAAAgH,sBAAgChH,EAAeY,8BAAgC,wBAC/EZ,EAAAiH,sBAAgCjH,EAAeY,8BAAgC,wBAE/EZ,EAAAkH,sBAAgClH,EAAeY,8BAAgC,gBAE/EZ,EAAAmH,sBAAgCnH,EAAeY,8BAAgC,wBAE/EZ,EAAAoH,eAAyBpH,EAAeY,8BAAgC,iBACxEZ,EAAAqH,mBAA6BrH,EAAeY,8BAAgC,qBAC5EZ,EAAAsH,qBAA+BtH,EAAeY,8BAAgC,uBAE9EZ,EAAAuH,uBAAiCvH,EAAeY,8BAAgC,yBAChFZ,EAAAwH,2BAAqCxH,EAAeY,8BAAgC,6BACpFZ,EAAAyH,2BAAqCzH,EAAeY,8BAAgC,6BACpFZ,EAAA0H,kCAA4C1H,EAAeY,8BAAgC,oCAE3FZ,EAAA2H,wBAAkC3H,EAAeY,8BAAgC,0BACjFZ,EAAA4H,4BAAsC5H,EAAeY,8BAAgC,8BACrFZ,EAAA6H,4BAAsC7H,EAAeY,8BAAgC,8BACrFZ,EAAA8H,gCAA0C9H,EAAeY,8BAAgC,kCACzFZ,EAAA+H,2BAAqC/H,EAAeY,8BAAgC,6BAEpFZ,EAAAgI,kBAA4BhI,EAAeY,8BAAgC,oBAC3EZ,EAAAiI,0BAAoCjI,EAAeY,8BAAgC,4BAEnFZ,EAAAkI,qBAA+BlI,EAAeY,8BAAgC,uBAE9EZ,EAAAmI,gBAA0BnI,EAAeY,8BAAgC,kBAEzEZ,EAAAoI,kBAA4BpI,EAAeY,8BAAgC,oBAC3EZ,EAAAqI,wBAAkCrI,EAAeY,8BAAgC,0BACjFZ,EAAAsI,cAAwBtI,EAAeY,8BAAgC,gBACvEZ,EAAAuI,sBAAgCvI,EAAeY,8BAAgC,wBAE/EZ,EAAAwI,sBAAgCxI,EAAeY,8BAAgC,wBAC/EZ,EAAAyI,oBAA8BzI,EAAeY,8BAAgC,sBAE7EZ,EAAA0I,oBAA8B1I,EAAeY,8BAAgC,sBAI7EZ,EAAA2I,WAFA3I,EAAA4I,IAAc,qCAE2B,SACzC5I,EAAA6I,WAAqB7I,EAAe4I,IAAM,UAC1C5I,EAAA8I,WAAqB9I,EAAe4I,IAAM,UAC1C5I,EAAA+I,WAAqB/I,EAAe4I,IAAM,UAC1C5I,EAAAgJ,OAAiBhJ,EAAe4I,IAAM,SAEtC5I,EAAAiJ,eAAyBjJ,EAAea,qBAAuB,WAC/Db,EAAAkJ,WAAqBlJ,EAAea,qBAAuB,OAC3Db,EAAAmJ,eAAyBnJ,EAAea,qBAAuB,WAC/Db,EAAAoJ,WAAqBpJ,EAAea,qBAAuB,OAC3Db,EAAAqJ,YAAsBrJ,EAAea,qBAAuB,QAC5Db,EAAAsJ,cAAwBtJ,EAAea,qBAAuB,UAC9Db,EAAAuJ,WAAqBvJ,EAAea,qBAAuB,OAC3Db,EAAAwJ,eAAyBxJ,EAAea,qBAAuB,WAE/Db,EAAAyJ,cAAwBzJ,EAAeY,8BAAgC,QAEvEZ,EAAA0J,yBAAmC,IACnC1J,EAAA2J,sBAAgC,cAEhC3J,EAAA4J,4BAAsC,KACtC5J,EAAA6J,yBAAmC,kBAEnC7J,EAAA8J,8BAAwC,IACxC9J,EAAA+J,2BAAqC,kBAErC/J,EAAAgK,oCAA8C,KAC9ChK,EAAAiK,iCAA2C,4BAE3CjK,EAAAkK,2BAAqC,IACrClK,EAAAmK,wBAAkC,eAElCnK,EAAAoK,iCAA2C,KAC3CpK,EAAAqK,6BAAuC,yBAEvCrK,EAAAsK,yBAAmC,IACnCtK,EAAAuK,sBAAgC,SAEhCvK,EAAAwK,uBAAiC,QACjCxK,EAAAyK,oBAA8B,UAE9BzK,EAAA0K,wBAAkC,WAClC1K,EAAA2K,qBAA+B,UAE/B3K,EAAA4K,WAAqB,cACrB5K,EAAA6K,UAAoB,aAEpB7K,EAAA8K,UAAoB,WACpB9K,EAAA+K,YAAsB,wBAEtB/K,EAAAgL,WAAqB,SACrBhL,EAAAiL,aAAuB,yBAEzCjL,MAGY5B,EAAAA,EAAAA,cAAAA,EAAAA,YAAW,KACnBA,EAAA,QAAA,GAAA,UACAA,EAAAA,EAAA,OAAA,GAAA,SIrOJ,ICHY8M,EDGZC,EAAA,WAAA,SAAAA,KAoGA,OA9BkBA,EAAAC,4BAAd,SAA0CC,GAGtC,IAAMC,EAAqBD,EAAUE,MAAMvL,EAAeG,eAI1D,OAFwB,IAApBmL,EAAStO,QAAcwO,QAAQC,MAAM,UAAUJ,EAAS,+BAErDC,EAAS,IAUNH,EAAAO,wCAAd,SAAsDC,GAGlD,IAAML,EAAqBK,EAAiBJ,MAAM,KAAOvL,EAAeG,eAKxE,OAHwB,IAApBmL,EAAStO,QAAcwO,QAAQC,MAAM,UAAUE,EAAgB,+BAG5DL,EAAS,GAAK,YAActL,EAAeG,cAAgBmL,EAAS,IAzFxDH,EAAAS,WAAa,yHAObT,EAAAU,cAAgB,iBAOhBV,EAAAW,SAAW,2HAOXX,EAAAY,cAAgB,iCAOhBZ,EAAAa,SAAW,iBAOXb,EAAAc,eAAiB,iBAW1Bd,EAAAe,oBAAsB,SAACC,EAAMC,EAAeC,GAQtD,OAAOD,IAAUC,EAAKC,QAAQH,IAwCtChB,EApGA,gBEJA,SAAAoB,IAIWlQ,KAAA6B,MAAgBK,UAGhBlC,KAAAmQ,SAAmB,GAC9B,OAJI5N,EAAAA,CADCC,EAAAA,aAAa,QAASC,QAAQ,wDAI/BF,EAAAA,CADCC,EAAAA,aAAa,WAAYC,QAAQ,2DALzByN,EAAa9P,EAAA,CADzBsC,EAAAA,WAAW,kBACCwN,ODADrB,EAAAA,EAAAA,YAAAA,EAAAA,UAAS,KACjBA,EAAA,cAAA,GAAA,gBACAA,EAAAA,EAAA,eAAA,GAAA,iBACAA,EAAAA,EAAA,aAAA,GAAA,eAMJ,IEgCYuB,EFhCZC,EAAA,WAMI,SAAAA,EACaC,EACAC,EACAC,EACAC,EACAC,GAJA1Q,KAAAsQ,SAAAA,EACAtQ,KAAAuQ,IAAAA,EACAvQ,KAAAwQ,KAAAA,EACAxQ,KAAAyQ,MAAAA,EACAzQ,KAAA0Q,IAAAA,EAEL1Q,KAAKyQ,QAAUvO,UAEflC,KAAK2Q,UAAY9B,EAAAA,UAAU+B,cACpB5Q,KAAK0Q,MAAQxO,UAEpBlC,KAAK2Q,UAAY9B,EAAAA,UAAUgC,eAG3B7Q,KAAK2Q,UAAY9B,EAAAA,UAAUiC,aAkDvC,OAxCIT,EAAAnQ,UAAA6Q,+BAAA,WAEI,IAAIC,EAAa,IAAMhR,KAAKuQ,IAAM,KAElC,OAAQvQ,KAAK2Q,WAET,KAAK9B,EAAAA,UAAU+B,cACXI,GAAchR,KAAKwQ,KAAKS,WACxB,MAGJ,KAAKpC,EAAAA,UAAUgC,eACXG,GAAchR,KAAKwQ,KAAOH,EAAWa,UAAYlR,KAAKyQ,MACtD,MAGJ,KAAK5B,EAAAA,UAAUiC,aACXE,GAAchR,KAAKwQ,KAAOH,EAAWa,UAAYlR,KAAKyQ,MAAQJ,EAAWa,UAAYlR,KAAK0Q,IAUlG,OAAOM,GAQXX,EAAAnQ,UAAAiR,gBAAA,WAEI,OAAOnR,KAAKsQ,SAAW,IAAMtQ,KAAK+Q,kCAlEvBV,EAAAa,UAAY,IAqE/Bb,EAvEA,GA4EAe,EAAA,WAEI,SAAAA,EACaC,EACAC,GADAtR,KAAAqR,MAAAA,EACArR,KAAAsR,IAAAA,EAYjB,OAHIF,EAAAlR,UAAAiR,gBAAA,WACI,OAAOnR,KAAKqR,MAAMF,kBAAoB,IAAMnR,KAAKsR,IAAIP,kCAE7DK,EAhBA,gBGtFA,SAAAG,IAIWvR,KAAAwR,MAAgBtP,UAC3B,OADIK,EAAAA,CADCC,EAAAA,aAAa,QAASC,6DAFd8O,EAAsBnR,EAAA,CADlCsC,EAAAA,WAAW,2BACC6O,mBCCb,SAAAE,IAIWzR,KAAA0R,GAAaxP,UAGblC,KAAA2R,UAAoBzP,UAGpBlC,KAAA4R,UAAoB1P,UAGpBlC,KAAA6R,SAAmB3P,UAGnBlC,KAAA8R,YAA+B,CAAC,IAAI5B,GAGpClQ,KAAA+R,SAAqB7P,UAGrBlC,KAAAgS,KAAe9P,UAGflC,KAAAiS,YAAsB/P,UAGtBlC,KAAAkS,WAAuBhQ,UAGvBlC,KAAA4C,OAAkBV,UAGlBlC,KAAAmS,SAAoBjQ,UAE/B,OAhCIK,EAAAA,CADCC,EAAAA,aAAa,KAAMC,0DAIpBF,EAAAA,CADCC,EAAAA,aAAa,YAAaC,iEAI3BF,EAAAA,CADCC,EAAAA,aAAa,YAAaC,QAAQ,4DAInCF,EAAAA,CADCC,EAAAA,aAAa,WAAYC,QAAQ,2DAIlCF,EAAAA,CADCC,EAAAA,aAAa,cAAe,CAAC0N,IAAgB,6DAI9C3N,EAAAA,CADCC,EAAAA,aAAa,WAAY,CAACC,SAAS,0DAIpCF,EAAAA,CADCC,EAAAA,aAAa,OAAQC,QAAQ,uDAI9BF,EAAAA,CADCC,EAAAA,aAAa,cAAeC,QAAQ,8DAIrCF,EAAAA,CADCC,EAAAA,aAAa,aAAc,CAACC,kEAI7BF,EAAAA,CADCC,EAAAA,aAAa,SAAU4P,gEAIxB7P,EAAAA,CADCC,EAAAA,aAAa,WAAY4P,kEAhCjBX,EAAOrR,EAAA,CADnBsC,EAAAA,WAAW,YACC+O,mBCFb,SAAAY,IAIWrS,KAAA0R,GAAaxP,UAGblC,KAAAiC,KAAeC,UAGflC,KAAA8R,YAAsB5P,UAGtBlC,KAAAsS,QAAmBpQ,UAGnBlC,KAAA4C,OAAkBV,UAGlBlC,KAAAmS,SAAoBjQ,UAE/B,OAjBIK,EAAAA,CADCC,EAAAA,aAAa,KAAMC,0DAIpBF,EAAAA,CADCC,EAAAA,aAAa,OAAQC,4DAItBF,EAAAA,CADCC,EAAAA,aAAa,cAAeC,mEAI7BF,EAAAA,CADCC,EAAAA,aAAa,UAAWiP,GAAS,mBAClBA,kCAGhBlP,EAAAA,CADCC,EAAAA,aAAa,SAAU4P,gEAIxB7P,EAAAA,CADCC,EAAAA,aAAa,WAAY4P,kEAjBjBC,EAAKjS,EAAA,CADjBsC,EAAAA,WAAW,UACC2P,mBCDb,SAAAE,IAIWvS,KAAAwS,MAAetQ,UAE1B,OAFIK,EAAAA,CADCC,EAAAA,aAAa,QAAS6P,mBACTA,gCAHLE,EAAanS,EAAA,CADzBsC,EAAAA,WAAW,kBACC6P,mBCDb,SAAAE,IAIWzS,KAAA0S,OAAkBxQ,UAE7B,OAFIK,EAAAA,CADCC,EAAAA,aAAa,SAAU,CAAC6P,yDAFhBI,EAAcrS,EAAA,CAD1BsC,EAAAA,WAAW,mBACC+P,mBCDb,SAAAE,IAIW3S,KAAA0R,GAAaxP,UAGblC,KAAA4S,WAAqB1Q,UAGrBlC,KAAA6S,OAA0B3Q,UAG1BlC,KAAA8S,SAA4B5Q,UACvC,OAVIK,EAAAA,CADCC,EAAAA,aAAa,KAAMC,QAAQ,qDAI5BF,EAAAA,CADCC,EAAAA,aAAa,aAAcC,QAAQ,6DAIpCF,EAAAA,CADCC,EAAAA,aAAa,SAAU,CAAC0N,IAAgB,wDAIzC3N,EAAAA,CADCC,EAAAA,aAAa,WAAY,CAAC0N,IAAgB,0DAXlCyC,EAAQvS,EAAA,CADpBsC,EAAAA,WAAW,aACCiQ,mBCFb,SAAAtM,IAGWrG,KAAA0R,GAAaxP,UAGblC,KAAAiC,KAAeC,UAGflC,KAAA+S,MAAgB7Q,UAGhBlC,KAAAgT,SAAuB9Q,UAGvBlC,KAAAiT,MAAgB/Q,UAGhBlC,KAAAkT,SAAmBhR,gBAC9B,SAlBamE,EAET9D,EAAAA,CADCC,EAAAA,aAAa,KAAMC,QAAQ,qDAI5BF,EAAAA,CADCC,EAAAA,aAAa,OAAQC,QAAQ,uDAI9BF,EAAAA,CADCC,EAAAA,aAAa,QAASC,QAAQ,wDAI/BF,EAAAA,CADCC,EAAAA,aAAa,WAAY,CAAC2Q,IAAW,0DAItC5Q,EAAAA,CADCC,EAAAA,aAAa,QAAS4Q,QAAQ,wDAI/B7Q,EAAAA,CADCC,EAAAA,aAAa,WAAY4Q,QAAQ,2DAhBzB/M,EAAQ8M,EAAA/S,EAAA,CADpBsC,EAAAA,WAAW,aACC2D,mBCCb,SAAAgN,IAIWrT,KAAAsT,SAAqBpR,UAGrBlC,KAAAgT,SAAuB9Q,UAClC,OAJIK,EAAAA,CADCC,EAAAA,aAAa,WAAYmQ,GAAU,mBACnBA,mCAGjBpQ,EAAAA,CADCC,EAAAA,aAAa,WAAY,CAAC6D,IAAW,0DAL7BgN,EAAIjT,EAAA,CADhBsC,EAAAA,WAAW,SACC2Q,mBCFb,SAAAE,IAIWvT,KAAAsT,SAAqBpR,UAChC,OADIK,EAAAA,CADCC,EAAAA,aAAa,WAAYmQ,GAAU,mBACnBA,mCAHRY,EAAgBnT,EAAA,CAD5BsC,EAAAA,WAAW,qBACC6Q,mBCDb,SAAAC,IAIWxT,KAAA0R,GAAaxP,UAGblC,KAAAiC,KAAeC,UAGflC,KAAA4S,WAAqB1Q,UAGrBlC,KAAAyT,WAAsBvR,UAGtBlC,KAAA6S,OAA0B3Q,UAG1BlC,KAAA8S,SAA4B5Q,UACvC,OAhBIK,EAAAA,CADCC,EAAAA,aAAa,KAAMC,0DAIpBF,EAAAA,CADCC,EAAAA,aAAa,OAAQC,QAAQ,uDAI9BF,EAAAA,CADCC,EAAAA,aAAa,aAAcC,QAAQ,6DAIpCF,EAAAA,CADCC,EAAAA,aAAa,aAAc4P,SAAS,8DAIrC7P,EAAAA,CADCC,EAAAA,aAAa,SAAU,CAAC0N,yDAIzB3N,EAAAA,CADCC,EAAAA,aAAa,WAAY,CAAC0N,2DAjBlBsD,EAAYpT,EAAA,CADxBsC,EAAAA,WAAW,iBACC8Q,mBCDb,SAAAE,IAIW1T,KAAA2T,SAAyBzR,UACpC,OADIK,EAAAA,CADCC,EAAAA,aAAa,WAAYgR,GAAc,mBACvBA,mCAHRE,EAAoBtT,EAAA,CADhCsC,EAAAA,WAAW,yBACCgR,mBCDb,SAAAE,IAIW5T,KAAA6T,KAAa3R,UACxB,OADIK,EAAAA,CADCC,EAAAA,aAAa,OAAQ6Q,GAAM,mBACfA,+BAHJO,EAAYxT,EAAA,CADxBsC,EAAAA,WAAW,iBACCkR,mBCDb,SAAAE,IAIW9T,KAAA+T,MAAwB7R,UACnC,OADIK,EAAAA,CADCC,EAAAA,aAAa,QAAS,CAACgR,IAAe,uDAF9BM,EAAa1T,EAAA,CADzBsC,EAAAA,WAAW,kBACCoR,mBCFb,SAAAE,IAIWhU,KAAAiU,YAAsB/R,UAGtBlC,KAAAkU,aAAuBhS,UAElC,OALIK,EAAAA,CADCC,EAAAA,aAAa,cAAeC,mEAI7BF,EAAAA,CADCC,EAAAA,aAAa,eAAgBC,oEALrBuR,EAAiB5T,EAAA,CAD7BsC,EAAAA,WAAW,sBACCsR,mBCDb,SAAAG,IAIWnU,KAAAoU,iBAAwBlS,UAGxBlC,KAAAqU,oCAA2CnS,UACtD,OAJIK,EAAAA,CADCC,EAAAA,aAAa,mBAAoBhD,wEAIlC+C,EAAAA,CADCC,EAAAA,aAAa,sCAAuChD,2FAL5C2U,EAAc/T,EAAA,CAD1BsC,EAAAA,WAAW,mBACCyR,mBCEb,SAAAG,IAIWtU,KAAA0R,GAAaxP,UAGblC,KAAAuU,MAAgBrS,UAGhBlC,KAAAwU,SAAmBtS,UAGnBlC,KAAAyU,SAAmBvS,UAGnBlC,KAAAwR,MAAgBtP,UAGhBlC,KAAA0U,UAAoBxS,UAGpBlC,KAAA2U,WAAqBzS,UAGrBlC,KAAA4C,OAAkBV,UAGlBlC,KAAA4U,KAAe1S,UAGflC,KAAA0S,OAAkBxQ,UAGlBlC,KAAA6U,SAAsB3S,UAGtBlC,KAAA8U,UAAoB5S,UAGpBlC,KAAA+U,YAA8B7S,UAG9BlC,KAAAgV,aAAwB,EAEnC,OAzCIzS,EAAAA,CADCC,EAAAA,aAAa,KAAMC,0DAIpBF,EAAAA,CADCC,EAAAA,aAAa,QAASC,6DAIvBF,EAAAA,CADCC,EAAAA,aAAa,WAAYC,gEAI1BF,EAAAA,CADCC,EAAAA,aAAa,WAAYC,QAAQ,2DAIlCF,EAAAA,CADCC,EAAAA,aAAa,QAASC,QAAQ,wDAI/BF,EAAAA,CADCC,EAAAA,aAAa,YAAaC,iEAI3BF,EAAAA,CADCC,EAAAA,aAAa,aAAcC,kEAI5BF,EAAAA,CADCC,EAAAA,aAAa,SAAU4P,gEAIxB7P,EAAAA,CADCC,EAAAA,aAAa,OAAQC,4DAItBF,EAAAA,CADCC,EAAAA,aAAa,SAAU,CAAC6P,yDAIzB9P,EAAAA,CADCC,EAAAA,aAAa,WAAY,CAACiP,2DAI3BlP,EAAAA,CADCC,EAAAA,aAAa,YAAaC,QAAQ,4DAInCF,EAAAA,CADCC,EAAAA,aAAa,cAAe2R,mBACTA,sCAGpB5R,EAAAA,CADCC,EAAAA,aAAa,cAAe4P,SAAS,+DAzC7BkC,EAAIlU,EAAA,CADhBsC,EAAAA,WAAW,SACC4R,mBCHb,SAAAW,IAGWjV,KAAAkV,QAAkBhT,UAC7B,OADIK,EAAAA,CADCC,EAAAA,aAAa,UAAW,CAAC8R,0DADjBW,EAAsB7U,EAAA,CADlCsC,EAAAA,WAAW,2BACCuS,mBCAb,SAAAE,IAIWnV,KAAAsS,QAAmBpQ,UAE9B,OAFIK,EAAAA,CADCC,EAAAA,aAAa,UAAWiP,mBACTA,kCAHP0D,EAAe/U,EAAA,CAD3BsC,EAAAA,WAAW,oBACCyS,mBCFb,SAAAC,IAIWpV,KAAA6U,SAAsB3S,UAEjC,OAFIK,EAAAA,CADCC,EAAAA,aAAa,WAAY,CAACiP,2DAFlB2D,EAAgBhV,EAAA,CAD5BsC,EAAAA,WAAW,qBACC0S,mBCDb,SAAAC,IAIWrV,KAAAsV,MAAgBpT,UAE3B,OAFIK,EAAAA,CADCC,EAAAA,aAAa,QAAS,CAAC8R,wDAFfe,EAAajV,EAAA,CADzBsC,EAAAA,WAAW,kBACC2S,mBCDb,SAAAE,IAIWvV,KAAAwV,KAAatT,UACxB,OADIK,EAAAA,CADCC,EAAAA,aAAa,OAAQ8R,mBACTA,+BAHJiB,EAAYnV,EAAA,CADxBsC,EAAAA,WAAW,iBACC6S,MCuCbE,EAAA,SAAAA,KAIazV,KAAA0V,KAAe/R,EAAemB,WAY3C2D,EAAA,SAAAkN,GAEI,SAAAlN,EAAsBiJ,EAAqBkE,EAAwBC,GAAnE,IAAAC,EACIH,EAAAhU,KAAA3B,OAAOA,YADW8V,EAAApE,GAAAA,EAAqBoE,EAAAF,QAAAA,EAAwBE,EAAAD,IAAAA,IAWvE,OAb2CE,EAAAA,EAAAA,GAMvCtN,EAAAvI,UAAA8V,aAAA,WACI,OAAOrS,EAAe8E,uBAG1BA,EAAAvI,UAAA+V,WAAA,WACI,OAAOjW,KAAK6V,KAEpBpN,EAbA,CAA2CgN,GAkB3CS,EAAA,SAAAA,OAOA1N,EAAA,SAAAmN,GAEI,SAAAnN,EAAsBkJ,EAAqBkE,EAA0BO,EAAuBC,GAA5F,IAAAN,EACIH,EAAAhU,KAAA3B,OAAOA,YADW8V,EAAApE,GAAAA,EAAqBoE,EAAAF,QAAAA,EAA0BE,EAAAK,KAAAA,EAAuBL,EAAAM,kBAAAA,IAiChG,OAnCyCL,EAAAA,EAAAA,GAerCvN,EAAAtI,UAAAmW,wBAAA,SAAwBC,EAAqBC,GACzC,GAAIvW,KAAKoW,oBAAsBlU,WAAalC,KAAKoW,kBAAkBE,KAAiBpU,UAMhF,MAAO,yEAJP,IAAMsU,EAAgBD,EAAaE,yBAAyBzW,KAAKoW,kBAAkBE,GAAaZ,MAEhG,OAAO1V,KAAKoW,kBAAkBE,GAAavD,MAAQ,KAAKyD,EAAa,KAO7EhO,EAAAtI,UAAA8V,aAAA,WACI,OAAOrS,EAAe6E,qBAG1BA,EAAAtI,UAAA+V,WAAA,WACI,OAAOjW,KAAKmW,MAGpB3N,EAnCA,CAAyCiN,GAwCzC/M,EAAA,SAAAiN,GAEI,SAAAjN,EAAsBgJ,EAAqBkE,EAA0Bc,EAAsBC,GAA3F,IAAAb,EACIH,EAAAhU,KAAA3B,OAAOA,YADW8V,EAAApE,GAAAA,EAAqBoE,EAAAF,QAAAA,EAA0BE,EAAAY,IAAAA,EAAsBZ,EAAAa,WAAAA,IAY/F,OAdwCZ,EAAAA,EAAAA,GAMpCrN,EAAAxI,UAAA8V,aAAA,WACI,OAAOrS,EAAe+E,oBAG1BA,EAAAxI,UAAA+V,WAAA,WACI,OAAOjW,KAAK0W,KAGpBhO,EAdA,CAAwC+M,GAoBxC9M,EAAA,WAEI,SAAAA,EACa+I,EACAkE,EACAtF,EACAsG,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAVAnX,KAAA0R,GAAAA,EACA1R,KAAA4V,QAAAA,EACA5V,KAAAsQ,SAAAA,EACAtQ,KAAA4W,UAAAA,EACA5W,KAAA6W,QAAAA,EACA7W,KAAA8W,SAAAA,EACA9W,KAAA+W,OAAAA,EACA/W,KAAAgX,WAAAA,EACAhX,KAAAiX,SAAAA,EACAjX,KAAAkX,SAAAA,EACAlX,KAAAmX,OAAAA,EAGJnX,KAAA0V,KAAO/R,EAAewB,UAEvBnF,KAAAkR,UAAY,IAoBxB,OAlBIvI,EAAAzI,UAAAkX,cAAA,WACI,OAAIpX,KAAK4W,YAAc5W,KAAK6W,SAAW7W,KAAKgX,aAAehX,KAAKiX,UAAYjX,KAAKkX,WAAalX,KAAKmX,QAAUnX,KAAK8W,WAAa9W,KAAK+W,OAEzH,IAAI1G,EAAWrQ,KAAKsQ,SAAUtQ,KAAK8W,SAAU9W,KAAK4W,UAAW5W,KAAKgX,WAAYhX,KAAKkX,UAGnF,IAAI9F,EAAgB,IAAIf,EAAWrQ,KAAKsQ,SAAUtQ,KAAK8W,SAAU9W,KAAK4W,UAAW5W,KAAKgX,WAAYhX,KAAKkX,UAAW,IAAI7G,EAAWrQ,KAAKsQ,SAAUtQ,KAAK+W,OAAQ/W,KAAK6W,QAAS7W,KAAKiX,SAAUjX,KAAKmX,UAK9MxO,EAAAzI,UAAA8V,aAAA,WACI,OAAOrS,EAAegF,eAG1BA,EAAAzI,UAAA+V,WAAA,WACI,OAAOjW,KAAKoX,gBAAgBjG,mBAEpCxI,EAtCA,GA2CAC,EAAA,WAEI,SAAAA,EAAsB8I,EAAqBkE,EAA0ByB,EAAsCC,GAArFtX,KAAA0R,GAAAA,EAAqB1R,KAAA4V,QAAAA,EAA0B5V,KAAAqX,oBAAAA,EAAsCrX,KAAAsX,iBAAAA,EAIlGtX,KAAA0V,KAAO/R,EAAe6B,UAwBnC,OAtBIoD,EAAA1I,UAAAmW,wBAAA,SAAwBE,GACpB,GAAIvW,KAAKsX,mBAAqBpV,UAM1B,OAAOlC,KAAKqX,oBAJZ,IAAMb,EAAgBD,EAAaE,yBAAyBzW,KAAKsX,iBAAiB5B,MAElF,OAAO1V,KAAKsX,iBAAiBvE,MAAQ,KAAKyD,EAAa,KAM/D5N,EAAA1I,UAAA8V,aAAA,WACI,OAAOrS,EAAeiF,eAG1BA,EAAA1I,UAAA+V,WAAA,WACI,OAAIjW,KAAKsX,mBAAqBpV,UACnBlC,KAAKsX,iBAAiBvE,MAEtB/S,KAAKqX,qBAGxBzO,EA9BA,GAmCAC,GAAA,WAEI,SAAAA,EAAsB6I,EAAqBkE,EAA0B2B,GAA/CvX,KAAA0R,GAAAA,EAAqB1R,KAAA4V,QAAAA,EAA0B5V,KAAAuX,QAAAA,EAI5DvX,KAAA0V,KAAO/R,EAAeoB,SAUnC,OARI8D,EAAA3I,UAAA8V,aAAA,WACI,OAAOrS,EAAekF,kBAG1BA,EAAA3I,UAAA+V,WAAA,WACI,OAAOjW,KAAKuX,QAAQtG,YAG5BpI,EAhBA,GAqBAC,GAAA,WAEI,SAAAA,EAAsB4I,EAAqBkE,EAA0B4B,GAA/CxX,KAAA0R,GAAAA,EAAqB1R,KAAA4V,QAAAA,EAA0B5V,KAAAwX,QAAAA,EAI5DxX,KAAA0V,KAAO/R,EAAeuB,aASnC,OAPI4D,EAAA5I,UAAA8V,aAAA,WACI,OAAOrS,EAAemF,kBAG1BA,EAAA5I,UAAA+V,WAAA,WACI,OAAOjW,KAAKwX,QAAQvG,YAE5BnI,EAfA,GAqBApD,GAAA,SAAAA,OAkBAqD,GAAA,SAAA4M,GAEI,SAAA5M,EACa2I,EACAkE,EACA6B,EACAC,EACAC,EACAC,EACAC,GAPb,IAAA/B,EAQIH,EAAAhU,KAAA3B,OAAOA,YAPE8V,EAAApE,GAAAA,EACAoE,EAAAF,QAAAA,EACAE,EAAA2B,cAAAA,EACA3B,EAAA4B,uBAAAA,EACA5B,EAAA6B,UAAAA,EACA7B,EAAA8B,KAAAA,EACA9B,EAAA+B,KAAAA,EAQJ/B,EAAAJ,KAAO/R,EAAemC,oBAJ3BgQ,EAAKgC,UAAYL,EAAcM,SAAS,UA6BhD,OA1C6ChC,EAAAA,EAAAA,GAqBzChN,EAAA7I,UAAA8X,YAAA,SAAYC,GAER,GAAIjY,KAAK8X,UACL,OAAO9X,KAAK2X,UAEZ,IAAIO,EAAaC,KAAKC,MAAM,IAAMH,GAIlC,OAFAC,EAA2B,EAAbA,GAAkBA,GAAc,IAAOA,EAAa,GAE3DlY,KAAK0X,uBAAyB,IAAM1X,KAAKyX,cAAgB,aAAeS,EAAWjH,WAAa,kBAK/GlI,EAAA7I,UAAA8V,aAAA,WACI,OAAOrS,EAAeoF,yBAG1BA,EAAA7I,UAAA+V,WAAA,WACI,OAAOjW,KAAK2X,WAEpB5O,EA1CA,CAA6CrD,IA+C7CsD,GAAA,SAAA2M,GAEI,SAAA3M,EACa0I,EACAkE,EACAyC,EACAC,EACAV,EACAC,EACAU,EACAC,GARb,IAAA1C,EASIH,EAAAhU,KAAA3B,OAAOA,YARE8V,EAAApE,GAAAA,EACAoE,EAAAF,QAAAA,EACAE,EAAAuC,SAAAA,EACAvC,EAAAwC,KAAAA,EACAxC,EAAA8B,KAAAA,EACA9B,EAAA+B,KAAAA,EACA/B,EAAAyC,SAAAA,EACAzC,EAAA0C,IAAAA,EAIJ1C,EAAAJ,KAAO/R,EAAeoC,uBAYnC,OA1B8CgQ,EAAAA,EAAAA,GAmB1C/M,EAAA9I,UAAA8V,aAAA,WACI,OAAOrS,EAAeqF,0BAG1BA,EAAA9I,UAAA+V,WAAA,WACI,OAAOjW,KAAKsY,MAEpBtP,EA1BA,CAA8CtD,IA+B9CuD,GAAA,SAAA0M,GAEI,SAAA1M,EACayI,EACAkE,EACAyC,EACAC,EACAC,GALb,IAAAzC,EAMIH,EAAAhU,KAAA3B,OAAOA,YALE8V,EAAApE,GAAAA,EACAoE,EAAAF,QAAAA,EACAE,EAAAuC,SAAAA,EACAvC,EAAAwC,KAAAA,EACAxC,EAAAyC,SAAAA,EAIJzC,EAAAJ,KAAO/R,EAAegC,iBASnC,OApBwCoQ,EAAAA,EAAAA,GAapC9M,EAAA/I,UAAA8V,aAAA,WACI,OAAOrS,EAAesF,oBAG1BA,EAAA/I,UAAA+V,WAAA,WACI,OAAOjW,KAAKsY,MAEpBrP,EApBA,CAAwCvD,IAyBxCyD,GAAA,SAAAwM,GAEI,SAAAxM,EACauI,EACAkE,EACAyC,EACAC,GAJb,IAAAxC,EAKIH,EAAAhU,KAAA3B,OAAOA,YAJE8V,EAAApE,GAAAA,EACAoE,EAAAF,QAAAA,EACAE,EAAAuC,SAAAA,EACAvC,EAAAwC,KAAAA,EAIJxC,EAAAJ,KAAO/R,EAAeiC,eAYnC,OAtBsCmQ,EAAAA,EAAAA,GAelC5M,EAAAjJ,UAAA8V,aAAA,WACI,OAAOrS,EAAewF,kBAG1BA,EAAAjJ,UAAA+V,WAAA,WACI,OAAOjW,KAAKsY,MAEpBnP,EAtBA,CAAsCzD,IA2BtC0D,GAAA,SAAAuM,GAEI,SAAAvM,EACasI,EACAkE,EACAyC,EACAC,GAJb,IAAAxC,EAKIH,EAAAhU,KAAA3B,OAAOA,YAJE8V,EAAApE,GAAAA,EACAoE,EAAAF,QAAAA,EACAE,EAAAuC,SAAAA,EACAvC,EAAAwC,KAAAA,EAIJxC,EAAAJ,KAAO/R,EAAekC,oBAYnC,OAtB2CkQ,EAAAA,EAAAA,GAevC3M,EAAAlJ,UAAA8V,aAAA,WACI,OAAOrS,EAAeyF,uBAG1BA,EAAAlJ,UAAA+V,WAAA,WACI,OAAOjW,KAAKsY,MAEpBlP,EAtBA,CAA2C1D,IA2B3CwD,GAAA,WAEI,SAAAA,EAAsBwI,EAAqBkE,EAA0B6C,EAA+BC,GAA9E1Y,KAAA0R,GAAAA,EAAqB1R,KAAA4V,QAAAA,EAA0B5V,KAAAyY,aAAAA,EAA+BzY,KAAA0Y,YAAAA,EAI3F1Y,KAAA0V,KAAO/R,EAAeqC,cAUnC,OARIkD,EAAAhJ,UAAA8V,aAAA,WACI,OAAOrS,EAAeuF,mBAG1BA,EAAAhJ,UAAA+V,WAAA,WACI,OAAOjW,KAAK0Y,aAGpBxP,EAhBA,GAqBAI,GAAA,WAEI,SAAAA,EAAsBoI,EACTkE,EACA+C,GAFS3Y,KAAA0R,GAAAA,EACT1R,KAAA4V,QAAAA,EACA5V,KAAA2Y,SAAAA,EAGJ3Y,KAAA0V,KAAO/R,EAAeyB,WASnC,OAPIkE,EAAApJ,UAAA8V,aAAA,WACI,OAAOrS,EAAe2F,gBAG1BA,EAAApJ,UAAA+V,WAAA,WACI,OAAOjW,KAAK2Y,UAEpBrP,EAhBA,GAqBAsP,GACI,SAAAA,GAAoBC,EAAkBC,GAAlB9Y,KAAA6Y,EAAAA,EAAkB7Y,KAAA8Y,EAAAA,GAO1CC,GACI,SAAAA,GAAoBnW,EACToW,EACAC,EACAC,EACAxD,EACAyD,GALSnZ,KAAA4C,OAAAA,EACT5C,KAAAgZ,UAAAA,EACAhZ,KAAAiZ,UAAAA,EACAjZ,KAAAkZ,OAAAA,EACAlZ,KAAA0V,KAAAA,EACA1V,KAAAmZ,OAAAA,GAQf9P,GAAA,WAEI,SAAAA,EAAsBqI,EAAqBkE,EAA0BwD,WAA/CpZ,KAAA0R,GAAAA,EAAqB1R,KAAA4V,QAAAA,EAA0B5V,KAAAoZ,eAAAA,EA2B5DpZ,KAAA0V,KAAO/R,EAAe0B,UAzB3B,IAOI8T,EAPEE,EAAeC,KAAKC,MAAMH,GAE1BF,EAAoB,OAC1B,IAAoB,IAAAM,EAAAC,EAAAJ,EAAaH,QAAMQ,EAAAF,EAAA5X,QAAA8X,EAAA5X,KAAA4X,EAAAF,EAAA5X,OAAE,CAApC,IAAM+X,EAAKD,EAAA7X,MACZqX,EAAOU,KAAK,IAAIhB,GAAQe,EAAMd,EAAGc,EAAMb,yGAIvCO,EAAaF,SACbA,EAAS,IAAIP,GAAQS,EAAaF,OAAON,EAAGQ,EAAaF,OAAOL,IAGpE9Y,KAAK6Z,SAAW,IAAId,GAChBM,EAAazW,OACbyW,EAAaL,UACbK,EAAaJ,UACbC,EACAG,EAAa3D,KACbyD,GAgBZ,OAPI9P,EAAAnJ,UAAA8V,aAAA,WACI,OAAOrS,EAAe0F,eAG1BA,EAAAnJ,UAAA+V,WAAA,WACI,OAAOjW,KAAKoZ,gBAEpB/P,EAtCA,GA2CAE,GAAA,WAEI,SAAAA,EAAsBmI,EAAqBkE,EAA0BkE,GAA/C9Z,KAAA0R,GAAAA,EAAqB1R,KAAA4V,QAAAA,EAA0B5V,KAAA8Z,IAAAA,EAI5D9Z,KAAA0V,KAAO/R,EAAesB,SAUnC,OARIsE,EAAArJ,UAAA8V,aAAA,WACI,OAAOrS,EAAe4F,cAG1BA,EAAArJ,UAAA+V,WAAA,WACI,OAAOjW,KAAK8Z,KAGpBvQ,EAhBA,GAqBAC,GAAA,WAEI,SAAAA,EAAsBkI,EAAqBkE,EAA0BmE,GAA/C/Z,KAAA0R,GAAAA,EAAqB1R,KAAA4V,QAAAA,EAA0B5V,KAAA+Z,KAAAA,EAI5D/Z,KAAA0V,KAAO/R,EAAeqB,aAUnC,OARIwE,EAAAtJ,UAAA8V,aAAA,WACI,OAAOrS,EAAe6F,kBAG1BA,EAAAtJ,UAAA+V,WAAA,WACI,OAAOjW,KAAK+Z,KAAK9I,YAGzBzH,EAhBA,GAqBAC,GAAA,WAEI,SAAAA,EAAsBiI,EAAqBkE,EAA0BoE,EAAgCC,GAA/Eja,KAAA0R,GAAAA,EAAqB1R,KAAA4V,QAAAA,EAA0B5V,KAAAga,cAAAA,EAAgCha,KAAAia,YAAAA,EAI5Fja,KAAA0V,KAAO/R,EAAe4B,cAUnC,OARIkE,EAAAvJ,UAAA8V,aAAA,WACI,OAAOrS,EAAe8F,mBAG1BA,EAAAvJ,UAAA+V,WAAA,WACI,OAAOjW,KAAKga,cAAc/I,WAAa,IAAMjR,KAAKia,aAG1DxQ,EAhBA,GAqBAC,GAAA,WAEI,SAAAA,EAAsBgI,EAAqBkE,EAA0BsE,GAA/Cla,KAAA0R,GAAAA,EAAqB1R,KAAA4V,QAAAA,EAA0B5V,KAAAka,YAAAA,EAI5Dla,KAAA0V,KAAO/R,EAAe2B,UAUnC,OARIoE,EAAAxJ,UAAA8V,aAAA,WACI,OAAOrS,EAAe+F,eAG1BA,EAAAxJ,UAAA+V,WAAA,WACI,OAAOjW,KAAKka,aAGpBxQ,EAhBA,GCtlBAyQ,GAaI,SAAAA,GACoBzI,EACAgE,EACA3C,EAETqH,EAEAC,EACAC,EAEAC,EAESC,GAXAxa,KAAA0R,GAAAA,EACA1R,KAAA0V,KAAAA,EACA1V,KAAA+S,MAAAA,EAET/S,KAAAoa,gBAAAA,EAEApa,KAAAqa,kCAAAA,EACAra,KAAAsa,cAAAA,EAEAta,KAAAua,mCAAAA,EAESva,KAAAwa,WAAAA,GASxB3V,GACI,SAAAA,GACoB6M,EACAgE,EACA3C,EACT0H,EACAC,EACAJ,EACAK,EACSH,GAPAxa,KAAA0R,GAAAA,EACA1R,KAAA0V,KAAAA,EACA1V,KAAA+S,MAAAA,EACT/S,KAAAya,oBAAAA,EACAza,KAAA0a,4BAAAA,EACA1a,KAAAsa,cAAAA,EACAta,KAAA2a,6BAAAA,EACS3a,KAAAwa,WAAAA,GCzClBI,GAASC,QAAQ,UAEjBC,GAASD,QAAQ,UAEvBE,GAAA,WAUI,SAAAA,EAA8BC,EACSvc,GADTuB,KAAAgb,KAAAA,EACShb,KAAAvB,OAAAA,EAHvCuB,KAAAib,SAAU,SAeVF,EAAA7a,UAAAgb,QAAA,SAAQ5C,EAAc6C,GAAtB,IAAArF,EAAA9V,KAII,OAFAA,KAAKib,SAAU,EAERjb,KAAKgb,KAAKI,IAAIpb,KAAKvB,OAAO2D,IAAMkW,EAAM,CAAE+C,QAAS,WAAYF,OAAQA,IAAUG,KAClFC,EAAAA,IAAI,SAACC,GACD1F,EAAKmF,SAAU,EAEf,IAAMQ,EAAS,IAAI9Y,EAQnB,OAPA8Y,EAAOC,OAAS,CAAEC,OAAUH,EAASI,QAAQR,IAAI,WACjDtF,EAAK+F,eAAeL,EAASI,QAAQR,IAAI,WACzCK,EAAO7Y,OAAS4Y,EAAS5Y,OACzB6Y,EAAO5Y,WAAa2Y,EAAS3Y,WAC7B4Y,EAAO3Y,IAAMwV,EACbmD,EAAOtY,KAAOqY,EAASrY,KAEhBsY,IAEXK,EAAAA,WAAW,SAAC1M,GAGR,OAFA0G,EAAKmF,SAAU,EAERnF,EAAKiG,mBAAmB3M,OAYjC2L,EAAA7a,UAAA8b,cAAV,SAAwBC,GAEpB,IAIMC,EAJctB,GAAOuB,SAIIC,QAAQH,EAAiB9Y,KAAM,IAI9D,OAAOkZ,EAAAA,KAAKH,IAWhBnB,EAAA7a,UAAAoc,SAAA,SAAShE,EAAcnV,GAAvB,IAAA2S,EAAA9V,KAMI,OAJAA,KAAKib,SAAU,EAIRjb,KAAKgb,KAAKuB,KAAKvc,KAAKvB,OAAO2D,IAAMkW,EAAMnV,EAAM,CAAEkY,QAAS,aAAcC,KACzEC,EAAAA,IAAI,SAACC,GACD1F,EAAKmF,SAAU,EAEf,IAAMQ,EAAS,IAAI9Y,EAOnB,OANA8Y,EAAOC,OAAS,CAAEC,OAAUH,EAASI,QAAQR,IAAI,WACjDtF,EAAK+F,eAAeJ,EAAOC,OAAOC,QAClCF,EAAO7Y,OAAS4Y,EAAS5Y,OACzB6Y,EAAO5Y,WAAa2Y,EAAS3Y,WAC7B4Y,EAAO3Y,IAAMwV,EACbmD,EAAOtY,KAAOqY,EAASrY,KAChBsY,IAEXK,EAAAA,WAAW,SAAC1M,GAKR,OAJA0G,EAAKmF,SAAU,EAIRnF,EAAKiG,mBAAmB3M,OAa3C2L,EAAA7a,UAAAsc,QAAA,SAAQlE,EAAcnV,GAAtB,IAAA2S,EAAA9V,KAMI,OAJAA,KAAKib,SAAU,EAIRjb,KAAKgb,KAAKyB,IAAIzc,KAAKvB,OAAO2D,IAAMkW,EAAMnV,EAAM,CAAEkY,QAAS,aAAcC,KACxEC,EAAAA,IAAI,SAACC,GACD1F,EAAKmF,SAAU,EAIf,IAAMQ,EAAS,IAAI9Y,EAOnB,OANA8Y,EAAOC,OAAS,CAAEC,OAAUH,EAASI,QAAQR,IAAI,WACjDtF,EAAK+F,eAAeJ,EAAOC,OAAOC,QAClCF,EAAO7Y,OAAS4Y,EAAS5Y,OACzB6Y,EAAO5Y,WAAa2Y,EAAS3Y,WAC7B4Y,EAAO3Y,IAAMwV,EACbmD,EAAOtY,KAAOqY,EAASrY,KAChBsY,IAGXK,EAAAA,WAAW,SAAC1M,GAKR,OAJA0G,EAAKmF,SAAU,EAIRnF,EAAKiG,mBAAmB3M,OAW3C2L,EAAA7a,UAAAwc,WAAA,SAAWpE,GAAX,IAAAxC,EAAA9V,KAMI,OAJAA,KAAKib,SAAU,EAIRjb,KAAKgb,KAAK2B,UAAO3c,KAAKvB,OAAO2D,IAAMkW,EAAM,CAAE+C,QAAS,aAAcC,KACrEC,EAAAA,IAAI,SAACC,GACD1F,EAAKmF,SAAU,EAIf,IAAMQ,EAAS,IAAI9Y,EAOnB,OANA8Y,EAAOC,OAAS,CAAEC,OAAUH,EAASI,QAAQR,IAAI,WACjDtF,EAAK+F,eAAeJ,EAAOC,OAAOC,QAClCF,EAAO7Y,OAAS4Y,EAAS5Y,OACzB6Y,EAAO5Y,WAAa2Y,EAAS3Y,WAC7B4Y,EAAO3Y,IAAMwV,EACbmD,EAAOtY,KAAOqY,EAASrY,KAChBsY,IAGXK,EAAAA,WAAW,SAAC1M,GAKR,OAJA0G,EAAKmF,SAAU,EAIRnF,EAAKiG,mBAAmB3M,OAYjC2L,EAAA7a,UAAA6b,mBAAV,SAA6B3M,GAEzB,IAAMwN,EAAe,IAAInZ,EAMzB,OALAmZ,EAAalB,OAAS,CAAEC,OAAUvM,EAAMwM,QAAQR,IAAI,WACpDwB,EAAaha,OAASwM,EAAMxM,OAC5Bga,EAAa/Z,WAAauM,EAAMvM,WAChC+Z,EAAalZ,UAAY0L,EAAMyN,QAC/BD,EAAa9Z,IAAMsM,EAAMtM,IAClBga,EAAAA,WAAWF,IASZ7B,EAAA7a,UAAA6c,gBAAV,SAA0B3N,GAEtB,GAAIA,aAAiB3L,EAAiB,OAAOqZ,EAAAA,WAAW1N,GAExD,IAAMwN,EAAe,IAAInZ,EAMzB,OALAmZ,EAAalB,OAAS,CAAEC,OAAUvM,EAAMwM,QAAQR,IAAI,WACpDwB,EAAaha,QAAU,EACvBga,EAAa/Z,WAAa,eAC1B+Z,EAAalZ,UAAY0L,EACzBwN,EAAa9Z,IAAM,GACZga,EAAAA,WAAWF,IAIZ7B,EAAA7a,UAAA2b,eAAV,SAAyBF,GAGrB,IAAMqB,EAAmBrZ,EAAeC,aAGxC,GAAI+X,EAAQ,CACR,IACMsB,EADqBtB,EAAOzM,MAAM,KACN,GAAGA,MAAM,KAAK,GAGR,UAApC4L,GAAOoC,KAAKD,EAAUD,IACtB7N,QAAQgO,KAAK,2DAA6DH,EAAW,sCAAwCC,yBA1O5IG,EAAAA,WAAUre,KAAA,CAAC,CACRse,WAAY,oDAjBPC,EAAAA,8CA2BAC,EAAAA,OAAMxe,KAAA,CAACV,iJAXhB,GCNAmf,GAAA,SAAA7H,GAAA,SAAA6H,0DAGqCzH,EAAAA,EAAAA,GAcjCyH,EAAAtd,UAAAud,sBAAA,WACI,OAAOzd,KAAKkb,QAAQ,4BAQxBsC,EAAAtd,UAAAwd,iBAAA,WACI,OAAO1d,KAAKkb,QAAQ,4BASxBsC,EAAAtd,UAAAyd,qBAAA,SAAqB/K,GACjB,OAAO5S,KAAKkb,QAAQ,2BAA6B0C,mBAAmBhL,KAcxE4K,EAAAtd,UAAA2d,qCAAA,SAAqC5J,GACjC,OAAOjU,KAAKkb,QAAQ,8BAAgC0C,mBAAmB3J,KAS3EuJ,EAAAtd,UAAA4d,mBAAA,SAAmBC,GAEf,GAAiC,IAA7BA,EAAkBpd,OAElB,OAAOqd,EAAAA,WAAW7d,OAAO,SAAA8d,GAAY,OAAAA,EAAS7O,MAAM,iFAGxD,IAAI8O,EAAiB,GAMrB,OAJAH,EAAkBI,QAAQ,SAAUC,GAChCF,EAAiBA,EAAiB,IAAMN,mBAAmBQ,EAAYnN,cAGpEjR,KAAKkb,QAAQ,yBAA2BgD,IASnDV,EAAAtd,UAAAme,cAAA,SAAcC,GAEV,GAA4B,IAAxBA,EAAa3d,OAEb,OAAOqd,EAAAA,WAAW7d,OAAO,SAAA8d,GAAY,OAAAA,EAAS7O,MAAM,sEAGxD,IAAImP,EAAmB,GAMvB,OAJAD,EAAaH,QAAQ,SAAUC,GAC3BG,EAAmBA,EAAmB,IAAMX,mBAAmBQ,EAAYnN,cAGxEjR,KAAKkb,QAAQ,4BAA8BqD,IActDf,EAAAtd,UAAAse,eAAA,SAAeC,GACX,IAEMC,EAAW,CACbC,yBAA0BF,EAAKxc,KAC/B2c,8BAA+B,CAC3BC,MAAOJ,EAAK7L,YAEhBkM,aAAcL,EAAK1L,MACnBgM,WAAY,CACRC,KAAQrb,EAAewD,WACvB8X,YAAatb,EAAeY,gCAIpC,OAAOvE,KAAKsc,SAdC,iBAccoC,GAAUpD,KACjCC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOtY,OACzC2Y,EAAAA,WAAW9b,KAAK+c,uCA/H3BK,EAAAA,WAAUre,KAAA,CAAC,CACRse,WAAY,oJADhB,CAGqCtC,IzBL/BH,GAASC,QAAQ,UAKvBqE,GAAA,SAAAvJ,GAEI,SAAAuJ,EAAqBrC,GAArB,IAAA/G,EACIH,EAAAhU,KAAA3B,KAAM6c,IAAQ7c,YADG8V,EAAA+G,QAAAA,IAGzB,OALiC9G,EAAAA,EAAAA,GAKjCmJ,EALA,CAAiCC,OAWjCC,GAQI,SAAAA,GAAqB1N,EACRqB,GADQ/S,KAAA0R,GAAAA,EACR1R,KAAA+S,MAAAA,IAUL3C,EAAAA,EAAAA,wBAAAA,EAAAA,sBAAqB,KAC7BA,EAAA,QAAA,GAAA,UACAA,EAAAA,EAAA,KAAA,GAAA,OACAA,EAAAA,EAAA,QAAA,GAAA,UAOJ,IAAAiP,GAOI,SAAAA,GAAqBC,EACRzd,EACA0d,GAFQvf,KAAAsf,WAAAA,EACRtf,KAAA6B,MAAAA,EACA7B,KAAAuf,SAAAA,GAMjBC,GAKI,SAAAA,GAAqB3d,EACR0d,GADQvf,KAAA6B,MAAAA,EACR7B,KAAAuf,SAAAA,GASjBE,GAUI,SAAAA,GAAqB/N,EACRgO,EACAC,EACA5M,EACA6M,EACAC,GALQ7f,KAAA0R,GAAAA,EACR1R,KAAA0f,KAAAA,EACA1f,KAAA2f,QAAAA,EACA3f,KAAA+S,MAAAA,EACA/S,KAAA4f,cAAAA,EACA5f,KAAA6f,SAAAA,GASjBC,GAAA,SAAAA,OAQAC,GAaI,SAAAA,GAAqBrO,EACAsO,EACAL,EACA5M,EACAzL,EACAZ,EACAC,EACAC,EACAqZ,GARAjgB,KAAA0R,GAAAA,EACA1R,KAAAggB,WAAAA,EACAhgB,KAAA2f,QAAAA,EACA3f,KAAA+S,MAAAA,EACA/S,KAAAsH,cAAAA,EACAtH,KAAA0G,WAAAA,EACA1G,KAAA2G,eAAAA,EACA3G,KAAA4G,oBAAAA,EACA5G,KAAAigB,aAAAA,GAQzBC,GAAA,SAAAA,OAUAC,GAAA,SAAAA,OAWAC,GAsBI,SAAAA,KACIpgB,KAAKkS,WAAa,GAElBlS,KAAKqgB,6BAA+B,IAAIF,GAExCngB,KAAKsgB,gBAAkB,IAAIR,GAE3B9f,KAAKwa,WAAa,IAAI0F,IAS9BK,GAAA,WAOI,SAAAA,EACYC,EACAF,EACA9F,GAFAxa,KAAAwgB,2BAAAA,EACAxgB,KAAAsgB,gBAAAA,EACAtgB,KAAAwa,WAAAA,EAsMhB,OA5LW+F,EAAAE,SAAP,SAAgBC,EAA6BnhB,GAEzC,GAAImhB,EAAE3N,QAAU7Q,UACZ,OAAO,EACJ,GAAI3C,EAAEwT,QAAU7Q,UACnB,OAAQ,EAGZ,IAAMye,EAASD,EAAE3N,MAAM6N,cACjBC,EAASthB,EAAEwT,MAAM6N,cAEvB,OAAID,EAASE,GACD,EACQA,EAATF,EACA,EAEA,GAcfJ,EAAArgB,UAAA4gB,0BAAA,SAA0BvK,GAGtB,IAAMwK,EAA8DxK,EAAayK,8BAIjF,IAAK,IAAMC,KAA0BF,EACjC/gB,KAAKwgB,2BAA2BS,GAA0BF,EAA8BE,GAI5F,IAAMC,EAAqB3K,EAAauH,qBAIxC,IAAK,IAAMqD,KAAeD,EACtBlhB,KAAKsgB,gBAAgBa,GAAeD,EAAmBC,GAI3D,IAAMC,EAAgB7K,EAAa8H,gBAInC,IAAK,IAAMgD,KAAWD,EAClBphB,KAAKwa,WAAW6G,GAAWD,EAAcC,IAUjDd,EAAArgB,UAAA8gB,4BAAA,WACI,OAAOhhB,KAAKwgB,4BAQhBD,EAAArgB,UAAA4d,mBAAA,WACI,OAAO9d,KAAKsgB,iBAShBC,EAAArgB,UAAAohB,0BAAA,SAA0BC,QAAA,IAAAA,IAAAA,GAAA,GAEtB,IAAMC,EAAmC,GAGzC,IAAK,IAAMpD,KAAepe,KAAKsgB,gBAAiB,CAC5C,IAAMmB,EAA0BzhB,KAAKsgB,gBAAgBlC,GACrDoD,EAAW5H,KAAK6H,GAWpB,OAPAD,EAAWE,KAAKnB,EAAoBE,UAG/Bc,GACDC,EAAWG,UAGRH,GAUXjB,EAAArgB,UAAAuW,yBAAA,SAAyBgL,GAErB,GAAIA,IAAavf,UAAW,CAExB,IAAM0f,EAA6B5hB,KAAKsgB,gBAAgBmB,GAExD,GAAIG,IAAgB1f,WAAa0f,EAAY7O,QAAU7Q,UACnD,OAAO0f,EAAY7O,MAEnB5D,QAAQ0S,IAAI,wBAAwBJ,QAGxCtS,QAAQ0S,IAAI,mFASpBtB,EAAArgB,UAAAme,cAAA,WACI,OAAOre,KAAKwa,YAShB+F,EAAArgB,UAAA4hB,qBAAA,SAAqBP,QAAA,IAAAA,IAAAA,GAAA,GAEjB,IAAM/G,EAA8B,GAGpC,IAAK,IAAM5E,KAAW5V,KAAKwa,WAAY,CACnC,IAAMuH,EAAiB/hB,KAAKwa,WAAW5E,GACvC4E,EAAWZ,KAAKmI,GAWpB,OAPAvH,EAAWkH,KAAKnB,EAAoBE,UAG/Bc,GACD/G,EAAWmH,UAGRnH,GAUX+F,EAAArgB,UAAA8hB,oBAAA,SAAoBzC,GAEhB,GAAIA,IAAard,UAAW,CAExB,IAAM+f,EAAoBjiB,KAAKwa,WAAW+E,GAE1C,GAAI0C,IAAY/f,WAAa+f,EAAQlP,QAAU7Q,UAC3C,OAAO+f,EAAQlP,MAEf5D,QAAQ0S,IAAI,wBAAwBtC,QAGxCpQ,QAAQ0S,IAAI,8EAIxBtB,EAhNA,GAuNA2B,GAAA,WA0BI,SAAAA,EAAoBC,GAAAniB,KAAAmiB,iBAAAA,EAjBZniB,KAAAoiB,mBAAoC,CAACze,EAAee,kBAAmBf,EAAeiB,kBAKtF5E,KAAAqiB,mBAAoC,CAAC1e,EAAeuD,WAKpDlH,KAAAsiB,mBAAoC,CAAC3e,EAAewC,kBAAmBxC,EAAeyC,qBAAsBzC,EAAe0C,UAK3HrG,KAAAuiB,cAA+B,IAAInC,UAUnC8B,EAAAhiB,UAAAsiB,+BAAR,WAEI,OAAOxiB,KAAKmiB,iBAAiB1E,wBAAwBnC,KACjDmH,EAAAA,SAII,SAACC,GACG,IAEMC,EAFc/H,GAAOuB,SAEIC,QAAQsG,EAAOvf,KAAM,IAIpD,OAAOkZ,EAAAA,KAAKsG,OAYpBT,EAAAhiB,UAAA0iB,4CAAR,SAAoD3O,GAEhD,OAAOjU,KAAKmiB,iBAAiBtE,qCAAqC5J,GAAaqH,KAC3EmH,EAAAA,SAII,SAACC,GACG,IAEMC,EAFc/H,GAAOuB,SAEIC,QAAQsG,EAAOvf,KAAM,IAIpD,OAAOkZ,EAAAA,KAAKsG,OAYpBT,EAAAhiB,UAAA2iB,yCAAR,SAAiD3Q,GAE7ClS,KAAKuiB,cAAcrQ,WAAaA,EAAWqJ,IACvC,SAAAmD,GACI,OAAO,IAAIU,GAAiBV,EAAS,OAAQA,EAAS/a,EAAeuD,eAUzEgb,EAAAhiB,UAAA4iB,kCAAR,WAEI,OAAO9iB,KAAKuiB,cAAcrQ,YAWtBgQ,EAAAhiB,UAAA6iB,yCAAR,SAAiDC,WACvCjF,EAA8B,OAEpC,IAAuB,IAAAkF,EAAAxJ,EAAAuJ,GAAgBE,EAAAD,EAAArhB,QAAAshB,EAAAphB,KAAAohB,EAAAD,EAAArhB,OAAE,CAApC,IAAMuhB,EAAQD,EAAArhB,MACTuhB,EAAWD,EAAS,OAItBC,IAAazf,EAAekB,WACvB,IADmC7E,KAAKsiB,mBAAmBrS,QAAQmT,IAC7DD,EAASxf,EAAesC,mBAAqB/D,YAA0D,IAA7CihB,EAASxf,EAAesC,kBAE7F8X,EAAkBnE,KAAKwJ,wGAI/B,OAAOrF,GAaHmE,EAAAhiB,UAAAmjB,sDAAR,SAA8D3E,GAE1D,IAAM4E,EAAQ5E,EAAS,UAGjB6E,EAAYD,EAAME,OACpB,SAACC,GAEG,OADmBA,EAAO,WACJ9f,EAAe4D,WAIvCmc,EAAeJ,EAAME,OACvB,SAACC,GACG,IAAME,EAAaF,EAAO,SAC1B,OAAOE,IAAehgB,EAAe8D,mBACjCkc,IAAehgB,EAAe+D,qBAC9Bic,IAAehgB,EAAegE,uBAC9Bgc,IAAehgB,EAAesD,cAK1CjH,KAAKuiB,cAAclC,6BAA6B3B,EAAS,QAAU1e,KAAK+iB,yCAAyCQ,GAGjHvjB,KAAK4jB,wCAAwCL,EAAWG,IAUpDxB,EAAAhiB,UAAA2jB,gCAAR,SAAwCC,WAE9BtD,EAA6B,IAAIL,GAGnC4D,EAAuB,OAE3B,IAA0B,IAAAC,EAAAvK,EAAAqK,GAAYG,EAAAD,EAAApiB,QAAAqiB,EAAAniB,KAAAmiB,EAAAD,EAAApiB,OAAE,CAAnC,IAAMqS,EAAWgQ,EAAApiB,MAElB,GAAI7B,KAAKuiB,cAAclC,6BAA6BpM,KAAiB/R,UACjE,MAAM,IAAIgd,GAAmB,0EAA0EjL,GAI3GuM,EAA2BvM,GAAejU,KAAKuiB,cAAclC,6BAA6BpM,GAG1F8P,EAAuBA,EAAqBG,OAAOlkB,KAAKuiB,cAAclC,6BAA6BpM,yGAIvG,OAAOjU,KAAKmkB,4BAA4BJ,GAAsBzI,KAC1DC,EAAAA,IACI,SAAA6I,GACI,OAAO,IAAI7D,GACPC,EAA4B4D,EAAatG,qBAAsBsG,EAAa/F,qBAexF6D,EAAAhiB,UAAA0jB,wCAAR,SAAgDS,EAAyCC,mBAGrF,IAAuB,IAAAC,EAAA9K,EAAA4K,GAAwBG,EAAAD,EAAA3iB,QAAA4iB,EAAA1iB,KAAA0iB,EAAAD,EAAA3iB,OAAE,CAA5C,IAAM6f,EAAQ+C,EAAA3iB,MAETuc,EAAcqD,EAAS,OAGvB7B,EAA+B,GAC/BC,EAAuB,GAE7B,GAAI4B,EAAS9d,EAAe0D,kBAAoBnF,UAAW,CAEvD,IAAIuiB,OAAoB,EAMpBA,EAHC9kB,MAAM+kB,QAAQjD,EAAS9d,EAAe0D,iBAGhBoa,EAAS9d,EAAe0D,gBAFxB,CAACoa,EAAS9d,EAAe0D,qBAQpD,IAAsB,IAAAsd,EAAAlL,EAAAgL,GAAoBG,EAAAD,EAAA/iB,QAAAgjB,EAAA9iB,KAAA8iB,EAAAD,EAAA/iB,OAAE,CAAvC,IAAMijB,EAAOD,EAAA/iB,MAKd,GAAIgjB,aAAmBrlB,QAAUqlB,EAAQ,WAAa3iB,WAAa2iB,EAAQ,WAAalhB,EAAeqE,eAAgB,CAEnH,IAAI8c,OAAO,EAGX,GAAID,EAAQlhB,EAAemE,qBAAuB5F,UAC9C4iB,EAAU,IAAIzF,GAAYjP,EAAAA,sBAAsB2U,QAASF,EAAQlhB,EAAemE,mBAAoB+c,EAAQlhB,EAAeiE,eAAe,aACvI,GAAIid,EAAQlhB,EAAeoE,kBAAoB7F,UAClD4iB,EAAU,IAAIzF,GAAYjP,EAAAA,sBAAsB4U,KAAMH,EAAQlhB,EAAeoE,gBAAiB8c,EAAQlhB,EAAeiE,eAAe,YACjI,CAAA,GAAIid,EAAQlhB,EAAekE,qBAAuB3F,UAIrD,MAAM,IAAI+iB,UAAU,gCAAgCxD,EAAS,OAAM,IAAIoD,EAAQlhB,EAAeiE,gBAH9Fkd,EAAU,IAAIzF,GAAYjP,EAAAA,sBAAsB8U,QAASL,EAAQlhB,EAAekE,mBAAoBgd,EAAQlhB,EAAeiE,eAAe,QAO9IgY,EAAchG,KAAKkL,GAGnB,IAAIK,OAAW,EACXN,EAAQlhB,EAAec,kBAAoBvC,YAC3CijB,EAAc,IAAI3F,GAASqF,EAAQlhB,EAAec,gBAAiBogB,EAAQlhB,EAAeiE,eAAe,QAEzGiY,EAASjG,KAAKuL,2GAU9B,IAAMC,EAAc,IAAI3F,GACpBrB,EACAqD,EAAS9d,EAAe8C,cACxBgb,EAAS9d,EAAeyD,aACxBqa,EAAS9d,EAAeuD,WACxB0Y,EACAC,GAIJ7f,KAAKuiB,cAAcjC,gBAAgBlC,GAAegH,uGAItDplB,KAAKqlB,uDAAuDf,IAUxDpC,EAAAhiB,UAAAolB,qCAAR,SAA6CC,GAA7C,IAAAzP,EAAA9V,KAGUokB,EAAe,IAAItE,GAGnBxB,EAAe,GAcrB,OAZAiH,EAAapH,QACT,SAAAC,GACIgG,EAAahG,GAAetI,EAAKyM,cAAcjC,gBAAgBlC,GAE/DtI,EAAKyM,cAAcjC,gBAAgBlC,GAAawB,cAAczB,QAC1D,SAAA6G,GAEI1G,EAAa1E,KAAKoL,EAAKzF,cAKhCvf,KAAKwlB,uBAAuBlH,GAAchD,KAC7CC,EAAAA,IACI,SAAAkK,GACI,OAAO,IAAIlF,GAAoB,IAAIJ,GAAgCiE,EAAcqB,EAASpH,qBAclG6D,EAAAhiB,UAAAmlB,uDAAR,SAA+DK,mBAG3D,IAAsB,IAAAC,EAAAlM,EAAAiM,GAA4BE,EAAAD,EAAA/jB,QAAAgkB,EAAA9jB,KAAA8jB,EAAAD,EAAA/jB,OAAE,CAA/C,IAAMqgB,EAAO2D,EAAA/jB,MAER+T,EAAUqM,EAAQ,OAEpBvb,GAAa,EACbub,EAAQte,EAAe+C,cAAgBxE,YAAoD,IAAvC+f,EAAQte,EAAe+C,cAC3EA,GAAa,GAGjB,IAAIC,GAAiB,EACjBsb,EAAQte,EAAegD,kBAAoBzE,YAAwD,IAA3C+f,EAAQte,EAAegD,kBAC/EA,GAAiB,GAGrB,IAAIC,GAAsB,EACtBqb,EAAQte,EAAeiD,uBAAyB1E,YAA6D,IAAhD+f,EAAQte,EAAeiD,uBACpFA,GAAsB,GAG1B,IAAIU,EAAgB,GAChB2a,EAAQte,EAAe2D,iBAAmBpF,WAAavC,MAAM+kB,QAAQzC,EAAQte,EAAe2D,gBAC5FA,EAAgB2a,EAAQte,EAAe2D,eAAeiU,IAAI,SAACsK,GAAsB,OAAAA,EAAU,SACpF5D,EAAQte,EAAe2D,iBAAmBpF,WACjDoF,EAAcsS,KAAKqI,EAAQte,EAAe2D,eAAe,QAG7D,IAAI0Y,OAAU,EACViC,EAAQte,EAAe6C,cAAgBtE,YACvC8d,EAAaiC,EAAQte,EAAe6C,YAAY,QAGpD,IAAMyZ,EAAe,GACrB,GAAIgC,EAAQte,EAAegB,sBAAwBzC,UAC/C,GAAIvC,MAAM+kB,QAAQzC,EAAQte,EAAegB,yBACrC,IAAmB,IAAA+U,EAAAD,EAAAwI,EAAQte,EAAegB,qBAAmBmhB,EAAApM,EAAA9X,QAAAkkB,EAAAhkB,KAAAgkB,EAAApM,EAAA9X,OAAE,CAA1D,IAAMmkB,EAAID,EAAAjkB,MACXoe,EAAarG,KAAKmM,6GAGtB9F,EAAarG,KAAKqI,EAAQte,EAAegB,qBAKjD3E,KAAKuiB,cAAc/H,WAAW5E,GAAW,IAAImK,GACzCnK,EACAoK,EACAiC,EAAQte,EAAeyD,aACvB6a,EAAQte,EAAeuD,WACvBI,EACAZ,EACAC,EACAC,EACAqZ,0GAaJiC,EAAAhiB,UAAA8lB,gCAAR,SAAwC1H,GAAxC,IAAAxI,EAAA9V,KAEU0jB,EAAe,IAAIxD,GAiBzB,OAfA5B,EAAaH,QACT,SAAAvI,GAEI,MAAgD,EAA5CE,EAAKuM,mBAAmBpS,QAAQ2F,IAApC,CAIA,GAAIE,EAAKyM,cAAc/H,WAAW5E,KAAa1T,UAC3C,MAAM,IAAIgd,GAAmB,iEAAiEtJ,GAGlG8N,EAAa9N,GAAWE,EAAKyM,cAAc/H,WAAW5E,MAIvD,IAAI2K,GAAoB,IAAIJ,GAAgC,IAAIL,GAAmB4D,IASvFxB,EAAAhiB,UAAAud,sBAAP,WAAA,IAAA3H,EAAA9V,KAEI,OAA6C,IAAzCA,KAAKuiB,cAAcrQ,WAAWvR,OAEvBX,KAAKwiB,iCAAiClH,KACzCC,EAAAA,IACI,SAAAla,GAKI,OAJAyU,EAAK+M,yCAAyCxhB,EAAS,UAAUmiB,OAAO,SAACyC,GAErE,OAAyD,IAAlDnQ,EAAKsM,mBAAmBnS,QAAQgW,EAAK,WAEzCnQ,EAAKgN,uCAMjBoD,EAAAA,GAAGlmB,KAAK8iB,sCAYfZ,EAAAhiB,UAAAimB,sBAAR,SAA8BrC,GAA9B,IAAAhO,EAAA9V,KAGUomB,EAAc,GAmBpB,OAhBAtC,EAAa3F,QAAQ,SAAAlK,GAEjBmS,EAAYxM,KAAK9D,EAAK8M,4CAA4C3O,GAAaqH,KAC3EC,EAAAA,IACI,SAACmD,GAEG5I,EAAKuN,sDAAsD3E,SAUpE2H,EAAAA,SAASD,IAUblE,EAAAhiB,UAAAomB,kCAAP,SAAyCxC,GAAzC,IAAAhO,EAAA9V,KAEUumB,EAAsBzC,EAAaN,OACrC,SAAAvP,GAEI,OAAO6B,EAAKyM,cAAclC,6BAA6BpM,KAAiB/R,YAIhF,OAAiC,EAA7BqkB,EAAoB5lB,OAEbX,KAAKmmB,sBAAsBI,GAAqBjL,KACnDmH,EAAAA,SACI,WAEI,OAAO3M,EAAK+N,gCAAgCC,MAMjD9jB,KAAK6jB,gCAAgCC,IAc7C5B,EAAAhiB,UAAAikB,4BAAP,SAAmCpG,GAAnC,IAAAjI,EAAA9V,KAEUwmB,EAAmCzI,EAAkByF,OACvD,SAAApF,GAGI,OAAOtI,EAAKyM,cAAcjC,gBAAgBlC,KAAiBlc,YAInE,GAAoC,EAAhCskB,EAAuB7lB,OAAY,CAGnC,IAAMmjB,EAAyB0C,EAAuBjL,IAClD,SAAA6C,GACI,OAAOtP,EAAMC,4BAA4BqP,KAE/CoF,OAAO1U,EAAMe,qBAGf,OAAO7P,KAAKmmB,sBAAsBrC,GAAcxI,KAC5CmH,EAAAA,SACI,WAEI,OAAO3M,EAAKwP,qCAAqCvH,MAM7D,OAAO/d,KAAKslB,qCAAqCvH,IAYlDmE,EAAAhiB,UAAAslB,uBAAP,SAA8BlH,GAA9B,IAAAxI,EAAA9V,KAEUymB,EAA8BnI,EAAakF,OAC7C,SAAA5N,GAGI,SAAgD,EAA5CE,EAAKuM,mBAAmBpS,QAAQ2F,KAK7BE,EAAKyM,cAAc/H,WAAW5E,KAAa1T,YAI1D,GAA+B,EAA3BukB,EAAkB9lB,OAAY,CAG9B,IAAMmjB,EAAyB2C,EAAkBlL,IAC7C,SAAA3F,GACI,OAAO9G,EAAMC,4BAA4B6G,KAE/C4N,OAAO1U,EAAMe,qBAGf,OAAO7P,KAAKmmB,sBAAsBrC,GAAcxI,KAC5CC,EAAAA,IACI,SAAAmL,GACI,GAAIA,EACA,OAAO5Q,EAAKkQ,gCAAgC1H,GAE5C,MAAM,IAAIa,MAAM,+EAMhC,OAAO+G,EAAAA,GAAGlmB,KAAKgmB,gCAAgC1H,yBArmB1DlB,EAAAA,WAAUre,KAAA,CAAC,CACRse,WAAY,oDAhaPG,yHA+ZT,G0B3ZAmJ,GAYI,SAAAA,GAA6BC,EAAgDC,GAAhD7mB,KAAA4mB,UAAAA,EAAgD5mB,KAAA6mB,kBAAAA,EAP7D7mB,KAAA8mB,oBAA2C,IAAIvG,GAAoB,GAAI,GAAI,QAwB3F,SAAAwG,GAA6BH,EAA4CC,GAA5C7mB,KAAA4mB,UAAAA,EAA4C5mB,KAAA6mB,kBAAAA,EAPzD7mB,KAAA8mB,oBAA2C,IAAIvG,GAAoB,GAAI,GAAI,KC3B/FyG,GAMI,SAAAA,GAA4BC,GAAAjnB,KAAAinB,gBAAAA,GCDhCC,GAOI,SAAAA,GAAsBC,EAA6CC,EAAgC1R,QAAA,IAAAA,IAAAA,EAAe/R,EAAegC,gBAA3G3F,KAAAmnB,eAAAA,EAA6CnnB,KAAAonB,UAAAA,EAAgCpnB,KAAA0V,KAAAA,GCEvG2R,GAQI,SAAAA,GAAsBC,EAA+BC,EAA6BH,GAA5DpnB,KAAAsnB,UAAAA,EAA+BtnB,KAAAunB,QAAAA,EAA6BvnB,KAAAonB,UAAAA,MASlF,SAAAI,GACWC,EACAC,EACAC,GAFA3nB,KAAAynB,WAAAA,EACAznB,KAAA0nB,YAAAA,EACA1nB,KAAA2nB,MAAAA,GC7BfC,GAOI,SAAAA,GAAsBC,EAAyDT,EAAgC1R,QAAA,IAAAA,IAAAA,EAAe/R,EAAeoC,sBAAvH/F,KAAA6nB,qBAAAA,EAAyD7nB,KAAAonB,UAAAA,EAAgCpnB,KAAA0V,KAAAA,GCPnHoS,GAQI,SAAAA,GAAsBC,EAAuDR,EAA4B7R,QAAA,IAAAA,IAAAA,EAAe/R,EAAemC,qBAAjH9F,KAAA+nB,oBAAAA,EAAuD/nB,KAAAunB,QAAAA,EAA4BvnB,KAAA0V,KAAAA,GCR7GnN,GAAA,WAMI,SAAAA,EAAsByf,GAAAhoB,KAAAgoB,eAAAA,EAY1B,OAHIzf,EAAArI,UAAA+nB,cAAA,WACI,OAAOjoB,KAAKgoB,eAAexN,WAAW7W,EAAekD,cAE7D0B,EAlBA,GCAA2f,GAAA,WAMI,SAAAA,EAAsBC,GAAAnoB,KAAAmoB,iBAAAA,EAY1B,OAHID,EAAAhoB,UAAAkoB,aAAA,WACI,OAAOpoB,KAAKmoB,iBAAiB3N,WAAW7W,EAAewI,wBAE/D+b,EAlBA,GCCAG,GAAA,SAAA1S,GAAA,SAAA0S,IAAA,IAAAvS,EAAA,OAAAH,GAAAA,EAAA2S,MAAAtoB,KAAAU,YAAAV,YAKY8V,EAAAwC,KAAe,yBAFQvC,EAAAA,EAAAA,GAS/BsS,EAAAnoB,UAAAqoB,aAAA,WACI,OAAOvoB,KAAKkb,QAAQlb,KAAKsY,MAAMgD,KAC3BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQ0P,GAAgBC,SACjEoJ,EAAAA,WAAW9b,KAAK+c,mBAUxBsL,EAAAnoB,UAAAsoB,cAAA,SAAcC,GAGV,OAFAzoB,KAAKsY,MAAQ,IAAMsF,mBAAmB6K,GAE/BzoB,KAAKkb,QAAQlb,KAAKsY,MAAMgD,KAC3BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQwP,GAAeC,QAChEsJ,EAAAA,WAAW9b,KAAK+c,uCA9B3BK,EAAAA,WAAUre,KAAA,CAAC,CACRse,WAAY,oJADhB,CAGmCtC,ICWnC2N,GAAA,SAAA/S,GAAA,SAAA+S,IAAA,IAAA5S,EAAA,OAAAH,GAAAA,EAAA2S,MAAAtoB,KAAAU,YAAAV,YAKY8V,EAAAwC,KAAe,wBAFOvC,EAAAA,EAAAA,GAe9B2S,EAAAxoB,UAAAyoB,SAAA,SAAS/V,GAIL,OAHIA,IACA5S,KAAKsY,MAAQ,eAAiBsF,mBAAmBhL,IAE9C5S,KAAKkb,QAAQlb,KAAKsY,MAAMgD,KAC3BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQ+Q,GAAeC,QAChE+H,EAAAA,WAAW9b,KAAK+c,mBAUxB2L,EAAAxoB,UAAA0oB,QAAA,SAAQC,GACJ,OAAO7oB,KAAKkb,QAAQlb,KAAKsY,KAAO,IAAMsF,mBAAmBiL,IAAUvN,KAC/DC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQ6Q,GAAcC,OAC/DiI,EAAAA,WAAW9b,KAAK+c,mBAUxB2L,EAAAxoB,UAAA4oB,YAAA,SAAYD,GAER,OADA7oB,KAAKsY,MAAQ,UAAYsF,mBAAmBiL,GACrC7oB,KAAKkb,QAAQlb,KAAKsY,MAAMgD,KAC3BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQwQ,GAAkBD,WACnEwI,EAAAA,WAAW9b,KAAK+c,mBAUxB2L,EAAAxoB,UAAA6oB,gBAAA,SAAgBC,GAEZ,OADAhpB,KAAKsY,MAAQ,UAAYsF,mBAAmBoL,GACrChpB,KAAKkb,QAAQlb,KAAKsY,MAAMgD,KAC3BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQ2Q,GAAsBC,WACvEmI,EAAAA,WAAW9b,KAAK+c,mBAexB2L,EAAAxoB,UAAA+oB,WAAA,SAAWC,GACP,OAAOlpB,KAAKsc,SAAStc,KAAKsY,KAAM4Q,GAAS5N,KACrCC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQ6Q,GAAcC,OAC/DiI,EAAAA,WAAW9b,KAAK+c,mBAexB2L,EAAAxoB,UAAAipB,eAAA,SAAeD,GAEX,OADAlpB,KAAKsY,MAAQ,UAAYsF,mBAAmBsL,EAAQL,SAC7C7oB,KAAKwc,QAAQxc,KAAKsY,KAAM4Q,GAAS5N,KACpCC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQwQ,GAAkBD,WACnEwI,EAAAA,WAAW9b,KAAK+c,uCAtG3BK,EAAAA,WAAUre,KAAA,CAAC,CACRse,WAAY,oJADhB,CAGkCtC,ICflCqO,GAAA,SAAAzT,GAAA,SAAAyT,0DAGqCrT,EAAAA,EAAAA,GAWjCqT,EAAAlpB,UAAAmpB,eAAA,WACI,OAAOrpB,KAAKkb,QAAQ,mBAAmBI,KACnCC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQqS,GAAkBP,WACnEiH,EAAAA,WAAW9b,KAAK+c,mBAUxBqM,EAAAlpB,UAAAopB,gBAAA,SAAgBb,GACZ,IAAM3lB,EAAc,uBAAyB8a,mBAAmB6K,GAChE,OAAOzoB,KAAKupB,WAAWzmB,IAS3BsmB,EAAAlpB,UAAAspB,sBAAA,SAAsB7X,GAClB,IAAM7O,EAAM,6BAA+B6O,EAC3C,OAAO3R,KAAKupB,WAAWzmB,IAS3BsmB,EAAAlpB,UAAAupB,sBAAA,SAAsB7X,GAClB,IAAM9O,EAAM,6BAA+B8O,EAC3C,OAAO5R,KAAKupB,WAAWzmB,IAUjBsmB,EAAAlpB,UAAAqpB,WAAV,SAAqBzmB,GACjB,OAAO9C,KAAKkb,QAAQpY,GAAKwY,KACrBC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQoS,GAAiB7C,UAClEwJ,EAAAA,WAAW9b,KAAK+c,mBAWxBqM,EAAAlpB,UAAAwpB,uBAAA,SAAuBjB,GACnB,IAAM3lB,EAAM,uBAAyB8a,mBAAmB6K,GAAO,WAC/D,OAAOzoB,KAAK2pB,kBAAkB7mB,IAUlCsmB,EAAAlpB,UAAA0pB,6BAAA,SAA6BjY,GACzB,IAAM7O,EAAM,6BAA+B6O,EAAY,WACvD,OAAO3R,KAAK2pB,kBAAkB7mB,IAUlCsmB,EAAAlpB,UAAA2pB,6BAAA,SAA6BjY,GACzB,IAAM9O,EAAM,6BAA+B8O,EAAY,WACvD,OAAO5R,KAAK2pB,kBAAkB7mB,IAUzBsmB,EAAAlpB,UAAAypB,kBAAR,SAA0B7mB,GACvB,OAAO9C,KAAKkb,QAAQpY,GAAKwY,KACrBC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQkS,GAAwBC,UACzE4G,EAAAA,WAAW9b,KAAK+c,mBAexBqM,EAAAlpB,UAAA4pB,cAAA,SAAcrL,GAEV,OAAOze,KAAKsc,SADQ,kBACMmC,GAAMnD,KAC5BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQoS,GAAiB7C,UAClEwJ,EAAAA,WAAW9b,KAAK+c,mBAexBqM,EAAAlpB,UAAA6pB,cAAA,SAActB,EAAahK,GACvB,IAAM3b,EAAc,uBAAyB8a,mBAAmB6K,GAEhE,OAAOzoB,KAAKwc,QAAQ1Z,EAAK2b,GAAMnD,KAC3BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQoS,GAAiB7C,UAClEwJ,EAAAA,WAAW9b,KAAK+c,mBAWxBqM,EAAAlpB,UAAA8pB,gBAAA,SAAgBvB,GACZ,IAIM3lB,EAAc,uBAAyB8a,mBAAmB6K,GAEhE,OAAOzoB,KAAKwc,QAAQ1Z,EANF,CACdF,QAAQ,IAKmB0Y,KAC3BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQoS,GAAiB7C,UAClEwJ,EAAAA,WAAW9b,KAAK+c,mBAexBqM,EAAAlpB,UAAA+pB,cAAA,SAAcxB,GACV,IAAM3lB,EAAc,uBAAyB8a,mBAAmB6K,GAEhE,OAAOzoB,KAAK0c,WAAW5Z,GAAKwY,KACxBC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQoS,GAAiB7C,UAClEwJ,EAAAA,WAAW9b,KAAK+c,uCAjM3BK,EAAAA,WAAUre,KAAA,CAAC,CACRse,WAAY,oJADhB,CAGqCtC,ICErCmP,GAAA,SAAAvU,GAAA,SAAAuU,0DAGkCnU,EAAAA,EAAAA,GAU9BmU,EAAAhqB,UAAAiqB,YAAA,WACI,OAAOnqB,KAAKkb,QAAQ,gBAAgBI,KAChCC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQsS,GAAeC,QAChEwG,EAAAA,WAAW9b,KAAK+c,mBAYhBmN,EAAAhqB,UAAAkqB,QAAR,SAAgBC,EAAoBC,GAChC,IAAMhS,EAAO,gBAAkBgS,EAAiB,IAAM1M,mBAAmByM,GACzE,OAAOrqB,KAAKkb,QAAQ5C,GAAMgD,KACtBC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQwS,GAAcC,OAC/DsG,EAAAA,WAAW9b,KAAK+c,mBAUxBmN,EAAAhqB,UAAAqqB,aAAA,SAAa9B,GACT,OAAOzoB,KAAKoqB,QAAQ3B,EAAK,QAS7ByB,EAAAhqB,UAAAsqB,eAAA,SAAejW,GACX,OAAOvU,KAAKoqB,QAAQ7V,EAAO,UAS/B2V,EAAAhqB,UAAAuqB,kBAAA,SAAkBjW,GACd,OAAOxU,KAAKoqB,QAAQ5V,EAAU,aASlC0V,EAAAhqB,UAAAwqB,yBAAA,SAAyBC,GACrB,IAAMrS,EAAO,oBAAsBsF,mBAAmB+M,GAAW,qBACjE,OAAO3qB,KAAKkb,QAAQ5C,GAAMgD,KACtBC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQ0P,GAAgBC,SACjEoJ,EAAAA,WAAW9b,KAAK+c,mBAexBmN,EAAAhqB,UAAA0qB,WAAA,SAAWnM,GAEP,OAAOze,KAAKsc,SADC,eACcmC,GAAMnD,KAC7BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQwS,GAAcC,OAC/DsG,EAAAA,WAAW9b,KAAK+c,mBAWxBmN,EAAAhqB,UAAA2qB,iBAAA,SAAiBF,EAAiB/X,GAC9B,IAAM0F,EAAO,oBAAsBsF,mBAAmB+M,GAAW,wBAA0B/M,mBAAmBhL,GAC9G,OAAO5S,KAAKsc,SAAShE,GAAMgD,KACvBC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQwS,GAAcC,OAC/DsG,EAAAA,WAAW9b,KAAK+c,mBAWxBmN,EAAAhqB,UAAA4qB,sBAAA,SAAsBH,EAAiB/X,GACnC,IAAM0F,EAAO,oBAAsBsF,mBAAmB+M,GAAW,wBAA0B/M,mBAAmBhL,GAC9G,OAAO5S,KAAK0c,WAAWpE,GAAMgD,KACzBC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQwS,GAAcC,OAC/DsG,EAAAA,WAAW9b,KAAK+c,mBAWxBmN,EAAAhqB,UAAA6qB,sBAAA,SAAsBJ,EAAiB/X,GACnC,IAAM0F,EAAO,oBAAsBsF,mBAAmB+M,GAAW,8BAAgC/M,mBAAmBhL,GACpH,OAAO5S,KAAKsc,SAAShE,GAAMgD,KACvBC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQwS,GAAcC,OAC/DsG,EAAAA,WAAW9b,KAAK+c,mBAWxBmN,EAAAhqB,UAAA8qB,2BAAA,SAA2BL,EAAiB/X,GACxC,IAAM0F,EAAO,oBAAsBsF,mBAAmB+M,GAAW,8BAAgC/M,mBAAmBhL,GACpH,OAAO5S,KAAK0c,WAAWpE,GAAMgD,KACzBC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQwS,GAAcC,OAC/DsG,EAAAA,WAAW9b,KAAK+c,mBAWxBmN,EAAAhqB,UAAA+qB,eAAA,SAAeN,EAAiBO,GAC5B,IAAM5S,EAAO,oBAAsBsF,mBAAmB+M,GAAW,sBAAwB/M,mBAAmBsN,GAC5G,OAAOlrB,KAAKsc,SAAShE,GAAMgD,KACvBC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQwS,GAAcC,OAC/DsG,EAAAA,WAAW9b,KAAK+c,mBAYxBmN,EAAAhqB,UAAAirB,oBAAA,SAAoBR,EAAiBO,GACjC,IAAM5S,EAAO,oBAAsBsF,mBAAmB+M,GAAW,sBAAwB/M,mBAAmBsN,GAC5G,OAAOlrB,KAAK0c,WAAWpE,GAAMgD,KACzBC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQwS,GAAcC,OAC/DsG,EAAAA,WAAW9b,KAAK+c,mBAiBxBmN,EAAAhqB,UAAAkrB,qBAAA,SAAqBT,GAKjB,OAAO3qB,KAAKqrB,sBAAsBV,EAJrB,CACT3V,aAAe,KAYvBkV,EAAAhqB,UAAAorB,0BAAA,SAA0BX,GAKtB,OAAO3qB,KAAKqrB,sBAAsBV,EAJrB,CACT3V,aAAe,KAefkV,EAAAhqB,UAAAmrB,sBAAR,SAA8BV,EAAiBlM,GAC3C,IAAMnG,EAAO,oBAAsBsF,mBAAmB+M,GAAW,eACjE,OAAO3qB,KAAKwc,QAAQlE,EAAMmG,GAAMnD,KAC5BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQwS,GAAcC,OAC/DsG,EAAAA,WAAW9b,KAAK+c,mBAWxBmN,EAAAhqB,UAAAqrB,aAAA,SAAaZ,GACT,IAAMrS,EAAO,oBAAsBsF,mBAAmB+M,GAAW,UAMjE,OAAO3qB,KAAKwc,QAAQlE,EAJF,CACd1V,QAAQ,IAGoB0Y,KAC5BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQwS,GAAcC,OAC/DsG,EAAAA,WAAW9b,KAAK+c,mBAaxBmN,EAAAhqB,UAAAsrB,kBAAA,SAAkBb,EAAiBc,EAAqBC,GACpD,IAAMpT,EAAO,oBAAsBsF,mBAAmB+M,GAAW,YAE3DlM,EAAO,CACTiN,YAAaA,EACbC,kBAAmBF,GAGvB,OAAOzrB,KAAKwc,QAAQlE,EAAMmG,GAAMnD,KAC5BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQwS,GAAcC,OAC/DsG,EAAAA,WAAW9b,KAAK+c,mBAYxBmN,EAAAhqB,UAAA0rB,oBAAA,SAAoBjB,EAAiBgB,EAA2BD,GAC5D,IAAMpT,EAAO,oBAAsBsF,mBAAmB+M,GAAW,YAE3DlM,EAAO,CACTiN,YAAaA,EACbC,kBAAmBA,GAGvB,OAAO3rB,KAAKwc,QAAQlE,EAAMmG,GAAMnD,KAC5BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQwS,GAAcC,OAC/DsG,EAAAA,WAAW9b,KAAK+c,mBAUxBmN,EAAAhqB,UAAA2rB,2BAAA,SAA2BlB,EAAiBlM,GACxC,IAAMnG,EAAO,oBAAsBsF,mBAAmB+M,GAAW,wBAEjE,OAAO3qB,KAAKwc,QAAQlE,EAAMmG,GAAMnD,KAC5BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQwS,GAAcC,OAC/DsG,EAAAA,WAAW9b,KAAK+c,mBAexBmN,EAAAhqB,UAAA4rB,WAAA,SAAWnB,GACP,IAAMrS,EAAO,oBAAsBsF,mBAAmB+M,GACtD,OAAO3qB,KAAK0c,WAAWpE,GAAMgD,KACzBC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAO1Y,QAAQwS,GAAcC,OAC/DsG,EAAAA,WAAW9b,KAAK+c,uCAjV3BK,EAAAA,WAAUre,KAAA,CAAC,CACRse,WAAY,oJADhB,CAGkCtC,kBChBlC,SAAAgR,IAKU/rB,KAAAgsB,QAAU,IAAIC,EAAAA,eAEtBF,EAAA7rB,UAAAgsB,YAAA,SAAYtX,GACV5U,KAAKgsB,QAAQpqB,KAAK,CAAEuqB,MAAKvX,KAE3BmX,EAAA7rB,UAAAksB,YAAA,WACE,OAAOpsB,KAAKgsB,QAAQK,oCAXvBjP,EAAAA,WAAUre,KAAA,CAAC,CACVse,WAAY,iICSZ,SAAAiP,EAAoBC,EACiB9tB,GADjBuB,KAAAusB,MAAAA,EACiBvsB,KAAAvB,OAAAA,SASrC6tB,EAAApsB,UAAAssB,aAAA,WAEE,OAAOxsB,KAAKusB,MAAMnR,IAAIpb,KAAKvB,OAAO0D,IAAM,+BACrCmZ,KAAKC,EAAAA,IACJ,SAACkR,GACC,OAAOA,GAET,SAAAC,GACEvd,QAAQC,MAAMsd,2BAvBvBtP,EAAAA,WAAUre,KAAA,CAAC,CACVse,WAAY,oDARLC,EAAAA,8CAaJC,EAAAA,OAAMxe,KAAA,CAACV,qJCRZ,SAAcsuB,GAWV,IAAMC,EAAmB,SAACC,GACtB,MAAoB,QAAbA,GACa,UAAbA,GACAA,IAAalpB,EAAeuD,WAC5B2lB,IAAalpB,EAAe0E,mBAC5BwkB,IAAalpB,EAAe2E,gBAC5BukB,IAAalpB,EAAesE,cAC5B4kB,IAAalpB,EAAeuE,sBAC5B2kB,IAAalpB,EAAewE,gBAC5B0kB,IAAalpB,EAAeyE,mBAC5BykB,IAAalpB,EAAe2C,QAC5BumB,IAAalpB,EAAe4C,eAavC,SAASumB,EAAsBC,GAE3B,IAAMvS,EAA6BwS,EAAwBD,GAE3D,OAAO,IAAI5S,GACP4S,EAAe,OACfA,EAAe,SACfA,EAAeppB,EAAeuD,WAC9B,GACA,GACA,GACA,GACAsT,GAIR,SAASyS,EAAkBF,GAEvB,IAAMvS,EAA6BwS,EAAwBD,GAE3D,OAAO,IAAIloB,GACPkoB,EAAe,OACfA,EAAe,SACfA,EAAeppB,EAAeuD,WAC9B,GACA,GACA,GACA,GACAsT,GAcR,SAAS0S,EACLC,EAAmBvX,EAAiBwX,WAIhCC,EAGJ,OAAQF,EAAU,UACd,KAAKxpB,EAAemB,UAEhB,IAAIwoB,OAAS,EAEb,GAAIH,EAAUxpB,EAAegG,iBAAmBzH,UAC5CorB,EAAY,IAAI7kB,EAAsB0kB,EAAU,OAAQvX,EAASuX,EAAUxpB,EAAegG,qBACvF,GAAIwjB,EAAUxpB,EAAeiG,mBAAqB1H,UAAW,CAEhE,IAAMkU,EAAqD,OAI3D,IAA2B,IAAAmX,EAAA9T,EAAA2T,GAAkBI,EAAAD,EAAA3rB,QAAA4rB,EAAA1rB,KAAA0rB,EAAAD,EAAA3rB,OAAE,CAA1C,IACK6rB,EADaD,EAAA3rB,MAC4ByV,iBAC/ClB,EAAkBqX,EAAY/b,IAAM+b,uGAGxCH,EAAY,IAAI9kB,EACZ2kB,EAAU,OAAQvX,EAASuX,EAAUxpB,EAAeiG,iBAAkBwM,QAG1E+W,EAAUxpB,EAAekG,kBAAoB3H,WAAairB,EAAUxpB,EAAemG,qBAAqB,SAAW5H,UACnHorB,EAAY,IAAI5kB,EACZykB,EAAU,OAAQvX,EAASuX,EAAUxpB,EAAekG,gBAAiBsjB,EAAUxpB,EAAemG,qBAAqB,QAIvHqF,QAAQC,MAAM,8BAAgCkK,KAAKoU,UAAUP,IAGjEE,EAAoBC,EACpB,MAEJ,KAAK3pB,EAAewB,UAahBkoB,EAZkB,IAAI1kB,EAAcwkB,EAAU,OAC1CvX,EACAuX,EAAUxpB,EAAe6G,sBACzB2iB,EAAUxpB,EAAeqG,uBACzBmjB,EAAUxpB,EAAesG,qBACzBkjB,EAAUxpB,EAAeuG,sBACzBijB,EAAUxpB,EAAewG,oBACzBgjB,EAAUxpB,EAAeyG,wBACzB+iB,EAAUxpB,EAAe0G,sBACzB8iB,EAAUxpB,EAAe2G,sBACzB6iB,EAAUxpB,EAAe4G,qBAG7B,MAEJ,KAAK5G,EAAe6B,UAEhB,IAAImoB,OAAS,EAGb,GAAIR,EAAUxpB,EAAe8G,sBAAwBvI,UAAW,CAG5D,IAAMoV,EAAiCwV,EAAsBK,EAAUxpB,EAAe8G,qBAEtFkjB,EAAY,IAAI/kB,EAAcukB,EAAU,OAAQvX,EAAS0B,EAAiB5F,GAAI4F,QAC3E,GAAI6V,EAAUxpB,EAAeiH,yBAA2B1I,UAAW,CAGtE,IAAMmV,EAAsB8V,EAAUxpB,EAAeiH,uBAAuB,OAE5E+iB,EAAY,IAAI/kB,EAAcukB,EAAU,OAAQvX,EAASyB,QACtD,GAAI8V,EAAUxpB,EAAe+G,sBAAwBxI,UAAW,CAGnE,IAAM0rB,EAAiCd,EAAsBK,EAAUxpB,EAAe+G,qBAEtFijB,EAAY,IAAI/kB,EAAcukB,EAAU,OAAQvX,EAASgY,EAAiBlc,GAAIkc,QAC3E,GAAIT,EAAUxpB,EAAegH,yBAA2BzI,UAAW,CAGtE,IAAM2rB,EAAsBV,EAAUxpB,EAAegH,uBAAuB,OAE5EgjB,EAAY,IAAI/kB,EAAcukB,EAAU,OAAQvX,EAASiY,GAG7DR,EAAoBM,EACpB,MAEJ,KAAKhqB,EAAeoB,SAGhBsoB,EADiB,IAAIxkB,GAAiBskB,EAAU,OAAQvX,EAASuX,EAAUxpB,EAAekH,wBAG1F,MAEJ,KAAKlH,EAAeuB,aAGhB,IAAM4oB,EAAiBC,WAAWZ,EAAUxpB,EAAemH,uBAAuB,WAGlFuiB,EADqB,IAAIvkB,GAAiBqkB,EAAU,OAAQvX,EAASkY,GAGrE,MAGJ,KAAKnqB,EAAemC,oBAYhBunB,EAVqD,IAAItkB,GACrDokB,EAAU,OACVvX,EACAuX,EAAUxpB,EAAesH,sBACzBkiB,EAAUxpB,EAAe0H,mCAAmC,UAC5D8hB,EAAUxpB,EAAeoH,gBAAgB,UACzCoiB,EAAUxpB,EAAewH,4BACzBgiB,EAAUxpB,EAAeyH,6BAK7B,MAEJ,KAAKzH,EAAeoC,qBAahBsnB,EAXuD,IAAIrkB,GACvDmkB,EAAU,OACVvX,EACAuX,EAAUxpB,EAAesH,sBACzBkiB,EAAUxpB,EAAeoH,gBAAgB,UACzCoiB,EAAUxpB,EAAe4H,6BACzB4hB,EAAUxpB,EAAe6H,6BACzB2hB,EAAUxpB,EAAe8H,iCACzB0hB,EAAUxpB,EAAe+H,6BAK7B,MAEJ,KAAK/H,EAAegC,eAUhB0nB,EAR2C,IAAIpkB,GAC3CkkB,EAAU,OACVvX,EACAuX,EAAUxpB,EAAesH,sBACzBkiB,EAAUxpB,EAAeoH,gBAAgB,UACzCoiB,EAAUxpB,EAAeiI,4BAK7B,MAEJ,KAAKjI,EAAeiC,aAShBynB,EAPuC,IAAIlkB,GACvCgkB,EAAU,OACVvX,EACAuX,EAAUxpB,EAAesH,sBACzBkiB,EAAUxpB,EAAeoH,gBAAgB,WAK7C,MAEJ,KAAKpH,EAAekC,kBAShBwnB,EAPiD,IAAIjkB,GACjD+jB,EAAU,OACVvX,EACAuX,EAAUxpB,EAAesH,sBACzBkiB,EAAUxpB,EAAeoH,gBAAgB,WAK7C,MAEJ,KAAKpH,EAAeqC,cAShBqnB,EAPsB,IAAInkB,GACtBikB,EAAU,OACVvX,EACAuX,EAAUxpB,EAAesH,sBACzBkiB,EAAUxpB,EAAeoH,gBAAgB,WAK7C,MAEJ,KAAKpH,EAAeyB,WAQhBioB,EANuC,IAAI/jB,GACvC6jB,EAAU,OACVvX,EACAuX,EAAUxpB,EAAeoI,oBAK7B,MAEJ,KAAKpI,EAAe0B,UAQhBgoB,EANqC,IAAIhkB,GACrC8jB,EAAU,OACVvX,EACAuX,EAAUxpB,EAAeqI,0BAK7B,MAEJ,KAAKrI,EAAesB,SAQhBooB,EAN+B,IAAI9jB,GAC/B4jB,EAAU,OACVvX,EACAuX,EAAUxpB,EAAesI,eAAe,WAK5C,MAEJ,KAAKtI,EAAeqB,aAQhBqoB,EANoC,IAAI7jB,GACpC2jB,EAAU,OACVvX,EACAuX,EAAUxpB,EAAeuI,wBAK7B,MAGJ,KAAKvI,EAAe4B,cAGhB,IAAMyoB,EAAWD,WAAWZ,EAAUxpB,EAAewI,uBAAuB,WACtE8hB,EAASF,WAAWZ,EAAUxpB,EAAeyI,qBAAqB,WASxEihB,EAPyC,IAAI5jB,GACzC0jB,EAAU,OACVvX,EACAoY,EACAC,GAKJ,MAEJ,KAAKtqB,EAAe2B,UAQhB+nB,EANiC,IAAI3jB,GACjCyjB,EAAU,OACVvX,EACAuX,EAAUxpB,EAAe0I,qBAAqB,QAKlD,MAEJ,QAEI8C,QAAQC,MAAM,0CAA4C+d,EAAU,SAAW,IAAMA,EAAU,OAAS,KAIhH,OAAOE,EAYX,SAASL,EAAwBD,mBAIvBmB,EAAmCnB,EAAeppB,EAAeoG,wBAGjEqjB,EAAsC,GAI5C,GAAIc,IAA6BhsB,WAAavC,MAAM+kB,QAAQwJ,OACxD,IAAiC,IAAAC,EAAA1U,EAAAyU,GAAwBE,EAAAD,EAAAvsB,QAAAwsB,EAAAtsB,KAAAssB,EAAAD,EAAAvsB,OAAE,CAAtD,IACKysB,EAA6BnB,EADVkB,EAAAvsB,MAED8B,EAAeoG,uBAAwB,IAG/DqjB,EAAmBxT,KAAKyU,6GAEzB,GAAIH,IAA6BhsB,UAAW,CACzCmsB,EAAcnB,EAChBgB,EAA0BvqB,EAAeoG,uBAAwB,IAGrEqjB,EAAmBxT,KAAKyU,GAG5B,IAAIC,EAAY9uB,OAAO+uB,KAAKxB,GAG5BuB,EAAYA,EAAU9K,OAAOoJ,GAE7B,IAAMpS,EAA6B,OAGnC,IAAuB,IAAAgU,EAAA/U,EAAA6U,GAASG,EAAAD,EAAA5sB,QAAA6sB,EAAA3sB,KAAA2sB,EAAAD,EAAA5sB,OAAE,CAA7B,IAAMirB,EAAQ4B,EAAA5sB,MAET6sB,EAAsC,GAG5C,GAAI/uB,MAAM+kB,QAAQqI,EAAeF,QAI7B,IAAwB,IAAA/G,EAAArM,EAAAsT,EAAeF,IAAS8B,EAAA7I,EAAAlkB,QAAA+sB,EAAA7sB,KAAA6sB,EAAA7I,EAAAlkB,OAAE,CAA7C,IAGKyrB,GAAAA,EAAsCH,EAH5ByB,EAAA9sB,MAG+DgrB,EAAUO,MAI/DlrB,WAAWwsB,EAAW9U,KAAKyT,6GAMnDA,EAAsCH,EAAwBH,EAAeF,GAAWA,EAAUO,MAI9ElrB,WAAWwsB,EAAW9U,KAAKyT,GAIzD7S,EAAWqS,GAAY6B,uGAI3B,OAAOlU,EA6FX,SAASoU,EAA2B7B,eAE5BuB,EAAY9uB,OAAO+uB,KAAKxB,GAE5BuB,EAAYA,EAAU9K,OAAOoJ,GAE7B,IAAMiC,EAA0B,OAEhC,IAAmB,IAAAC,EAAArV,EAAA6U,GAASS,EAAAD,EAAAltB,QAAAmtB,EAAAjtB,KAAAitB,EAAAD,EAAAltB,OAAE,CAAzB,IAAMmgB,EAAIgN,EAAAltB,MAGX,GAAIlC,MAAM+kB,QAAQqI,EAAehL,QAE7B,IAA0B,IAAArI,EAAAD,EAAAsT,EAAehL,IAAK+D,EAAApM,EAAA9X,QAAAkkB,EAAAhkB,KAAAgkB,EAAApM,EAAA9X,OAAE,CAA3C,IAAM6rB,EAAW3H,EAAAjkB,MAGd4rB,EAAY,WAAa9pB,EAAe6B,WAAaioB,EAAY9pB,EAAe8G,sBAAwBvI,UAGxG2sB,EAAwBjV,KAAK6T,EAAY9pB,EAAe8G,oBAAoB,UAE5EgjB,EAAY,WAAa9pB,EAAe6B,WAAaioB,EAAY9pB,EAAe+G,sBAAwBxI,WAExG2sB,EAAwBjV,KAAK6T,EAAY9pB,EAAe+G,oBAAoB,oHAShFqiB,EAAehL,GAAM,WACjBpe,EAAe6B,WAAaunB,EAAehL,GAAMpe,EAAe8G,sBAChEvI,UAGJ2sB,EAAwBjV,KAAKmT,EAAehL,GAAMpe,EAAe8G,oBAAoB,UAErFsiB,EAAehL,GAAM,WACjBpe,EAAe6B,WAAaunB,EAAehL,GAAMpe,EAAe+G,sBAChExI,WAEJ2sB,EAAwBjV,KAAKmT,EAAehL,GAAMpe,EAAe+G,oBAAoB,+GAMjG,OAAOmkB,EApIKlC,EAAAqC,sCAAhB,SAAgBA,EAAsCC,WAG9CpI,EADED,EAAiC,GAEjCsI,EAAiBD,EAAwB,UAG/C,GAAIC,IAAmBhtB,UAAW,CAE9B2kB,EAAoBqI,EAAevuB,WAEnC,IAA6B,IAAAwuB,EAAA1V,EAAAyV,GAAcE,EAAAD,EAAAvtB,QAAAwtB,EAAAttB,KAAAstB,EAAAD,EAAAvtB,OAAE,CAAxC,IAEKytB,EAAyBvC,EAFVsC,EAAAvtB,OAKrB+kB,EAAUhN,KAAKyV,8GAGiC,IAAhD7vB,OAAO+uB,KAAKU,GAAyBtuB,OAErCkmB,EAAoB,GAIpBA,EAAoB,EAEdwI,EAAyBvC,EAAsBmC,GAGrDrI,EAAUhN,KAAKyV,IAIvB,OAAO,IAAI1I,GAAsBC,EAAWC,IAIhC8F,EAAA2C,kCAAhB,SAAgBA,EAAkCL,WAG1CpI,EADED,EAA6B,GAE7BsI,EAAiBD,EAAwB,UAG/C,GAAIC,IAAmBhtB,UAAW,CAE9B2kB,EAAoBqI,EAAevuB,WAEnC,IAA6B,IAAA4uB,EAAA9V,EAAAyV,GAAcM,EAAAD,EAAA3tB,QAAA4tB,EAAA1tB,KAAA0tB,EAAAD,EAAA3tB,OAAE,CAAxC,IAEKytB,EAAqBpC,EAFNuC,EAAA3tB,OAKrB+kB,EAAUhN,KAAKyV,8GAGiC,IAAhD7vB,OAAO+uB,KAAKU,GAAyBtuB,OAErCkmB,EAAoB,GAIpBA,EAAoB,EAEdwI,EAAqBpC,EAAkBgC,GAG7CrI,EAAUhN,KAAKyV,IAIvB,OAAO,IAAItI,GAAkBH,EAAWC,IAuE5B8F,EAAA8C,6BAAhB,SAAgBA,EAA6BR,WAEnCC,EAAiBD,EAAwB,UAC3C3O,EAAiC,GAGrC,GAAI4O,IAAmBhtB,cAGnB,IAA6B,IAAAwtB,EAAAjW,EAAAyV,GAAcS,EAAAD,EAAA9tB,QAAA+tB,EAAA7tB,KAAA6tB,EAAAD,EAAA9tB,OAAE,CAAxC,IAAMmrB,EAAc4C,EAAA9tB,MAErBye,EAAgB1G,KAAKmT,EAAe,UAGpC,IAAM8B,EAA0BD,EAA2B7B,GAE3DzM,EAAkBA,EAAgB4D,OAAO2K,4GAI1C,CAGH,GAAoD,IAAhDrvB,OAAO+uB,KAAKU,GAAyBtuB,OACrC,MAAO,GAEP2f,EAAgB1G,KAAKqV,EAAwB,UAGvCJ,EAA0BD,EAA2BK,GAE3D3O,EAAkBA,EAAgB4D,OAAO2K,GAKjD,OAAOvO,EAAgBkD,OAAO1U,EAAMe,sBAWxB8c,EAAAiD,uBAAhB,SAAgBA,EAAuBC,GACnC,OAAO,IAAI7I,GAAiB6I,EAAiBlsB,EAAeoD,uBA/nBpE,CAAc4lB,EAAAA,gBAAAA,EAAAA,cAAa,KCuB3B,IAAAmD,GAAA,SAAAna,GAKI,SAAAma,EAAoB9U,EACmBvc,EAC3BsxB,GAFZ,IAAAja,EAGIH,EAAAhU,KAAA3B,KAAMgb,EAAMvc,IAAOuB,YAHH8V,EAAAkF,KAAAA,EACmBlF,EAAArX,OAAAA,EAC3BqX,EAAAia,sBAAAA,EAoEJja,EAAAka,oCAAuG,SAAC/T,GAE5G,IAAMgU,EAAgCtD,EAAAA,cAAcqC,sCAAsC/S,GAGpF8B,EAA8B4O,EAAAA,cAAc8C,6BAA6BxT,GAG/E,OAAOnG,EAAKia,sBAAsB5L,4BAA4BpG,GAAmBzC,KAC7EC,EAAAA,IACI,SAAC2U,GAGG,OADAD,EAAOnJ,oBAAoBhG,0BAA0BoP,GAC9CD,MAUfna,EAAAqa,iCAAgG,SAAClU,GAErG,IAAMgU,EAA4BtD,EAAAA,cAAc2C,kCAAkCrT,GAG5E8B,EAA8B4O,EAAAA,cAAc8C,6BAA6BxT,GAG/E,OAAOnG,EAAKia,sBAAsB5L,4BAA4BpG,GAAmBzC,KAC7EC,EAAAA,IACI,SAAC2U,GAGG,OADAD,EAAOnJ,oBAAoBhG,0BAA0BoP,GAC9CD,eA5GQla,EAAAA,EAAAA,GAevB+Z,EAAA5vB,UAAAkwB,4BAAR,SAAoCjV,EAA8BkV,GAG9D,IAAIC,EAAeD,EAgBnB,OAZIlV,EAAOoV,iBAAmBruB,YAC1BouB,EAAeA,EAAaE,IAAI,iBAAkBrV,EAAOoV,iBAGzDpV,EAAOsV,uBAAyBvuB,YAChCouB,EAAeA,EAAaE,IAAI,uBAAwBrV,EAAOsV,uBAG/DtV,EAAOuV,uBAAyBxuB,YAChCouB,EAAeA,EAAaE,IAAI,uBAAwBrV,EAAOuV,uBAG5DJ,GAUHR,EAAA5vB,UAAAywB,2BAAR,SAAmCxV,EAA6BkV,GAG5D,IAAIC,EAAeD,EAYnB,OARIlV,EAAOsV,uBAAyBvuB,YAChCouB,EAAeA,EAAaE,IAAI,uBAAwBrV,EAAOsV,uBAG/DtV,EAAOoV,iBAAmBruB,YAC1BouB,EAAeA,EAAaE,IAAI,iBAAkBrV,EAAOoV,iBAGtDD,GAgEXR,EAAA5vB,UAAA0wB,iBAAA,SAAiBC,EAAoBC,EAAoB3V,GAErD,QAFiC,IAAA2V,IAAAA,EAAA,GAE7BD,IAAe3uB,WAAmC,IAAtB2uB,EAAWlwB,OACvC,OAAOqd,EAAAA,WAAW7d,OAAO,SAAA8d,GAAY,OAAAA,EAAS7O,MAAM,qEAGxD,IAAIihB,EAAa,IAAIU,EAAAA,WAQrB,OANAV,EAAaA,EAAWG,IAAI,SAAUM,EAAO7f,YAEzCkK,IAAWjZ,YACXmuB,EAAarwB,KAAKowB,4BAA4BjV,EAAQkV,IAGnDrwB,KAAKkb,QAAQ,cAAgB0C,mBAAmBiT,GAAaR,IAWxEP,EAAA5vB,UAAA8wB,qCAAA,SAAqCH,EAAoBC,EAAoB3V,GACzE,QADqD,IAAA2V,IAAAA,EAAA,GACjDD,IAAe3uB,WAAmC,IAAtB2uB,EAAWlwB,OACvC,OAAOqd,EAAAA,WAAW7d,OAAO,SAAA8d,GAAY,OAAAA,EAAS7O,MAAM,qEAGxD,IAAIihB,EAAa,IAAIU,EAAAA,WAUrB,OARAV,EAAaA,EAAWG,IAAI,SAAUM,EAAO7f,YAEzCkK,IAAWjZ,YACXmuB,EAAarwB,KAAKowB,4BAA4BjV,EAAQkV,IAG7BrwB,KAAKkb,QAAQ,cAAgB0C,mBAAmBiT,GAAaR,GAE/E/U,KACPmH,EAAAA,SAEIziB,KAAKgc,eAETyG,EAAAA,SAEIziB,KAAKgwB,uCAajBF,EAAA5vB,UAAA+wB,2BAAA,SAA2BJ,EAAoB1V,GAE3C,GAAI0V,IAAe3uB,WAAmC,IAAtB2uB,EAAWlwB,OACvC,OAAOqd,EAAAA,WAAW7d,OAAO,SAAA8d,GAAY,OAAAA,EAAS7O,MAAM,+EAGxD,IAAIihB,EAAa,IAAIU,EAAAA,WAMrB,OAJI5V,IAAWjZ,YACXmuB,EAAarwB,KAAKowB,4BAA4BjV,EAAQkV,IAGnDrwB,KAAKkb,QAAQ,oBAAsB0C,mBAAmBiT,GAAaR,IAU9EP,EAAA5vB,UAAAgxB,2CAAA,SAA2CL,EAAoB1V,GAE3D,GAAI0V,IAAe3uB,WAAmC,IAAtB2uB,EAAWlwB,OACvC,OAAOqd,EAAAA,WAAW7d,OAAO,SAAA8d,GAAY,OAAAA,EAAS7O,MAAM,+EAGxD,IAAIihB,EAAa,IAAIU,EAAAA,WAQrB,OANI5V,IAAWjZ,YACXmuB,EAAarwB,KAAKowB,4BAA4BjV,EAAQkV,IAG9CrwB,KAAKkb,QAAQ,oBAAsB0C,mBAAmBiT,GAAaR,GAEpE/U,KACPmH,EAAAA,SAEIziB,KAAKgc,eAETT,EAAAA,IAEIoR,EAAAA,cAAciD,0BAY1BE,EAAA5vB,UAAAixB,iBAAA,SAAiBC,GAEb,OAAIA,IAAoBlvB,WAAwC,IAA3BkvB,EAAgBzwB,OAC1Cqd,EAAAA,WAAW7d,OAAO,SAAA8d,GAAY,OAAAA,EAAS7O,MAAM,uEAGjDpP,KAAKsc,SAAS,qBAAsB8U,IAU/CtB,EAAA5vB,UAAAmxB,qCAAA,SAAqCD,GAEjC,OAAIA,IAAoBlvB,WAAwC,IAA3BkvB,EAAgBzwB,OAC1Cqd,EAAAA,WAAW7d,OAAO,SAAA8d,GAAY,OAAAA,EAAS7O,MAAM,uEAG5CpP,KAAKsc,SAAS,qBAAsB8U,GAErC9V,KACPmH,EAAAA,SACIziB,KAAKgc,eAETyG,EAAAA,SACIziB,KAAKgwB,uCAUjBF,EAAA5vB,UAAAoxB,kCAAA,SAAkCF,GAE9B,OAAIA,IAAoBlvB,WAAwC,IAA3BkvB,EAAgBzwB,OAC1Cqd,EAAAA,WAAW7d,OAAO,SAAA8d,GAAY,OAAAA,EAAS7O,MAAM,uEAG5CpP,KAAKsc,SAAS,qBAAsB8U,GAErC9V,KACPmH,EAAAA,SACIziB,KAAKgc,eAETyG,EAAAA,SACIziB,KAAKmwB,oCAYjBL,EAAA5vB,UAAAqxB,2BAAA,SAA2BH,GAEvB,OAAIA,IAAoBlvB,WAAwC,IAA3BkvB,EAAgBzwB,OAC1Cqd,EAAAA,WAAW7d,OAAO,SAAA8d,GAAY,OAAAA,EAAS7O,MAAM,iFAGjDpP,KAAKsc,SAAS,2BAA4B8U,IASrDtB,EAAA5vB,UAAAsxB,2CAAA,SAA2CJ,GAEvC,OAAIA,IAAoBlvB,WAAwC,IAA3BkvB,EAAgBzwB,OAC1Cqd,EAAAA,WAAW7d,OAAO,SAAA8d,GAAY,OAAAA,EAAS7O,MAAM,iFAG5CpP,KAAKsc,SAAS,2BAA4B8U,GAE3C9V,KACPmH,EAAAA,SAEIziB,KAAKgc,eAETT,EAAAA,IAEIoR,EAAAA,cAAciD,0BAc1BE,EAAA5vB,UAAAuxB,cAAA,SAAcZ,EAAoBC,EAAoB3V,GAElD,QAF8B,IAAA2V,IAAAA,EAAA,GAE1BD,IAAe3uB,WAAmC,IAAtB2uB,EAAWlwB,OACvC,OAAOqd,EAAAA,WAAW7d,OAAO,SAAA8d,GAAY,OAAAA,EAAS7O,MAAM,qEAGxD,IAAIihB,EAAyB,IAAIU,EAAAA,WASjC,OAPAV,EAAaA,EAAWG,IAAI,SAAUM,EAAO7f,YAEzCkK,IAAWjZ,YACXmuB,EAAarwB,KAAK2wB,2BAA2BxV,EAAQkV,IAIlDrwB,KAAKkb,QAAQ,qBAAuB0C,mBAAmBiT,GAAaR,IAY/EP,EAAA5vB,UAAAwxB,kCAAA,SAAkCb,EAAoBC,EAAoB3V,GAEtE,QAFkD,IAAA2V,IAAAA,EAAA,GAE9CD,IAAe3uB,WAAmC,IAAtB2uB,EAAWlwB,OACvC,OAAOqd,EAAAA,WAAW7d,OAAO,SAAA8d,GAAY,OAAAA,EAAS7O,MAAM,qEAGxD,IAAIihB,EAAyB,IAAIU,EAAAA,WAUjC,OARAV,EAAaA,EAAWG,IAAI,SAAUM,EAAO7f,YAEzCkK,IAAWjZ,YACXmuB,EAAarwB,KAAK2wB,2BAA2BxV,EAAQkV,IAG7CrwB,KAAKkb,QAAQ,qBAAuB0C,mBAAmBiT,GAAaR,GAErE/U,KACPmH,EAAAA,SACIziB,KAAKgc,eAETyG,EAAAA,SACIziB,KAAKgwB,2DA7YpB5S,EAAAA,WAAUre,KAAA,CAAC,CACRse,WAAY,oDA9BPC,EAAAA,8CAmCAC,EAAAA,OAAMxe,KAAA,CAACV,YA3BP6jB,4JAqBT,CAGmCnH,ICxBnC4W,GAAA,SAAAhc,GAAA,SAAAgc,0DAGqC5b,EAAAA,EAAAA,GAcjC4b,EAAAzxB,UAAA0xB,mBAAA,SAAmBC,EAAqBf,GACpC,IAAMgB,EAAiB,yWAeCD,EAAW,2EAGxCA,EAAW,saAgBHf,EAAM,KAGT,OAAO9wB,KAAKqxB,qCAAqCS,IAgBrDH,EAAAzxB,UAAA6xB,gDAAA,SAAgDzb,EAAqBwa,GACjE,IAAMgB,EAAiB,yUAcHxb,EAAW,yEAGpCA,EAAW,0TAaLwa,EAAM,KAGP,OAAO9wB,KAAKqxB,qCAAqCS,IAkBrDH,EAAAzxB,UAAA8xB,4BAAA,SAA4B1b,EAAqBwa,GAC7C,IAAMgB,EAAiB,wKAMDxb,EAAW,0FAMXA,EAAW,WAEtCA,EAAW,oRAQyBA,EAAW,qEAIbA,EAAW,sBAGrCwa,EAAM,KAGT,OAAO9wB,KAAKqxB,qCAAqCS,IAYrDH,EAAAzxB,UAAA+xB,iBAAA,SAAiB3b,EAAqBwa,GAClC,IAAMgB,EAAiB,wKAMDxb,EAAW,0FAMXA,EAAW,WAEtCA,EAAW,oRAQyBA,EAAW,qEAIbA,EAAW,sBAGrCwa,EAAM,KAGT,OAAO9wB,KAAKsxB,kCAAkCQ,wBAzMrD1U,EAAAA,WAAUre,KAAA,CAAC,CACRse,WAAY,iKADhB,CAGqCyS,ICGrCoC,GAAA,SAAAvc,GAKI,SAAAuc,EAAoBlX,EACmBvc,EAC3B0zB,EACApC,GAHZ,IAAAja,EAIIH,EAAAhU,KAAA3B,KAAMgb,EAAMvc,IAAOuB,YAJH8V,EAAAkF,KAAAA,EACmBlF,EAAArX,OAAAA,EAC3BqX,EAAAqc,iBAAAA,EACArc,EAAAia,sBAAAA,WALqBha,EAAAA,EAAAA,GAiBjCmc,EAAAhyB,UAAAkyB,YAAA,SAAY3J,GAAZ,IAAA3S,EAAA9V,KAII,OAF4DA,KAAKkb,QAAQ,iBAAmB0C,mBAAmB6K,IAEpGnN,KACPmH,EAAAA,SAEIziB,KAAKgc,eAETyG,EAAAA,SAEI,SAACxG,eAESgU,EAA4BtD,EAAAA,cAAc2C,kCAAkCrT,GAG5E8B,EAA8B4O,EAAAA,cAAc8C,6BAA6BxT,GAEzEoW,EAAOpC,EAAOrJ,UAAU,GAIxB0L,EAAqB9yB,OAAO+uB,KAAK8D,EAAK7X,YAC5C,QAAQ,GACJ,KAAK8X,EAASC,SAAS5uB,EAAeuH,wBAGlC,IAAMsnB,EAAiD,GAGjDC,EADwCJ,EAAK7X,WAAW7W,EAAeuH,wBACfsY,OAAO,SAACkP,GAClE,OAAQA,EAAM5a,gBAGlB,IAAkB,IAAA6a,EAAAlZ,EAAAgZ,GAAeG,EAAAD,EAAA/wB,QAAAgxB,EAAA9wB,KAAA8wB,EAAAD,EAAA/wB,OAAE,CAA9B,IAAMixB,EAAGD,EAAA/wB,UAGV,IAA6B,IAAA6X,EAAAD,EAAA4Y,EAAK5X,qBAAmBqL,EAAApM,EAAA9X,QAAAkkB,EAAAhkB,KAAAgkB,EAAApM,EAAA9X,OAA5BkkB,EAAAjkB,0GASzB,IAAM4lB,EAAa,IAAIK,GAAyB+K,EAVtB,IAW1BL,EAAmB5Y,KAAK6N,wGAI5B4K,EAAK1X,6BAA6B8M,WAAa+K,EAE/C,MACJ,KAAKF,EAASC,SAAS5uB,EAAe2H,yBAGtC,KAAKgnB,EAASC,SAAS5uB,EAAegI,mBAGtC,KAAK2mB,EAASC,SAAS5uB,EAAekI,sBAGtC,KAAKymB,EAASC,SAAS5uB,EAAemI,iBAElC,MAIJ,QAGIgK,EAAKqc,iBAAiBJ,gDAAgDM,EAAK3gB,GAAI,GAAGohB,UAC9E,SAACC,eAIG,GAFA5jB,QAAQ0S,IAAI,gBAAiBkR,GAEQ,EAAjCA,EAAcnM,UAAUjmB,OAAY,CAEpCsvB,EAAOnJ,oBAAoBhG,0BAA0BiS,EAAcjM,qBAYnEnnB,MAAMO,UAAU0Z,KAAK0O,MAAM+J,EAAK3X,4BAA6BqY,EAAcnM,WAG3E,IAAMoM,EAAyD,OAE/D,IAAoB,IAAAtZ,EAAAD,EAAAsZ,EAAcnM,WAASd,EAAApM,EAAA9X,QAAAkkB,EAAAhkB,KAAAgkB,EAAApM,EAAA9X,OAAE,CAAxC,IAKKqxB,EALMnN,EAAAjkB,MAIgD2Y,WAAW7W,EAAeuH,wBACRsY,OAAO,SAACkP,GAClF,OAAQA,EAAM5a,gBAGlB,IAAkB,IAAAob,EAAAzZ,EAAAwZ,GAAuBE,EAAAD,EAAAtxB,QAAAuxB,EAAArxB,KAAAqxB,EAAAD,EAAAtxB,OAAE,CAAtC,IAAMixB,EAAGM,EAAAtxB,MAcJ4lB,EAAa,IAAIK,GAAyB+K,EAZtB,IAa1BG,EAA2BpZ,KAAK6N,wGAIpC4K,EAAK1X,6BAA6B8M,WAAauL,0GAS3D,SAAC5jB,GACGD,QAAQC,MAAMA,KAmC9B,OAdA0G,EAAKqc,iBAAiBF,iBAAiBhC,EAAOrJ,UAAU,GAAGlV,GAAI,GAAGohB,UAC9D,SAACM,GAEGnD,EAAOnJ,oBAAoBhG,0BAA0BsS,EAAYtM,qBAGjEnnB,MAAMO,UAAU0Z,KAAK0O,MAAM2H,EAAOrJ,UAAU,GAAGtM,cAAe8Y,EAAYxM,aAQ3E9Q,EAAKia,sBAAsB5L,4BAA4BpG,GAAmBzC,KAC7EC,EAAAA,IACI,SAAC2U,GAMG,OAJAD,EAAOnJ,oBAAoBhG,0BAA0BoP,GAErD/gB,QAAQ0S,IAAI,2BAA4BoO,GAEjCA,SAqE3BiC,EAAAhyB,UAAAmzB,qBAAR,SAA6B5K,GAA7B,IAAA3S,EAAA9V,KAGI,OAF4DA,KAAKkb,QAAQ,iBAAmB0C,mBAAmB6K,IAEpGnN,KACPmH,EAAAA,SAEIziB,KAAKgc,eAETyG,EAAAA,SAEI,SAACxG,GAEG,IAAMgU,EAA4BtD,EAAAA,cAAc2C,kCAAkCrT,GAG5E8B,EAA8B4O,EAAAA,cAAc8C,6BAA6BxT,GAK/E,OAAOnG,EAAKia,sBAAsB5L,4BAA4BpG,GAAmBzC,KAC7EC,EAAAA,IACI,SAAC2U,GAGG,OADAD,EAAOnJ,oBAAoBhG,0BAA0BoP,GAC9CD,SAUnCiC,EAAAhyB,UAAAozB,yBAAA,SAAyBC,GAGjBA,IAAarxB,WAObqxB,EAAS3M,UAAU,GAAGpM,WAAW7W,EAAeuH,yBA8BxDgnB,EAAAhyB,UAAAszB,gBAAA,SAAgB/K,GAAhB,IAAA3S,EAAA9V,KAKI,OAJ4DA,KAAKkb,QAAQ,iBAAmB0C,mBAAmB6K,IAIpGnN,KACPmH,EAAAA,SAEIziB,KAAKgc,eAETyG,EAAAA,SAEI,SAACxG,GAEG,IAAMgU,EAAgCtD,EAAAA,cAAcqC,sCAAsC/S,GAGpF8B,EAA8B4O,EAAAA,cAAc8C,6BAA6BxT,GAG/E,OAAOnG,EAAKia,sBAAsB5L,4BAA4BpG,GAAmBzC,KAC7EC,EAAAA,IACI,SAAC2U,GAGG,OADAD,EAAOnJ,oBAAoBhG,0BAA0BoP,GAC9CD,6BA9WtC7S,EAAAA,WAAUre,KAAA,CAAC,CACRse,WAAY,oDAfPC,EAAAA,8CAoBAC,EAAAA,OAAMxe,KAAA,CAACV,YAZPszB,UACAzP,yKAKT,CAGqCnH,ICVrC0Y,GAUI,SAAAA,GAAmBC,GAAA1zB,KAAA0zB,mBAAAA,iBAgBnB,SAAAC,IAGI3zB,KAAK4zB,qBAAuB,IAAIC,EAAAA,gBAAsC,IAAIJ,GAAqB,SAAC3C,GAAmB,OAAA,YASvH6C,EAAAzzB,UAAA4zB,sBAAA,SAAsBxD,GAClBtwB,KAAK4zB,qBAAqBhyB,KAAK0uB,IAQnCqD,EAAAzzB,UAAA6zB,gBAAA,WACI,OAAO/zB,KAAK4zB,qBAAqBI,gCAhCxC5W,EAAAA,WAAUre,KAAA,CAAC,CACRse,WAAY,yJChBhB4W,GAAA,WAyCI,SAAAA,EAAoBC,GAAAl0B,KAAAk0B,qBAAAA,SAUpBD,EAAA/zB,UAAAi0B,sBAAA,SAAsB3Z,EAAiC4Z,EAAkCtD,QAAA,IAAAA,IAAAA,EAAA,GAGrF,IAAIuD,EAAoB,GAGpBD,IAA4BlyB,YAC5BmyB,EAAoB,eAAeD,EAAuB,OAI9D,IAAME,EAAkB,GAGlBC,EAAmB,GAGnBC,EAAkBha,EAAWe,IAC/B,SAACkZ,EAAgC1kB,GAG7B,IAAIod,EAOAA,EANCsH,EAAYlV,SAAS5Y,gBAAiF,WAA/D8tB,EAAYC,aAAaC,mBAAmB3e,eAMxEye,EAAYC,aAAa7yB,MAAM+yB,SAAS7yB,EAAAA,YAAY8yB,SAHpD,WAAW9kB,EAO3B,IAAI+kB,EAAoB,aAAaL,EAAYlV,SAAS7N,GAAE,KAAKyb,EAAS,KAKtE2H,EAFAL,EAAYlV,SAAS5Y,gBAAiF,cAA/D8tB,EAAYC,aAAaC,mBAAmB3e,eAEvE,wBAC9B8e,EAAS,WAMSP,EAAiB3a,KAAKkb,GACV,KAC9BA,EAAS,UAOK,IAAIC,EAAsB,GAE1B,IAAKN,EAAYlV,SAAS5Y,gBAAiF,WAA/D8tB,EAAYC,aAAaC,mBAAmB3e,eAA6B,CAEjH,IAAMgf,EAAsB7H,EAAS,UAE8B,SAA/DsH,EAAYC,aAAaC,mBAAmB3e,gBAE5C+e,EAAiB5H,EAAS,KAAK8G,EAA4BgB,kBAAkBR,EAAYlV,SAASS,YAAW,KAAKgV,EAAqB,KAEvID,GAAe,gBAAgBC,EAAgB,KAAKP,EAAYC,aAAa7yB,MAAM+yB,SAAS7yB,EAAAA,YAAY8yB,SAAQ,UAC1C,UAA/DJ,EAAYC,aAAaC,mBAAmB3e,gBAEnD+e,EAAiB5H,EAAS,KAAK8G,EAA4BgB,kBAAkBR,EAAYlV,SAASS,YAAW,KAAKgV,EAAqB,KAEvID,GAAe,WAAWpxB,EAAeyJ,cAAa,KAAK4nB,EAAgB,KAAKP,EAAYC,aAAa7yB,MAAM+yB,SAAS7yB,EAAAA,YAAY8yB,SAAQ,KACrIJ,EAAYlV,SAASS,aAAerc,EAAewB,UAE1D4vB,EAAc,iCAAiC5H,EAAS,KAAKsH,EAAYC,aAAaC,mBAAmBjf,KAAI,IAAI+e,EAAYC,aAAa7yB,MAAM+yB,SAAS7yB,EAAAA,YAAY8yB,SAAQ,IACtKJ,EAAYlV,SAASS,aAAerc,EAAe2B,WAE1DyvB,EAAiB5H,EAAS,KAAK8G,EAA4BgB,kBAAkBR,EAAYlV,SAASS,YAAW,KAAKyU,EAAYC,aAAa7yB,MAAM+yB,SAAS7yB,EAAAA,YAAY8yB,SAAa,KAEhH,cAA/DJ,EAAYC,aAAaC,mBAAmB3e,iBAC5C+e,EAAc,wDACRA,EAAW,qCAKrBA,EAAiB5H,EAAS,KAAK8G,EAA4BgB,kBAAkBR,EAAYlV,SAASS,YAAW,KAAKgV,EAAqB,KAEvID,GAAe,UAAUC,EAAgB,IAAIP,EAAYC,aAAaC,mBAAmBjf,KAAI,IAAI+e,EAAYC,aAAa7yB,MAAM+yB,SAAS7yB,EAAAA,YAAY8yB,SAAQ,KAOrK,OAFIJ,EAAYS,iBAAiBZ,EAAgB1a,KAAKuT,GAE5C2H,EAAS,KACjCC,EAAW,OAKDI,EAAmB,GAEM,EAAzBb,EAAgB3zB,SAChBw0B,EAAmB,cACpBb,EAAgBc,KAAK,KAAI,MAK5B,IAAMC,EAAqB,iIAMjCd,EAAiBa,KAAK,MAAK,uDAM3Bf,EAAiB,OAEjBG,EAAMY,KAAK,IAAG,UAGdD,EAGYG,EAAiB,YACtBxE,EAAM,KAkBP,OANe,IAAXA,GAEA9wB,KAAKk0B,qBAAqBJ,sBAAsB,IAAIL,GAVR,SAAC8B,GAK7C,OAAOF,EAJsB,YAChCE,EAAW,QAYLF,EAAqBC,GA1LlBrB,EAAAuB,8BAAgC,CAC1CC,sDAAuD9xB,EAAe8I,WACtEipB,0DAA2D/xB,EAAe+I,WAC1EipB,0DAA2DhyB,EAAe6I,WAC1EopB,uDAAwDjyB,EAAe2I,UACvEupB,uDAAwDlyB,EAAekJ,WACvEipB,2DAA4DnyB,EAAemJ,eAC3EipB,uDAAwDpyB,EAAeoJ,WACvEipB,wDAAyDryB,EAAeqJ,YACxEipB,0DAA2DtyB,EAAesJ,cAC1EipB,sDAAuDvyB,EAAegJ,OACtEwpB,iEAAkExyB,EAAeuJ,WACjFkpB,uDAAwDzyB,EAAeuJ,WACvEmpB,kEAAmE1yB,EAAeuJ,WAClFopB,0DAA2D3yB,EAAeuJ,WAC1EqpB,4DAA6D5yB,EAAeuJ,WAC5EspB,+DAAgE7yB,EAAeuJ,WAC/EupB,2DAA4D9yB,EAAeuJ,WAC3EwpB,uDAAwD/yB,EAAewJ,gBAG7D8mB,EAAAgB,kBAAoB,CAC9BQ,sDAAuD9xB,EAAekH,sBACtE6qB,0DAA2D/xB,EAAemH,sBAC1E6qB,0DAA2DhyB,EAAeuI,sBAC1E0pB,uDAAwDjyB,EAAegG,cACvEusB,sDAAuDvyB,EAAesI,cACtEyqB,uDAAwD/yB,EAAe0I,yCAtC9E+Q,EAAAA,WAAUre,KAAA,CAAC,CACRse,WAAY,oDAResW,yHAO/B,iBCKE,SAAAgD,EAAoB3b,EAAqDvc,GAArDuB,KAAAgb,KAAAA,EAAqDhb,KAAAvB,OAAAA,SAQzEk4B,EAAAz2B,UAAA02B,wBAAA,SAAwBC,GAEtB,OAAO72B,KAAKgb,KAAKuB,KAAsCvc,KAAKvB,OAAO2D,IAAM,uCAAwCy0B,GAC9Gvb,KACCC,EAAAA,IACE,SAACkD,GAGC,OAFgDA,EAElC5B,SAEhB,SAACzN,GAMC,MALIA,EAAMA,iBAAiB+P,MACzBhQ,QAAQ0S,IAAI,uEAAwEzS,GAEpFD,QAAQ0S,IAAI,uEAAwEzS,GAEhFA,0BA7BjBgO,EAAAA,WAAUre,KAAA,CAAC,CACVse,WAAY,oDARLC,EAAAA,8CAYgCC,EAAAA,OAAMxe,KAAA,CAACV,mKCThD,SAAAy4B,0DAG0C/gB,EAAAA,EAAAA,GAWxC+gB,EAAA52B,UAAA62B,iBAAA,WACE,IAAMj0B,EAAM9C,KAAKvB,OAAO0D,IACxB,OAAOnC,KAAKkb,QAAQpY,EAAM,4DAhB7Bsa,EAAAA,WAAUre,KAAA,CAAC,CACVse,WAAY,qJAE4BtC,mBCH1C,SAAAic,0DAG0CjhB,EAAAA,EAAAA,GAQxCihB,EAAA92B,UAAA+2B,sBAAA,SAAsBxO,GACpB,OAAOzoB,KAAKkb,QAAQ,gCAAkC0C,mBAAmB6K,KAS3EuO,EAAA92B,UAAAg3B,gBAAA,SAAgBzO,GACd,OAAOzoB,KAAKkb,QAAQ,qBAAuB0C,mBAAmB6K,yBAtBjErL,EAAAA,WAAUre,KAAA,CAAC,CACVse,WAAY,qJAE4BtC,ICC1Coc,GAAA,SAAAxhB,GAKI,SAAAwhB,EAAmBnc,EAC4Bvc,GAD/C,IAAAqX,EAEIH,EAAAhU,KAAA3B,KAAMgb,EAAMvc,IAAOuB,YAFJ8V,EAAAkF,KAAAA,EAC4BlF,EAAArX,OAAAA,WAHlBsX,EAAAA,EAAAA,GAarBohB,EAAAj3B,UAAAk3B,iBAAR,SAAyBC,GACrB,OAAOr3B,KAAKkb,QAAQ,aAAe0C,mBAAmByZ,KAS1DF,EAAAj3B,UAAA0oB,QAAA,SAAQyO,GAGJ,OAFmBr3B,KAAKo3B,iBAAiBC,GAEvB/b,KACdmH,EAAAA,SAEIziB,KAAKgc,iBAWTmb,EAAAj3B,UAAAo3B,qBAAR,SAA6Bpd,GACzB,OAAOla,KAAKkb,QAAQ,YAAc0C,mBAAmB1D,KASzDid,EAAAj3B,UAAAq3B,YAAA,SAAYrd,GAIR,OAFuBla,KAAKs3B,qBAAqBpd,GAE3BoB,KAClBmH,EAAAA,SAEIziB,KAAKgc,qCA5DpBoB,EAAAA,WAAUre,KAAA,CAAC,CACRse,WAAY,oDAPPC,EAAAA,8CAYQC,EAAAA,OAAMxe,KAAA,CAACV,iJANxB,CAGiC0c,ICHjCyc,GAMI,SAAAA,GAAqB9lB,EAAqBqB,EAAwBG,EAA4BukB,GAAzEz3B,KAAA0R,GAAAA,EAAqB1R,KAAA+S,MAAAA,EAAwB/S,KAAAkT,SAAAA,EAA4BlT,KAAAy3B,YAAAA,EAG1Fz3B,KAAKyT,WAAcgkB,IAAgBv1B,UAEnClC,KAAKgT,SAAW,IAIxB0kB,GAAA,SAAAA,OAMAC,GAAA,SAAAA,OAKAC,GAAA,WASI,SAAAA,EAAoBC,GAApB,IAAA/hB,EAAA9V,KAAoBA,KAAA63B,aAAAA,EAJZ73B,KAAA83B,UAAY,IAAIJ,GAEhB13B,KAAA+3B,wBAA0B,IAAIJ,GAsB9B33B,KAAAg4B,wBAA8D,SAACC,WAE7D/d,EAAc+d,EAAW,OAEzBR,EAAc3hB,EAAK2hB,YAAYQ,GAE/BC,EAAW,IAAIV,GACjBtd,EACA+d,EAAW,8CACXA,EAAW,+DACXR,GAIJ,GAAIQ,EAAW,+DAAiE/1B,UAE5E,GAAIvC,MAAM+kB,QAAQuT,EAAW,kEAEzB,IAA0B,IAAAze,EAAAC,EAAAwe,EAAW,8DAA4Dve,EAAAF,EAAA5X,QAAA8X,EAAA5X,KAAA4X,EAAAF,EAAA5X,OAAE,CAA9F,IAAMu2B,EAAWze,EAAA7X,MAClBq2B,EAASllB,SAAS4G,KAAK9D,EAAKkiB,wBAAwBG,8GAIxDD,EAASllB,SAAS4G,KAAK9D,EAAKkiB,wBAAwBC,EAAW,+DAOvE,OAFAniB,EAAKiiB,wBAAwB7d,GAAege,UA7CxCN,EAAA13B,UAAAu3B,YAAR,SAAoBQ,GAChB,IAAIG,EAMJ,OAJIH,EAAW,4DAA8D/1B,YACzEk2B,EAAUH,EAAW,0DAA0D,QAG5EG,GAiDXR,EAAA13B,UAAA0oB,QAAA,SAAQyO,GAAR,IAAAvhB,EAAA9V,KAGI,OAAIA,KAAK83B,UAAUT,KAAiBn1B,UAGzBgkB,EAAAA,GAAGlmB,KAAK83B,UAAUT,IAKNr3B,KAAK63B,aAAajP,QAAQyO,GAEK/b,KAC9CC,EAAAA,IACIvb,KAAKg4B,0BAIC1c,KACVC,EAAAA,IACI,SAAC1H,GAGG,OADAiC,EAAKgiB,UAAUT,GAAexjB,MAclD+jB,EAAA13B,UAAAq3B,YAAA,SAAYrd,GAAZ,IAAApE,EAAA9V,KAGI,OAAIA,KAAK+3B,wBAAwB7d,KAAiBhY,UAGvCgkB,EAAAA,GAAGlmB,KAAK+3B,wBAAwB7d,IAItBla,KAAK63B,aAAaN,YAAYrd,GAE/BoB,KACZmH,EAAAA,SACI,SAAC4V,GACG,IAAMZ,EAAc3hB,EAAK2hB,YAAYY,GAErC,OAAIZ,IAAgBv1B,UAET4T,EAAK8S,QAAQ6O,GAAanc,KAC7BC,EAAAA,IACI,SAAC+c,GAEG,OAAOxiB,EAAKiiB,wBAAwB7d,MAKzCpE,EAAK8S,QAAQ1O,GAAaoB,KAC7BC,EAAAA,IACI,SAAC+c,GAEG,OAAOxiB,EAAKiiB,wBAAwB7d,8BAzI3EkD,EAAAA,WAAUre,KAAA,CAAC,CACRse,WAAY,oDAhCP8Z,yHA+BT,iBCTI,SAAAoB,IAHAv4B,KAAA0V,KAAO/R,EAAe0J,yBACtBrN,KAAA+S,MAAQpP,EAAe2J,sBAQ3B,OAHIirB,EAAAr4B,UAAA8V,aAAA,WACI,MAAO,UAEfuiB,mBAQI,SAAAC,IAHAx4B,KAAA0V,KAAO/R,EAAe4J,4BACtBvN,KAAA+S,MAAQpP,EAAe6J,yBAQ3B,OAHIgrB,EAAAt4B,UAAA8V,aAAA,WACI,MAAO,aAEfwiB,mBAOI,SAAAC,IAHAz4B,KAAA0V,KAAO/R,EAAegK,oCACtB3N,KAAA+S,MAAQpP,EAAeiK,iCAQ3B,OAHI6qB,EAAAv4B,UAAA8V,aAAA,WACI,MAAO,qBAEfyiB,mBAOI,SAAAC,IAHA14B,KAAA0V,KAAO/R,EAAe8J,8BACtBzN,KAAA+S,MAAQpP,EAAe+J,2BAQ3B,OAHIgrB,EAAAx4B,UAAA8V,aAAA,WACI,MAAO,eAEf0iB,mBAOI,SAAAC,IAHA34B,KAAA0V,KAAO/R,EAAekK,2BACtB7N,KAAA+S,MAAQpP,EAAemK,wBAQ3B,OAHI6qB,EAAAz4B,UAAA8V,aAAA,WACI,MAAO,YAEf2iB,mBAOI,SAAAC,IAHA54B,KAAA0V,KAAO/R,EAAeoK,iCACtB/N,KAAA+S,MAAQpP,EAAeqK,6BAQ3B,OAHI4qB,EAAA14B,UAAA8V,aAAA,WACI,MAAO,kBAEf4iB,mBAQI,SAAAC,IAHA74B,KAAA0V,KAAO/R,EAAesK,yBACtBjO,KAAA+S,MAAQpP,EAAeuK,sBAQ3B,OAHI2qB,EAAA34B,UAAA8V,aAAA,WACI,MAAO,UAEf6iB,mBAOI,SAAAC,IAHA94B,KAAA0V,KAAO/R,EAAewK,uBACtBnO,KAAA+S,MAAQpP,EAAeyK,oBAS3B,OAJI0qB,EAAA54B,UAAA8V,aAAA,WACI,MAAO,QAGf8iB,mBAOI,SAAAC,IAHA/4B,KAAA0V,KAAO/R,EAAe0K,wBACtBrO,KAAA+S,MAAQpP,EAAe2K,qBAS3B,OAJIyqB,EAAA74B,UAAA8V,aAAA,WACI,MAAO,SAGf+iB,KAMAC,GAEI,SAAAA,GAAqBrE,EAAiD9yB,GAAjD7B,KAAA20B,mBAAAA,EAAiD30B,KAAA6B,MAAAA,GAsB1Eo3B,GAAA,WAQI,SAAAA,EACoBp3B,EACA6T,GADA1V,KAAA6B,MAAAA,EACA7B,KAAA0V,KAAAA,EA0BxB,OAhBWujB,EAAA/4B,UAAA00B,SAAP,SAAgBsE,GAEZ,IAAIC,EAWJ,OALIA,EAFAD,IAAWn3B,EAAAA,YAAYq3B,QAAUnF,GAA4BuB,8BAA8Bx1B,KAAK0V,QAAUxT,UAE5F+xB,GAA4BuB,8BAA8Bx1B,KAAK0V,MAG/D1V,KAAK0V,KAEhB,IAAI1V,KAAK6B,MAAK,OAAOs3B,EAAW,KAG/CF,EApCA,GAyCAI,GAAA,WAOI,SAAAA,EAAqB5Q,GAAAzoB,KAAAyoB,IAAAA,EAczB,OALW4Q,EAAAn5B,UAAA00B,SAAP,SAAgBsE,GAEZ,MAAO,IAAIl5B,KAAKyoB,IAAG,KAG3B4Q,EArBA,GA8CAC,GASI,SAAAA,GACa/Z,EACAmV,EACAQ,GAFAl1B,KAAAuf,SAAAA,EACAvf,KAAA00B,aAAAA,EACA10B,KAAAk1B,gBAAAA","sourcesContent":["import { InjectionToken, ModuleWithProviders, NgModule } from '@angular/core';\nimport { KuiCoreConfig } from './declarations';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\n\nexport const KuiCoreConfigToken = new InjectionToken<KuiCoreConfig>('KuiCoreConfigToken (knora.core.config)');\n\n@NgModule({\n    imports: [\n        CommonModule,\n        HttpClientModule\n    ],\n    declarations: [],\n    exports: [\n        HttpClientModule\n    ]\n})\nexport class KuiCoreModule {\n    /**\n     *\n     * @param {KuiCoreConfig} config\n     * @returns {ModuleWithProviders}\n     */\n    static forRoot(config: KuiCoreConfig): ModuleWithProviders {\n        // get the app environment configuration here\n        // console.log('KuiCoreModule - forRoot - config: ', config);\n        return {\n            ngModule: KuiCoreModule,\n            providers: [\n                {provide: KuiCoreConfigToken, useValue: config}\n            ]\n        };\n    }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export class KnoraConstants {\n\n    // The following version of Knora is needed to work properly with this module\n    public static KnoraVersion: string = '8.0.0';\n\n    public static KnoraApi: string = 'http://api.knora.org/ontology/knora-api';\n    public static PathSeparator: string = '#';\n\n    public static KnoraOntologyPath: string = 'http://www.knora.org/ontology';\n    public static KnoraBase: string = KnoraConstants.KnoraOntologyPath + '/knora-base';\n    public static KnoraAdmin: string = KnoraConstants.KnoraOntologyPath + '/knora-admin';\n\n    public static DefaultSharedOntologyIRI: string = KnoraConstants.KnoraAdmin + '#DefaultSharedOntologiesProject';\n    public static SystemProjectIRI: string = KnoraConstants.KnoraAdmin + '#SystemProject';\n    public static SystemAdminGroupIRI: string = KnoraConstants.KnoraAdmin + '#SystemAdmin';\n    public static ProjectAdminGroupIRI: string = KnoraConstants.KnoraAdmin + '#ProjectAdmin';\n    public static ProjectMemberGroupIRI: string = KnoraConstants.KnoraAdmin + '#ProjectMember';\n\n    public static KnoraApiV2WithValueObjectPath: string = KnoraConstants.KnoraApi + '/v2' + KnoraConstants.PathSeparator;\n    public static KnoraApiV2SimplePath: string = KnoraConstants.KnoraApi + '/simple/v2' + KnoraConstants.PathSeparator;\n\n    public static SalsahGuiOntology: string = 'http://api.knora.org/ontology/salsah-gui/v2';\n\n    public static SalsahGuiOrder: string = KnoraConstants.SalsahGuiOntology + '#guiOrder';\n    public static SalsahGuiAttribute: string = KnoraConstants.SalsahGuiOntology + '#guiAttribute';\n\n    public static StandoffOntology: string = 'http://api.knora.org/ontology/standoff/v2';\n\n    public static Resource: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'Resource';\n    public static TextValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'TextValue';\n    public static IntValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'IntValue';\n    public static BooleanValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'BooleanValue';\n    public static UriValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'UriValue';\n    public static DecimalValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'DecimalValue';\n    public static DateValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'DateValue';\n    public static ColorValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'ColorValue';\n    public static GeomValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'GeomValue';\n    public static ListValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'ListValue';\n    public static IntervalValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'IntervalValue';\n    public static LinkValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'LinkValue';\n    public static GeonameValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'GeonameValue';\n    public static FileValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'FileValue';\n    public static AudioFileValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'AudioFileValue';\n    public static DDDFileValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'DDDFileValue';\n    public static DocumentFileValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'DocumentFileValue';\n    public static StillImageFileValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'StillImageFileValue';\n    public static MovingImageFileValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'MovingImageFileValue';\n    public static TextFileValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'TextFileValue';\n    public static IsResourceClass: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'isResourceClass';\n    public static IsValueClass: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'isValueClass';\n    public static ForbiddenResource: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'ForbiddenResource';\n    public static XMLToStandoffMapping: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'XMLToStandoffMapping';\n    public static ListNode: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'ListNode';\n\n    public static ArkUrl: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'arkUrl';\n    public static versionArkUrl: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'versionArkUrl';\n    public static ObjectType = KnoraConstants.KnoraApiV2WithValueObjectPath + 'objectType';\n\n    public static ResourceIcon: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'resourceIcon';\n    public static isEditable: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'isEditable';\n    public static isLinkProperty: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'isLinkProperty';\n    public static isLinkValueProperty: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'isLinkValueProperty';\n    public static hasGeometry: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'hasGeometry';\n\n    public static schemaName: string = 'http://schema.org/name';\n    public static schemaNumberOfItems: string = 'http://schema.org/numberOfItems';\n    public static schemaItemListElement: string = 'http://schema.org/itemListElement';\n\n    public static RdfProperty: string = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#Property';\n    public static RdfsSchema: string = 'http://www.w3.org/2000/01/rdf-schema' + KnoraConstants.PathSeparator;\n    public static RdfsLabel: string = KnoraConstants.RdfsSchema + 'label';\n    public static RdfsComment: string = KnoraConstants.RdfsSchema + 'comment';\n    public static RdfsSubclassOf: string = KnoraConstants.RdfsSchema + 'subClassOf';\n    public static subPropertyOf: string = KnoraConstants.RdfsSchema + 'subPropertyOf';\n\n    public static owl: string = 'http://www.w3.org/2002/07/owl';\n\n    public static OwlClass: string = KnoraConstants.owl + '#Class';\n    public static OwlObjectProperty: string = KnoraConstants.owl + '#ObjectProperty';\n    public static OwlDatatypeProperty: string = KnoraConstants.owl + '#DatatypeProperty';\n    public static OwlAnnotationProperty: string = KnoraConstants.owl + '#AnnotationProperty';\n    public static OwlOnProperty: string = KnoraConstants.owl + '#onProperty';\n    public static OwlMaxCardinality: string = KnoraConstants.owl + '#maxCardinality';\n    public static OwlMinCardinality: string = KnoraConstants.owl + '#minCardinality';\n    public static OwlCardinality: string = KnoraConstants.owl + '#cardinality';\n    public static OwlRestriction: string = KnoraConstants.owl + '#Restriction';\n\n    public static creationDate: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'creationDate';\n    public static lastModificationDate: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'lastModificationDate';\n    public static hasPermissions: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'hasPermissions';\n    public static userHasPermission: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'userHasPermission';\n    public static attachedToProject: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'attachedToProject';\n    public static attachedToUser: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'attachedToUser';\n\n    public static Region: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'Region';\n\n    public static ReadTextValueAsHtml: string = 'ReadTextValueAsHtml';\n    public static ReadTextValueAsString: string = 'ReadTextValueAsString';\n    public static ReadTextValueAsXml: string = 'ReadTextValueAsXml';\n    public static ReadDateValue: string = 'ReadDateValue';\n    public static ReadLinkValue: string = 'ReadLinkValue';\n    public static ReadIntegerValue: string = 'ReadIntegerValue';\n    public static ReadDecimalValue: string = 'ReadDecimalValue';\n    public static ReadStillImageFileValue: string = 'ReadStillImageFileValue';\n    public static ReadMovingImageFileValue: string = 'ReadMovingImageFileValue';\n    public static ReadAudioFileValue: string = 'ReadAudioFileValue';\n    public static ReadTextFileValue: string = 'ReadTextFileValue';\n    public static ReadDDDFileValue: string = 'ReadDDDFileValue';\n    public static ReadDocumentFileValue: string = 'ReadDocumentFileValue';\n    public static ReadGeomValue: string = 'ReadGeomValue';\n    public static ReadColorValue: string = 'ReadColorValue';\n    public static ReadUriValue: string = 'ReadUriValue';\n    public static ReadBooleanValue: string = 'ReadBooleanValue';\n    public static ReadIntervalValue: string = 'ReadIntervalValue';\n    public static ReadListValue: string = 'ReadListValue';\n\n    public static valueAsString: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'valueAsString';\n\n    public static textValueAsHtml: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'textValueAsHtml';\n    public static textValueAsXml: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'textValueAsXml';\n    public static textValueHasMapping: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'textValueHasMapping';\n\n    public static hasStandoffLinkToValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'hasStandoffLinkToValue';\n\n    public static dateValueHasStartYear: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'dateValueHasStartYear';\n    public static dateValueHasEndYear: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'dateValueHasEndYear';\n    public static dateValueHasStartEra: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'dateValueHasStartEra';\n    public static dateValueHasEndEra: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'dateValueHasEndEra';\n    public static dateValueHasStartMonth: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'dateValueHasStartMonth';\n    public static dateValueHasEndMonth: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'dateValueHasEndMonth';\n    public static dateValueHasStartDay: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'dateValueHasStartDay';\n    public static dateValueHasEndDay: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'dateValueHasEndDay';\n    public static dateValueHasCalendar: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'dateValueHasCalendar';\n\n    public static linkValueHasTarget: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'linkValueHasTarget';\n    public static linkValueHasSource: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'linkValueHasSource';\n    public static linkValueHasSourceIri: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'linkValueHasSourceIri';\n    public static linkValueHasTargetIri: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'linkValueHasTargetIri';\n\n    public static integerValueAsInteger: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'intValueAsInt';\n\n    public static decimalValueAsDecimal: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'decimalValueAsDecimal';\n\n    public static fileValueAsUrl: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'fileValueAsUrl';\n    public static fileValueIsPreview: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'fileValueIsPreview';\n    public static fileValueHasFilename: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'fileValueHasFilename';\n\n    public static hasStillImageFileValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'hasStillImageFileValue';\n    public static stillImageFileValueHasDimX: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'stillImageFileValueHasDimX';\n    public static stillImageFileValueHasDimY: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'stillImageFileValueHasDimY';\n    public static stillImageFileValueHasIIIFBaseUrl: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'stillImageFileValueHasIIIFBaseUrl';\n\n    public static hasMovingImageFileValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'hasMovingImageFileValue';\n    public static movingImageFileValueHasDimX: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'movingImageFileValueHasDimX';\n    public static movingImageFileValueHasDimY: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'movingImageFileValueHasDimY';\n    public static movingImageFileValueHasDuration: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'movingImageFileValueHasDuration';\n    public static movingImageFileValueHasFps: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'movingImageFileValueHasFps';\n\n    public static hasAudioFileValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'hasAudioFileValue';\n    public static audioFileValueHasDuration: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'audioFileValueHasDuration';\n\n    public static hasDocumentFileValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'hasDocumentFileValue';\n\n    public static hasDDDFileValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'hasDDDFileValue';\n\n    public static colorValueAsColor: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'colorValueAsColor';\n    public static geometryValueAsGeometry: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'geometryValueAsGeometry';\n    public static uriValueAsUri: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'uriValueAsUri';\n    public static booleanValueAsBoolean: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'booleanValueAsBoolean';\n\n    public static intervalValueHasStart: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'intervalValueHasStart';\n    public static intervalValueHasEnd: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'intervalValueHasEnd';\n\n    public static listValueAsListNode: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'listValueAsListNode';\n\n    public static Xsd: string = 'http://www.w3.org/2001/XMLSchema#';\n\n    public static xsdString: string = KnoraConstants.Xsd + 'string';\n    public static xsdBoolean: string = KnoraConstants.Xsd + 'boolean';\n    public static xsdInteger: string = KnoraConstants.Xsd + 'integer';\n    public static xsdDecimal: string = KnoraConstants.Xsd + 'decimal';\n    public static xsdUri: string = KnoraConstants.Xsd + 'anyURI';\n\n    public static resourceSimple: string = KnoraConstants.KnoraApiV2SimplePath + 'Resource';\n    public static dateSimple: string = KnoraConstants.KnoraApiV2SimplePath + 'Date';\n    public static intervalSimple: string = KnoraConstants.KnoraApiV2SimplePath + 'Interval';\n    public static geomSimple: string = KnoraConstants.KnoraApiV2SimplePath + 'Geom';\n    public static colorSimple: string = KnoraConstants.KnoraApiV2SimplePath + 'Color';\n    public static geonameSimple: string = KnoraConstants.KnoraApiV2SimplePath + 'Geoname';\n    public static fileSimple: string = KnoraConstants.KnoraApiV2SimplePath + 'File';\n    public static listNodeSimple: string = KnoraConstants.KnoraApiV2SimplePath + 'ListNode';\n\n    public static matchFunction: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'match';\n\n    public static EqualsComparisonOperator: string = '=';\n    public static EqualsComparisonLabel: string = 'is equal to';\n\n    public static NotEqualsComparisonOperator: string = '!=';\n    public static NotEqualsComparisonLabel: string = 'is not equal to';\n\n    public static GreaterThanComparisonOperator: string = '>';\n    public static GreaterThanComparisonLabel: string = 'is greater than';\n\n    public static GreaterThanEqualsComparisonOperator: string = '>=';\n    public static GreaterThanEqualsComparisonLabel: string = 'is greater than equals to';\n\n    public static LessThanComparisonOperator: string = '<';\n    public static LessThanComparisonLabel: string = 'is less than';\n\n    public static LessThanEqualsComparisonOperator: string = '<=';\n    public static LessThanQualsComparisonLabel: string = 'is less than equals to';\n\n    public static ExistsComparisonOperator: string = 'E';\n    public static ExistsComparisonLabel: string = 'exists';\n\n    public static LikeComparisonOperator: string = 'regex';\n    public static LikeComparisonLabel: string = 'is like';\n\n    public static MatchComparisonOperator: string = 'contains';\n    public static MatchComparisonLabel: string = 'matches';\n\n    public static SalsahLink: string = 'salsah-link'; // class on an HTML <a> element that indicates a link to a Knora resource\n    public static RefMarker: string = 'ref-marker'; // class on an HTML element that refers to another element in the same document\n\n    public static GNDPrefix: string = '(DE-588)';\n    public static GNDResolver: string = 'http://d-nb.info/gnd/';\n\n    public static VIAFPrefix: string = '(VIAF)';\n    public static VIAFResolver: string = 'https://viaf.org/viaf/';\n\n}\n\n\nexport enum KnoraSchema {\n    complex = 0,\n    simple = 1\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\n\n/**\n * Knora-ui core configuration with the server definitions of:\n *  - api: URL of data service e.g. knora: http://localhost:3333\n *  - media: URL of media server service e.g. sipi: http://localhost:1024\n *  - app: URL of the app e.g. salsah: http://localhost:4200\n */\n@JsonObject('KuiCoreConfig')\nexport class KuiCoreConfig {\n\n    /**\n     * name of the app e.g. 'SALSAH'\n     * @type {string}\n     */\n    @JsonProperty('name', String)\n    public name: string = undefined;\n\n    /**\n     * url of the app e.g. 'https://salsah.org'\n     * @type {undefined}\n     */\n    @JsonProperty('app', String)\n    public app: string = undefined;\n\n    /**\n     * url of the api e.g. 'https://api.knora.org'\n     * @type {string}\n     */\n    @JsonProperty('api', String)\n    public api: string = undefined;\n\n    /**\n     * url of media/file server e.g. 'https://iiif.sipi.io'\n     * @type {string}\n     */\n    @JsonProperty('media', String)\n    public media: string = undefined;\n\n    /**\n     * url of the ontology e.g. 'http://api.02.unibas.dasch.swiss'\n     * @type {string}\n     */\n    @JsonProperty('ontologyIRI', String)\n    public ontologyIRI: string = undefined;\n\n}\n","\nimport { JsonConvert, OperationMode, ValueCheckingMode } from 'json2typescript';\n\n/**\n * Result class used as API url response in ApiService\n */\nexport class ApiServiceResult {\n\n    private static jsonConvert: JsonConvert = new JsonConvert(OperationMode.ENABLE, ValueCheckingMode.ALLOW_NULL);\n\n    /**\n     * Header contains the Knora / Server version\n     */\n    header?: any;\n\n    /**\n     * Status number\n     */\n    status = 0;\n\n    /**\n     * Status text\n     */\n    statusText = '';\n\n    /**\n     * API url\n     */\n    url = '';\n\n    /**\n     * Body as JSON\n     */\n    body: any;\n\n    /**\n     * Gets the result body as instance of classObject.\n     * @param classObject\n     * @returns {any}\n     * @throws\n     */\n\n    getBody(classObject?: { new(): any }): any {\n        // console.log(this.body);\n        return ApiServiceResult.jsonConvert.deserialize(this.body, classObject);\n    }\n\n\n}\n","\n/**\n * Error class used as API response in ApiService\n */\nexport class ApiServiceError {\n\n\n    /**\n     * Header contains the Knora / Server version\n     */\n    header?: any;\n\n    /**\n     * Status number\n     */\n    status = 0;\n\n    /**\n     * Status text\n     */\n    statusText = '';\n\n    /**\n     * API url\n     */\n    url = '';\n\n    /**\n     * Additional error info\n     */\n    errorInfo = '';\n\n}\n","/**\n * Collection of useful utility functions.\n */\nimport { KnoraConstants } from './api/knora-constants';\n\n// @dynamic\nexport class Utils {\n    /**\n     * A regex to validate Email address.\n     *\n     * @type {RegExp}\n     */\n    public static readonly RegexEmail = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\n\n    /**\n     * A regex to validate Username.\n     *\n     * @type {RegExp}\n     */\n    public static readonly RegexUsername = /^[a-zA-Z0-9]+$/;\n\n    /**\n     * A regex to validate URLs.\n     *\n     * @type {RegExp}\n     */\n    public static readonly RegexUrl = /^(http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\/\\/)?[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*\\.[a-z]{2,6}(:[0-9]{1,5})?(\\/.*)?$/i;\n\n    /**\n     * A regex to validate Passwords\n     *\n     * @type {RegExp}\n     */\n    public static readonly RegexPassword = /^(?=.*\\d)(?=.*[a-zA-Z]).{8,}$/i;\n\n    /**\n     * A regex to validate Hexadecimal values\n     *\n     * @type {RegExp}\n     */\n    public static readonly RegexHex = /^[0-9A-Fa-f]+$/;\n\n    /**\n     * A regex to validate shortname in projects\n     *\n     * @type {RegExp}\n     */\n    public static readonly RegexShortname = /^[a-zA-Z]+\\S*$/;\n\n\n    /**\n     * Lambda function eliminating duplicates in a collection to be passed to [[filter]].\n     *\n     * @param elem element of an Array that is currently being looked at.\n     * @param index current elements index.\n     * @param self reference to the whole Array.\n     * @returns {boolean} true if the same element does not already exist in the Array.\n     */\n    public static filterOutDuplicates = (elem, index: number, self) => {\n\n        // https://stackoverflow.com/questions/16747798/delete-duplicate-elements-from-an-array\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter?v=example\n\n        // returns true if the element's index equals the index of the leftmost element\n        // -> this means that there is no identical element before this index, hence it is not a duplicate\n        // for all other elements, false is returned\n        return index === self.indexOf(elem);\n\n    }\n\n    /**\n     * Given a Knora entity IRI, gets the ontology Iri.\n     *\n     * @param {string} entityIri an entity Iri.\n     * @return {string} the ontology IRI\n     */\n    public static getOntologyIriFromEntityIri(entityIri: string) {\n\n        // split class Iri on \"#\"\n        const segments: string[] = entityIri.split(KnoraConstants.PathSeparator);\n\n        if (segments.length !== 2) console.error(`Error: ${entityIri} is not a valid entity IRI.`);\n\n        return segments[0];\n\n    }\n\n    /**\n     * Converts a complex knora-api entity Iri to a knora-api simple entity Iri.\n     *\n     * @param {string} complexEntityIri\n     * @returns {string}\n     */\n    public static convertComplexKnoraApiEntityIritoSimple(complexEntityIri: string) {\n\n        // split entity Iri on \"#\"\n        const segments: string[] = complexEntityIri.split('v2' + KnoraConstants.PathSeparator);\n\n        if (segments.length !== 2) console.error(`Error: ${complexEntityIri} is not a valid entity IRI.`);\n\n        // add 'simple' to base path\n        return segments[0] + 'simple/v2' + KnoraConstants.PathSeparator + segments[1];\n\n    }\n\n\n}\n","/**\n * Precision for DateSalsah.\n */\nexport enum Precision {\n    yearPrecision,\n    monthPrecision,\n    dayPrecision\n}\n\n/**\n * Represents a Salsah date object with a precision information.\n */\nexport class DateSalsah {\n\n    private static separator = '-';\n\n    readonly precision: Precision;\n\n    constructor(\n        readonly calendar: string,\n        readonly era: string,\n        readonly year: number,\n        readonly month?: number,\n        readonly day?: number\n    ) {\n        if (this.month === undefined) {\n            // year precision\n            this.precision = Precision.yearPrecision;\n        } else if (this.day === undefined) {\n            // month precision\n            this.precision = Precision.monthPrecision;\n        } else {\n            // day precision\n            this.precision = Precision.dayPrecision;\n        }\n\n    }\n\n    /**\n     * Returns a string representation of the date without the calendar.\n     *\n     * @returns {string}\n     */\n    getDateAsStringWithoutCalendar() {\n\n        let dateString = '(' + this.era + ') ';\n\n        switch (this.precision) {\n\n            case Precision.yearPrecision: {\n                dateString += this.year.toString();\n                break;\n            }\n\n            case Precision.monthPrecision: {\n                dateString += this.year + DateSalsah.separator + this.month;\n                break;\n            }\n\n            case Precision.dayPrecision: {\n                dateString += this.year + DateSalsah.separator + this.month + DateSalsah.separator + this.day;\n                break;\n            }\n\n            default: {\n                break;\n            }\n\n        }\n\n        return dateString;\n    }\n\n    /**\n     * Returns a string representation of the date (with calendar).\n     *\n     * @returns {string}\n     */\n    getDateAsString(): string {\n\n        return this.calendar + ':' + this.getDateAsStringWithoutCalendar();\n    }\n\n}\n\n/**\n * Represents a period (with start date and end date).\n */\nexport class DateRangeSalsah {\n\n    constructor(\n        readonly start: DateSalsah,\n        readonly end: DateSalsah\n    ) {\n    }\n\n    /**\n     * Returns a string representation of the date range (with preceding calendar).\n     *\n     * @returns {string}\n     */\n    getDateAsString() {\n        return this.start.getDateAsString() + ':' + this.end.getDateAsStringWithoutCalendar();\n    }\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\n\n@JsonObject('StringLiteral')\nexport class StringLiteral {\n\n    @JsonProperty('value', String, false)\n    public value: string = undefined;\n\n    @JsonProperty('language', String, true)\n    public language: string = '';\n}\n","import { Injectable } from '@angular/core';\nimport { ApiServiceResult } from '../../declarations/api-service-result';\nimport { KnoraConstants } from '../../declarations/api/knora-constants';\nimport { Utils } from '../../declarations/utils';\nimport { OntologyService } from './ontology.service';\nimport { forkJoin, from, Observable, of } from 'rxjs';\nimport { map, mergeMap } from 'rxjs/operators';\n\ndeclare let require: any; // http://stackoverflow.com/questions/34730010/angular2-5-minute-install-bug-require-is-not-defined\nconst jsonld = require('jsonld');\n\n/**\n * Represents an error occurred in OntologyCacheService.\n */\nclass OntologyCacheError extends Error {\n\n    constructor(readonly message: string) {\n        super(message);\n    }\n}\n\n\n/**\n * Represents an ontology's metadata.\n */\nexport class OntologyMetadata {\n\n    /**\n     * @hideconstructor\n     *\n     * @param {string} id Iri identifying the ontology.\n     * @param {string} label a label describing the ontology.\n     */\n    constructor(readonly id: string,\n        readonly label: string) {\n\n    }\n\n}\n\n\n/**\n * Occurrence of a property for a resource class (its cardinality).\n */\nexport enum CardinalityOccurrence {\n    minCard = 0,\n    card = 1,\n    maxCard = 2\n}\n\n\n/**\n * Cardinality of a property for the given resource class.\n */\nexport class Cardinality {\n\n    /**\n     * @param {CardinalityOccurrence} occurrence type of given occurrence.\n     * @param {number} value numerical value of given occurrence.\n     * @param {string} property the property the given occurrence applies to.\n     */\n    constructor(readonly occurrence: CardinalityOccurrence,\n        readonly value: number,\n        readonly property: string) {\n    }\n}\n/**\n * Property gui order\n */\nexport class GuiOrder {\n    /**\n     * @param  {number} value\n     * @param  {string} property\n     */\n    constructor(readonly value: number,\n        readonly property: string\n    ) {\n\n    }\n}\n\n/**\n * A resource class definition.\n */\nexport class ResourceClass {\n\n    /**\n     * @param {string} id Iri identifying the resource class.\n     * @param {string} icon path to an icon representing the resource class.\n     * @param {string} comment comment on the resource class.\n     * @param {string} label label describing the resource class.\n     * @param {Cardinality[]} cardinalities the resource class's properties.\n     * @param {GuiOrder[]} guiOrder the resource class's gui-order properties.\n     */\n    constructor(readonly id: string,\n        readonly icon: string,\n        readonly comment: string,\n        readonly label: string,\n        readonly cardinalities: Array<Cardinality>,\n        readonly guiOrder: Array<GuiOrder>) {\n\n    }\n}\n\n\n/**\n * A map of resource class Iris to resource class definitions.\n */\nexport class ResourceClasses {\n    [index: string]: ResourceClass;\n}\n\n\n/**\n * A property definition.\n */\nexport class Property {\n\n    /**\n     * @param {string} id Iri identifying the property definition.\n     * @param {string} objectType the property's object constraint.\n     * @param {string} comment comment on the property definition.\n     * @param {string} label label describing the property definition.\n     * @param {string[]} subPropertyOf Iris of properties the given property is a subproperty of.\n     * @param {boolean} isEditable indicates whether the given property can be edited by the client.\n     * @param {boolean} isLinkProperty indicates whether the given property is a linking property.\n     * @param {boolean} isLinkValueProperty indicates whether the given property refers to a link value.\n     * @param {string} guiAttribute the gui attribute assigned to this property, if any.\n     */\n    constructor(readonly id: string,\n                readonly objectType: string,\n                readonly comment: string,\n                readonly label: string,\n                readonly subPropertyOf: Array<string>,\n                readonly isEditable: Boolean,\n                readonly isLinkProperty: Boolean,\n                readonly isLinkValueProperty: Boolean,\n                readonly guiAttribute: string[]) {\n    }\n}\n\n\n/**\n * A map of property Iris to property definitions.\n */\nexport class Properties {\n    [index: string]: Property;\n}\n\n\n/**\n * Groups resource classes by the ontology they are defined in.\n *\n * A map of ontology Iris to an array of resource class Iris.\n */\nexport class ResourceClassIrisForOntology {\n    [index: string]: Array<string>;\n}\n\n\n/**\n * Represents cached ontology information (only used by this service internally).\n * This cache is updated whenever new definitions are requested from Knora.\n *\n * Requested ontology information by a service is represented by [[OntologyInformation]].\n */\nclass OntologyCache {\n\n    /**\n     * @param {OntologyMetadata[]} ontologies An array of all existing ontologies.\n     */\n    ontologies: Array<OntologyMetadata>;\n\n    /**\n     * @param {ResourceClassIrisForOntology} resourceClassIrisForOntology list of all resource class Iris for a named graph.\n     */\n    resourceClassIrisForOntology: ResourceClassIrisForOntology;\n\n    /**\n     * @param {ResourceClasses} resourceClasses resource class definitions.\n     */\n    resourceClasses: ResourceClasses;\n\n    /**\n     * @param {Properties} properties property definitions.\n     */\n    properties: Properties;\n\n    constructor() {\n        this.ontologies = [];\n\n        this.resourceClassIrisForOntology = new ResourceClassIrisForOntology();\n\n        this.resourceClasses = new ResourceClasses();\n\n        this.properties = new Properties();\n    }\n}\n\n/**\n * Represents ontology information requested from this service.\n *\n * For every request, an instance of this class is returned containing the requested information.\n */\nexport class OntologyInformation {\n\n    /**\n     * @param {ResourceClassIrisForOntology} resourceClassesForOntology all resource class Iris for a given ontology.\n     * @param {ResourceClasses} resourceClasses resource class definitions.\n     * @param {Properties} properties property definitions.\n     */\n    constructor(\n        private resourceClassesForOntology: ResourceClassIrisForOntology,\n        private resourceClasses: ResourceClasses,\n        private properties: Properties) {\n    }\n\n    /**\n     * Sorts an array of `ResourceClass` or `Property` by label.\n     *\n     * @param a first element\n     * @param b second element\n     * @return negative -1 if the first element is considered lower than the second, 1 if the second element is considered bigger, 0 if they are equal\n     */\n    static sortFunc(a: ResourceClass | Property, b: ResourceClass | Property) {\n        // dealing with 'undefined' labels\n        if (a.label === undefined) {\n            return 1;\n        } else if (b.label === undefined) {\n            return -1;\n        }\n\n        const labelA = a.label.toLowerCase();\n        const labelB = b.label.toLowerCase();\n\n        if (labelA < labelB) {\n            return -1;\n        } else if (labelA > labelB) {\n            return 1;\n        } else {\n            return 0;\n        }\n    }\n\n    /**\n     * Merge the given [[OntologyInformation]] into the current instance,\n     * updating the existing information.\n     * This is necessary when a service like the search fetches new results\n     * that have to be added to an existing collection.\n     * The existing ontology information must not be lost.\n     *\n     * @param {OntologyInformation} ontologyInfo the given definitions that have to be integrated.\n     * @returns void\n     */\n    updateOntologyInformation(ontologyInfo: OntologyInformation): void {\n\n        // get new resourceClassIrisForOntology\n        const newResourceClassesForOntology: ResourceClassIrisForOntology = ontologyInfo.getResourceClassForOntology();\n\n        // update new resourceClassIrisForOntology\n        // tslint:disable-next-line:forin\n        for (const newResClassForOntology in newResourceClassesForOntology) {\n            this.resourceClassesForOntology[newResClassForOntology] = newResourceClassesForOntology[newResClassForOntology];\n        }\n\n        // get new resource class definitions\n        const newResourceClasses = ontologyInfo.getResourceClasses();\n\n        // update resourceClasses\n        // tslint:disable-next-line:forin\n        for (const newResClass in newResourceClasses) {\n            this.resourceClasses[newResClass] = newResourceClasses[newResClass];\n        }\n\n        // get new property definitions\n        const newProperties = ontologyInfo.getProperties();\n\n        // update properties\n        // tslint:disable-next-line:forin\n        for (const newProp in newProperties) {\n            this.properties[newProp] = newProperties[newProp];\n        }\n\n    }\n\n    /**\n     * Returns resource class definitions for ontologies.\n     *\n     * @returns ResourceClassIrisForOntology - all resource class definitions grouped by ontologies.\n     */\n    getResourceClassForOntology(): ResourceClassIrisForOntology {\n        return this.resourceClassesForOntology;\n    }\n\n    /**\n     * Returns all resource classes as an object.\n     *\n     * @returns ResourceClasses - all resource class definitions as an object.\n     */\n    getResourceClasses(): ResourceClasses {\n        return this.resourceClasses;\n    }\n\n    /**\n     * Returns all resource classes as an array.\n     *\n     * @param {boolean} sortAsc sort resource classes by label in ascending order by default\n     * @returns ResourceClass[]\n     */\n    getResourceClassesAsArray(sortAsc: boolean = true): Array<ResourceClass> {\n\n        const resClasses: Array<ResourceClass> = [];\n\n        // tslint:disable-next-line:forin\n        for (const resClassIri in this.resourceClasses) {\n            const resClass: ResourceClass = this.resourceClasses[resClassIri];\n            resClasses.push(resClass);\n        }\n\n        // resourceClasses order by label in ascending order\n        resClasses.sort(OntologyInformation.sortFunc);\n\n        // resourceClasses order by label in descending order\n        if (!sortAsc) {\n            resClasses.reverse();\n        }\n\n        return resClasses;\n\n    }\n\n    /**\n     * Returns a resource class's label.\n     *\n     * @param {string} resClass resource class to query for.\n     * @returns string - the resource class's label.\n     */\n    getLabelForResourceClass(resClass: string): string {\n\n        if (resClass !== undefined) {\n\n            const resClassDef: ResourceClass = this.resourceClasses[resClass];\n\n            if (resClassDef !== undefined && resClassDef.label !== undefined) {\n                return resClassDef.label;\n            } else {\n                console.log(`cannot get label for ${resClass}`);\n            }\n        } else {\n            console.log('call of OntologyInformation.getLabelForResourceClass without argument resClass');\n        }\n    }\n\n    /**\n     * Returns all properties as an object.\n     *\n     * @returns Properties - all properties as an object.\n     */\n    getProperties(): Properties {\n        return this.properties;\n    }\n\n    /**\n     * Returns all properties as an array.\n     *\n     * @param {boolean} sortAsc sort properties by label in ascending order by default\n     * @returns Property[] - all properties as an array.\n     */\n    getPropertiesAsArray(sortAsc: boolean = true): Array<Property> {\n\n        const properties: Array<Property> = [];\n\n        // tslint:disable-next-line:forin\n        for (const propIri in this.properties) {\n            const prop: Property = this.properties[propIri];\n            properties.push(prop);\n        }\n\n        // properties order by label in ascending order\n        properties.sort(OntologyInformation.sortFunc);\n\n        // properties order by label in descending order\n        if (!sortAsc) {\n            properties.reverse();\n        }\n\n        return properties;\n\n    }\n\n    /**\n     * Returns a property's label.\n     *\n     * @param {string} property to query for.\n     * @returns string - the property's label.\n     */\n    getLabelForProperty(property: string): string {\n\n        if (property !== undefined) {\n\n            const propDef: Property = this.properties[property];\n\n            if (propDef !== undefined && propDef.label !== undefined) {\n                return propDef.label;\n            } else {\n                console.log(`cannot get label for ${property}`);\n            }\n        } else {\n            console.log('call of OntologyInformation.getLabelForProperty without argument property');\n        }\n    }\n\n}\n\n\n/**\n * Requests ontology information from Knora and caches it.\n * Other components or services obtain ontology information through this service.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class OntologyCacheService {\n\n    /**\n     * Ontologies ingored by this service.\n     * @param {string[]} excludedOntologies\n     */\n    private excludedOntologies: Array<string> = [KnoraConstants.SalsahGuiOntology, KnoraConstants.StandoffOntology];\n\n    /**\n     * @param {string[]} excludedProperties properties that Knora is not responsible for and that have to be ignored because they cannot be resolved at the moment.\n     */\n    private excludedProperties: Array<string> = [KnoraConstants.RdfsLabel];\n\n    /**\n     * @param {string[]} nonResourceClasses class definitions that are not be treated as Knora resource classes\n     */\n    private nonResourceClasses: Array<string> = [KnoraConstants.ForbiddenResource, KnoraConstants.XMLToStandoffMapping, KnoraConstants.ListNode];\n\n    /**\n     * @param {OntologyCache} cacheOntology central instance that caches all definitions\n     */\n    private cacheOntology: OntologyCache = new OntologyCache();\n\n    constructor(private _ontologyService: OntologyService) {\n    }\n\n    /**\n     * Requests the metadata of all ontologies from Knora.\n     *\n     * @returns Observable<object> - metadata for all ontologies as JSON-LD (no prefixes, all Iris fully expanded).\n     */\n    private getOntologiesMetadataFromKnora(): Observable<object> {\n\n        return this._ontologyService.getOntologiesMetadata().pipe(\n            mergeMap(\n                // this would return an Observable of a PromiseObservable -> combine them into one Observable\n                // http://reactivex.io/documentation/operators/flatmap.html\n                // http://reactivex.io/rxjs/class/es6/Observable.js~Observable.html#instance-method-mergeMap\n                (ontRes: ApiServiceResult) => {\n                    const ontPromises = jsonld.promises;\n                    // compact JSON-LD using an empty context: expands all Iris\n                    const ontPromise = ontPromises.compact(ontRes.body, {});\n\n                    // convert promise to Observable and return it\n                    // https://www.learnrxjs.io/operators/creation/frompromise.html\n                    return from(ontPromise);\n                }\n            )\n        );\n    }\n\n    /**\n     * Requests all entity definitions (resource classes and properties) for the given ontology from Knora.\n     *\n     * @param {string} ontologyIri the Iri of the requested ontology.\n     * @returns Observable<object> - metadata for all entity definitions for ontology from Knora.\n     */\n    private getAllEntityDefinitionsForOntologyFromKnora(ontologyIri: string): Observable<object> {\n\n        return this._ontologyService.getAllEntityDefinitionsForOntologies(ontologyIri).pipe(\n            mergeMap(\n                // this would return an Observable of a PromiseObservable -> combine them into one Observable\n                // http://reactivex.io/documentation/operators/flatmap.html\n                // http://reactivex.io/rxjs/class/es6/Observable.js~Observable.html#instance-method-mergeMap\n                (ontRes: ApiServiceResult) => {\n                    const ontPromises = jsonld.promises;\n                    // compact JSON-LD using an empty context: expands all Iris\n                    const ontPromise = ontPromises.compact(ontRes.body, {});\n\n                    // convert promise to Observable and return it\n                    // https://www.learnrxjs.io/operators/creation/frompromise.html\n                    return from(ontPromise);\n                }\n            )\n        );\n    }\n\n    /**\n     * Writes all the ontologies' metadata returned by Knora to the cache.\n     *\n     * @param {object[]} ontologies metadata of all existing ontologies as JSON-LD.\n     * @returns a new OntologyMetadata object\n     */\n    private convertAndWriteOntologiesMetadataToCache(ontologies: object[]) {\n\n        this.cacheOntology.ontologies = ontologies.map(\n            ontology => {\n                return new OntologyMetadata(ontology['@id'], ontology[KnoraConstants.RdfsLabel]);\n            }\n        );\n    }\n\n    /**\n     * Returns all ontologies' metadata from the cache and returns them.\n     *\n     * @returns Array<OntologyMetadata> - metadata of all existing ontologies.\n     */\n    private getAllOntologiesMetadataFromCache(): Array<OntologyMetadata> {\n\n        return this.cacheOntology.ontologies;\n\n    }\n\n    /**\n     * Returns resource class Iris from the ontology response.\n     * `knora-api:Resource` will be excluded.\n     *\n     * @param {Array<object>} classDefinitions the class definitions in an ontology response.\n     * @returns string[] - resource class Iris from the given class definitions.\n     */\n    private getResourceClassIrisFromOntologyResponse(classDefinitions: Array<object>): string[] {\n        const resourceClassIris: string[] = [];\n\n        for (const classDef of classDefinitions) {\n            const classIri = classDef['@id'];\n\n            // check that class name is not listed as a non resource class and that the isResourceClass flag is present and set to true\n            if (\n                classIri !== KnoraConstants.Resource && this.nonResourceClasses.indexOf(classIri)\n                === -1 && (classDef[KnoraConstants.IsResourceClass] !== undefined && classDef[KnoraConstants.IsResourceClass] === true)) {\n                // it is not a value class, but a resource class definition\n                resourceClassIris.push(classIri);\n            }\n        }\n\n        return resourceClassIris;\n    }\n\n    /**\n     * Converts a Knora response for all entity definitions for the requested ontology\n     * into an internal representation and caches it.\n     *\n     * Knora automatically includes the property definitions referred to in the cardinalities of resource classes.\n     * If they are defined in another ontology, that ontology is requested from Knora too.\n     *\n     * @param {Object} ontology the ontology to be cached.\n     * @returns void\n     */\n    private convertAndWriteAllEntityDefinitionsForOntologyToCache(ontology: object): void {\n\n        const graph = ontology['@graph'];\n\n        // get all class definitions\n        const classDefs = graph.filter(\n            (entity: Object) => {\n                const entityType = entity['@type'];\n                return entityType === KnoraConstants.OwlClass;\n            });\n\n        // get all property definitions\n        const propertyDefs = graph.filter(\n            (entity: Object) => {\n                const entityType = entity['@type'];\n                return entityType === KnoraConstants.OwlObjectProperty ||\n                    entityType === KnoraConstants.OwlDatatypeProperty ||\n                    entityType === KnoraConstants.OwlAnnotationProperty ||\n                    entityType === KnoraConstants.RdfProperty;\n            });\n\n\n        // cache all resource class Iris belonging to the current ontology\n        this.cacheOntology.resourceClassIrisForOntology[ontology['@id']] = this.getResourceClassIrisFromOntologyResponse(classDefs);\n\n        // write class and property defintions to cache\n        this.convertAndWriteEntityDefinitionsToCache(classDefs, propertyDefs);\n\n    }\n\n    /**\n     * Returns definitions for the requested ontologies from the cache.\n     *\n     * @param {string[]} ontologyIris the ontologies for which definitions should be returned.\n     * @returns Observable<OntologyInformation> - the definitions for the requested ontologies.\n     */\n    private getOntologyInformationFromCache(ontologyIris: string[]): Observable<OntologyInformation> {\n\n        const resourceClassesForOntology = new ResourceClassIrisForOntology();\n\n        // collect resource class Iris for all requested named graphs\n        let allResourceClassIris = [];\n\n        for (const ontologyIri of ontologyIris) {\n\n            if (this.cacheOntology.resourceClassIrisForOntology[ontologyIri] === undefined) {\n                throw new OntologyCacheError(`getResourceClassesForOntologiesFromCache: ontology not found in cache: ${ontologyIri}`);\n            }\n\n            // add information for the given ontology\n            resourceClassesForOntology[ontologyIri] = this.cacheOntology.resourceClassIrisForOntology[ontologyIri];\n\n            // add all resource class Iris of this ontology\n            allResourceClassIris = allResourceClassIris.concat(this.cacheOntology.resourceClassIrisForOntology[ontologyIri]);\n        }\n\n        // get resource class definitions for all requested ontologies\n        return this.getResourceClassDefinitions(allResourceClassIris).pipe(\n            map(\n                resClassDefs => {\n                    return new OntologyInformation(\n                        resourceClassesForOntology, resClassDefs.getResourceClasses(), resClassDefs.getProperties()\n                    );\n                }\n            )\n        );\n\n    }\n\n    /**\n     * Converts a Knora ontology response into an internal representation and caches it.\n     *\n     * @param {object[]} resourceClassDefinitions the resource class definitions returned by Knora.\n     * @param {object[]} propertyClassDefinitions the property definitions returned by Knora.\n     * @returns void\n     */\n    private convertAndWriteEntityDefinitionsToCache(resourceClassDefinitions: Array<object>, propertyClassDefinitions: Array<object>): void {\n\n        // convert and cache each given resource class definition\n        for (const resClass of resourceClassDefinitions) {\n\n            const resClassIri = resClass['@id'];\n\n            // represents all cardinalities of this resource class\n            const cardinalities: Cardinality[] = [];\n            const guiOrder: GuiOrder[] = [];\n\n            if (resClass[KnoraConstants.RdfsSubclassOf] !== undefined) {\n\n                let subclassOfCollection;\n\n                // check if it is a single object or a collection\n                if (!Array.isArray(resClass[KnoraConstants.RdfsSubclassOf])) {\n                    subclassOfCollection = [resClass[KnoraConstants.RdfsSubclassOf]];\n                } else {\n                    subclassOfCollection = resClass[KnoraConstants.RdfsSubclassOf];\n                }\n\n\n\n                // get cardinalities for the properties of a resource class\n                for (const curCard of subclassOfCollection) {\n\n\n\n                    // make sure it is a cardinality (it could also be an Iri of a superclass)\n                    if (curCard instanceof Object && curCard['@type'] !== undefined && curCard['@type'] === KnoraConstants.OwlRestriction) {\n\n                        let newCard;\n\n                        // get occurrence\n                        if (curCard[KnoraConstants.OwlMinCardinality] !== undefined) {\n                            newCard = new Cardinality(CardinalityOccurrence.minCard, curCard[KnoraConstants.OwlMinCardinality], curCard[KnoraConstants.OwlOnProperty]['@id']);\n                        } else if (curCard[KnoraConstants.OwlCardinality] !== undefined) {\n                            newCard = new Cardinality(CardinalityOccurrence.card, curCard[KnoraConstants.OwlCardinality], curCard[KnoraConstants.OwlOnProperty]['@id']);\n                        } else if (curCard[KnoraConstants.OwlMaxCardinality] !== undefined) {\n                            newCard = new Cardinality(CardinalityOccurrence.maxCard, curCard[KnoraConstants.OwlMaxCardinality], curCard[KnoraConstants.OwlOnProperty]['@id']);\n                        } else {\n                            // no known occurrence found\n                            throw new TypeError(`cardinality type invalid for ${resClass['@id']} ${curCard[KnoraConstants.OwlOnProperty]}`);\n                        }\n\n                        // add cardinality\n                        cardinalities.push(newCard);\n\n                        // get gui order\n                        let newGuiOrder;\n                        if (curCard[KnoraConstants.SalsahGuiOrder] !== undefined) {\n                            newGuiOrder = new GuiOrder(curCard[KnoraConstants.SalsahGuiOrder], curCard[KnoraConstants.OwlOnProperty]['@id']);\n                            // add gui order\n                            guiOrder.push(newGuiOrder);\n                        }\n\n\n\n                    }\n\n                }\n            }\n\n            const resClassObj = new ResourceClass(\n                resClassIri,\n                resClass[KnoraConstants.ResourceIcon],\n                resClass[KnoraConstants.RdfsComment],\n                resClass[KnoraConstants.RdfsLabel],\n                cardinalities,\n                guiOrder\n            );\n\n            // write this resource class definition to the cache object\n            this.cacheOntology.resourceClasses[resClassIri] = resClassObj;\n        }\n\n        // cache the property definitions\n        this.convertAndWriteKnoraPropertyDefinitionsToOntologyCache(propertyClassDefinitions);\n    }\n\n    /**\n     * Gets information about resource classes from the cache.\n     * The answer includes the property definitions referred to by the cardinalities of the given resource classes.\n     *\n     * @param {string[]} resClassIris the given resource class Iris\n     * @returns Observable<OntologyInformation> - an [[OntologyCache]] representing the requested resource classes.\n     */\n    private getResourceClassDefinitionsFromCache(resClassIris: string[]): Observable<OntologyInformation> {\n        // collect the definitions for each resource class from the cache\n\n        const resClassDefs = new ResourceClasses();\n\n        // collect the properties from the cardinalities of the given resource classes\n        const propertyIris = [];\n\n        resClassIris.forEach(\n            resClassIri => {\n                resClassDefs[resClassIri] = this.cacheOntology.resourceClasses[resClassIri];\n\n                this.cacheOntology.resourceClasses[resClassIri].cardinalities.forEach(\n                    card => {\n                        // get property definition for each cardinality\n                        propertyIris.push(card.property);\n                    }\n                );\n            });\n\n        return this.getPropertyDefinitions(propertyIris).pipe(\n            map(\n                propDefs => {\n                    return new OntologyInformation(new ResourceClassIrisForOntology(), resClassDefs, propDefs.getProperties());\n                }\n            )\n        );\n\n    }\n\n    /**\n     * Converts a Knora response for ontology information about properties\n     * into an internal representation and cache it.\n     *\n     * @param {object[]} propertyDefinitionsFromKnora the property definitions returned by Knora\n     * @returns void\n     */\n    private convertAndWriteKnoraPropertyDefinitionsToOntologyCache(propertyDefinitionsFromKnora: Array<object>): void {\n\n        // convert and cache each given property definition\n        for (const propDef of propertyDefinitionsFromKnora) {\n\n            const propIri = propDef['@id'];\n\n            let isEditable = false;\n            if (propDef[KnoraConstants.isEditable] !== undefined && propDef[KnoraConstants.isEditable] === true) {\n                isEditable = true;\n            }\n\n            let isLinkProperty = false;\n            if (propDef[KnoraConstants.isLinkProperty] !== undefined && propDef[KnoraConstants.isLinkProperty] === true) {\n                isLinkProperty = true;\n            }\n\n            let isLinkValueProperty = false;\n            if (propDef[KnoraConstants.isLinkValueProperty] !== undefined && propDef[KnoraConstants.isLinkValueProperty] === true) {\n                isLinkValueProperty = true;\n            }\n\n            let subPropertyOf = [];\n            if (propDef[KnoraConstants.subPropertyOf] !== undefined && Array.isArray(propDef[KnoraConstants.subPropertyOf])) {\n                subPropertyOf = propDef[KnoraConstants.subPropertyOf].map((superProp: Object) => superProp['@id']);\n            } else if (propDef[KnoraConstants.subPropertyOf] !== undefined) {\n                subPropertyOf.push(propDef[KnoraConstants.subPropertyOf]['@id']);\n            }\n\n            let objectType;\n            if (propDef[KnoraConstants.ObjectType] !== undefined) {\n                objectType = propDef[KnoraConstants.ObjectType]['@id'];\n            }\n\n            const guiAttribute = [];\n            if (propDef[KnoraConstants.SalsahGuiAttribute] !== undefined) {\n                if (Array.isArray(propDef[KnoraConstants.SalsahGuiAttribute])) {\n                    for (const attr of propDef[KnoraConstants.SalsahGuiAttribute]) {\n                        guiAttribute.push(attr);\n                    }\n                } else {\n                    guiAttribute.push(propDef[KnoraConstants.SalsahGuiAttribute]);\n                }\n            }\n\n            // cache property definition\n            this.cacheOntology.properties[propIri] = new Property(\n                propIri,\n                objectType,\n                propDef[KnoraConstants.RdfsComment],\n                propDef[KnoraConstants.RdfsLabel],\n                subPropertyOf,\n                isEditable,\n                isLinkProperty,\n                isLinkValueProperty,\n                guiAttribute\n            );\n\n        }\n\n    }\n\n    /**\n     * Returns property definitions from the cache.\n     *\n     * @param {string[]} propertyIris the property definitions to be returned.\n     * @returns OntologyInformation - requested property defintions.\n     */\n    private getPropertyDefinitionsFromCache(propertyIris: string[]): OntologyInformation {\n\n        const propertyDefs = new Properties();\n\n        propertyIris.forEach(\n            propIri => {\n                // ignore non Knora props: if propIri is contained in excludedProperties, skip this propIri\n                if (this.excludedProperties.indexOf(propIri) > -1) {\n                    return;\n                }\n\n                if (this.cacheOntology.properties[propIri] === undefined) {\n                    throw new OntologyCacheError(`getPropertyDefinitionsFromCache: property not found in cache: ${propIri}`);\n                }\n\n                propertyDefs[propIri] = this.cacheOntology.properties[propIri];\n            }\n        );\n\n        return new OntologyInformation(new ResourceClassIrisForOntology(), new ResourceClasses(), propertyDefs);\n\n    }\n\n    /**\n     * Returns metadata about all ontologies.\n     *\n     * @returns Observable<Array<OntologyMetadata>> - metadata about all ontologies.\n     */\n    public getOntologiesMetadata(): Observable<Array<OntologyMetadata>> {\n\n        if (this.cacheOntology.ontologies.length === 0) {\n            // nothing in cache yet, get metadata from Knora\n            return this.getOntologiesMetadataFromKnora().pipe(\n                map(\n                    metadata => {\n                        this.convertAndWriteOntologiesMetadataToCache(metadata['@graph'].filter((onto) => {\n                            // ignore excluded ontologies\n                            return this.excludedOntologies.indexOf(onto['@id']) === -1;\n                        }));\n                        return this.getAllOntologiesMetadataFromCache();\n                    }\n                )\n            );\n        } else {\n            // return metadata from cache\n            return of(this.getAllOntologiesMetadataFromCache());\n        }\n\n    }\n\n\n    /**\n     * Requests the requested ontologies from Knora, adding them to the cache.\n     *\n     * @param {string[]} ontologyIris Iris of the ontologies to be requested.\n     * @returns Observable<any[]>\n     */\n    private getAndCacheOntologies(ontologyIris: string[]): Observable<any[]> {\n\n        // array to be populated with Observables\n        const observables = [];\n\n        // do a request for each ontology\n        ontologyIris.forEach(ontologyIri => {\n            // push an Observable onto `observables`\n            observables.push(this.getAllEntityDefinitionsForOntologyFromKnora(ontologyIri).pipe(\n                map(\n                    (ontology: object) => {\n                        // write response to cache\n                        this.convertAndWriteAllEntityDefinitionsForOntologyToCache(ontology);\n                    }\n                )\n            ));\n        });\n\n        // forkJoin returns an Observable of an array of results\n        // returned by each Observable contained in `observables`\n        // a subscription to the Observable returned by forkJoin is executed\n        // once all Observables have been completed\n        return forkJoin(observables);\n    }\n\n\n    /**\n     * Returns the entity definitions for the requested ontologies.\n     *\n     * @param {string[]} ontologyIris Iris of the ontologies to be queried.\n     * @returns Observable<OntologyInformation> - all ontology metadata from the cache\n     */\n    public getEntityDefinitionsForOntologies(ontologyIris: string[]): Observable<OntologyInformation> {\n\n        const ontologyIrisToQuery = ontologyIris.filter(\n            ontologyIri => {\n                // return the ontology Iris that are not cached yet\n                return this.cacheOntology.resourceClassIrisForOntology[ontologyIri] === undefined;\n            });\n\n        // get ontologies that are mot cached yet\n        if (ontologyIrisToQuery.length > 0) {\n\n            return this.getAndCacheOntologies(ontologyIrisToQuery).pipe(\n                mergeMap(\n                    () => {\n                        // executed once all ontologies have been cached\n                        return this.getOntologyInformationFromCache(ontologyIris);\n                    }\n                )\n            );\n        } else {\n\n            return this.getOntologyInformationFromCache(ontologyIris);\n        }\n\n    }\n\n    /**\n     * Returns the definitions for the given resource class Iris.\n     * If the definitions are not already in the cache, the will be retrieved from Knora and cached.\n     *\n     * Properties contained in the cardinalities will be returned too.\n     *\n     * @param {string[]} resourceClassIris the given resource class Iris\n     * @returns Observable<OntologyInformation> - the requested resource classes (including properties).\n     */\n    public getResourceClassDefinitions(resourceClassIris: string[]): Observable<OntologyInformation> {\n\n        const resClassIrisToQueryFor: string[] = resourceClassIris.filter(\n            resClassIri => {\n\n                // return the resource class Iris that are not cached yet\n                return this.cacheOntology.resourceClasses[resClassIri] === undefined;\n\n            });\n\n        if (resClassIrisToQueryFor.length > 0) {\n\n            // get a set of ontology Iris that have to be queried to obtain the missing resource classes\n            const ontologyIris: string[] = resClassIrisToQueryFor.map(\n                resClassIri => {\n                    return Utils.getOntologyIriFromEntityIri(resClassIri);\n                }\n            ).filter(Utils.filterOutDuplicates);\n\n            // obtain missing resource class information\n            return this.getAndCacheOntologies(ontologyIris).pipe(\n                mergeMap(\n                    () => {\n\n                        return this.getResourceClassDefinitionsFromCache(resourceClassIris);\n                    }\n                )\n            );\n        } else {\n\n            return this.getResourceClassDefinitionsFromCache(resourceClassIris);\n\n        }\n    }\n\n    /**\n     * Get definitions for the given property Iris.\n     * If the definitions are not already in the cache, the will be retrieved from Knora and cached.\n     *\n     * @param {string[]} propertyIris the Iris of the properties to be returned .\n     * @returns Observable<OntologyInformation> - the requested property definitions.\n     */\n    public getPropertyDefinitions(propertyIris: string[]): Observable<OntologyInformation> {\n\n        const propertiesToQuery: string[] = propertyIris.filter(\n            propIri => {\n\n                // ignore non Knora props: if propIri is contained in excludedProperties, skip this propIri\n                if (this.excludedProperties.indexOf(propIri) > -1) {\n                    return false;\n                }\n\n                // return the property Iris that are not cached yet\n                return this.cacheOntology.properties[propIri] === undefined;\n            }\n        );\n\n        if (propertiesToQuery.length > 0) {\n\n            // get a set of ontology Iris that have to be queried to obtain the missing properties\n            const ontologyIris: string[] = propertiesToQuery.map(\n                propIri => {\n                    return Utils.getOntologyIriFromEntityIri(propIri);\n                }\n            ).filter(Utils.filterOutDuplicates);\n\n            // obtain missing resource class information\n            return this.getAndCacheOntologies(ontologyIris).pipe(\n                map(\n                    results => {\n                        if (results) {\n                            return this.getPropertyDefinitionsFromCache(propertyIris);\n                        } else {\n                            throw new Error('Problem with: return this.getPropertyDefinitionsFromCache(propertyIris);');\n                        }\n                    }\n                )\n            );\n        } else {\n            return of(this.getPropertyDefinitionsFromCache(propertyIris));\n        }\n    }\n\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\n\n@JsonObject('AuthenticationResponse')\nexport class AuthenticationResponse {\n\n    @JsonProperty('token', String)\n    public token: string = undefined;\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { StringLiteral } from '../../shared/strings';\n\n\n@JsonObject('Project')\nexport class Project {\n\n    @JsonProperty('id', String)\n    public id: string = undefined;\n\n    @JsonProperty('shortname', String)\n    public shortname: string = undefined;\n\n    @JsonProperty('shortcode', String, true)\n    public shortcode: string = undefined;\n\n    @JsonProperty('longname', String, true)\n    public longname: string = undefined;\n\n    @JsonProperty('description', [StringLiteral], true)\n    public description: StringLiteral[] = [new StringLiteral()];\n\n    @JsonProperty('keywords', [String], true)\n    public keywords: string[] = undefined;\n\n    @JsonProperty('logo', String, true)\n    public logo: string = undefined;\n\n    @JsonProperty('institution', String, true)\n    public institution: string = undefined;\n\n    @JsonProperty('ontologies', [String])\n    public ontologies: string[] = undefined;\n\n    @JsonProperty('status', Boolean)\n    public status: boolean = undefined;\n\n    @JsonProperty('selfjoin', Boolean)\n    public selfjoin: boolean = undefined;\n\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { Project } from '../projects/project';\n\n@JsonObject('Group')\nexport class Group {\n\n    @JsonProperty('id', String)\n    public id: string = undefined;\n\n    @JsonProperty('name', String)\n    public name: string = undefined;\n\n    @JsonProperty('description', String)\n    public description: string = undefined;\n\n    @JsonProperty('project', Project, false)\n    public project: Project = undefined;\n\n    @JsonProperty('status', Boolean)\n    public status: boolean = undefined;\n\n    @JsonProperty('selfjoin', Boolean)\n    public selfjoin: boolean = undefined;\n\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { Group } from './group';\n\n@JsonObject('GroupResponse')\nexport class GroupResponse {\n\n    @JsonProperty('group', Group)\n    public group: Group = undefined;\n\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { Group } from './group';\n\n@JsonObject('GroupsResponse')\nexport class GroupsResponse {\n\n    @JsonProperty('groups', [Group])\n    public groups: Group[] = undefined;\n\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { StringLiteral } from '../../shared/strings';\n\n@JsonObject('ListInfo')\nexport class ListInfo {\n\n    @JsonProperty('id', String, false)\n    public id: string = undefined;\n\n    @JsonProperty('projectIri', String, false)\n    public projectIri: string = undefined;\n\n    @JsonProperty('labels', [StringLiteral], true)\n    public labels: StringLiteral[] = undefined;\n\n    @JsonProperty('comments', [StringLiteral], true)\n    public comments: StringLiteral[] = undefined;\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\n\n@JsonObject('ListNode')\nexport class ListNode {\n    @JsonProperty('id', String, false)\n    public id: string = undefined;\n\n    @JsonProperty('name', String, true)\n    public name: string = undefined;\n\n    @JsonProperty('label', String, true)\n    public label: string = undefined;\n\n    @JsonProperty('children', [ListNode], true)\n    public children: ListNode[] = undefined;\n\n    @JsonProperty('level', Number, true)\n    public level: number = undefined;\n\n    @JsonProperty('position', Number, true)\n    public position: number = undefined;\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { ListInfo } from './list-info';\nimport { ListNode } from './list-node';\n\n@JsonObject('List')\nexport class List {\n\n    @JsonProperty('listinfo', ListInfo, false)\n    public listinfo: ListInfo = undefined;\n\n    @JsonProperty('children', [ListNode], false)\n    public children: ListNode[] = undefined;\n}\n\n\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { ListInfo } from './list-info';\n\n@JsonObject('ListInfoResponse')\nexport class ListInfoResponse {\n\n    @JsonProperty('listinfo', ListInfo, false)\n    public listinfo: ListInfo = undefined;\n}\n\n\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { StringLiteral } from '../../shared/strings';\n\n@JsonObject('ListNodeInfo')\nexport class ListNodeInfo {\n\n    @JsonProperty('id', String)\n    public id: string = undefined;\n\n    @JsonProperty('name', String, true)\n    public name: string = undefined;\n\n    @JsonProperty('projectIri', String, true)\n    public projectIri: string = undefined;\n\n    @JsonProperty('isRootNode', Boolean, true)\n    public isRootNode: boolean = undefined;\n\n    @JsonProperty('labels', [StringLiteral])\n    public labels: StringLiteral[] = undefined;\n\n    @JsonProperty('comments', [StringLiteral])\n    public comments: StringLiteral[] = undefined;\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { ListNodeInfo } from './list-node-info';\n\n@JsonObject('ListNodeInfoResponse')\nexport class ListNodeInfoResponse {\n\n    @JsonProperty('nodeinfo', ListNodeInfo, false)\n    public nodeinfo: ListNodeInfo = undefined;\n}\n\n\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { List } from './list';\n\n@JsonObject('ListResponse')\nexport class ListResponse {\n\n    @JsonProperty('list', List, false)\n    public list: List = undefined;\n}\n\n\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { ListNodeInfo } from './list-node-info';\n\n@JsonObject('ListsResponse')\nexport class ListsResponse {\n\n    @JsonProperty('lists', [ListNodeInfo], false)\n    public lists: ListNodeInfo[] = undefined;\n}\n\n\n","import { JsonObject, JsonProperty } from 'json2typescript';\n\n@JsonObject('OntologyInfoShort')\nexport class OntologyInfoShort {\n\n    @JsonProperty('ontologyIri', String)\n    public ontologyIri: string = undefined;\n\n    @JsonProperty('ontologyName', String)\n    public ontologyName: string = undefined;\n\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\n\n@JsonObject('PermissionData')\nexport class PermissionData {\n\n    @JsonProperty('groupsPerProject', Object)\n    public groupsPerProject: any = undefined;\n\n    @JsonProperty('administrativePermissionsPerProject', Object)\n    public administrativePermissionsPerProject: any = undefined;\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { Group } from '../groups/group';\nimport { PermissionData } from '../permissions/permission-data';\nimport { Project } from '../projects/project';\n\n@JsonObject('User')\nexport class User {\n\n    @JsonProperty('id', String)\n    public id: string = undefined;\n\n    @JsonProperty('email', String)\n    public email: string = undefined;\n\n    @JsonProperty('username', String)\n    public username: string = undefined;\n\n    @JsonProperty('password', String, true)\n    public password: string = undefined;\n\n    @JsonProperty('token', String, true)\n    public token: string = undefined;\n\n    @JsonProperty('givenName', String)\n    public givenName: string = undefined;\n\n    @JsonProperty('familyName', String)\n    public familyName: string = undefined;\n\n    @JsonProperty('status', Boolean)\n    public status: boolean = undefined;\n\n    @JsonProperty('lang', String)\n    public lang: string = undefined;\n\n    @JsonProperty('groups', [Group])\n    public groups: Group[] = undefined;\n\n    @JsonProperty('projects', [Project])\n    public projects: Project[] = undefined;\n\n    @JsonProperty('sessionId', String, true)\n    public sessionId: string = undefined;\n\n    @JsonProperty('permissions', PermissionData)\n    public permissions: PermissionData = undefined;\n\n    @JsonProperty('systemAdmin', Boolean, true)\n    public systemAdmin?: boolean = false;\n\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { User } from '../users/user';\n\n@JsonObject('ProjectMembersResponse')\nexport class ProjectMembersResponse {\n    @JsonProperty('members', [User])\n    public members: User[] = undefined;\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { Project } from './project';\n\n\n@JsonObject('ProjectResponse')\nexport class ProjectResponse {\n\n    @JsonProperty('project', Project)\n    public project: Project = undefined;\n\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { Project } from './project';\n\n@JsonObject('ProjectsResponse')\nexport class ProjectsResponse {\n\n    @JsonProperty('projects', [Project])\n    public projects: Project[] = undefined;\n\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { User } from './user';\n\n@JsonObject('UsersResponse')\nexport class UsersResponse {\n\n    @JsonProperty('users', [User])\n    public users: User[] = undefined;\n\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { User } from './user';\n\n@JsonObject('UserResponse')\nexport class UserResponse {\n\n    @JsonProperty('user', User)\n    public user: User = undefined;\n}\n","import { ReadResource } from '../resources/read-resource';\nimport { OntologyInformation } from '../../../../services';\nimport { KnoraConstants } from '../../knora-constants';\nimport { DateRangeSalsah, DateSalsah } from '../../shared/date';\n\n/**\n * An abstract interface representing any value object.\n */\nexport interface ReadPropertyItem {\n\n    /**\n     * The value object's Iri.\n     */\n    readonly id: string;\n\n    /**\n     * The value object's type.\n     */\n    readonly type: string;\n\n    /**\n     * The property pointing to the value object.\n     */\n    readonly propIri: string;\n\n    /**\n     * Gets the class name of the class that implements this interface.\n     *\n     * @returns {string}\n     */\n    getClassName(): string;\n\n    /**\n     * Gets the value as a string (complexity of the value possibly reduced).\n     *\n     * @returns {string}\n     */\n    getContent(): string;\n}\n\n/**\n * Abstract class representing a text value object with or without markup.\n */\nexport abstract class ReadTextValue implements ReadPropertyItem {\n\n    abstract id: string;\n\n    readonly type: string = KnoraConstants.TextValue;\n\n    abstract propIri: string;\n\n    abstract getClassName(): string;\n\n    abstract getContent(): string;\n}\n\n/**\n * Represents a text value object without markup (mere character string).\n */\nexport class ReadTextValueAsString extends ReadTextValue {\n\n    constructor (readonly id: string, readonly propIri: string, public str: string) {\n        super();\n    }\n\n    getClassName(): string {\n        return KnoraConstants.ReadTextValueAsString;\n    }\n\n    getContent() {\n        return this.str;\n    }\n}\n\n/**\n * Represents resources referred to by standoff links.\n */\nexport class ReferredResourcesByStandoffLink {\n    [index: string]: ReadResource;\n}\n\n/**\n * Represents a text value object with markup that has been turned into HTML.\n */\nexport class ReadTextValueAsHtml extends ReadTextValue {\n\n    constructor (readonly id: string, readonly propIri: string, readonly html: string, readonly referredResources: ReferredResourcesByStandoffLink) {\n        super();\n    }\n\n    /**\n     * Gets information about a resource referred to by a standoff link from a text value.\n     *\n     * @param {string} resourceIri the Iri of the referred resource.\n     * @param {OntologyInformation} ontologyInfo ontology information.\n     * @returns {string} information about the referred resource's class and its label.\n     */\n\n\n    getReferredResourceInfo(resourceIri: string, ontologyInfo: OntologyInformation) {\n        if (this.referredResources !== undefined && this.referredResources[resourceIri] !== undefined) {\n\n            const resClassLabel = ontologyInfo.getLabelForResourceClass(this.referredResources[resourceIri].type);\n\n            return this.referredResources[resourceIri].label + ` (${resClassLabel})`;\n        } else {\n            return 'no information found about referred resource (target of standoff link)';\n        }\n    }\n\n\n    getClassName(): string {\n        return KnoraConstants.ReadTextValueAsHtml;\n    }\n\n    getContent() {\n        return this.html;\n    }\n\n}\n\n/**\n * Represents a text value object with markup as XML.\n */\nexport class ReadTextValueAsXml extends ReadTextValue {\n\n    constructor (readonly id: string, readonly propIri: string, readonly xml: string, readonly mappingIri: string) {\n        super();\n    }\n\n    getClassName(): string {\n        return KnoraConstants.ReadTextValueAsXml;\n    }\n\n    getContent() {\n        return this.xml;\n    }\n\n}\n\n\n/**\n * Represents a date value object.\n */\nexport class ReadDateValue implements ReadPropertyItem {\n\n    constructor (\n        readonly id: string,\n        readonly propIri: string,\n        readonly calendar: string,\n        readonly startYear: number,\n        readonly endYear: number,\n        readonly startEra: string,\n        readonly endEra: string,\n        readonly startMonth?: number,\n        readonly endMonth?: number,\n        readonly startDay?: number,\n        readonly endDay?: number) {\n    }\n\n    readonly type = KnoraConstants.DateValue;\n\n    private separator = '/';\n\n    getDateSalsah(): DateSalsah | DateRangeSalsah {\n        if (this.startYear === this.endYear && this.startMonth === this.endMonth && this.startDay === this.endDay && this.startEra === this.endEra) {\n            // precise date\n            return new DateSalsah(this.calendar, this.startEra, this.startYear, this.startMonth, this.startDay);\n        } else {\n            // date period\n            return new DateRangeSalsah(new DateSalsah(this.calendar, this.startEra, this.startYear, this.startMonth, this.startDay), new DateSalsah(this.calendar, this.endEra, this.endYear, this.endMonth, this.endDay));\n        }\n\n    }\n\n    getClassName(): string {\n        return KnoraConstants.ReadDateValue;\n    }\n\n    getContent() {\n        return this.getDateSalsah().getDateAsString();\n    }\n}\n\n/**\n * Represents a link value object (reification).\n */\nexport class ReadLinkValue implements ReadPropertyItem {\n\n    constructor (readonly id: string, readonly propIri: string, readonly referredResourceIri: string, readonly referredResource?: ReadResource) {\n\n    }\n\n    readonly type = KnoraConstants.LinkValue;\n\n    getReferredResourceInfo(ontologyInfo: OntologyInformation) {\n        if (this.referredResource !== undefined) {\n\n            const resClassLabel = ontologyInfo.getLabelForResourceClass(this.referredResource.type);\n\n            return this.referredResource.label + ` (${resClassLabel})`;\n        } else {\n            return this.referredResourceIri;\n        }\n    }\n\n    getClassName(): string {\n        return KnoraConstants.ReadLinkValue;\n    }\n\n    getContent() {\n        if (this.referredResource !== undefined) {\n            return this.referredResource.label;\n        } else {\n            return this.referredResourceIri;\n        }\n    }\n}\n\n/**\n * Represents an integer value object.\n */\nexport class ReadIntegerValue implements ReadPropertyItem {\n\n    constructor (readonly id: string, readonly propIri: string, readonly integer: number) {\n\n    }\n\n    readonly type = KnoraConstants.IntValue;\n\n    getClassName(): string {\n        return KnoraConstants.ReadIntegerValue;\n    }\n\n    getContent() {\n        return this.integer.toString();\n    }\n\n}\n\n/**\n * Represents a decimal value object.\n */\nexport class ReadDecimalValue implements ReadPropertyItem {\n\n    constructor (readonly id: string, readonly propIri: string, readonly decimal: number) {\n\n    }\n\n    readonly type = KnoraConstants.DecimalValue;\n\n    getClassName(): string {\n        return KnoraConstants.ReadDecimalValue;\n    }\n\n    getContent() {\n        return this.decimal.toString();\n    }\n}\n\n\n/**\n * Abstract class for file representations like stillImage, movingImage, audio etc.\n */\nexport abstract class FileValue implements ReadPropertyItem {\n\n    abstract id: string;\n\n    readonly type: string;\n\n    abstract propIri: string;\n\n    // abstract typeSpecificProps: any;\n\n    abstract getClassName(): string;\n\n    abstract getContent(): string;\n}\n\n/**\n * Represents a still image value object.\n */\nexport class ReadStillImageFileValue extends FileValue {\n\n    constructor (\n        readonly id: string,\n        readonly propIri: string,\n        readonly imageFilename: string,\n        readonly imageServerIIIFBaseURL: string,\n        readonly imagePath: string,\n        readonly dimX: number,\n        readonly dimY: number) {\n        super();\n\n        // if the image is a jpeg, it is a preview image\n        this.isPreview = imageFilename.endsWith('.jpg');\n\n    }\n\n    readonly type = KnoraConstants.StillImageFileValue;\n\n    readonly isPreview: boolean;\n\n    makeIIIFUrl(reduceFactor: number): string {\n\n        if (this.isPreview) {\n            return this.imagePath;\n        } else {\n            let percentage = Math.floor(100 / reduceFactor);\n\n            percentage = (percentage > 0 && percentage <= 100) ? percentage : 50;\n\n            return this.imageServerIIIFBaseURL + '/' + this.imageFilename + '/full/pct:' + percentage.toString() + '/0/default.jpg';\n        }\n\n    }\n\n    getClassName(): string {\n        return KnoraConstants.ReadStillImageFileValue;\n    }\n\n    getContent() {\n        return this.imagePath;\n    }\n}\n\n/**\n * Represents a moving image value object.\n */\nexport class ReadMovingImageFileValue extends FileValue {\n\n    constructor (\n        readonly id: string,\n        readonly propIri: string,\n        readonly filename: string,\n        readonly path: string,\n        readonly dimX: number,\n        readonly dimY: number,\n        readonly duration: number,\n        readonly fps?: number) {\n        super();\n    }\n\n    readonly type = KnoraConstants.MovingImageFileValue;\n\n    // preview doesn't include the video file itself\n    readonly isPreview: boolean;\n\n    getClassName(): string {\n        return KnoraConstants.ReadMovingImageFileValue;\n    }\n\n    getContent() {\n        return this.path;\n    }\n}\n\n/**\n * Represents an audio value object.\n */\nexport class ReadAudioFileValue extends FileValue {\n\n    constructor (\n        readonly id: string,\n        readonly propIri: string,\n        readonly filename: string,\n        readonly path: string,\n        readonly duration: number) {\n        super();\n    }\n\n    readonly type = KnoraConstants.AudioFileValue;\n\n    getClassName(): string {\n        return KnoraConstants.ReadAudioFileValue;\n    }\n\n    getContent() {\n        return this.path;\n    }\n}\n\n/**\n * Represents a DDD value object.\n */\nexport class ReadDDDFileValue extends FileValue {\n\n    constructor (\n        readonly id: string,\n        readonly propIri: string,\n        readonly filename: string,\n        readonly path: string) {\n        super();\n    }\n\n    readonly type = KnoraConstants.DDDFileValue;\n\n    // preview doesn't include the DDD file itself\n    readonly isPreview: boolean;\n\n    getClassName(): string {\n        return KnoraConstants.ReadDDDFileValue;\n    }\n\n    getContent() {\n        return this.path;\n    }\n}\n\n/**\n * Represents a Document value object.\n */\nexport class ReadDocumentFileValue extends FileValue {\n\n    constructor (\n        readonly id: string,\n        readonly propIri: string,\n        readonly filename: string,\n        readonly path: string) {\n        super();\n    }\n\n    readonly type = KnoraConstants.DocumentFileValue;\n\n    // preview doesn't include the DDD file itself\n    readonly isPreview: boolean;\n\n    getClassName(): string {\n        return KnoraConstants.ReadDocumentFileValue;\n    }\n\n    getContent() {\n        return this.path;\n    }\n}\n\n/**\n * Represents a text representation value object\n */\nexport class ReadTextFileValue implements ReadPropertyItem {\n\n    constructor (readonly id: string, readonly propIri: string, readonly textFilename: string, readonly textFileURL: string) {\n\n    }\n\n    readonly type = KnoraConstants.TextFileValue;\n\n    getClassName(): string {\n        return KnoraConstants.ReadTextFileValue;\n    }\n\n    getContent() {\n        return this.textFileURL;\n    }\n\n}\n\n/**\n * Represents a color value object.\n */\nexport class ReadColorValue implements ReadPropertyItem {\n\n    constructor (readonly id: string,\n        readonly propIri: string,\n        readonly colorHex: string) {\n    }\n\n    readonly type = KnoraConstants.ColorValue;\n\n    getClassName(): string {\n        return KnoraConstants.ReadColorValue;\n    }\n\n    getContent() {\n        return this.colorHex;\n    }\n}\n\n/**\n * Represents a point in a 2D-coordinate system (for geometry values).\n */\nexport class Point2D {\n    constructor (public x: number, public y: number) {\n    }\n}\n\n/**\n * Represents a geometry value parsed from JSON.\n */\nexport class RegionGeometry {\n    constructor (public status: string,\n        public lineColor: string,\n        public lineWidth: number,\n        public points: Point2D[],\n        public type: string,\n        public radius?: Point2D\n    ) {\n    }\n}\n\n/**\n * Represents a geometry value object.\n */\nexport class ReadGeomValue implements ReadPropertyItem {\n\n    constructor (readonly id: string, readonly propIri: string, readonly geometryString: string) {\n\n        const geometryJSON = JSON.parse(geometryString);\n\n        const points: Point2D[] = [];\n        for (const point of geometryJSON.points) {\n            points.push(new Point2D(point.x, point.y));\n        }\n\n        let radius;\n        if (geometryJSON.radius) {\n            radius = new Point2D(geometryJSON.radius.x, geometryJSON.radius.y);\n        }\n\n        this.geometry = new RegionGeometry(\n            geometryJSON.status,\n            geometryJSON.lineColor,\n            geometryJSON.lineWidth,\n            points,\n            geometryJSON.type,\n            radius\n        );\n\n    }\n\n    readonly geometry: RegionGeometry;\n\n    readonly type = KnoraConstants.GeomValue;\n\n    getClassName(): string {\n        return KnoraConstants.ReadGeomValue;\n    }\n\n    getContent() {\n        return this.geometryString;\n    }\n}\n\n/**\n * Represents a URI value object.\n */\nexport class ReadUriValue implements ReadPropertyItem {\n\n    constructor (readonly id: string, readonly propIri: string, readonly uri: string) {\n\n    }\n\n    readonly type = KnoraConstants.UriValue;\n\n    getClassName(): string {\n        return KnoraConstants.ReadUriValue;\n    }\n\n    getContent() {\n        return this.uri;\n    }\n\n}\n\n/**\n * Represents a Boolean value object.\n */\nexport class ReadBooleanValue implements ReadPropertyItem {\n\n    constructor (readonly id: string, readonly propIri: string, readonly bool: boolean) {\n\n    }\n\n    readonly type = KnoraConstants.BooleanValue;\n\n    getClassName(): string {\n        return KnoraConstants.ReadBooleanValue;\n    }\n\n    getContent() {\n        return this.bool.toString();\n    }\n\n}\n\n/**\n * Represents an interval value object.\n */\nexport class ReadIntervalValue implements ReadPropertyItem {\n\n    constructor (readonly id: string, readonly propIri: string, readonly intervalStart: number, readonly intervalEnd: number) {\n\n    }\n\n    readonly type = KnoraConstants.IntervalValue;\n\n    getClassName(): string {\n        return KnoraConstants.ReadIntervalValue;\n    }\n\n    getContent() {\n        return this.intervalStart.toString() + '-' + this.intervalEnd;\n    }\n\n}\n\n/**\n * Represents a list value object.\n */\nexport class ReadListValue implements ReadPropertyItem {\n\n    constructor (readonly id: string, readonly propIri: string, readonly listNodeIri: string) {\n\n    }\n\n    readonly type = KnoraConstants.ListValue;\n\n    getClassName(): string {\n        return KnoraConstants.ReadListValue;\n    }\n\n    getContent() {\n        return this.listNodeIri;\n    }\n\n}\n","import { ReadProperties } from '../properties/read-properties';\nimport { AudioRepresentation } from '../representations/audio-representation';\nimport { FileRepresentation } from '../representations/fileRepresentation';\nimport { MovingImageRepresentation } from '../representations/moving-image-representation';\nimport { StillImageRepresentation } from '../representations/still-image-representation';\n\n/**\n * @deprecated Use **Resource** instead\n *\n * Represents a resource and its properties.\n */\nexport class ReadResource {\n\n    /**\n     *\n     * @param {string} id the resource's Iri.\n     * @param {string} type the resource's type (class).\n     * @param {string} label the resource's rdfs:label.\n     * @param {Array<ReadResource>} incomingRegions regions pointing to this resource, if any (possibly to be queried by additional requests).\n     * @param {Array<ReadResource>} incomingStillImageRepresentations still image representations pointing to this resource, if any (possibly to be queried by additional requests).\n     * @param {Array<ReadResource>} incomingLinks resources pointing to this resource, if any (possibly to be queried by additional requests).\n     * @param {StillImageRepresentation[]} stillImageRepresentationsToDisplay  still image representations to be displayed for this resource, if any (possibly to be queried by additional requests).\n     * @param {ReadProperties} properties the resources's properties.\n     */\n    constructor (\n        public readonly id: string,\n        public readonly type: string,\n        public readonly label: string,\n        // TODO: we should use a more generic object here; or what's about incomingSequences?\n        public incomingRegions: Array<ReadResource>,\n        // TODO: we should use a more generic object here, something like incomingMedia or incomingFileRepresentation\n        public incomingStillImageRepresentations: Array<ReadResource>,\n        public incomingLinks: Array<ReadResource>,\n        // TODO: we should use a more generic object here, something like media or fileRepresentation\n        public stillImageRepresentationsToDisplay: StillImageRepresentation[],\n        // TODO: the properties should be a list: Array<ReadProperties> or not?\n        public readonly properties?: ReadProperties) {\n    }\n\n}\n\n/**\n * This is a temporary class, to test a new resource setup.\n * When it works, we will replace the ReadResource object\n */\nexport class Resource {\n    constructor (\n        public readonly id: string,\n        public readonly type: string,\n        public readonly label: string,\n        public incomingAnnotations: Array<Resource>,    // = incomingRegions in ReadResource\n        public incomingFileRepresentations: Array<ReadResource>,    // = incomingStillImageRepresentations in ReadResource\n        public incomingLinks: Array<Resource>,\n        public fileRepresentationsToDisplay: FileRepresentation,  // = stillImageRepresentationsToDisplay in ReadResource\n        public readonly properties?: ReadProperties) {\n    }\n}\n\n/*\nfileRepresentationsToDisplay ==> what is the main media file to display?\n\nin case of\n\nproperty.hasStillImageFile\nproperty.hasMovingImageFile\nproperty.hasAudioFile\nproperty.hasTextFile\nproperty.hasDocumentFile\nproperty.hasDDDImageFile\n\nshow this media file.\n\nOtherwise:\n\nresource.incomingStillImageRepresentations?\nresource.incomingMovingImageRepresentations?\nresource.incomingAudioRepresentations?\nresource.incomingTextRepresentations?\nresource.incomingDocumentRepresentations?\nresource.incomingDDDImageRepresentations?\n\nA resource can have more than one incomingRepresentation\n\n\n*/","import { Inject, Injectable } from '@angular/core';\nimport { HttpClient, HttpErrorResponse, HttpParams, HttpResponse } from '@angular/common/http';\nimport { Observable } from 'rxjs/internal/Observable';\nimport { throwError } from 'rxjs/internal/observable/throwError';\nimport { catchError, map } from 'rxjs/operators';\nimport { ApiServiceError } from '../declarations/api-service-error';\nimport { ApiServiceResult } from '../declarations/api-service-result';\nimport { from } from 'rxjs';\nimport { KuiCoreConfigToken } from '../core.module';\nimport { KnoraConstants } from '../declarations/api/knora-constants';\n\n\ndeclare let require: any; // http://stackoverflow.com/questions/34730010/angular2-5-minute-install-bug-require-is-not-defined\nconst jsonld = require('jsonld');\n\nconst semver = require('semver');\n\n@Injectable({\n    providedIn: 'root',\n})\nexport abstract class ApiService {\n\n    // if is loading, set it true;\n    // it can be used in components\n    // for progress loader element\n    loading = false;\n\n    protected constructor (public http: HttpClient,\n        @Inject(KuiCoreConfigToken) public config) {\n\n        // console.log('ApiService constructor: config', config);\n    }\n\n    /**\n     * GET\n     *\n     * @param {string} path the URL for the GET request.\n     * @param {HttpParams} params the parameters for the GET request.\n     * @returns Observable of any\n     */\n    httpGet(path: string, params?: HttpParams): Observable<any> {\n\n        this.loading = true;\n\n        return this.http.get(this.config.api + path, { observe: 'response', params: params }).pipe(\n            map((response: HttpResponse<any>): ApiServiceResult => {\n                this.loading = false;\n\n                const result = new ApiServiceResult();\n                result.header = { 'server': response.headers.get('Server') };\n                this.compareVersion(response.headers.get('Server'));\n                result.status = response.status;\n                result.statusText = response.statusText;\n                result.url = path;\n                result.body = response.body;\n\n                return result;\n            }),\n            catchError((error: HttpErrorResponse) => {\n                this.loading = false;\n\n                return this.handleRequestError(error);\n            })\n        );\n\n    }\n\n    /**\n     * Processes JSON-LD returned by Knora.\n     * Expands Iris and creates an empty context object.\n     *\n     * @param {ApiServiceResult} resourceResponse\n     */\n    protected processJSONLD(resourceResponse: ApiServiceResult): Observable<object> {\n\n        const resPromises = jsonld.promises;\n\n\n        // compact JSON-LD using an empty context: expands all Iris\n        const resPromise = resPromises.compact(resourceResponse.body, {});\n\n        // convert promise to Observable and return it\n        // https://www.learnrxjs.io/operators/creation/frompromise.html\n        return from(resPromise);\n\n    }\n\n    /**\n     * POST\n     *\n     * @param {string} path\n     * @param {any} body\n     * @returns Observable of any\n     */\n    httpPost(path: string, body?: any): Observable<any> {\n\n        this.loading = true;\n\n        // const headers = this.setHeaders(); --> this is now done by the interceptor from @knora/authentication\n\n        return this.http.post(this.config.api + path, body, { observe: 'response' }).pipe(\n            map((response: HttpResponse<any>): ApiServiceResult => {\n                this.loading = false;\n\n                const result = new ApiServiceResult();\n                result.header = { 'server': response.headers.get('Server') };\n                this.compareVersion(result.header.server);\n                result.status = response.status;\n                result.statusText = response.statusText;\n                result.url = path;\n                result.body = response.body;\n                return result;\n            }),\n            catchError((error: HttpErrorResponse) => {\n                this.loading = false;\n\n                // console.error(error);\n\n                return this.handleRequestError(error);\n            })\n        );\n\n    }\n\n    /**\n     * PUT\n     *\n     * @param {string} path\n     * @param {any} body\n     * @returns Observable of any\n     */\n    httpPut(path: string, body?: any): Observable<any> {\n\n        this.loading = true;\n\n        // const headers = this.setHeaders(); --> this is now done by the interceptor from @knora/authentication\n\n        return this.http.put(this.config.api + path, body, { observe: 'response' }).pipe(\n            map((response: HttpResponse<any>): ApiServiceResult => {\n                this.loading = false;\n\n                // console.log(response);\n\n                const result = new ApiServiceResult();\n                result.header = { 'server': response.headers.get('Server') };\n                this.compareVersion(result.header.server);\n                result.status = response.status;\n                result.statusText = response.statusText;\n                result.url = path;\n                result.body = response.body;\n                return result;\n\n            }),\n            catchError((error: HttpErrorResponse) => {\n                this.loading = false;\n\n                // console.error(error);\n\n                return this.handleRequestError(error);\n            })\n        );\n    }\n\n    /**\n     * DELETE\n     *\n     * @param {string} path\n     * @returns Observable of any\n     */\n    httpDelete(path: string): Observable<any> {\n\n        this.loading = true;\n\n        // const headers = this.setHeaders(); --> this is now done by the interceptor from @knora/authentication\n\n        return this.http.delete(this.config.api + path, { observe: 'response' }).pipe(\n            map((response: HttpResponse<any>): ApiServiceResult => {\n                this.loading = false;\n\n                // console.log(response);\n\n                const result = new ApiServiceResult();\n                result.header = { 'server': response.headers.get('Server') };\n                this.compareVersion(result.header.server);\n                result.status = response.status;\n                result.statusText = response.statusText;\n                result.url = path;\n                result.body = response.body;\n                return result;\n\n            }),\n            catchError((error: HttpErrorResponse) => {\n                this.loading = false;\n\n                // console.error(error);\n\n                return this.handleRequestError(error);\n            })\n        );\n    }\n\n\n    /**\n     * handle request error in case of server error\n     *\n     * @param {HttpErrorResponse} error\n     * @returns Observable of ApiServiceError\n     */\n    protected handleRequestError(error: HttpErrorResponse): Observable<ApiServiceError> {\n        // console.error(error);\n        const serviceError = new ApiServiceError();\n        serviceError.header = { 'server': error.headers.get('Server') };\n        serviceError.status = error.status;\n        serviceError.statusText = error.statusText;\n        serviceError.errorInfo = error.message;\n        serviceError.url = error.url;\n        return throwError(serviceError);\n    }\n\n    /**\n     * handle json error in case of type error in json response (json2typescript)\n     *\n     * @param {any} error\n     * @returns Observable of ApiServiceError\n     */\n    protected handleJsonError(error: any): Observable<ApiServiceError> {\n\n        if (error instanceof ApiServiceError) return throwError(error);\n\n        const serviceError = new ApiServiceError();\n        serviceError.header = { 'server': error.headers.get('Server') };\n        serviceError.status = -1;\n        serviceError.statusText = 'Invalid JSON';\n        serviceError.errorInfo = error;\n        serviceError.url = '';\n        return throwError(serviceError);\n\n    }\n\n    protected compareVersion(server: string): void {\n\n        // expected knora api version\n        const expected: string = KnoraConstants.KnoraVersion;\n\n        // existing knora api version\n        if (server) {\n            const versions: string[] = server.split(' ');\n            const existing: string = versions[0].split('/')[1];\n\n            // compare the two versions: expected vs existing\n            if (semver.diff(existing, expected) === 'major') {\n                console.warn('The version of the @knora/core module works with Knora v' + expected + ', but you are using it with Knora v' + existing);\n            }\n        } else {\n            // console.warn('No server information from headers response');\n        }\n\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\nimport { KnoraConstants } from '../../declarations/api/knora-constants';\nimport { ApiServiceResult } from '../../declarations/api-service-result';\nimport { NewOntology } from '../../declarations/api/v2/ontology/new-ontology';\nimport { ApiService } from '../api.service';\n\n/**\n * Requests ontology information from Knora.\n */\n@Injectable({\n    providedIn: 'root',\n})\nexport class OntologyService extends ApiService {\n\n\n    // ------------------------------------------------------------------------\n    // GET list of ontologies\n    // ------------------------------------------------------------------------\n\n    /**\n     * @deprecated: Use **getAllOntologies()** instead\n     *\n     * Requests the metadata about all existing ontologies from Knora's ontologies route.\n     *\n     * @returns Observable<ApiServiceResult> - the metadata of all ontologies.\n     */\n    getOntologiesMetadata(): Observable<ApiServiceResult> {\n        return this.httpGet('/v2/ontologies/metadata');\n    }\n\n    /**\n     * Requests the metadata about all existing ontologies from Knora's ontologies route.\n     *\n     * @returns Observable<ApiServiceResult> - the metadata of all ontologies.\n     */\n    getAllOntologies(): Observable<ApiServiceResult> {\n        return this.httpGet('/v2/ontologies/metadata');\n    }\n\n    /**\n     * Requests the ontologies of a specific project\n     *\n     * @param projectIri\n     * @returns Observable<ApiServiceResult> - the metadata of project ontologies.\n     */\n    getProjectOntologies(projectIri: string): Observable<ApiServiceResult> {\n        return this.httpGet('/v2/ontologies/metadata/' + encodeURIComponent(projectIri));\n    }\n\n\n    // ------------------------------------------------------------------------\n    // GET ontology\n    // ------------------------------------------------------------------------\n\n    /**\n     * Requests all entity definitions for the given ontologies from Knora's ontologies route.\n     *\n     * @param {string} ontologyIri the Iris of the named graphs whose resource classes are to be returned.\n     * @returns Observable<ApiServiceResult> - the requested ontology.\n     */\n    getAllEntityDefinitionsForOntologies(ontologyIri: string): Observable<ApiServiceResult> {\n        return this.httpGet('/v2/ontologies/allentities/' + encodeURIComponent(ontologyIri));\n    }\n\n    /**\n     * Requests information about the given resource classes from Knora's ontologies route.\n     *\n     * @param {string[]} resourceClassIris the Iris of the resource classes to be queried.\n     * @returns Observable<ApiServiceResult> - the requested resource class definitions.\n     */\n    getResourceClasses(resourceClassIris: Array<string>): Observable<ApiServiceResult> {\n\n        if (resourceClassIris.length === 0) {\n            // no resource class Iris are given to query for, return a failed Observer\n            return Observable.create(observer => observer.error('No resource class Iris given for call of OntologyService.getResourceClasses'));\n        }\n\n        let resClassUriEnc = '';\n\n        resourceClassIris.forEach(function (resClassIri) {\n            resClassUriEnc = resClassUriEnc + '/' + encodeURIComponent(resClassIri.toString());\n        });\n\n        return this.httpGet('/v2/ontologies/classes' + resClassUriEnc);\n    }\n\n    /**\n     * Requests properties from Knora's ontologies route.\n     *\n     * @param {string[]} propertyIris the Iris of the properties to be queried.\n     * @returns Observable<ApiServiceResult> - the requested properties.\n     */\n    getProperties(propertyIris: string[]): Observable<ApiServiceResult> {\n\n        if (propertyIris.length === 0) {\n            // no resource class Iris are given to query for, return a failed Observer\n            return Observable.create(observer => observer.error('No property Iris given for call of OntologyService.getProperties'));\n        }\n\n        let propertiesUriEnc = '';\n\n        propertyIris.forEach(function (resClassIri) {\n            propertiesUriEnc = propertiesUriEnc + '/' + encodeURIComponent(resClassIri.toString());\n        });\n\n        return this.httpGet('/v2/ontologies/properties' + propertiesUriEnc);\n\n    }\n\n    // ------------------------------------------------------------------------\n    // POST\n    // ------------------------------------------------------------------------\n\n    /**\n     * Create new ontology.\n     *\n     * @param {NewOntology} data Data contains: projectIri, name, label\n     * @returns Observable<ApiServiceResult>\n     */\n    createOntology(data: NewOntology): Observable<ApiServiceResult> {\n        const path = '/v2/ontologies';\n\n        const ontology = {\n            'knora-api:ontologyName': data.name,\n            'knora-api:attachedToProject': {\n                '@id': data.projectIri,\n            },\n            'rdfs:label': data.label,\n            '@context': {\n                'rdfs': KnoraConstants.RdfsSchema,\n                'knora-api': KnoraConstants.KnoraApiV2WithValueObjectPath\n            }\n        };\n\n        return this.httpPost(path, ontology).pipe(\n            map((result: ApiServiceResult) => result.body),\n            catchError(this.handleJsonError)\n        );\n    }\n\n}\n","import { ReadResource, Resource } from './read-resource';\nimport { OntologyInformation } from '../../../../services/v2/ontology-cache.service';\n\n/**\n * @deprecated Use **ResourceSequence** instead\n *\n * Represents a sequence of resources.\n */\nexport class ReadResourcesSequence {\n\n    /**\n     * Information about the entities used in the given collection of `ReadResource`.\n     */\n    public readonly ontologyInformation: OntologyInformation = new OntologyInformation({}, {}, {});\n\n    /**\n     *\n     * @param {Array<ReadResource>} resources given sequence of resources.\n     * @param {number} numberOfResources number of given resources.\n     */\n    constructor (public readonly resources: Array<ReadResource>, public readonly numberOfResources: number) {\n    }\n\n}\n\nexport class ResourcesSequence {\n\n    /**\n     * Information about the entities used in the given collection of `Resource`.\n     */\n    public readonly ontologyInformation: OntologyInformation = new OntologyInformation({}, {}, {});\n\n    /**\n     *\n     * @param {Array<Resource>} resources given sequence of resources.\n     * @param {number} numberOfResources number of given resources.\n     */\n    constructor (public readonly resources: Array<Resource>, public readonly numberOfResources: number) {\n    }\n}\n","/**\n * Represents the result of a count query.\n */\nexport class CountQueryResult {\n\n    /**\n     *\n     * @param numberOfResults total number of results for a query.\n     */\n    constructor(public readonly numberOfResults: number) {\n\n    }\n}\n","import { KnoraConstants } from '../../knora-constants';\nimport { ReadAudioFileValue } from '../properties/read-property-item';\nimport { Sequence } from './sequence';\n\n/**\n * Represents an audio file representation including its sequences.\n */\n\nexport class AudioRepresentation {\n\n    /**\n     *\n     * @param {ReadAudioFileValue} audioFileValue a [[ReadAudioFileValue]] representing a audio file\n     * @param {Sequence[]} sequences the sequences belonging to the time-base media.\n     */\n    constructor (readonly audioFileValue: ReadAudioFileValue, readonly sequences: Sequence[], readonly type: string = KnoraConstants.AudioFileValue) {\n\n    }\n\n}\n","import { FileValue } from '../properties/read-property-item';\nimport { AudioRepresentation } from './audio-representation';\nimport { MovingImageRepresentation } from './moving-image-representation';\nimport { Region } from './region';\nimport { Sequence } from './sequence';\nimport { StillImageRepresentation } from './still-image-representation';\n\n\n/**\n * Represents one of the following media file types:\n * - still-image including its regions\n * - moving-image including its sequences\n * - audio including its sequences\n * - text\n * - ddd rti\n * - document\n */\nexport class oldFileRepresentation {\n\n    /**\n     *\n     * @param {FileValue} fileValue a [[FileValue]] representing a file.\n     * @param {Region[]} [regions] the regions belonging to the image.\n     * @param {Sequence[]} [sequences] the sequences belonging to the time-based media.\n     */\n    constructor (readonly fileValue: FileValue, readonly regions?: Region[], readonly sequences?: Sequence[]) {\n\n    }\n\n}\n\n\nexport class FileRepresentation {\n\n    constructor (\n        public stillImage?: StillImageRepresentation[],\n        public movingImage?: MovingImageRepresentation[],\n        public audio?: AudioRepresentation[]) {\n\n    }\n\n    // TODO: create the following properties:\n    /*\n        readonly text?: TextRepresentation[],\n        readonly document?: DocumentRepresentation[],\n        readonly dddImage?: DDDImageRepresentation[],\n    */\n\n}","import { KnoraConstants } from '../../knora-constants';\nimport { ReadMovingImageFileValue } from '../properties/read-property-item';\nimport { Sequence } from './sequence';\n\n/**\n * Represents a moving image including its sequences.\n */\n\nexport class MovingImageRepresentation {\n\n    /**\n     *\n     * @param {MovingImageFileValue} movingImageFileValue a [[ReadMovingImageFileValue]] representing a moving-image file.\n     * @param {Sequence[]} sequences the sequences belonging to the time-base media.\n     */\n    constructor (readonly movingImageFileValue: ReadMovingImageFileValue, readonly sequences: Sequence[], readonly type: string = KnoraConstants.MovingImageFileValue) {\n\n    }\n\n}\n","import { KnoraConstants } from '../../knora-constants';\nimport { ReadStillImageFileValue } from '../properties/read-property-item';\nimport { Region } from './region';\n\n/**\n * Represents an image including its regions.\n */\n\nexport class StillImageRepresentation {\n\n    /**\n     *\n     * @param {ReadStillImageFileValue} stillImageFileValue a [[ReadStillImageFileValue]] representing an image.\n     * @param {Region[]} regions the regions belonging to the image.\n     */\n    // TODO: remove \"readonly type: string = KnoraConstants.StillImageFileValue\"\n    constructor (readonly stillImageFileValue: ReadStillImageFileValue, readonly regions: Region[], readonly type: string = KnoraConstants.StillImageFileValue) {\n\n    }\n\n}\n","import { ReadGeomValue, ReadResource } from '../../../';\nimport { KnoraConstants } from '../../knora-constants';\n\n/**\n * Represents a region.\n * Contains a reference to the resource representing the region and its geometries.\n */\n\nexport class Region {\n\n    /**\n     *\n     * @param {ReadResource} regionResource a resource of type Region\n     */\n    constructor (readonly regionResource: ReadResource) {\n\n    }\n\n    /**\n     * Get all geometry information belonging to this region.\n     *\n     * @returns {ReadGeomValue[]}\n     */\n    getGeometries() {\n        return this.regionResource.properties[KnoraConstants.hasGeometry] as ReadGeomValue[];\n    }\n}\n","import { ReadIntervalValue, ReadResource } from '../../../';\nimport { KnoraConstants } from '../../knora-constants';\n\n/**\n * Represents a sequence in time-base media.\n * Contains a reference to the resource representing the sequence.\n */\n\nexport class Sequence {\n\n    /**\n     *\n     * @param {ReadResource} sequenceResource a resource of type Region\n     */\n    constructor (readonly sequenceResource: ReadResource) {\n\n    }\n\n    /**\n     * Get all interval information belonging to this sequence.\n     *\n     * @returns {ReadIntervalValue[]}\n     */\n    getIntervals() {\n        return this.sequenceResource.properties[KnoraConstants.intervalValueHasStart] as ReadIntervalValue[];\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\nimport { ApiServiceResult, Group, GroupResponse, GroupsResponse } from '../../declarations/';\nimport { ApiService } from '../api.service';\n\n/**\n * Request information about group from Knora.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class GroupsService extends ApiService {\n\n    private path: string = '/admin/groups';\n\n    /**\n     * Return a list of all groups.\n     *\n     * @returns Observable<Group[]>\n     */\n    getAllGroups(): Observable<Group[]> {\n        return this.httpGet(this.path).pipe(\n            map((result: ApiServiceResult) => result.getBody(GroupsResponse).groups),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     * Return a group object (filter by IRI).\n     *\n     * @param {string} iri\n     * @returns Observable<Group>\n     */\n    getGroupByIri(iri: string): Observable<Group> {\n        this.path += '/' + encodeURIComponent(iri);\n\n        return this.httpGet(this.path).pipe(\n            map((result: ApiServiceResult) => result.getBody(GroupResponse).group),\n            catchError(this.handleJsonError)\n        );\n    }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { catchError, map } from 'rxjs/operators';\n\nimport {\n    ApiServiceResult,\n    List,\n    ListCreatePayload,\n    ListInfo,\n    ListInfoResponse,\n    ListInfoUpdatePayload,\n    ListNodeInfo,\n    ListNodeInfoResponse,\n    ListResponse,\n    ListsResponse\n} from '../../declarations';\n\nimport { ApiService } from '../api.service';\n\n/**\n * Request information about lists from Knora.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class ListsService extends ApiService {\n\n    private path: string = '/admin/lists';\n\n\n    // ------------------------------------------------------------------------\n    // GET\n    // ------------------------------------------------------------------------\n\n    /**\n     * Returns a list of all lists.\n     *\n     * @param {string} [projectIri]\n     * @returns Observable<ListNodeInfo[]>\n     */\n    getLists(projectIri?: string): Observable<ListNodeInfo[]> {\n        if (projectIri) {\n            this.path += '?projectIri=' + encodeURIComponent(projectIri);\n        }\n        return this.httpGet(this.path).pipe(\n            map((result: ApiServiceResult) => result.getBody(ListsResponse).lists),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     * Return a list object.\n     *\n     * @param {string} listIri\n     * @returns Observable<List>\n     */\n    getList(listIri: string): Observable<List> {\n        return this.httpGet(this.path + '/' + encodeURIComponent(listIri)).pipe(\n            map((result: ApiServiceResult) => result.getBody(ListResponse).list),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     * Return a list info object.\n     *\n     * @param {string} listIri\n     * @returns Observable<ListInfo>\n     */\n    getListInfo(listIri: string): Observable<ListInfo> {\n        this.path += '/infos/' + encodeURIComponent(listIri);\n        return this.httpGet(this.path).pipe(\n            map((result: ApiServiceResult) => result.getBody(ListInfoResponse).listinfo),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     * Return a list node info object.\n     *\n     * @param {string} nodeIri\n     * @returns Observable<ListNodeInfo>\n     */\n    getListNodeInfo(nodeIri: string): Observable<ListNodeInfo> {\n        this.path += '/nodes/' + encodeURIComponent(nodeIri);\n        return this.httpGet(this.path).pipe(\n            map((result: ApiServiceResult) => result.getBody(ListNodeInfoResponse).nodeinfo),\n            catchError(this.handleJsonError)\n        );\n    }\n\n\n    // ------------------------------------------------------------------------\n    // POST\n    // ------------------------------------------------------------------------\n\n    /**\n     * Create new list.\n     *\n     * @param {ListCreatePayload} payload\n     * @returns Observable<List>\n     */\n    createList(payload: ListCreatePayload): Observable<List> {\n        return this.httpPost(this.path, payload).pipe(\n            map((result: ApiServiceResult) => result.getBody(ListResponse).list),\n            catchError(this.handleJsonError)\n        );\n    }\n\n\n    // ------------------------------------------------------------------------\n    // PUT\n    // ------------------------------------------------------------------------\n\n    /**\n     * Edit list data.\n     *\n     * @param {ListInfoUpdatePayload} payload\n     * @returns Observable<ListInfo>\n     */\n    updateListInfo(payload: ListInfoUpdatePayload): Observable<ListInfo> {\n        this.path += '/infos/' + encodeURIComponent(payload.listIri);\n        return this.httpPut(this.path, payload).pipe(\n            map((result: ApiServiceResult) => result.getBody(ListInfoResponse).listinfo),\n            catchError(this.handleJsonError)\n        );\n\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\n\nimport { ApiServiceResult, Project, ProjectMembersResponse, ProjectResponse, ProjectsResponse, User } from '../../declarations/';\n\nimport { ApiService } from '../api.service';\n\n/**\n * Request information about projects from Knora.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class ProjectsService extends ApiService {\n\n    // ------------------------------------------------------------------------\n    // GET\n    // ------------------------------------------------------------------------\n\n    /**\n     * Returns a list of all projects.\n     *\n     * @returns Observable<Project[]>\n     */\n    getAllProjects(): Observable<Project[]> {\n        return this.httpGet('/admin/projects').pipe(\n            map((result: ApiServiceResult) => result.getBody(ProjectsResponse).projects),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     * Returns a project object.\n     *\n     * @param {string} iri identifier of the project\n     * @returns Observable<Project>\n     */\n    getProjectByIri(iri: string): Observable<Project> {\n        const url: string = '/admin/projects/iri/' + encodeURIComponent(iri);\n        return this.getProject(url);\n    }\n\n    /**\n     * Returns a project object.\n     *\n     * @param {string} shortname short name that is used to identify the project\n     * @returns Observable<Project>\n     */\n    getProjectByShortname(shortname: string): Observable<Project> {\n        const url = '/admin/projects/shortname/' + shortname;\n        return this.getProject(url);\n    }\n\n    /**\n     * Returns a project object.\n     *\n     * @param {string} shortcode hexadecimal code that uniquely identifies the project\n     * @returns Observable<Project>\n     */\n    getProjectByShortcode(shortcode: string): Observable<Project> {\n        const url = '/admin/projects/shortcode/' + shortcode;\n        return this.getProject(url);\n    }\n\n    /**\n     * @private\n     * Helper method combining project retrieval.\n     *\n     * @param {string} url\n     * @returns Observable<Project>\n     */\n    protected getProject(url: string): Observable<Project> {\n        return this.httpGet(url).pipe(\n            map((result: ApiServiceResult) => result.getBody(ProjectResponse).project),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     * Returns all project members.\n     * Project identifier is project id (iri).\n     *\n     * @param {string} iri identifier of the project\n     * @returns Observable<User[]>\n     */\n    getProjectMembersByIri(iri: string): Observable<User[]> {\n        const url = '/admin/projects/iri/' + encodeURIComponent(iri) + '/members' ;\n        return this.getProjectMembers(url);\n    }\n\n    /**\n     * Returns all project members.\n     * Project identifier is shortname.\n     *\n     * @param {string} shortname short name that is used to identify the project\n     * @returns Observable<User[]>\n     */\n    getProjectMembersByShortname(shortname: string): Observable<User[]> {\n        const url = '/admin/projects/shortname/' + shortname + '/members' ;\n        return this.getProjectMembers(url);\n    }\n\n    /**\n     * Returns all project members.\n     * Project identifier is shortcode.\n     *\n     * @param {string} shortcode hexadecimal code that uniquely identifies the project\n     * @returns Observable<User[]>\n     */\n    getProjectMembersByShortcode(shortcode: string): Observable<User[]> {\n        const url = '/admin/projects/shortcode/' + shortcode + '/members';\n        return this.getProjectMembers(url);\n    }\n\n    /**\n     * @private\n     * Helper method combining project member retrieval.\n     *\n     * @param {string} url\n     * @returns Observable<User[]>\n     */\n     private getProjectMembers(url: string): Observable<User[]> {\n        return this.httpGet(url).pipe(\n            map((result: ApiServiceResult) => result.getBody(ProjectMembersResponse).members),\n            catchError(this.handleJsonError)\n        );\n    }\n\n\n    // ------------------------------------------------------------------------\n    // POST\n    // ------------------------------------------------------------------------\n\n    /**\n     * Create new project.\n     *\n     * @param {any} data\n     * @returns Observable<Project>\n     */\n    createProject(data: any): Observable<Project> {\n        const url: string = '/admin/projects';\n        return this.httpPost(url, data).pipe(\n            map((result: ApiServiceResult) => result.getBody(ProjectResponse).project),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    // ------------------------------------------------------------------------\n    // PUT\n    // ------------------------------------------------------------------------\n\n    /**\n     * Edit project data.\n     *\n     * @param {string} iri identifier of the project\n     * @param {any} data\n     * @returns Observable<Project>\n     */\n    updateProject(iri: string, data: any): Observable<Project> {\n        const url: string = '/admin/projects/iri/' + encodeURIComponent(iri);\n\n        return this.httpPut(url, data).pipe(\n            map((result: ApiServiceResult) => result.getBody(ProjectResponse).project),\n            catchError(this.handleJsonError)\n        );\n    }\n\n\n    /**\n     * Activate project (if it was deleted).\n     *\n     * @param {string} iri identifier of the project\n     * @returns Observable<Project>\n     */\n    activateProject(iri: string): Observable<Project> {\n        const data: any = {\n            status: true\n        };\n\n        const url: string = '/admin/projects/iri/' + encodeURIComponent(iri);\n\n        return this.httpPut(url, data).pipe(\n            map((result: ApiServiceResult) => result.getBody(ProjectResponse).project),\n            catchError(this.handleJsonError)\n        );\n    }\n\n\n    // ------------------------------------------------------------------------\n    // DELETE\n    // ------------------------------------------------------------------------\n\n    /**\n     * Delete (set inactive) project.\n     *\n     * @param {string} iri identifier of the project\n     * @returns Observable<Project>\n     */\n    deleteProject(iri: string): Observable<Project> {\n        const url: string = '/admin/projects/iri/' + encodeURIComponent(iri);\n\n        return this.httpDelete(url).pipe(\n            map((result: ApiServiceResult) => result.getBody(ProjectResponse).project),\n            catchError(this.handleJsonError)\n        );\n    }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\nimport { ApiService } from '../api.service';\nimport {\n    ApiServiceResult,\n    Group,\n    GroupsResponse,\n    User,\n    UserResponse,\n    UsersResponse\n} from '../../declarations/';\n\n/**\n * This service uses the Knora admin API and handles all user data.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class UsersService extends ApiService {\n    // ------------------------------------------------------------------------\n    // GET\n    // ------------------------------------------------------------------------\n\n    /**\n     * Returns a list of all users.\n     *\n     * @returns Observable<User[]>\n     */\n    getAllUsers(): Observable<User[]> {\n        return this.httpGet('/admin/users').pipe(\n            map((result: ApiServiceResult) => result.getBody(UsersResponse).users),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     * Get user by username, email or by iri.\n     * @ignore\n     *\n     * @param  {string} identifier username, email or by iri\n     * @param  {String} identifierType\n     * @returns Observable<User>\n     */\n    private getUser(identifier: string, identifierType: String): Observable<User> {\n        const path = '/admin/users/' + identifierType + '/' + encodeURIComponent(identifier);\n        return this.httpGet(path).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     * Get user by IRI\n     *\n     * @param  {string} iri\n     * @returns Observable<User>\n     */\n    getUserByIri(iri: string): Observable<User> {\n        return this.getUser(iri, 'iri');\n    }\n\n    /**\n     * Get user by email\n     *\n     * @param  {string} email\n     * @returns Observable<User>\n     */\n    getUserByEmail(email: string): Observable<User> {\n        return this.getUser(email, 'email');\n    }\n\n    /**\n     * Get user by username.\n     *\n     * @param  {string} username\n     * @returns Observable<User>\n     */\n    getUserByUsername(username: string): Observable<User> {\n        return this.getUser(username, 'username');\n    }\n\n    /**\n     * Get all groups, where the user is member of\n     *\n     * @param  {string} userIri\n     * @returns Observable<Group[]>\n     */\n    getUsersGroupMemberships(userIri: string): Observable<Group[]> {\n        const path = '/admin/users/iri/' + encodeURIComponent(userIri) + '/group-memberships';\n        return this.httpGet(path).pipe(\n            map((result: ApiServiceResult) => result.getBody(GroupsResponse).groups),\n            catchError(this.handleJsonError)\n        );\n\n    }\n\n    // ------------------------------------------------------------------------\n    // POST\n    // ------------------------------------------------------------------------\n\n    /**\n     * Create new user.\n     *\n     * @param {any} data\n     * @returns Observable<User>\n     */\n    createUser(data: any): Observable<User> {\n        const path = '/admin/users';\n        return this.httpPost(path, data).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     * Add user to a project.\n     *\n     * @param {string} userIri\n     * @param {string} projectIri\n     * @returns Observable<User>\n     */\n    addUserToProject(userIri: string, projectIri: string): Observable<User> {\n        const path = '/admin/users/iri/' + encodeURIComponent(userIri) + '/project-memberships/' + encodeURIComponent(projectIri);\n        return this.httpPost(path).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     * Remove user from project.\n     *\n     * @param {string} userIri\n     * @param {string} projectIri\n     * @returns Observable<User>\n     */\n    removeUserFromProject(userIri: string, projectIri: string): Observable<User> {\n        const path = '/admin/users/iri/' + encodeURIComponent(userIri) + '/project-memberships/' + encodeURIComponent(projectIri);\n        return this.httpDelete(path).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     * Add user to the admin group of a project.\n     *\n     * @param {string} userIri\n     * @param {string} projectIri\n     * @returns Observable<User>\n     */\n    addUserToProjectAdmin(userIri: string, projectIri: string): Observable<User> {\n        const path = '/admin/users/iri/' + encodeURIComponent(userIri) + '/project-admin-memberships/' + encodeURIComponent(projectIri);\n        return this.httpPost(path).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     * Delete user from the admin group of a project.\n     *\n     * @param {string} userIri\n     * @param {string} projectIri\n     * @returns Observable<User>\n     */\n    removeUserFromProjectAdmin(userIri: string, projectIri: string): Observable<User> {\n        const path = '/admin/users/iri/' + encodeURIComponent(userIri) + '/project-admin-memberships/' + encodeURIComponent(projectIri);\n        return this.httpDelete(path).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     * Add user to project specific group\n     *\n     * @param {string} userIri\n     * @param {string} groupIri\n     * @returns Observable<User>\n     */\n    addUserToGroup(userIri: string, groupIri: string): Observable<User> {\n        const path = '/admin/users/iri/' + encodeURIComponent(userIri) + '/group-memberships/' + encodeURIComponent(groupIri);\n        return this.httpPost(path).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n\n    }\n\n    /**\n     * remove user from project specific group\n     *\n     * @param {string} userIri\n     * @param {string} groupIri\n     * @returns Observable<User>\n     */\n    removeUserFromGroup(userIri: string, groupIri: string): Observable<User> {\n        const path = '/admin/users/iri/' + encodeURIComponent(userIri) + '/group-memberships/' + encodeURIComponent(groupIri);\n        return this.httpDelete(path).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n\n    }\n\n\n    // ------------------------------------------------------------------------\n    // PUT\n    // ------------------------------------------------------------------------\n\n\n    /**\n     * Add user to the admin system.\n     *\n     * @param {string} userIri\n     * @returns Observable<User>\n     */\n    addUserToSystemAdmin(userIri: string): Observable<User> {\n        const data = {\n            'systemAdmin': true\n        };\n\n        return this.updateUserSystemAdmin(userIri, data);\n\n    }\n\n    /**\n     * Remove user from the admin system.\n     * @param {string} userIri\n     * @returns Observable<User>\n     */\n    removeUserFromSystemAdmin(userIri: string): Observable<User> {\n        const data = {\n            'systemAdmin': false\n        };\n\n        return this.updateUserSystemAdmin(userIri, data);\n    }\n\n    /**\n     * Update user system admin membership\n     * @ignore\n     *\n     * @param {string} userIri\n     * @param {any} data\n     *\n     * @returns Observable<User>\n     */\n    private updateUserSystemAdmin(userIri: string, data: any): Observable<User> {\n        const path = '/admin/users/iri/' + encodeURIComponent(userIri) + '/SystemAdmin';\n        return this.httpPut(path, data).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n    }\n\n\n    /**\n     * Activate user.\n     *\n     * @param {string} userIri\n     * @returns Observable<User>\n     */\n    activateUser(userIri: string): Observable<User> {\n        const path = '/admin/users/iri/' + encodeURIComponent(userIri) + '/Status';\n\n        const data: any = {\n            status: true\n        };\n\n        return this.httpPut(path, data).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n    }\n\n\n    /**\n     * Update own password.\n     *\n     * @param {string} userIri\n     * @param {string} oldPassword\n     * @param {string} newPassword\n     * @returns Observable<User>\n     */\n    updateOwnPassword(userIri: string, oldPassword: string, newPassword: string): Observable<User> {\n        const path = '/admin/users/iri/' + encodeURIComponent(userIri) + '/Password';\n\n        const data = {\n            newPassword: newPassword,\n            requesterPassword: oldPassword\n        };\n\n        return this.httpPut(path, data).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     * Update password of another user (not own).\n     *\n     * @param {string} userIri\n     * @param {string} requesterPassword\n     * @param {string} newPassword\n     * @returns Observable<User>\n     */\n    updateUsersPassword(userIri: string, requesterPassword: string, newPassword: string): Observable<User> {\n        const path = '/admin/users/iri/' + encodeURIComponent(userIri) + '/Password';\n\n        const data = {\n            newPassword: newPassword,\n            requesterPassword: requesterPassword\n        };\n\n        return this.httpPut(path, data).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     * Update basic user information: given name, family name\n     * @param userIri\n     * @param data\n     * @returns Observable<User>\n     */\n    updateBasicUserInformation(userIri: string, data: any): Observable<User> {\n        const path = '/admin/users/iri/' + encodeURIComponent(userIri) + '/BasicUserInformation';\n\n        return this.httpPut(path, data).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n    }\n\n\n    // ------------------------------------------------------------------------\n    // DELETE\n    // ------------------------------------------------------------------------\n\n    /**\n     * Delete / deactivate user.\n     *\n     * @param {string} userIri\n     * @returns Observable<User>\n     */\n    deleteUser(userIri: string): Observable<User> {\n        const path = '/admin/users/iri/' + encodeURIComponent(userIri);\n        return this.httpDelete(path).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n\n    }\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, Subject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LanguageService {\n\n  private subject = new Subject<any>();\n\n  setLanguage(lang: string) {\n    this.subject.next({ var: lang });\n  }\n  getLanguage(): Observable<any> {\n    return this.subject.asObservable();\n  }\n\n}\n","import { Inject, Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { KuiCoreConfig } from '../../declarations';\nimport { KuiCoreConfigToken } from '../../core.module';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StatusMsgService {\n\n  constructor(private _http: HttpClient,\n    @Inject(KuiCoreConfigToken) public config) {\n  }\n\n  /**\n  * this method get the status messages from the statusMsg.json file\n  * which are defined here: https://en.wikipedia.org/wiki/List_of_HTTP_status_codes\n  * and here: http://www.w3schools.com/tags/ref_httpmessages.asp\n  *\n  */\n  getStatusMsg(): Observable<any> {\n\n    return this._http.get(this.config.app + '/assets/i18n/statusMsg.json')\n      .pipe(map(\n        (res: any) => {\n          return res;\n        },\n        err => {\n          console.error(err);\n        }\n      )\n      );\n\n  }\n}\n","import { CountQueryResult, KnoraConstants, ReadAudioFileValue, ReadBooleanValue, ReadColorValue, ReadDateValue, ReadDDDFileValue, ReadDecimalValue, ReadDocumentFileValue, ReadGeomValue, ReadIntegerValue, ReadIntervalValue, ReadLinkValue, ReadListValue, ReadMovingImageFileValue, ReadProperties, ReadPropertyItem, ReadResource, ReadResourcesSequence, ReadStillImageFileValue, ReadTextFileValue, ReadTextValueAsHtml, ReadTextValueAsString, ReadTextValueAsXml, ReadUriValue, ReferredResourcesByStandoffLink, Resource, Utils, ResourcesSequence } from '../../declarations';\n\n/**\n * Contains methods to convert JSON-LD representing resources and properties to classes.\n * These methods works only for instances of resources and properties, not for ontologies (data model).\n */\nexport module ConvertJSONLD {\n\n    /**\n     * Function to be passed to a filter used on an array of property names\n     * sorting out all non value property names.\n     *\n     * Gets all property names that refer to value objects.\n     *\n     * @param propName the name of a property to be checked.\n     * @returns boolean - indicating if the name refers to a value property.\n     */\n    const getPropertyNames = (propName) => {\n        return propName !== '@id'\n            && propName !== '@type'\n            && propName !== KnoraConstants.RdfsLabel\n            && propName !== KnoraConstants.attachedToProject\n            && propName !== KnoraConstants.attachedToUser\n            && propName !== KnoraConstants.creationDate\n            && propName !== KnoraConstants.lastModificationDate\n            && propName !== KnoraConstants.hasPermissions\n            && propName !== KnoraConstants.userHasPermission\n            && propName !== KnoraConstants.ArkUrl\n            && propName !== KnoraConstants.versionArkUrl;\n    };\n\n\n    /**\n     * @deprecated Use **constructResource** instead\n     *\n     * Constructs a [[ReadResource]] from JSON-LD.\n     * Expects JSON-LD with all Iris fully expanded.\n     *\n     * @param {object} resourceJSONLD an a resource and its properties serialized as JSON-LD.\n     * @returns ReadResource\n     */\n    function constructReadResource(resourceJSONLD: object): ReadResource {\n\n        const properties: ReadProperties = constructReadProperties(resourceJSONLD);\n\n        return new ReadResource(\n            resourceJSONLD['@id'],\n            resourceJSONLD['@type'],\n            resourceJSONLD[KnoraConstants.RdfsLabel],\n            [], // to be updated once another request has been made\n            [], // to be updated once another request has been made\n            [], // to be updated once another request has been made\n            [], // to be updated once another request has been made\n            properties\n        );\n    }\n\n    function constructResource(resourceJSONLD: object): Resource {\n\n        const properties: ReadProperties = constructReadProperties(resourceJSONLD);\n\n        return new Resource(\n            resourceJSONLD['@id'],\n            resourceJSONLD['@type'],\n            resourceJSONLD[KnoraConstants.RdfsLabel],\n            [], // incomingAnnotations; to be updated once another request has been made\n            [], // incomingFileRepresentations, to be updated once another request has been made\n            [], // incomingLinks; to be updated once another request has been made\n            {}, // fileRepresentationsToDisplay; to be updated once another request has been made\n            properties\n        );\n    }\n\n    /**\n     * Constructs a [[ReadPropertyItem]] from JSON-LD,\n     * taking into account the property's value type.\n     * Expects JSON-LD with all Iris fully expanded.\n     *\n     * @param {Object} propValue the value serialized as JSON-LD.\n     * @param {string} propIri the Iri of the property.\n     * @param {ReadLinkValue[]} standoffLinkValues standoffLinkValues of the resource. Text values may contain links to other resources.\n     * @returns a [[ReadPropertyItem]] or `undefined` in case the value could not be processed correctly.\n     */\n    function createValueSpecificProp(\n        propValue: Object, propIri: string, standoffLinkValues: ReadLinkValue[]): ReadPropertyItem | undefined {\n\n        // convert a JSON-LD property value to a `ReadPropertyItem`\n\n        let valueSpecificProp: ReadPropertyItem;\n\n        // check for the property's value type\n        switch (propValue['@type']) {\n            case KnoraConstants.TextValue:\n                // a text value might be given as plain string, html or xml.\n                let textValue: ReadPropertyItem;\n\n                if (propValue[KnoraConstants.valueAsString] !== undefined) {\n                    textValue = new ReadTextValueAsString(propValue['@id'], propIri, propValue[KnoraConstants.valueAsString]);\n                } else if (propValue[KnoraConstants.textValueAsHtml] !== undefined) {\n\n                    const referredResources: ReferredResourcesByStandoffLink = {};\n\n                    // check for standoff links and include referred resources, if any\n                    // when the user interacts with a standoff link, further information about the referred resource can be shown\n                    for (const standoffLink of standoffLinkValues) {\n                        const referredRes: ReadResource = standoffLink.referredResource;\n                        referredResources[referredRes.id] = referredRes;\n                    }\n\n                    textValue = new ReadTextValueAsHtml(\n                        propValue['@id'], propIri, propValue[KnoraConstants.textValueAsHtml], referredResources\n                    );\n                } else if (\n                    propValue[KnoraConstants.textValueAsXml] !== undefined && propValue[KnoraConstants.textValueHasMapping]['@id'] !== undefined) {\n                    textValue = new ReadTextValueAsXml(\n                        propValue['@id'], propIri, propValue[KnoraConstants.textValueAsXml], propValue[KnoraConstants.textValueHasMapping]['@id']\n                    );\n                } else {\n                    // expected text value members not defined\n                    console.error('ERROR: Invalid text value: ' + JSON.stringify(propValue));\n                }\n\n                valueSpecificProp = textValue;\n                break;\n\n            case KnoraConstants.DateValue:\n                const dateValue = new ReadDateValue(propValue['@id'],\n                    propIri,\n                    propValue[KnoraConstants.dateValueHasCalendar],\n                    propValue[KnoraConstants.dateValueHasStartYear],\n                    propValue[KnoraConstants.dateValueHasEndYear],\n                    propValue[KnoraConstants.dateValueHasStartEra],\n                    propValue[KnoraConstants.dateValueHasEndEra],\n                    propValue[KnoraConstants.dateValueHasStartMonth],\n                    propValue[KnoraConstants.dateValueHasEndMonth],\n                    propValue[KnoraConstants.dateValueHasStartDay],\n                    propValue[KnoraConstants.dateValueHasEndDay]);\n\n                valueSpecificProp = dateValue;\n                break;\n\n            case KnoraConstants.LinkValue:\n\n                let linkValue: ReadLinkValue;\n\n                // check if the referred resource is given as an object or just as an IRI\n                if (propValue[KnoraConstants.linkValueHasTarget] !== undefined) {\n                    // linkValueHasTarget contains the object\n\n                    const referredResource: ReadResource = constructReadResource(propValue[KnoraConstants.linkValueHasTarget]);\n\n                    linkValue = new ReadLinkValue(propValue['@id'], propIri, referredResource.id, referredResource);\n                } else if (propValue[KnoraConstants.linkValueHasTargetIri] !== undefined) {\n                    // linkValueHasTargetIri contains the resource's Iri\n\n                    const referredResourceIri = propValue[KnoraConstants.linkValueHasTargetIri]['@id'];\n\n                    linkValue = new ReadLinkValue(propValue['@id'], propIri, referredResourceIri);\n                } else if (propValue[KnoraConstants.linkValueHasSource] !== undefined) {\n                    // linkValueHasSource contains the object\n\n                    const incomingResource: ReadResource = constructReadResource(propValue[KnoraConstants.linkValueHasSource]);\n\n                    linkValue = new ReadLinkValue(propValue['@id'], propIri, incomingResource.id, incomingResource);\n                } else if (propValue[KnoraConstants.linkValueHasSourceIri] !== undefined) {\n                    // linkValueHasSourceIri contains the resource's Iri\n\n                    const incomingResourceIri = propValue[KnoraConstants.linkValueHasSourceIri]['@id'];\n\n                    linkValue = new ReadLinkValue(propValue['@id'], propIri, incomingResourceIri);\n                }\n\n                valueSpecificProp = linkValue;\n                break;\n\n            case KnoraConstants.IntValue:\n\n                const intValue = new ReadIntegerValue(propValue['@id'], propIri, propValue[KnoraConstants.integerValueAsInteger]);\n                valueSpecificProp = intValue;\n\n                break;\n\n            case KnoraConstants.DecimalValue:\n\n                // a decimal value is represented as a string in order to preserve its precision\n                const decVal: number = parseFloat(propValue[KnoraConstants.decimalValueAsDecimal]['@value']);\n\n                const decimalValue = new ReadDecimalValue(propValue['@id'], propIri, decVal);\n                valueSpecificProp = decimalValue;\n\n                break;\n\n\n            case KnoraConstants.StillImageFileValue:\n\n                const stillImageFileValue: ReadStillImageFileValue = new ReadStillImageFileValue(\n                    propValue['@id'],\n                    propIri,\n                    propValue[KnoraConstants.fileValueHasFilename],\n                    propValue[KnoraConstants.stillImageFileValueHasIIIFBaseUrl]['@value'],\n                    propValue[KnoraConstants.fileValueAsUrl]['@value'],\n                    propValue[KnoraConstants.stillImageFileValueHasDimX],\n                    propValue[KnoraConstants.stillImageFileValueHasDimY]\n                );\n\n                valueSpecificProp = stillImageFileValue;\n\n                break;\n\n            case KnoraConstants.MovingImageFileValue:\n\n                const movingImageFileValue: ReadMovingImageFileValue = new ReadMovingImageFileValue(\n                    propValue['@id'],\n                    propIri,\n                    propValue[KnoraConstants.fileValueHasFilename],\n                    propValue[KnoraConstants.fileValueAsUrl]['@value'],\n                    propValue[KnoraConstants.movingImageFileValueHasDimX],\n                    propValue[KnoraConstants.movingImageFileValueHasDimY],\n                    propValue[KnoraConstants.movingImageFileValueHasDuration],\n                    propValue[KnoraConstants.movingImageFileValueHasFps]\n                );\n\n                valueSpecificProp = movingImageFileValue;\n\n                break;\n\n            case KnoraConstants.AudioFileValue:\n\n                const audioFileValue: ReadAudioFileValue = new ReadAudioFileValue(\n                    propValue['@id'],\n                    propIri,\n                    propValue[KnoraConstants.fileValueHasFilename],\n                    propValue[KnoraConstants.fileValueAsUrl]['@value'],\n                    propValue[KnoraConstants.audioFileValueHasDuration]\n                );\n\n                valueSpecificProp = audioFileValue;\n\n                break;\n\n            case KnoraConstants.DDDFileValue:\n\n                const dddFileValue: ReadDDDFileValue = new ReadDDDFileValue(\n                    propValue['@id'],\n                    propIri,\n                    propValue[KnoraConstants.fileValueHasFilename],\n                    propValue[KnoraConstants.fileValueAsUrl]['@value']\n                );\n\n                valueSpecificProp = dddFileValue;\n\n                break;\n\n            case KnoraConstants.DocumentFileValue:\n\n                const documentFileValue: ReadDocumentFileValue = new ReadDocumentFileValue(\n                    propValue['@id'],\n                    propIri,\n                    propValue[KnoraConstants.fileValueHasFilename],\n                    propValue[KnoraConstants.fileValueAsUrl]['@value']\n                );\n\n                valueSpecificProp = documentFileValue;\n\n                break;\n\n            case KnoraConstants.TextFileValue:\n\n                const textFileValue = new ReadTextFileValue(\n                    propValue['@id'],\n                    propIri,\n                    propValue[KnoraConstants.fileValueHasFilename],\n                    propValue[KnoraConstants.fileValueAsUrl]['@value']\n                );\n\n                valueSpecificProp = textFileValue;\n\n                break;\n\n            case KnoraConstants.ColorValue:\n\n                const readColorValue: ReadColorValue = new ReadColorValue(\n                    propValue['@id'],\n                    propIri,\n                    propValue[KnoraConstants.colorValueAsColor]\n                );\n\n                valueSpecificProp = readColorValue;\n\n                break;\n\n            case KnoraConstants.GeomValue:\n\n                const readGeomValue: ReadGeomValue = new ReadGeomValue(\n                    propValue['@id'],\n                    propIri,\n                    propValue[KnoraConstants.geometryValueAsGeometry]\n                );\n\n                valueSpecificProp = readGeomValue;\n\n                break;\n\n            case KnoraConstants.UriValue:\n\n                const uriValue: ReadUriValue = new ReadUriValue(\n                    propValue['@id'],\n                    propIri,\n                    propValue[KnoraConstants.uriValueAsUri]['@value']\n                );\n\n                valueSpecificProp = uriValue;\n\n                break;\n\n            case KnoraConstants.BooleanValue:\n\n                const boolValue: ReadBooleanValue = new ReadBooleanValue(\n                    propValue['@id'],\n                    propIri,\n                    propValue[KnoraConstants.booleanValueAsBoolean]\n                );\n\n                valueSpecificProp = boolValue;\n\n                break;\n\n\n            case KnoraConstants.IntervalValue:\n\n                // represented as strings to preserve precision\n                const intStart = parseFloat(propValue[KnoraConstants.intervalValueHasStart]['@value']);\n                const intEnd = parseFloat(propValue[KnoraConstants.intervalValueHasEnd]['@value']);\n\n                const intervalValue: ReadIntervalValue = new ReadIntervalValue(\n                    propValue['@id'],\n                    propIri,\n                    intStart,\n                    intEnd\n                );\n\n                valueSpecificProp = intervalValue;\n\n                break;\n\n            case KnoraConstants.ListValue:\n\n                const listValue: ReadListValue = new ReadListValue(\n                    propValue['@id'],\n                    propIri,\n                    propValue[KnoraConstants.listValueAsListNode]['@id']\n                );\n\n                valueSpecificProp = listValue;\n\n                break;\n\n            default:\n                // unsupported value type\n                console.error('ERROR: value type not implemented yet: ' + propValue['@type'] + '(' + propValue['@id'] + ')');\n                break;\n        }\n\n        return valueSpecificProp;\n\n    }\n\n\n    /**\n     * Construct a [[ReadProperties]] from JSON-LD.\n     * Expects JSON-LD with all Iris fully expanded.\n     *\n     * @param {object} resourceJSONLD an object describing the resource and its properties.\n     * @returns ReadProperties\n     */\n    function constructReadProperties(resourceJSONLD: object): ReadProperties {\n\n        // JSON-LD representing standoff link values\n        // text values may contain standoff links\n        const standoffLinkValuesJSONLD: Object = resourceJSONLD[KnoraConstants.hasStandoffLinkToValue];\n\n        // to be populated with standoff link values\n        const standoffLinkValues: ReadLinkValue[] = [];\n\n        // convert each standoff link value JSON-LD object to a ReadLinkValue\n        // in order populate the collection with all the standoff link values\n        if (standoffLinkValuesJSONLD !== undefined && Array.isArray(standoffLinkValuesJSONLD)) {\n            for (const standoffLinkJSONLD of standoffLinkValuesJSONLD) {\n                const standoffVal: ReadLinkValue = createValueSpecificProp(\n                    standoffLinkJSONLD, KnoraConstants.hasStandoffLinkToValue, []\n                ) as ReadLinkValue;\n\n                standoffLinkValues.push(standoffVal);\n            }\n        } else if (standoffLinkValuesJSONLD !== undefined) {\n            const standoffVal = createValueSpecificProp(\n                standoffLinkValuesJSONLD, KnoraConstants.hasStandoffLinkToValue, []\n            ) as ReadLinkValue;\n\n            standoffLinkValues.push(standoffVal);\n        }\n\n        let propNames = Object.keys(resourceJSONLD);\n\n        // filter out everything that is not a Knora property name\n        propNames = propNames.filter(getPropertyNames);\n\n        const properties: ReadProperties = {};\n\n        // iterate over all the given property names\n        for (const propName of propNames) {\n\n            const propValues: Array<ReadPropertyItem> = [];\n\n            // either an array of values or just one value is given\n            if (Array.isArray(resourceJSONLD[propName])) {\n                // array of values\n\n                // for each property name, an array of property values is given, iterate over it\n                for (const propValue of resourceJSONLD[propName]) {\n\n                    // convert a JSON-LD property value to a `ReadPropertyItem`\n                    const valueSpecificProp: ReadPropertyItem = createValueSpecificProp(propValue, propName, standoffLinkValues);\n\n                    // if it is undefined, the value could not be constructed correctly\n                    // add the property value to the array of property values\n                    if (valueSpecificProp !== undefined) propValues.push(valueSpecificProp);\n\n                }\n            } else {\n                // only one value\n\n                const valueSpecificProp: ReadPropertyItem = createValueSpecificProp(resourceJSONLD[propName], propName, standoffLinkValues);\n\n                // if it is undefined, the value could not be constructed correctly\n                // add the property value to the array of property values\n                if (valueSpecificProp !== undefined) propValues.push(valueSpecificProp);\n            }\n\n            // add the property to the properties object\n            properties[propName] = propValues;\n\n        }\n\n        return properties;\n    }\n\n    /**\n     * Turns an API response in JSON-LD representing a sequence of resources into a [[ReadResourcesSequence]].\n     * Expects JSON-LD with all Iris fully expanded.\n     *\n     * @param {object} resourcesResponseJSONLD a resource or a sequence of resources, represented as a JSON-LD object.\n     * @returns ReadResourcesSequence - sequence of read resources\n     */\n    export function createReadResourcesSequenceFromJsonLD(resourcesResponseJSONLD: object): ReadResourcesSequence {\n\n        const resources: Array<ReadResource> = [];\n        let numberOfResources: number;\n        const resourcesGraph = resourcesResponseJSONLD['@graph'];\n\n        // either an array of resources or just one resource is given\n        if (resourcesGraph !== undefined) {\n            // an array of resources\n            numberOfResources = resourcesGraph.length;\n\n            for (const resourceJSONLD of resourcesGraph) {\n\n                const resource: ReadResource = constructReadResource(resourceJSONLD);\n\n                // add the resource to the resources array\n                resources.push(resource);\n            }\n        } else {\n            if (Object.keys(resourcesResponseJSONLD).length === 0) {\n                // empty answer, no resources given\n                numberOfResources = 0;\n            } else {\n\n                // only one resource\n                numberOfResources = 1;\n\n                const resource: ReadResource = constructReadResource(resourcesResponseJSONLD);\n\n                // add the resource to the resources array\n                resources.push(resource);\n            }\n        }\n\n        return new ReadResourcesSequence(resources, numberOfResources);\n\n    }\n\n    export function createResourcesSequenceFromJsonLD(resourcesResponseJSONLD: object): ResourcesSequence {\n\n        const resources: Array<Resource> = [];\n        let numberOfResources: number;\n        const resourcesGraph = resourcesResponseJSONLD['@graph'];\n\n        // either an array of resources or just one resource is given\n        if (resourcesGraph !== undefined) {\n            // an array of resources\n            numberOfResources = resourcesGraph.length;\n\n            for (const resourceJSONLD of resourcesGraph) {\n\n                const resource: Resource = constructResource(resourceJSONLD);\n\n                // add the resource to the resources array\n                resources.push(resource);\n            }\n        } else {\n            if (Object.keys(resourcesResponseJSONLD).length === 0) {\n                // empty answer, no resources given\n                numberOfResources = 0;\n            } else {\n\n                // only one resource\n                numberOfResources = 1;\n\n                const resource: Resource = constructResource(resourcesResponseJSONLD);\n\n                // add the resource to the resources array\n                resources.push(resource);\n            }\n        }\n\n        return new ResourcesSequence(resources, numberOfResources);\n\n    }\n\n    /**\n     * Collects all the types (classes) of referred resources from a given resource (from its linking properties).\n     * Expects JSON-LD with all Iris fully expanded.\n     *\n     * @param {object} resourceJSONLD JSON-LD describing one resource.\n     * @return string[] - an Array of resource class Iris (including duplicates).\n     */\n    function getReferredResourceClasses(resourceJSONLD: object): string[] {\n\n        let propNames = Object.keys(resourceJSONLD);\n        // filter out everything that is not a Knora property name\n        propNames = propNames.filter(getPropertyNames);\n\n        const referredResourceClasses = [];\n\n        for (const prop of propNames) {\n\n            // several values given for this property\n            if (Array.isArray(resourceJSONLD[prop])) {\n\n                for (const referredRes of resourceJSONLD[prop]) {\n\n                    // if the property is a LinkValue and it contains an embedded resource, get its type\n                    if (referredRes['@type'] === KnoraConstants.LinkValue && referredRes[KnoraConstants.linkValueHasTarget] !== undefined) {\n\n                        // target resource is represented\n                        referredResourceClasses.push(referredRes[KnoraConstants.linkValueHasTarget]['@type']);\n                    } else if (\n                        referredRes['@type'] === KnoraConstants.LinkValue && referredRes[KnoraConstants.linkValueHasSource] !== undefined) {\n                        // source resource is represented\n                        referredResourceClasses.push(referredRes[KnoraConstants.linkValueHasSource]['@type']);\n                    }\n\n                }\n            } else {\n                // only one value given for this property\n\n                // if the property is a LinkValue and it contains an embedded resource, get its type\n                if (\n                    resourceJSONLD[prop]['@type']\n                    === KnoraConstants.LinkValue && resourceJSONLD[prop][KnoraConstants.linkValueHasTarget]\n                    !== undefined) {\n\n                    // target resource is represented\n                    referredResourceClasses.push(resourceJSONLD[prop][KnoraConstants.linkValueHasTarget]['@type']);\n                } else if (\n                    resourceJSONLD[prop]['@type']\n                    === KnoraConstants.LinkValue && resourceJSONLD[prop][KnoraConstants.linkValueHasSource]\n                    !== undefined) {\n                    // source resource is represented\n                    referredResourceClasses.push(resourceJSONLD[prop][KnoraConstants.linkValueHasSource]['@type']);\n                }\n            }\n\n        }\n\n        return referredResourceClasses;\n\n    }\n\n    /**\n     * Gets the resource types (classes) from a JSON-LD representing a sequence of resources.\n     * Expects JSON-LD with all Iris fully expanded.\n     *\n     * @param resourcesResponseJSONLD a sequence of resources, represented as a JSON-LD object.\n     * @returns string[] - the resource class Iris (without duplicates).\n     */\n    export function getResourceClassesFromJsonLD(resourcesResponseJSONLD: object): string[] {\n\n        const resourcesGraph = resourcesResponseJSONLD['@graph'];\n        let resourceClasses: Array<string> = [];\n\n        // either an array of resources or just one resource is given\n        if (resourcesGraph !== undefined) {\n            // an array of resources\n\n            for (const resourceJSONLD of resourcesGraph) {\n                // get class of the current resource\n                resourceClasses.push(resourceJSONLD['@type']);\n\n                // get the classes of referred resources\n                const referredResourceClasses = getReferredResourceClasses(resourceJSONLD);\n\n                resourceClasses = resourceClasses.concat(referredResourceClasses);\n\n            }\n\n        } else {\n            // only one resource\n\n            if (Object.keys(resourcesResponseJSONLD).length === 0) {\n                return [];\n            } else {\n                resourceClasses.push(resourcesResponseJSONLD['@type']);\n\n                // get the classes of referred resources\n                const referredResourceClasses = getReferredResourceClasses(resourcesResponseJSONLD);\n\n                resourceClasses = resourceClasses.concat(referredResourceClasses);\n            }\n        }\n\n        // filter out duplicates\n        return resourceClasses.filter(Utils.filterOutDuplicates);\n\n    }\n\n    /**\n     * Turns a JSON-LD response to a count query into a `CountQueryResult`.\n     * Expects JSON-LD with all Iris fully expanded.\n     *\n     * @param countQueryJSONLD\n     * @returns {CountQueryResult}\n     */\n    export function createCountQueryResult(countQueryJSONLD: object) {\n        return new CountQueryResult(countQueryJSONLD[KnoraConstants.schemaNumberOfItems]);\n    }\n}\n","import { HttpClient, HttpParams } from '@angular/common/http';\nimport { Inject, Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map, mergeMap } from 'rxjs/operators';\nimport { KuiCoreConfigToken } from '../../core.module';\nimport { ApiServiceResult, CountQueryResult, ReadResourcesSequence, ResourcesSequence } from '../../declarations';\nimport { ApiService } from '../api.service';\nimport { ConvertJSONLD } from './convert-jsonld';\nimport { OntologyCacheService, OntologyInformation } from './ontology-cache.service';\n\nexport interface FulltextSearchParams {\n\n    limitToResourceClass?: string;\n\n    limitToProject?: string;\n\n    limitToStandoffClass?: string;\n}\n\nexport interface SearchByLabelParams {\n\n    limitToResourceClass?: string;\n\n    limitToProject?: string;\n}\n\n/**\n * Performs searches (fulltext or extended) and search count queries into Knora.\n */\n@Injectable({\n    providedIn: 'root',\n})\nexport class SearchService extends ApiService {\n\n    constructor (public http: HttpClient,\n        @Inject(KuiCoreConfigToken) public config,\n        private _ontologyCacheService: OntologyCacheService) {\n        super(http, config);\n    }\n\n    /**\n     * Assign fulltext search params to http params.\n     *\n     * @param {FulltextSearchParams} params\n     * @param {HttpParams} httpParams\n     * @returns {HttpParams}\n     */\n    private processFulltextSearchParams(params: FulltextSearchParams, httpParams: HttpParams): HttpParams {\n\n        // avoid reassignment to method param\n        let searchParams = httpParams;\n\n        // HttpParams is immutable, `set` returns a new instance\n\n        if (params.limitToProject !== undefined) {\n            searchParams = searchParams.set('limitToProject', params.limitToProject);\n        }\n\n        if (params.limitToResourceClass !== undefined) {\n            searchParams = searchParams.set('limitToResourceClass', params.limitToResourceClass);\n        }\n\n        if (params.limitToStandoffClass !== undefined) {\n            searchParams = searchParams.set('limitToStandoffClass', params.limitToStandoffClass);\n        }\n\n        return searchParams;\n\n    }\n    /**\n     * Assign search by label search params to http params.\n     *\n     * @param {SearchByLabelParams} params\n     * @param {HttpParams} httpParams\n     * @returns {HttpParams}\n     */\n    private processSearchByLabelParams(params: SearchByLabelParams, httpParams: HttpParams): HttpParams {\n\n        // avoid reassignment to method param\n        let searchParams = httpParams;\n\n        // HttpParams is immutable, `set` returns a new instance\n\n        if (params.limitToResourceClass !== undefined) {\n            searchParams = searchParams.set('limitToResourceClass', params.limitToResourceClass);\n        }\n\n        if (params.limitToProject !== undefined) {\n            searchParams = searchParams.set('limitToProject', params.limitToProject);\n        }\n\n        return searchParams;\n\n    }\n\n    /**\n     * @deprecated\n     *\n     * Converts a JSON-LD object to a `ReadResorceSequence`.\n     * To be passed as a function pointer (arrow notation required).\n     *\n     * @param {Object} resourceResponse\n     * @returns {Observable<ReadResourcesSequence>}\n     */\n    private convertJSONLDToReadResourceSequence: (resourceResponse: Object) => Observable<ReadResourcesSequence> = (resourceResponse: Object) => {\n        // convert JSON-LD into a ReadResourceSequence\n        const resSeq: ReadResourcesSequence = ConvertJSONLD.createReadResourcesSequenceFromJsonLD(resourceResponse);\n\n        // collect resource class Iris\n        const resourceClassIris: string[] = ConvertJSONLD.getResourceClassesFromJsonLD(resourceResponse);\n\n        // request information about resource classes\n        return this._ontologyCacheService.getResourceClassDefinitions(resourceClassIris).pipe(\n            map(\n                (ontoInfo: OntologyInformation) => {\n                    // add ontology information to ReadResourceSequence\n                    resSeq.ontologyInformation.updateOntologyInformation(ontoInfo);\n                    return resSeq;\n                }\n            )\n        );\n    }\n    /**\n     * Converts a JSON-LD object to a `ResourcesSequence`\n     *\n     * @param  {Object} resourceResponse\n     */\n    private convertJSONLDToResourcesSequence: (resourceResponse: Object) => Observable<ResourcesSequence> = (resourceResponse: Object) => {\n        // convert JSON-LD into a ResourcesSequence\n        const resSeq: ResourcesSequence = ConvertJSONLD.createResourcesSequenceFromJsonLD(resourceResponse);\n\n        // collect resource class Iris\n        const resourceClassIris: string[] = ConvertJSONLD.getResourceClassesFromJsonLD(resourceResponse);\n\n        // request information about resource classes\n        return this._ontologyCacheService.getResourceClassDefinitions(resourceClassIris).pipe(\n            map(\n                (ontoInfo: OntologyInformation) => {\n                    // add ontology information to ResourcesSequence\n                    resSeq.ontologyInformation.updateOntologyInformation(ontoInfo);\n                    return resSeq;\n                }\n            )\n        );\n    }\n\n    /**\n     * Performs a fulltext search.\n     * TODO: mark as deprecated, use of `doFullTextSearchReadResourceSequence` recommended\n     *\n     * @param {string} searchTerm the term to search for.\n     * @param {number} offset the offset to be used (for paging, first offset is 0).\n     * @param {FulltextSearchParams} params restrictions, if any.\n     * @returns Observable<ApiServiceResult>\n     */\n    doFulltextSearch(searchTerm: string, offset: number = 0, params?: FulltextSearchParams): Observable<ApiServiceResult> {\n\n        if (searchTerm === undefined || searchTerm.length === 0) {\n            return Observable.create(observer => observer.error('No search term given for call of SearchService.doFulltextSearch'));\n        }\n\n        let httpParams = new HttpParams();\n\n        httpParams = httpParams.set('offset', offset.toString());\n\n        if (params !== undefined) {\n            httpParams = this.processFulltextSearchParams(params, httpParams);\n        }\n\n        return this.httpGet('/v2/search/' + encodeURIComponent(searchTerm), httpParams);\n    }\n\n    /**\n     * Performs a fulltext search and turns the result into a `ReadResourceSequence`.\n     *\n     * @param {string} searchTerm the term to search for.\n     * @param {number} offset the offset to be used (for paging, first offset is 0).\n     * @param {FulltextSearchParams} params restrictions, if any.\n     * @returns Observable<ApiServiceResult>\n     */\n    doFullTextSearchReadResourceSequence(searchTerm: string, offset: number = 0, params?: FulltextSearchParams): Observable<ReadResourcesSequence> {\n        if (searchTerm === undefined || searchTerm.length === 0) {\n            return Observable.create(observer => observer.error('No search term given for call of SearchService.doFulltextSearch'));\n        }\n\n        let httpParams = new HttpParams();\n\n        httpParams = httpParams.set('offset', offset.toString());\n\n        if (params !== undefined) {\n            httpParams = this.processFulltextSearchParams(params, httpParams);\n        }\n\n        const res: Observable<any> = this.httpGet('/v2/search/' + encodeURIComponent(searchTerm), httpParams);\n\n        return res.pipe(\n            mergeMap(\n                // this would return an Observable of a PromiseObservable -> combine them into one Observable\n                this.processJSONLD\n            ),\n            mergeMap(\n                // return Observable of ReadResourcesSequence\n                this.convertJSONLDToReadResourceSequence\n            )\n        );\n    }\n\n    /**\n     * Performs a fulltext search count query.\n     * TODO: mark as deprecated, use of `doFullTextSearchCountQueryCountQueryResult` recommended\n     *\n     * @param searchTerm the term to search for.\n     * @param {FulltextSearchParams} params restrictions, if any.\n     * @returns Observable<ApiServiceResult>\n     */\n    doFulltextSearchCountQuery(searchTerm: string, params?: FulltextSearchParams): Observable<ApiServiceResult> {\n\n        if (searchTerm === undefined || searchTerm.length === 0) {\n            return Observable.create(observer => observer.error('No search term given for call of SearchService.doFulltextSearchCountQuery'));\n        }\n\n        let httpParams = new HttpParams();\n\n        if (params !== undefined) {\n            httpParams = this.processFulltextSearchParams(params, httpParams);\n        }\n\n        return this.httpGet('/v2/search/count/' + encodeURIComponent(searchTerm), httpParams);\n    }\n\n    /**\n     * Performs a fulltext search count query and turns the result into a `CountQueryResult`.\n     *\n     * @param {string} searchTerm the term to search for.\n     * @param {FulltextSearchParams} params restrictions, if any.\n     * @returns Observable<CountQueryResult>\n     */\n    doFullTextSearchCountQueryCountQueryResult(searchTerm: string, params?: FulltextSearchParams): Observable<CountQueryResult> {\n\n        if (searchTerm === undefined || searchTerm.length === 0) {\n            return Observable.create(observer => observer.error('No search term given for call of SearchService.doFulltextSearchCountQuery'));\n        }\n\n        let httpParams = new HttpParams();\n\n        if (params !== undefined) {\n            httpParams = this.processFulltextSearchParams(params, httpParams);\n        }\n\n        const res = this.httpGet('/v2/search/count/' + encodeURIComponent(searchTerm), httpParams);\n\n        return res.pipe(\n            mergeMap(\n                // this would return an Observable of a PromiseObservable -> combine them into one Observable\n                this.processJSONLD\n            ),\n            map(\n                // convert to a `CountQueryResult`\n                ConvertJSONLD.createCountQueryResult\n            )\n        );\n    }\n\n    /**\n     * Performs an extended search.\n     * TODO: mark as deprecated, use of `doExtendedSearchReadResourceSequence` recommended\n     *\n     * @param gravsearchQuery the Sparql query string to be sent to Knora.\n     * @returns Observable<ApiServiceResult>\n     */\n    doExtendedSearch(gravsearchQuery: string): Observable<ApiServiceResult> {\n\n        if (gravsearchQuery === undefined || gravsearchQuery.length === 0) {\n            return Observable.create(observer => observer.error('No Sparql string given for call of SearchService.doExtendedSearch'));\n        }\n\n        return this.httpPost('/v2/searchextended', gravsearchQuery);\n    }\n\n    /**\n     * @deprecated\n     * Performs an extended search and turns the result into a `ReadResourceSequence`.\n     *\n     * @param gravsearchQuery the Sparql query string to be sent to Knora.\n     * @returns Observable<ApiServiceResult>\n     */\n    doExtendedSearchReadResourceSequence(gravsearchQuery: string): Observable<ReadResourcesSequence> {\n\n        if (gravsearchQuery === undefined || gravsearchQuery.length === 0) {\n            return Observable.create(observer => observer.error('No Sparql string given for call of SearchService.doExtendedSearch'));\n        }\n\n        const res = this.httpPost('/v2/searchextended', gravsearchQuery);\n\n        return res.pipe(\n            mergeMap(\n                this.processJSONLD\n            ),\n            mergeMap(\n                this.convertJSONLDToReadResourceSequence\n            )\n        );\n    }\n    /**\n     * Performs an extended search and turns the result into a `ResourcesSequence`.\n     *\n     * @param  {string} gravsearchQuery\n     * @returns Observable\n     */\n    doExtendedSearchResourcesSequence(gravsearchQuery: string): Observable<ResourcesSequence> {\n\n        if (gravsearchQuery === undefined || gravsearchQuery.length === 0) {\n            return Observable.create(observer => observer.error('No Sparql string given for call of SearchService.doExtendedSearch'));\n        }\n\n        const res = this.httpPost('/v2/searchextended', gravsearchQuery);\n\n        return res.pipe(\n            mergeMap(\n                this.processJSONLD\n            ),\n            mergeMap(\n                this.convertJSONLDToResourcesSequence\n            )\n        );\n    }\n\n    /**\n     * Performs an extended search count query.\n     * TODO: mark as deprecated, use of `doExtendedSearchReadResourceSequence` recommended\n     *\n     * @param {string} gravsearchQuery the Sparql query string to be sent to Knora.\n     * @returns Observable<ApiServiceResult>\n     */\n    doExtendedSearchCountQuery(gravsearchQuery: string): Observable<ApiServiceResult> {\n\n        if (gravsearchQuery === undefined || gravsearchQuery.length === 0) {\n            return Observable.create(observer => observer.error('No Sparql string given for call of SearchService.doExtendedSearchCountQuery'));\n        }\n\n        return this.httpPost('/v2/searchextended/count', gravsearchQuery);\n    }\n\n    /**\n     * Performs an extended search count query and turns the result into a `CountQueryResult`.\n     *\n     * @param gravsearchQuery the Sparql query string to be sent to Knora.\n     * @returns Observable<ApiServiceResult>\n     */\n    doExtendedSearchCountQueryCountQueryResult(gravsearchQuery: string): Observable<CountQueryResult> {\n\n        if (gravsearchQuery === undefined || gravsearchQuery.length === 0) {\n            return Observable.create(observer => observer.error('No Sparql string given for call of SearchService.doExtendedSearchCountQuery'));\n        }\n\n        const res = this.httpPost('/v2/searchextended/count', gravsearchQuery);\n\n        return res.pipe(\n            mergeMap(\n                // this would return an Observable of a PromiseObservable -> combine them into one Observable\n                this.processJSONLD\n            ),\n            map(\n                // convert to a `CountQueryResult`\n                ConvertJSONLD.createCountQueryResult\n            )\n        );\n    }\n\n    /**\n     * Perform a search by a resource's rdfs:label.\n     * TODO: mark as deprecated, use of `searchByLabelReadResourceSequence` recommended\n     *\n     * @param {string} searchTerm the term to search for.\n     * @param {number} offset offset to use.\n     * @param {FulltextSearchParams} params restrictions, if any.\n     * @returns Observable<ApiServiceResult>\n     */\n    searchByLabel(searchTerm: string, offset: number = 0, params?: SearchByLabelParams): Observable<ApiServiceResult> {\n\n        if (searchTerm === undefined || searchTerm.length === 0) {\n            return Observable.create(observer => observer.error('No search term given for call of SearchService.doFulltextSearch'));\n        }\n\n        let httpParams: HttpParams = new HttpParams();\n\n        httpParams = httpParams.set('offset', offset.toString());\n\n        if (params !== undefined) {\n            httpParams = this.processSearchByLabelParams(params, httpParams);\n        }\n\n        // httpGet() expects only one argument, not 2\n        return this.httpGet('/v2/searchbylabel/' + encodeURIComponent(searchTerm), httpParams);\n\n    }\n\n    /**\n     * Perform a search by a resource's rdfs:label and turns the results in a `ReadResourceSequence`.\n     *\n     * @param {string} searchTerm the term to search for.\n     * @param {number} offset offset to use.\n     * @param {FulltextSearchParams} params restrictions, if any.\n     * @returns Observable<ApiServiceResult>\n     */\n    searchByLabelReadResourceSequence(searchTerm: string, offset: number = 0, params?: SearchByLabelParams): Observable<ReadResourcesSequence> {\n\n        if (searchTerm === undefined || searchTerm.length === 0) {\n            return Observable.create(observer => observer.error('No search term given for call of SearchService.doFulltextSearch'));\n        }\n\n        let httpParams: HttpParams = new HttpParams();\n\n        httpParams = httpParams.set('offset', offset.toString());\n\n        if (params !== undefined) {\n            httpParams = this.processSearchByLabelParams(params, httpParams);\n        }\n\n        const res = this.httpGet('/v2/searchbylabel/' + encodeURIComponent(searchTerm), httpParams);\n\n        return res.pipe(\n            mergeMap(\n                this.processJSONLD\n            ),\n            mergeMap(\n                this.convertJSONLDToReadResourceSequence\n            )\n        );\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { SearchService } from './search.service';\nimport { ReadResourcesSequence, ResourcesSequence } from '../../declarations';\n\n/**\n * Requests incoming information (regions, links, stillImageRepresentations) from Knora.\n */\n@Injectable({\n    providedIn: 'root',\n})\nexport class IncomingService extends SearchService {\n\n    // ------------------------------------------------------------------------\n    // ------------------------------------------------------------------------\n    // (incoming) annotations like region and sequences\n    // ------------------------------------------------------------------------\n\n    /**\n    * Returns all incoming regions for a particular resource.\n    *\n    * @param {string} resourceIRI the Iri of the resource whose Incoming regions should be returned.\n    * @param {number} offset the offset to be used for paging. 0 is the default and is used to get the first page of results.\n    * @returns {Observable<any>}\n    */\n    getIncomingRegions(resourceIRI: string, offset: number): Observable<ReadResourcesSequence> {\n        const sparqlQueryStr = `\nPREFIX knora-api: <http://api.knora.org/ontology/knora-api/simple/v2#>\n\nCONSTRUCT {\n?region knora-api:isMainResource true .\n\n?region knora-api:hasGeometry ?geom .\n\n?region knora-api:hasComment ?comment .\n\n?region knora-api:hasColor ?color .\n} WHERE {\n?region a knora-api:Region .\n?region a knora-api:Resource .\n\n?region knora-api:isRegionOf <${resourceIRI}> .\nknora-api:isRegionOf knora-api:objectType knora-api:Resource .\n\n<${resourceIRI}> a knora-api:Resource .\n\n?region knora-api:hasGeometry ?geom .\nknora-api:hasGeometry knora-api:objectType knora-api:Geom .\n\n?geom a knora-api:Geom .\n\n?region knora-api:hasComment ?comment .\nknora-api:hasComment knora-api:objectType xsd:string .\n\n?comment a xsd:string .\n\n?region knora-api:hasColor ?color .\nknora-api:hasColor knora-api:objectType knora-api:Color .\n\n?color a knora-api:Color .\n} OFFSET ${offset}\n`;\n        // console.log('sparqlQueryStr ', sparqlQueryStr);\n        return this.doExtendedSearchReadResourceSequence(sparqlQueryStr);\n    }\n\n    // ------------------------------------------------------------------------\n    // ------------------------------------------------------------------------\n    // (incoming) file representations e.g. incomingStillImages in case of book\n    // ------------------------------------------------------------------------\n\n    /**\n     * Returns all the StillImageRepresentations for the given resource, if any.\n     * StillImageRepresentations link to the given resource via knora-base:isPartOf.\n     *\n     * @param {string} resourceIri the Iri of the resource whose StillImageRepresentations should be returned.\n     * @param {number} offset the offset to be used for paging. 0 is the default and is used to get the first page of results.\n     * @returns {Observable<any>}\n     */\n    getStillImageRepresentationsForCompoundResource(resourceIri: string, offset: number): Observable<ReadResourcesSequence> {\n        const sparqlQueryStr = `\nPREFIX knora-api: <http://api.knora.org/ontology/knora-api/simple/v2#>\n\nCONSTRUCT {\n?page knora-api:isMainResource true .\n\n?page knora-api:seqnum ?seqnum .\n\n?page knora-api:hasStillImageFile ?file .\n} WHERE {\n\n?page a knora-api:StillImageRepresentation .\n?page a knora-api:Resource .\n\n?page knora-api:isPartOf <${resourceIri}> .\nknora-api:isPartOf knora-api:objectType knora-api:Resource .\n\n<${resourceIri}> a knora-api:Resource .\n\n?page knora-api:seqnum ?seqnum .\nknora-api:seqnum knora-api:objectType xsd:integer .\n\n?seqnum a xsd:integer .\n\n?page knora-api:hasStillImageFile ?file .\nknora-api:hasStillImageFile knora-api:objectType knora-api:File .\n\n?file a knora-api:File .\n\n} ORDER BY ?seqnum\nOFFSET ${offset}\n`;\n\n        return this.doExtendedSearchReadResourceSequence(sparqlQueryStr);\n\n    }\n\n    // ------------------------------------------------------------------------\n    // ------------------------------------------------------------------------\n    // incoming links\n    // ------------------------------------------------------------------------\n\n    /**\n     * @deprecated\n     *\n     * Returns all incoming links for the given resource Iri but incoming regions and still image representations.\n     *\n     * @param {string} resourceIri the Iri of the resource whose incoming links should be returned.\n     * @param {number} offset the offset to be used for paging. 0 is the default and is used to get the first page of results.\n     * @returns {Observable<any>}\n     */\n    getIncomingLinksForResource(resourceIri: string, offset: number): Observable<ReadResourcesSequence> {\n        const sparqlQueryStr = `\nPREFIX knora-api: <http://api.knora.org/ontology/knora-api/simple/v2#>\n\nCONSTRUCT {\n?incomingRes knora-api:isMainResource true .\n\n?incomingRes ?incomingProp <${resourceIri}> .\n\n} WHERE {\n\n?incomingRes a knora-api:Resource .\n\n?incomingRes ?incomingProp <${resourceIri}> .\n\n<${resourceIri}> a knora-api:Resource .\n\n?incomingProp knora-api:objectType knora-api:Resource .\n\nknora-api:isRegionOf knora-api:objectType knora-api:Resource .\nknora-api:isPartOf knora-api:objectType knora-api:Resource .\n\nFILTER NOT EXISTS {\n ?incomingRes  knora-api:isRegionOf <${resourceIri}> .\n}\n\nFILTER NOT EXISTS {\n ?incomingRes  knora-api:isPartOf <${resourceIri}> .\n}\n\n} OFFSET ${offset}\n`;\n\n        return this.doExtendedSearchReadResourceSequence(sparqlQueryStr);\n    }\n\n\n\n    /**\n     * Returns all incoming links for the given resource Iri.\n     *\n     * @param {string} resourceIri the Iri of the resource whose incoming links should be returned.\n     * @param {number} offset the offset to be used for paging. 0 is the default and is used to get the first page of results.\n     * @returns {Observable<any>}\n     */\n    getIncomingLinks(resourceIri: string, offset: number): Observable<ResourcesSequence> {\n        const sparqlQueryStr = `\nPREFIX knora-api: <http://api.knora.org/ontology/knora-api/simple/v2#>\n\nCONSTRUCT {\n?incomingRes knora-api:isMainResource true .\n\n?incomingRes ?incomingProp <${resourceIri}> .\n\n} WHERE {\n\n?incomingRes a knora-api:Resource .\n\n?incomingRes ?incomingProp <${resourceIri}> .\n\n<${resourceIri}> a knora-api:Resource .\n\n?incomingProp knora-api:objectType knora-api:Resource .\n\nknora-api:isRegionOf knora-api:objectType knora-api:Resource .\nknora-api:isPartOf knora-api:objectType knora-api:Resource .\n\nFILTER NOT EXISTS {\n ?incomingRes  knora-api:isRegionOf <${resourceIri}> .\n}\n\nFILTER NOT EXISTS {\n ?incomingRes  knora-api:isPartOf <${resourceIri}> .\n}\n\n} OFFSET ${offset}\n`;\n\n        return this.doExtendedSearchResourcesSequence(sparqlQueryStr);\n    }\n\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Inject, Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map, mergeMap } from 'rxjs/operators';\nimport { KuiCoreConfigToken } from '../../core.module';\nimport { ApiServiceError, ApiServiceResult, KnoraConstants, ReadResourcesSequence, ReadStillImageFileValue, Region, ResourcesSequence, StillImageRepresentation } from '../../declarations';\nimport { ApiService } from '../api.service';\nimport { ConvertJSONLD } from './convert-jsonld';\nimport { IncomingService } from './incoming.service';\nimport { OntologyCacheService, OntologyInformation } from './ontology-cache.service';\n\n/**\n * Requests representation of resources from Knora.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class ResourceService extends ApiService {\n\n    constructor (public http: HttpClient,\n        @Inject(KuiCoreConfigToken) public config,\n        private _incomingService: IncomingService,\n        private _ontologyCacheService: OntologyCacheService) {\n        super(http, config);\n    }\n\n    /**\n     * Given the Iri, requests the representation of a resource.\n     *\n     * @param {string} iri Iri of the resource (not yet URL encoded).\n     * @returns Observable<ApiServiceResult>\n     */\n    // this should return a resource object with incoming links, annotations, file representations\n    // it includes a property: FileRepresentation to display with the parameters for the media type viewer\n    getResource(iri: string): Observable<ResourcesSequence | ApiServiceError> {\n\n        const res: Observable<ApiServiceResult | ApiServiceError> = this.httpGet('/v2/resources/' + encodeURIComponent(iri));\n\n        return res.pipe(\n            mergeMap(\n                // this would return an Observable of a PromiseObservable -> combine them into one Observable\n                this.processJSONLD\n            ),\n            mergeMap(\n                // return Observable of ReadResourcesSequence\n                (resourceResponse: object) => {\n                    // convert JSON-LD into a ReadResourceSequence\n                    const resSeq: ResourcesSequence = ConvertJSONLD.createResourcesSequenceFromJsonLD(resourceResponse);\n\n                    // collect resource class Iris\n                    const resourceClassIris: string[] = ConvertJSONLD.getResourceClassesFromJsonLD(resourceResponse);\n\n                    const res0 = resSeq.resources[0];\n\n                    // set file representation to display\n\n                    const propKeys: string[] = Object.keys(res0.properties);\n                    switch (true) {\n                        case propKeys.includes(KnoraConstants.hasStillImageFileValue):\n                            // res.fileRepresentationsToDisplay[0] = res.properties[KnoraConstants.hasStillImageFileValue];\n\n                            const imgRepresentations: StillImageRepresentation[] = [];\n\n                            const fileValues: ReadStillImageFileValue[] = res0.properties[KnoraConstants.hasStillImageFileValue] as ReadStillImageFileValue[];\n                            const imagesToDisplay: ReadStillImageFileValue[] = fileValues.filter((image) => {\n                                return !image.isPreview;\n                            });\n\n                            for (const img of imagesToDisplay) {\n\n                                const regions: Region[] = [];\n                                for (const incomingRegion of res0.incomingAnnotations) {\n\n                                    // TODO: change return type in Region from ReadResource into Resource\n                                    // const region = new Region(incomingRegion);\n\n                                    // regions.push(region);\n\n                                }\n\n                                const stillImage = new StillImageRepresentation(img, regions);\n                                imgRepresentations.push(stillImage);\n\n                            }\n\n                            res0.fileRepresentationsToDisplay.stillImage = imgRepresentations;\n\n                            break;\n                        case propKeys.includes(KnoraConstants.hasMovingImageFileValue):\n                            //                            res0.fileRepresentationsToDisplay = res0.properties[KnoraConstants.hasMovingImageFileValue];\n                            break;\n                        case propKeys.includes(KnoraConstants.hasAudioFileValue):\n                            //                            res0.fileRepresentationsToDisplay = res0.properties[KnoraConstants.hasAudioFileValue];\n                            break;\n                        case propKeys.includes(KnoraConstants.hasDocumentFileValue):\n                            //                            res0.fileRepresentationsToDisplay = res0.properties[KnoraConstants.hasDocumentFileValue];\n                            break;\n                        case propKeys.includes(KnoraConstants.hasDDDFileValue):\n                            //                            res0.fileRepresentationsToDisplay = res0.properties[KnoraConstants.hasDDDFileValue];\n                            break;\n\n                        // TODO: TextFileValue\n\n                        default:\n                            // look for incoming fileRepresentation to display\n                            // get incoming stillImage files\n                            this._incomingService.getStillImageRepresentationsForCompoundResource(res0.id, 0).subscribe(\n                                (incomingFiles: ReadResourcesSequence) => {\n\n                                    console.log('incomingFiles', incomingFiles);\n\n                                    if (incomingFiles.resources.length > 0) {\n                                        // update ontology information\n                                        resSeq.ontologyInformation.updateOntologyInformation(incomingFiles.ontologyInformation);\n\n\n                                        // set current offset\n                                        // this.incomingStillImageRepresentationCurrentOffset = offset;\n\n                                        // TODO: implement prepending of StillImageRepresentations when moving to the left (getting previous pages)\n                                        // TODO: append existing images to response and then assign response to `this.resource.incomingStillImageRepresentations`\n                                        // TODO: maybe we have to support non consecutive arrays (sparse arrays)\n\n                                        // append incomingImageRepresentations.resources to this.resource.incomingStillImageRepresentations\n\n                                        Array.prototype.push.apply(res0.incomingFileRepresentations, incomingFiles.resources);\n                                        // Array.prototype.push.apply(resSeq.resources[0].incomingFileRepresentations, incomingImageRepresentations.resources);\n\n                                        const incomingImgRepresentations: StillImageRepresentation[] = [];\n\n                                        for (const inRes of incomingFiles.resources) {\n\n\n\n                                            const incomingFileValues: ReadStillImageFileValue[] = inRes.properties[KnoraConstants.hasStillImageFileValue] as ReadStillImageFileValue[];\n                                            const incomingImagesToDisplay: ReadStillImageFileValue[] = incomingFileValues.filter((image) => {\n                                                return !image.isPreview;\n                                            });\n\n                                            for (const img of incomingImagesToDisplay) {\n\n                                                const regions: Region[] = [];\n                                                /*\n                                                for (const incomingRegion of inRes.incomingAnnotations) {\n\n                                                    // TODO: change return type in Region from ReadResource into Resource\n                                                    // const region = new Region(incomingRegion);\n\n                                                    // regions.push(incomingRegion);\n\n                                                }\n                                                */\n\n                                                const stillImage = new StillImageRepresentation(img, regions);\n                                                incomingImgRepresentations.push(stillImage);\n\n                                            }\n\n                                            res0.fileRepresentationsToDisplay.stillImage = incomingImgRepresentations;\n\n                                        }\n\n\n                                        // prepare attached image files to be displayed\n                                        // BeolResource.collectImagesAndRegionsForResource(this.resource);\n                                    }\n                                },\n                                (error: any) => {\n                                    console.error(error);\n                                }\n                            );\n\n                        // do the same for all other incoming file representations\n                        // TODO: get incoming movingImage files\n\n                        // TODO: get incoming audio files\n\n                        // TODO: get incoming document files\n\n                        // TODO: get incoming text files\n\n                        // TODO: get ddd images files\n                    }\n\n\n                    // resource.properties[KnoraConstants.hasStillImageFileValue]\n\n\n                    // get incoming links\n                    this._incomingService.getIncomingLinks(resSeq.resources[0].id, 0).subscribe(\n                        (incomingRes: ResourcesSequence) => {\n                            // update ontology information\n                            resSeq.ontologyInformation.updateOntologyInformation(incomingRes.ontologyInformation);\n\n                            // Append elements incomingResources to this.sequence.incomingLinks\n                            Array.prototype.push.apply(resSeq.resources[0].incomingLinks, incomingRes.resources);\n                        }\n                    );\n\n                    // get incoming annotations\n\n\n                    // request information about resource classes\n                    return this._ontologyCacheService.getResourceClassDefinitions(resourceClassIris).pipe(\n                        map(\n                            (ontoInfo: OntologyInformation) => {\n                                // add ontology information to ReadResourceSequence\n                                resSeq.ontologyInformation.updateOntologyInformation(ontoInfo);\n\n                                console.log('resSeq -- resourceServie', resSeq);\n\n                                return resSeq;\n                            }\n                        )\n                    );\n                }\n\n            )\n        );\n\n        // let resSeq: Observable<ResourcesSequence>;\n\n        /*\n        this.getResourcesSequence(iri).subscribe(\n            (sequence: ResourcesSequence) => {\n\n                // resSeq = sequence;\n\n                /* pipe(\n                    map((result: ApiServiceResult) => result.getBody(GroupsResponse).groups),\n                    catchError(this.handleJsonError)\n                );\n\n                resSeq.pipe(\n                    map((seq: ResourcesSequence) => sequence),\n                    catchError(this.handleJsonError)\n                ); *\n\n                // get incoming links\n                this._incomingService.getIncomingLinks(sequence.resources[0].id, 0).subscribe(\n                    (incomingResources: ResourcesSequence) => {\n                        // update ontology information\n                        sequence.ontologyInformation.updateOntologyInformation(incomingResources.ontologyInformation);\n\n                        // Append elements incomingResources to this.sequence.incomingLinks\n                        Array.prototype.push.apply(sequence.resources[0].incomingLinks, incomingResources.resources);\n\n                        // if callback is given, execute function with the amount of incoming resources as the parameter\n                        /* TODO: what is callback? Find a solution\n                        if (callback !== undefined) {\n                            callback(incomingResources.resources.length);\n                        }\n                        *\n\n                    },\n                    (error: any) => {\n                        console.error(error);\n                    }\n                );\n\n                // get incoming annotations\n\n                // get incoming filerepresentations\n\n\n\n            },\n            (error: ApiServiceError) => {\n                console.error(error);\n                return error;\n            }\n        );\n\n\n        return resSeq;\n        */\n\n\n    }\n\n    private getResourcesSequence(iri: string): Observable<ResourcesSequence | ApiServiceError> {\n        const res: Observable<ApiServiceResult | ApiServiceError> = this.httpGet('/v2/resources/' + encodeURIComponent(iri));\n\n        return res.pipe(\n            mergeMap(\n                // this would return an Observable of a PromiseObservable -> combine them into one Observable\n                this.processJSONLD\n            ),\n            mergeMap(\n                // return Observable of ReadResourcesSequence\n                (resourceResponse: object) => {\n                    // convert JSON-LD into a ReadResourceSequence\n                    const resSeq: ResourcesSequence = ConvertJSONLD.createResourcesSequenceFromJsonLD(resourceResponse);\n\n                    // collect resource class Iris\n                    const resourceClassIris: string[] = ConvertJSONLD.getResourceClassesFromJsonLD(resourceResponse);\n\n\n\n                    // request information about resource classes\n                    return this._ontologyCacheService.getResourceClassDefinitions(resourceClassIris).pipe(\n                        map(\n                            (ontoInfo: OntologyInformation) => {\n                                // add ontology information to ReadResourceSequence\n                                resSeq.ontologyInformation.updateOntologyInformation(ontoInfo);\n                                return resSeq;\n                            }\n                        )\n                    );\n                }\n            )\n        );\n    }\n\n\n    requestIncomingResources(sequence: ResourcesSequence): void {\n\n        // make sure that this.sequence has been initialized correctly\n        if (sequence === undefined) {\n            return;\n        }\n\n        // request incoming sequences in case of movingImage and audio\n\n        // request incoming regions in case of stillImage and dddImage\n        if (sequence.resources[0].properties[KnoraConstants.hasStillImageFileValue]) {\n            // TODO: check if resources is a StillImageRepresentation using the ontology responder (support for subclass relations required)\n            // the resource is a StillImageRepresentation, check if there are regions pointing to it\n\n            // this.getIncomingRegions(0);\n\n        } else {\n            // this resource is not a StillImageRepresentation\n            // check if there are StillImageRepresentations pointing to this resource\n\n            // this gets the first page of incoming StillImageRepresentations\n            // more pages may be requested by [[this.viewer]].\n            // TODO: for now, we begin with offset 0. This may have to be changed later (beginning somewhere in a collection)\n            // this.getIncomingStillImageRepresentations(0);\n        }\n\n        // check for incoming links for the current resource\n        // this.getIncomingLinks(0);\n\n\n    }\n\n    /**\n     * @deprecated Use **getResourcesSequence** instead\n     *\n     * Given the Iri, requests the representation of a resource as a `ReadResourceSequence`.\n     *\n     * @param {string} iri Iri of the resource (not yet URL encoded).\n     * @returns {Observable<ReadResourcesSequence>}\n     */\n    getReadResource(iri: string): Observable<ReadResourcesSequence | ApiServiceError> {\n        const res: Observable<ApiServiceResult | ApiServiceError> = this.httpGet('/v2/resources/' + encodeURIComponent(iri));\n\n        // TODO: handle case of an ApiServiceError\n\n        return res.pipe(\n            mergeMap(\n                // this would return an Observable of a PromiseObservable -> combine them into one Observable\n                this.processJSONLD\n            ),\n            mergeMap(\n                // return Observable of ReadResourcesSequence\n                (resourceResponse: object) => {\n                    // convert JSON-LD into a ReadResourceSequence\n                    const resSeq: ReadResourcesSequence = ConvertJSONLD.createReadResourcesSequenceFromJsonLD(resourceResponse);\n\n                    // collect resource class Iris\n                    const resourceClassIris: string[] = ConvertJSONLD.getResourceClassesFromJsonLD(resourceResponse);\n\n                    // request information about resource classes\n                    return this._ontologyCacheService.getResourceClassDefinitions(resourceClassIris).pipe(\n                        map(\n                            (ontoInfo: OntologyInformation) => {\n                                // add ontology information to ReadResourceSequence\n                                resSeq.ontologyInformation.updateOntologyInformation(ontoInfo);\n                                return resSeq;\n                            }\n                        )\n                    );\n                }\n            )\n        );\n    }\n\n    // TODO: post, put, delete\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\n\n/**\n * Represents the parameters of an extended search.\n */\nexport class ExtendedSearchParams {\n\n    /**\n     *\n     * @param generateGravsearch a function that generates a Gravsearch query.\n     *\n     *                           The function takes the offset\n     *                           as a parameter and returns a Gravsearch query string.\n     *                           Returns false if not set correctly (init state).\n     */\n    constructor(public generateGravsearch: (offset: number) => string | boolean) {\n\n    }\n\n}\n\n@Injectable({\n    providedIn: 'root'\n})\n/**\n * Temporarily stores the parameters of an extended search.\n */\nexport class SearchParamsService {\n\n    private _currentSearchParams;\n\n    constructor() {\n        // init with a dummy function that returns false\n        // if the application is reloaded, this will be returned\n        this._currentSearchParams = new BehaviorSubject<ExtendedSearchParams>(new ExtendedSearchParams((offset: number) => false));\n    }\n\n    /**\n     * Updates the parameters of an extended search.\n     *\n     * @param {ExtendedSearchParams} searchParams\n     * @returns void\n     */\n    changeSearchParamsMsg(searchParams: ExtendedSearchParams): void {\n        this._currentSearchParams.next(searchParams);\n    }\n\n    /**\n     * Gets the search params of an extended search.\n     *\n     * @returns ExtendedSearchParams - search parameters\n     */\n    getSearchParams(): ExtendedSearchParams {\n        return this._currentSearchParams.getValue();\n    }\n\n}\n","import { Injectable } from '@angular/core';\nimport { ExtendedSearchParams, SearchParamsService } from './search-params.service';\nimport { KnoraConstants, KnoraSchema } from '../../declarations';\nimport { PropertyWithValue } from '../../declarations/api/operators';\n\n/**\n * Create GravSearch queries from provided parameters.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class GravsearchGenerationService {\n\n    /**\n     * @ignore\n     *\n     * Map of complex knora-api value types to simple ones.\n     * Use computed property name: http://www.ecma-international.org/ecma-262/6.0/#sec-object-initializer.\n     */\n    public static typeConversionComplexToSimple = {\n        'http://api.knora.org/ontology/knora-api/v2#IntValue': KnoraConstants.xsdInteger,\n        'http://api.knora.org/ontology/knora-api/v2#DecimalValue': KnoraConstants.xsdDecimal,\n        'http://api.knora.org/ontology/knora-api/v2#BooleanValue': KnoraConstants.xsdBoolean,\n        'http://api.knora.org/ontology/knora-api/v2#TextValue': KnoraConstants.xsdString,\n        'http://api.knora.org/ontology/knora-api/v2#DateValue': KnoraConstants.dateSimple,\n        'http://api.knora.org/ontology/knora-api/v2#IntervalValue': KnoraConstants.intervalSimple,\n        'http://api.knora.org/ontology/knora-api/v2#GeomValue': KnoraConstants.geomSimple,\n        'http://api.knora.org/ontology/knora-api/v2#ColorValue': KnoraConstants.colorSimple,\n        'http://api.knora.org/ontology/knora-api/v2#GeonameValue': KnoraConstants.geonameSimple,\n        'http://api.knora.org/ontology/knora-api/v2#UriValue': KnoraConstants.xsdUri,\n        'http://api.knora.org/ontology/knora-api/v2#StillImageFileValue': KnoraConstants.fileSimple,\n        'http://api.knora.org/ontology/knora-api/v2#FileValue': KnoraConstants.fileSimple,\n        'http://api.knora.org/ontology/knora-api/v2#MovingImageFileValue': KnoraConstants.fileSimple,\n        'http://api.knora.org/ontology/knora-api/v2#DDDFileValue': KnoraConstants.fileSimple,\n        'http://api.knora.org/ontology/knora-api/v2#AudioFileValue': KnoraConstants.fileSimple,\n        'http://api.knora.org/ontology/knora-api/v2#DocumentFileValue': KnoraConstants.fileSimple,\n        'http://api.knora.org/ontology/knora-api/v2#TextFileValue': KnoraConstants.fileSimple,\n        'http://api.knora.org/ontology/knora-api/v2#ListValue': KnoraConstants.listNodeSimple\n    };\n\n    public static complexTypeToProp = {\n        'http://api.knora.org/ontology/knora-api/v2#IntValue': KnoraConstants.integerValueAsInteger,\n        'http://api.knora.org/ontology/knora-api/v2#DecimalValue': KnoraConstants.decimalValueAsDecimal,\n        'http://api.knora.org/ontology/knora-api/v2#BooleanValue': KnoraConstants.booleanValueAsBoolean,\n        'http://api.knora.org/ontology/knora-api/v2#TextValue': KnoraConstants.valueAsString,\n        'http://api.knora.org/ontology/knora-api/v2#UriValue': KnoraConstants.uriValueAsUri,\n        'http://api.knora.org/ontology/knora-api/v2#ListValue': KnoraConstants.listValueAsListNode\n    };\n\n    constructor(private _searchParamsService: SearchParamsService) { }\n\n    /**\n     * Generates a Gravsearch query from the provided arguments.\n     *\n     * @param {PropertyWithValue[]} properties the properties specified by the user.\n     * @param {string} [mainResourceClassOption] the class of the main resource, if specified.\n     * @param {number} offset the offset to be used (nth page of results).\n     * @returns string - a KnarQL query string.\n     */\n    createGravsearchQuery(properties: PropertyWithValue[], mainResourceClassOption?: string, offset: number = 0): string {\n\n        // class restriction for the resource searched for\n        let mainResourceClass = '';\n\n        // if given, create the class restriction for the main resource\n        if (mainResourceClassOption !== undefined) {\n            mainResourceClass = `?mainRes a <${mainResourceClassOption}> .`;\n        }\n\n        // criteria for the order by statement\n        const orderByCriteria = [];\n\n        // statements to be returned in query results\n        const returnStatements = [];\n\n        // loop over given properties and create statements and filters from them\n        const props: string[] = properties.map(\n            (propWithVal: PropertyWithValue, index: number) => {\n\n                // represents the object of a statement\n                let propValue;\n                if (!propWithVal.property.isLinkProperty || propWithVal.valueLiteral.comparisonOperator.getClassName() === 'Exists') {\n                    // it is not a linking property, create a variable for the value (to be used by a subsequent FILTER)\n                    // OR the comparison operator Exists is used in which case we do not need to specify the object any further\n                    propValue = `?propVal${index}`;\n                } else {\n                    // it is a linking property and the comparison operator is not Exists, use its IRI\n                    propValue = propWithVal.valueLiteral.value.toSparql(KnoraSchema.complex);\n                }\n\n                // generate statement\n                let statement: string = `?mainRes <${propWithVal.property.id}> ${propValue} .`;\n\n                // check if it is a linking property that has to be wrapped in a FILTER NOT EXISTS (comparison operator NOT_EQUALS) to negate it\n                if (propWithVal.property.isLinkProperty && propWithVal.valueLiteral.comparisonOperator.getClassName() === 'NotEquals') {\n                    // do not include statement in results, because the query checks for the absence of this statement\n                    statement = `FILTER NOT EXISTS {\n${statement}\n\n\n}`;\n                } else {\n                    // TODO: check if statement should be returned returned in results (Boolean flag from checkbox)\n                    returnStatements.push(statement);\n                    statement = `\n${statement}\n\n\n`;\n                }\n\n                // generate restricting expression (e.g., a FILTER) if comparison operator is not Exists\n                let restriction: string = '';\n                // only create a FILTER if the comparison operator is not EXISTS and it is not a linking property\n                if (!propWithVal.property.isLinkProperty && propWithVal.valueLiteral.comparisonOperator.getClassName() !== 'Exists') {\n                    // generate variable for value literal\n                    const propValueLiteral = `${propValue}Literal`;\n\n                    if (propWithVal.valueLiteral.comparisonOperator.getClassName() === 'Like') {\n                        // generate statement to value literal\n                        restriction = `${propValue} <${GravsearchGenerationService.complexTypeToProp[propWithVal.property.objectType]}> ${propValueLiteral}` + '\\n';\n                        // use regex function for LIKE\n                        restriction += `FILTER regex(${propValueLiteral}, ${propWithVal.valueLiteral.value.toSparql(KnoraSchema.complex)}, \"i\")`;\n                    } else if (propWithVal.valueLiteral.comparisonOperator.getClassName() === 'Match') {\n                        // generate statement to value literal\n                        restriction = `${propValue} <${GravsearchGenerationService.complexTypeToProp[propWithVal.property.objectType]}> ${propValueLiteral}` + '\\n';\n                        // use contains function for MATCH\n                        restriction += `FILTER <${KnoraConstants.matchFunction}>(${propValueLiteral}, ${propWithVal.valueLiteral.value.toSparql(KnoraSchema.complex)})`;\n                    } else if (propWithVal.property.objectType === KnoraConstants.DateValue) {\n                        // handle date property\n                        restriction = `FILTER(knora-api:toSimpleDate(${propValue}) ${propWithVal.valueLiteral.comparisonOperator.type} ${propWithVal.valueLiteral.value.toSparql(KnoraSchema.complex)})`;\n                    } else if (propWithVal.property.objectType === KnoraConstants.ListValue) {\n                        // handle list node\n                        restriction = `${propValue} <${GravsearchGenerationService.complexTypeToProp[propWithVal.property.objectType]}> ${propWithVal.valueLiteral.value.toSparql(KnoraSchema.complex)}` + '\\n';\n                        // check for comparison operator \"not equals\"\n                        if (propWithVal.valueLiteral.comparisonOperator.getClassName() === 'NotEquals') {\n                            restriction = `FILTER NOT EXISTS {\n                                ${restriction}\n                            }`;\n                        }\n                    } else {\n                        // generate statement to value literal\n                        restriction = `${propValue} <${GravsearchGenerationService.complexTypeToProp[propWithVal.property.objectType]}> ${propValueLiteral}` + '\\n';\n                        // generate filter expression\n                        restriction += `FILTER(${propValueLiteral} ${propWithVal.valueLiteral.comparisonOperator.type} ${propWithVal.valueLiteral.value.toSparql(KnoraSchema.complex)})`;\n                    }\n                }\n\n                // check if current value is a sort criterion\n                if (propWithVal.isSortCriterion) orderByCriteria.push(propValue);\n\n                return `${statement}\n${restriction}\n`;\n\n            });\n\n        let orderByStatement = '';\n\n        if (orderByCriteria.length > 0) {\n            orderByStatement = `\nORDER BY ${orderByCriteria.join(' ')}\n`;\n        }\n\n        // template of the Gravsearch query with dynamic components\n        const gravsearchTemplate = `\nPREFIX knora-api: <http://api.knora.org/ontology/knora-api/v2#>\nCONSTRUCT {\n\n?mainRes knora-api:isMainResource true .\n\n${returnStatements.join('\\n')}\n\n} WHERE {\n\n?mainRes a knora-api:Resource .\n\n${mainResourceClass}\n\n${props.join('')}\n\n}\n${orderByStatement}`;\n\n        // offset component of the Gravsearch query\n        const offsetTemplate = `\nOFFSET ${offset}\n`;\n\n        // function that generates the same KnarQL query with the given offset\n        const generateGravsearchQueryWithCustomOffset = (localOffset: number): string => {\n            const offsetCustomTemplate = `\nOFFSET ${localOffset}\n`;\n\n            return gravsearchTemplate + offsetCustomTemplate;\n        };\n\n        if (offset === 0) {\n            // store the function so another KnarQL query can be created with an increased offset\n            this._searchParamsService.changeSearchParamsMsg(new ExtendedSearchParams(generateGravsearchQueryWithCustomOffset));\n        }\n\n\n        return gravsearchTemplate + offsetTemplate;\n\n    }\n\n}\n","import { Inject, Injectable } from '@angular/core';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\nimport { KuiCoreConfig, RdfDataObject, ResetTriplestoreContentResponse } from '../../declarations';\nimport { KuiCoreConfigToken } from '../../core.module';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StoreService {\n\n  constructor(private http: HttpClient, @Inject(KuiCoreConfigToken) public config) { }\n\n  /**\n     * Resets the content of the triplestore.\n     *\n     * @param rdfDataObjects\n     * @returns Observable<string>\n     */\n  resetTriplestoreContent(rdfDataObjects: RdfDataObject[]): Observable<string> {\n\n    return this.http.post<ResetTriplestoreContentResponse>(this.config.api + '/admin/store/ResetTriplestoreContent', rdfDataObjects)\n      .pipe(\n        map(\n          (data) => {\n            const result: ResetTriplestoreContentResponse = data;\n            // console.log('StoreService - resetTriplestoreContent: ', result);\n            return result.message;\n          },\n          (error: HttpErrorResponse) => {\n            if (error.error instanceof Error) {\n              console.log('StoreService - resetTriplestoreContent - Client-side error occurred.', error);\n            } else {\n              console.log('StoreService - resetTriplestoreContent - Server-side error occurred.', error);\n            }\n            throw error;\n          }\n        ));\n\n  }\n}\n","import { Inject, Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { ApiService } from '../api.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class BasicOntologyService extends ApiService {\n\n  /**\n     * returns our list of a basic ontology\n     *\n     * @returns {Observable<any>}\n     */\n  // getBasicOntology(): Observable<any> {\n  //     let url = environment.url;\n  //     return this.httpGet(url + '/data/base-data/basic-ontology.json', {withCredentials: false});\n  // }\n  getBasicOntology(): Observable<any> {\n    const url = this.config.app;\n    return this.httpGet(url + '/data/base-data/basic-ontology.json');\n    // return this.httpGet(url + '/data/base-data/basic-ontology.json', {withCredentials: false});\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { ApiService } from '../api.service';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ResourceTypesService extends ApiService {\n\n  /**\n     * Get all resource types defined by the vocabulary.\n     *\n     * @param {string} iri Vocabulary iri\n     * @returns Observable<any>\n     */\n  getResourceTypesByVoc(iri: string): Observable<any> {\n    return this.httpGet('/v1/resourcetypes?vocabulary=' + encodeURIComponent(iri));\n  }\n\n  /**\n   * Get a specific resource type.\n   *\n   * @param {string} iri resource type iri\n   * @returns Observable<any>\n   */\n  getResourceType(iri: string): Observable<any> {\n    return this.httpGet('/v1/resourcetypes/' + encodeURIComponent(iri));\n  }\n\n\n  // putResourceType(iri)\n\n}\n","import { Inject, Injectable } from '@angular/core';\nimport { ApiService } from '../api.service';\nimport { HttpClient } from '@angular/common/http';\nimport { ApiServiceError, ApiServiceResult } from '../../declarations';\nimport { Observable } from 'rxjs';\nimport { map, mergeMap } from 'rxjs/operators';\nimport { KuiCoreConfigToken } from '../../core.module';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ListService extends ApiService {\n\n    constructor(public http: HttpClient,\n                @Inject(KuiCoreConfigToken) public config) {\n        super(http, config);\n    }\n\n    /**\n     * Gets a hierarchical list from Knora.\n     *\n     * @param {string} rootNodeIri the Iri of the list's root node.\n     * @return {Observable<ApiServiceResult | ApiServiceError>}\n     */\n    private getListFromKnora(rootNodeIri: string): Observable<ApiServiceResult | ApiServiceError> {\n        return this.httpGet('/v2/lists/' + encodeURIComponent(rootNodeIri));\n    }\n\n    /**\n     * Returns a list as expanded JSON-LD.\n     *\n     * @param {string} rootNodeIri the root node of the list.\n     * @return {Observable<object>} the expanded JSON-LD.\n     */\n    getList(rootNodeIri: string): Observable<object> {\n        const listJSONLD = this.getListFromKnora(rootNodeIri);\n\n        return listJSONLD.pipe(\n            mergeMap(\n                // this would return an Observable of a PromiseObservable -> combine them into one Observable\n                this.processJSONLD\n            )\n        );\n    }\n\n    /**\n     * Gets a list node from Knora.\n     *\n     * @param {string} listNodeIri the Iri of the list node.\n     * @return {Observable<ApiServiceResult | ApiServiceError>}\n     */\n    private getListNodeFromKnora(listNodeIri: string): Observable<ApiServiceResult | ApiServiceError> {\n        return this.httpGet('/v2/node/' + encodeURIComponent(listNodeIri));\n    }\n\n    /**\n     * Returns a list node as expanded JSON-LD.\n     *\n     * @param {string} listNodeIri the Iri of the list node.\n     * @return {Observable<object>}\n     */\n    getListNode(listNodeIri: string): Observable<object> {\n\n        const listNodeJSONLD = this.getListNodeFromKnora(listNodeIri);\n\n        return listNodeJSONLD.pipe(\n            mergeMap(\n                // this would return an Observable of a PromiseObservable -> combine them into one Observable\n                this.processJSONLD\n            )\n        );\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { map, mergeMap } from 'rxjs/operators';\nimport { ListService } from './list.service';\n\n/**\n * Represents a list node v2.\n */\nexport class ListNodeV2 {\n\n    readonly children: ListNodeV2[];\n\n    readonly isRootNode: boolean;\n\n    constructor(readonly id: string, readonly label: string, readonly position?: number, readonly hasRootNode?: string) {\n\n        // if hasRootNode is not given, this node is the root node.\n        this.isRootNode = (hasRootNode === undefined);\n\n        this.children = [];\n    }\n}\n\nclass ListCache {\n\n    [index: string]: ListNodeV2;\n\n}\n\nclass ListNodeIriToListNodeV2 {\n\n    [index: string]: ListNodeV2;\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ListCacheService {\n\n    private listCache = new ListCache();\n\n    private listNodeIriToListNodeV2 = new ListNodeIriToListNodeV2();\n\n    constructor(private _listService: ListService) {\n    }\n\n    private hasRootNode(listJSONLD) {\n        let hasRoot;\n\n        if (listJSONLD['http://api.knora.org/ontology/knora-api/v2#hasRootNode'] !== undefined) {\n            hasRoot = listJSONLD['http://api.knora.org/ontology/knora-api/v2#hasRootNode']['@id'];\n        }\n\n        return hasRoot;\n    }\n\n    /**\n     * Converts a JSON-LD represention of a ListNodeV2 to  a `ListNodeV2`.\n     * Recursively converts child nodes.\n     *\n     * @param {object} listJSONLD the JSON-LD representation of a list node v2.\n     * @return {ListNodeV2}\n     */\n    private convertJSONLDToListNode: (listJSONLD: object) => ListNodeV2 = (listJSONLD: object) => {\n\n        const listNodeIri = listJSONLD['@id'];\n\n        const hasRootNode = this.hasRootNode(listJSONLD);\n\n        const listNode = new ListNodeV2(\n            listNodeIri,\n            listJSONLD['http://www.w3.org/2000/01/rdf-schema#label'],\n            listJSONLD['http://api.knora.org/ontology/knora-api/v2#listNodePosition'],\n            hasRootNode\n        );\n\n        // check if there are child nodes\n        if (listJSONLD['http://api.knora.org/ontology/knora-api/v2#hasSubListNode'] !== undefined) {\n\n            if (Array.isArray(listJSONLD['http://api.knora.org/ontology/knora-api/v2#hasSubListNode'])) {\n                // array of child nodes\n                for (const subListNode of listJSONLD['http://api.knora.org/ontology/knora-api/v2#hasSubListNode']) {\n                    listNode.children.push(this.convertJSONLDToListNode(subListNode));\n                }\n            } else {\n                // single child node\n                listNode.children.push(this.convertJSONLDToListNode(listJSONLD['http://api.knora.org/ontology/knora-api/v2#hasSubListNode']));\n            }\n\n        }\n\n        this.listNodeIriToListNodeV2[listNodeIri] = listNode;\n\n        return listNode;\n    };\n\n    /**\n     * Gets a list from the cache or requests it from Knora and caches it.\n     *\n     * @param {string} rootNodeIri the Iri of the list's root node.\n     * @return {Observable<ListNodeV2>}\n     */\n    getList(rootNodeIri: string): Observable<ListNodeV2> {\n\n        // check if list is already in cache\n        if (this.listCache[rootNodeIri] !== undefined) {\n\n            // return list from cache\n            return of(this.listCache[rootNodeIri]);\n\n        } else {\n            // get list from Knora and cache it\n\n            const listJSONLD = this._listService.getList(rootNodeIri);\n\n            const listV2: Observable<ListNodeV2> = listJSONLD.pipe(\n                map(\n                    this.convertJSONLDToListNode\n                )\n            );\n\n            return listV2.pipe(\n                map(\n                    (list: ListNodeV2) => {\n                        // write list to cache and return it\n                        this.listCache[rootNodeIri] = list;\n                        return list;\n                    }\n                )\n            );\n        }\n    }\n\n    /**\n     * Gets a list node from the cache or requests the whole list from Knora and caches it.\n     *\n     * @param {string} listNodeIri the Iri of the list node.\n     * @return {Observable<object>}\n     */\n    getListNode(listNodeIri: string): Observable<ListNodeV2> {\n\n        // check if list node is already in cache\n        if (this.listNodeIriToListNodeV2[listNodeIri] !== undefined) {\n\n            // list node is already cached\n            return of(this.listNodeIriToListNodeV2[listNodeIri]);\n\n        } else {\n\n            const listNode = this._listService.getListNode(listNodeIri);\n\n            return listNode.pipe(\n                mergeMap(\n                    (listNodeJSONLD: object) => {\n                        const hasRootNode = this.hasRootNode(listNodeJSONLD);\n\n                        if (hasRootNode !== undefined) {\n                            // get the whole list\n                            return this.getList(hasRootNode).pipe(\n                                map(\n                                    (completeList: ListNodeV2) => {\n                                        // get list node from cache\n                                        return this.listNodeIriToListNodeV2[listNodeIri];\n                                    })\n                            );\n                        } else {\n                            // this is the root node, get the whole list\n                            return this.getList(listNodeIri).pipe(\n                                map(\n                                    (completeList: ListNodeV2) => {\n                                        // get list node from cache\n                                        return this.listNodeIriToListNodeV2[listNodeIri];\n                                    })\n                            );\n                        }\n                    }\n                )\n            );\n        }\n    }\n}\n","import { KnoraConstants, KnoraSchema } from './knora-constants';\nimport { GravsearchGenerationService, Property } from '../../services';\n\n\n/**\n * An abstract interface representing a comparison operator.\n * This interface is implemented for the supported comparison operators.\n */\nexport interface ComparisonOperator {\n\n    // type of comparison operator\n    type: string;\n\n    // the label of the comparison operator to be presented to the user.\n    label: string;\n\n    // returns the class name when called on an instance\n    getClassName(): string;\n}\n\nexport class Equals implements ComparisonOperator {\n\n    type = KnoraConstants.EqualsComparisonOperator;\n    label = KnoraConstants.EqualsComparisonLabel;\n\n    constructor() {\n    }\n\n    getClassName() {\n        return 'Equals';\n    }\n}\n\n\nexport class NotEquals implements ComparisonOperator {\n\n    type = KnoraConstants.NotEqualsComparisonOperator;\n    label = KnoraConstants.NotEqualsComparisonLabel;\n\n    constructor() {\n    }\n\n    getClassName() {\n        return 'NotEquals';\n    }\n}\n\nexport class GreaterThanEquals implements ComparisonOperator {\n\n    type = KnoraConstants.GreaterThanEqualsComparisonOperator;\n    label = KnoraConstants.GreaterThanEqualsComparisonLabel;\n\n    constructor() {\n    }\n\n    getClassName() {\n        return 'GreaterThanEquals';\n    }\n}\n\nexport class GreaterThan implements ComparisonOperator {\n\n    type = KnoraConstants.GreaterThanComparisonOperator;\n    label = KnoraConstants.GreaterThanComparisonLabel;\n\n    constructor() {\n    }\n\n    getClassName() {\n        return 'GreaterThan';\n    }\n}\n\nexport class LessThan implements ComparisonOperator {\n\n    type = KnoraConstants.LessThanComparisonOperator;\n    label = KnoraConstants.LessThanComparisonLabel;\n\n    constructor() {\n    }\n\n    getClassName() {\n        return 'LessThan';\n    }\n}\n\nexport class LessThanEquals implements ComparisonOperator {\n\n    type = KnoraConstants.LessThanEqualsComparisonOperator;\n    label = KnoraConstants.LessThanQualsComparisonLabel;\n\n    constructor() {\n    }\n\n    getClassName() {\n        return 'LessThanEquals';\n    }\n}\n\n\nexport class Exists implements ComparisonOperator {\n\n    type = KnoraConstants.ExistsComparisonOperator;\n    label = KnoraConstants.ExistsComparisonLabel;\n\n    constructor() {\n    }\n\n    getClassName() {\n        return 'Exists';\n    }\n}\n\nexport class Like implements ComparisonOperator {\n\n    type = KnoraConstants.LikeComparisonOperator;\n    label = KnoraConstants.LikeComparisonLabel;\n\n    constructor() {\n    }\n\n    getClassName() {\n        return 'Like';\n    }\n\n}\n\nexport class Match implements ComparisonOperator {\n\n    type = KnoraConstants.MatchComparisonOperator;\n    label = KnoraConstants.MatchComparisonLabel;\n\n    constructor() {\n    }\n\n    getClassName() {\n        return 'Match';\n    }\n\n}\n\n/**\n * Combination of a comparison operator and a value literal or an IRI.\n * In case the comparison operator is 'Exists', no value is given.\n */\nexport class ComparisonOperatorAndValue {\n\n    constructor(readonly comparisonOperator: ComparisonOperator, readonly value?: Value) {\n    }\n}\n\n/**\n * An abstract interface representing a value: an IRI or a literal.\n */\nexport interface Value {\n\n    /**\n     * Turns the value into a SPARQL string representation.\n     *\n     * @param schema indicates the Knora schema to be used.\n     * @returns {string} SPARQL representation of the value.\n     */\n    toSparql(schema: KnoraSchema): string;\n\n}\n\n/**\n * Represents a property's value as a literal with the indication of its type.\n */\nexport class ValueLiteral implements Value {\n\n    /**\n     * Constructs a [ValueLiteral].\n     *\n     * @param {string} value the literal representation of the value.\n     * @param {string} type the type of the value (making use of xsd).\n     */\n    constructor(\n        public readonly value: string,\n        public readonly type: string) {\n    }\n\n\n    /**\n     * Creates a type annotated value literal to be used in a SPARQL query.\n     *\n     * @param schema indicates the Knora schema to be used.\n     * @returns {string}\n     */\n    public toSparql(schema: KnoraSchema): string {\n\n        let literalType: string;\n\n        // check if a Knora schema conversion is necessary, e.g., knora-api:dateValue (complex) to knora-api:date (simple).\n        // xsd types will remain unchanged\n        if (schema === KnoraSchema.simple && GravsearchGenerationService.typeConversionComplexToSimple[this.type] !== undefined) {\n            // convert to simple schema\n            literalType = GravsearchGenerationService.typeConversionComplexToSimple[this.type];\n        } else {\n            // do not convert\n            literalType = this.type;\n        }\n        return `\"${this.value}\"^^<${literalType}>`;\n    }\n\n}\n\n/**\n * Represents an IRI.\n */\nexport class IRI implements Value {\n\n    /**\n     * Constructs an [IRI].\n     *\n     * @param {string} iri the IRI of a resource instance.\n     */\n    constructor(readonly iri: string) {\n    }\n\n    /**\n     * Creates a SPARQL representation of the IRI.\n     *\n     * @param schema indicates the Knora schema to be used.\n     * @returns {string}\n     */\n    public toSparql(schema: KnoraSchema): string {\n        // this is an instance Iri and does not have to be converted.\n        return `<${this.iri}>`;\n    }\n\n}\n\n/**\n * An abstract interface that represents a value.\n * This interface has to be implemented for all value types (value component classes).\n */\nexport interface PropertyValue {\n\n    /**\n     * Type of the value.\n     */\n    type: string;\n\n    /**\n     * Returns the value.\n     *\n     * @returns {Value}.\n     */\n    getValue(): Value;\n\n}\n\n/**\n * Represents a property, the specified comparison operator, and value.\n */\nexport class PropertyWithValue {\n\n    /**\n     * Constructs a [PropertyWithValue].\n     *\n     * @param {Property} property the specified property.\n     * @param {ComparisonOperatorAndValue} valueLiteral the specified comparison operator and value.\n     * @param isSortCriterion indicates if the property is used as a sort criterion.\n     */\n    constructor(\n        readonly property: Property,\n        readonly valueLiteral: ComparisonOperatorAndValue,\n        readonly isSortCriterion: Boolean) {\n    }\n\n}\n\n/**\n * a list, which is used in the mat-autocomplete form field\n * contains objects with id and name. the id is usual the iri\n */\nexport interface AutocompleteItem {\n    iri: string;\n    name: string;\n    label?: string;\n}\n\n"]}