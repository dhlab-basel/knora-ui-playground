!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/common/http"),require("json2typescript"),require("rxjs"),require("rxjs/operators"),require("rxjs/internal/observable/throwError")):"function"==typeof define&&define.amd?define("@knora/core",["exports","@angular/core","@angular/common","@angular/common/http","json2typescript","rxjs","rxjs/operators","rxjs/internal/observable/throwError"],t):t(((e=e||self).knora=e.knora||{},e.knora.core={}),e.ng.core,e.ng.common,e.ng.common.http,e.json2typescript,e.rxjs,e.rxjs.operators,e.rxjs["internal/observable/throwError"])}(this,function(e,t,r,n,o,i,a,s){"use strict";var u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function l(e,t){function r(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function p(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a}function c(e,t){return function(r,n){t(r,n,e)}}function d(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function h(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}var f,g=new t.InjectionToken("KuiCoreConfigToken (knora.core.config)"),y=function(){function e(){}var o;return o=e,e.forRoot=function(e){return{ngModule:o,providers:[{provide:g,useValue:e}]}},e=o=p([t.NgModule({imports:[r.CommonModule,n.HttpClientModule],declarations:[],exports:[n.HttpClientModule]})],e)}(),m=function(){function e(){this.name=undefined,this.app=undefined,this.api=undefined,this.media=undefined,this.ontologyIRI=undefined}return p([o.JsonProperty("name",String),d("design:type",String)],e.prototype,"name",void 0),p([o.JsonProperty("app",String),d("design:type",String)],e.prototype,"app",void 0),p([o.JsonProperty("api",String),d("design:type",String)],e.prototype,"api",void 0),p([o.JsonProperty("media",String),d("design:type",String)],e.prototype,"media",void 0),p([o.JsonProperty("ontologyIRI",String),d("design:type",String)],e.prototype,"ontologyIRI",void 0),e=p([o.JsonObject("KuiCoreConfig")],e)}(),v=function(){function e(){this.status=0,this.statusText="",this.url=""}return e.prototype.getBody=function(t){return e.jsonConvert.deserialize(this.body,t)},e.jsonConvert=new o.JsonConvert(o.OperationMode.ENABLE,o.ValueCheckingMode.ALLOW_NULL),e}(),V=function(){return function(){this.status=0,this.statusText="",this.url="",this.errorInfo=""}}(),S=function(){function e(){}return e.KnoraVersion="8.0.0",e.KnoraApi="http://api.knora.org/ontology/knora-api",e.PathSeparator="#",e.KnoraOntologyPath="http://www.knora.org/ontology",e.KnoraBase=e.KnoraOntologyPath+"/knora-base",e.KnoraAdmin=e.KnoraOntologyPath+"/knora-admin",e.DefaultSharedOntologyIRI=e.KnoraAdmin+"#DefaultSharedOntologiesProject",e.SystemProjectIRI=e.KnoraAdmin+"#SystemProject",e.SystemAdminGroupIRI=e.KnoraAdmin+"#SystemAdmin",e.ProjectAdminGroupIRI=e.KnoraAdmin+"#ProjectAdmin",e.ProjectMemberGroupIRI=e.KnoraAdmin+"#ProjectMember",e.KnoraApiV2WithValueObjectPath=e.KnoraApi+"/v2"+e.PathSeparator,e.KnoraApiV2SimplePath=e.KnoraApi+"/simple/v2"+e.PathSeparator,e.SalsahGuiOntology="http://api.knora.org/ontology/salsah-gui/v2",e.SalsahGuiOrder=e.SalsahGuiOntology+"#guiOrder",e.SalsahGuiAttribute=e.SalsahGuiOntology+"#guiAttribute",e.StandoffOntology="http://api.knora.org/ontology/standoff/v2",e.Resource=e.KnoraApiV2WithValueObjectPath+"Resource",e.TextValue=e.KnoraApiV2WithValueObjectPath+"TextValue",e.IntValue=e.KnoraApiV2WithValueObjectPath+"IntValue",e.BooleanValue=e.KnoraApiV2WithValueObjectPath+"BooleanValue",e.UriValue=e.KnoraApiV2WithValueObjectPath+"UriValue",e.DecimalValue=e.KnoraApiV2WithValueObjectPath+"DecimalValue",e.DateValue=e.KnoraApiV2WithValueObjectPath+"DateValue",e.ColorValue=e.KnoraApiV2WithValueObjectPath+"ColorValue",e.GeomValue=e.KnoraApiV2WithValueObjectPath+"GeomValue",e.ListValue=e.KnoraApiV2WithValueObjectPath+"ListValue",e.IntervalValue=e.KnoraApiV2WithValueObjectPath+"IntervalValue",e.LinkValue=e.KnoraApiV2WithValueObjectPath+"LinkValue",e.GeonameValue=e.KnoraApiV2WithValueObjectPath+"GeonameValue",e.FileValue=e.KnoraApiV2WithValueObjectPath+"FileValue",e.AudioFileValue=e.KnoraApiV2WithValueObjectPath+"AudioFileValue",e.DDDFileValue=e.KnoraApiV2WithValueObjectPath+"DDDFileValue",e.DocumentFileValue=e.KnoraApiV2WithValueObjectPath+"DocumentFileValue",e.StillImageFileValue=e.KnoraApiV2WithValueObjectPath+"StillImageFileValue",e.MovingImageFileValue=e.KnoraApiV2WithValueObjectPath+"MovingImageFileValue",e.TextFileValue=e.KnoraApiV2WithValueObjectPath+"TextFileValue",e.IsResourceClass=e.KnoraApiV2WithValueObjectPath+"isResourceClass",e.IsValueClass=e.KnoraApiV2WithValueObjectPath+"isValueClass",e.ForbiddenResource=e.KnoraApiV2WithValueObjectPath+"ForbiddenResource",e.XMLToStandoffMapping=e.KnoraApiV2WithValueObjectPath+"XMLToStandoffMapping",e.ListNode=e.KnoraApiV2WithValueObjectPath+"ListNode",e.ArkUrl=e.KnoraApiV2WithValueObjectPath+"arkUrl",e.versionArkUrl=e.KnoraApiV2WithValueObjectPath+"versionArkUrl",e.ObjectType=e.KnoraApiV2WithValueObjectPath+"objectType",e.ResourceIcon=e.KnoraApiV2WithValueObjectPath+"resourceIcon",e.isEditable=e.KnoraApiV2WithValueObjectPath+"isEditable",e.isLinkProperty=e.KnoraApiV2WithValueObjectPath+"isLinkProperty",e.isLinkValueProperty=e.KnoraApiV2WithValueObjectPath+"isLinkValueProperty",e.hasGeometry=e.KnoraApiV2WithValueObjectPath+"hasGeometry",e.schemaName="http://schema.org/name",e.schemaNumberOfItems="http://schema.org/numberOfItems",e.schemaItemListElement="http://schema.org/itemListElement",e.RdfProperty="http://www.w3.org/1999/02/22-rdf-syntax-ns#Property",e.RdfsSchema="http://www.w3.org/2000/01/rdf-schema"+e.PathSeparator,e.RdfsLabel=e.RdfsSchema+"label",e.RdfsComment=e.RdfsSchema+"comment",e.RdfsSubclassOf=e.RdfsSchema+"subClassOf",e.subPropertyOf=e.RdfsSchema+"subPropertyOf",e.owl="http://www.w3.org/2002/07/owl",e.OwlClass=e.owl+"#Class",e.OwlObjectProperty=e.owl+"#ObjectProperty",e.OwlDatatypeProperty=e.owl+"#DatatypeProperty",e.OwlAnnotationProperty=e.owl+"#AnnotationProperty",e.OwlOnProperty=e.owl+"#onProperty",e.OwlMaxCardinality=e.owl+"#maxCardinality",e.OwlMinCardinality=e.owl+"#minCardinality",e.OwlCardinality=e.owl+"#cardinality",e.OwlRestriction=e.owl+"#Restriction",e.creationDate=e.KnoraApiV2WithValueObjectPath+"creationDate",e.lastModificationDate=e.KnoraApiV2WithValueObjectPath+"lastModificationDate",e.hasPermissions=e.KnoraApiV2WithValueObjectPath+"hasPermissions",e.userHasPermission=e.KnoraApiV2WithValueObjectPath+"userHasPermission",e.attachedToProject=e.KnoraApiV2WithValueObjectPath+"attachedToProject",e.attachedToUser=e.KnoraApiV2WithValueObjectPath+"attachedToUser",e.Region=e.KnoraApiV2WithValueObjectPath+"Region",e.ReadTextValueAsHtml="ReadTextValueAsHtml",e.ReadTextValueAsString="ReadTextValueAsString",e.ReadTextValueAsXml="ReadTextValueAsXml",e.ReadDateValue="ReadDateValue",e.ReadLinkValue="ReadLinkValue",e.ReadIntegerValue="ReadIntegerValue",e.ReadDecimalValue="ReadDecimalValue",e.ReadStillImageFileValue="ReadStillImageFileValue",e.ReadMovingImageFileValue="ReadMovingImageFileValue",e.ReadAudioFileValue="ReadAudioFileValue",e.ReadTextFileValue="ReadTextFileValue",e.ReadDDDFileValue="ReadDDDFileValue",e.ReadDocumentFileValue="ReadDocumentFileValue",e.ReadGeomValue="ReadGeomValue",e.ReadColorValue="ReadColorValue",e.ReadUriValue="ReadUriValue",e.ReadBooleanValue="ReadBooleanValue",e.ReadIntervalValue="ReadIntervalValue",e.ReadListValue="ReadListValue",e.valueAsString=e.KnoraApiV2WithValueObjectPath+"valueAsString",e.textValueAsHtml=e.KnoraApiV2WithValueObjectPath+"textValueAsHtml",e.textValueAsXml=e.KnoraApiV2WithValueObjectPath+"textValueAsXml",e.textValueHasMapping=e.KnoraApiV2WithValueObjectPath+"textValueHasMapping",e.hasStandoffLinkToValue=e.KnoraApiV2WithValueObjectPath+"hasStandoffLinkToValue",e.dateValueHasStartYear=e.KnoraApiV2WithValueObjectPath+"dateValueHasStartYear",e.dateValueHasEndYear=e.KnoraApiV2WithValueObjectPath+"dateValueHasEndYear",e.dateValueHasStartEra=e.KnoraApiV2WithValueObjectPath+"dateValueHasStartEra",e.dateValueHasEndEra=e.KnoraApiV2WithValueObjectPath+"dateValueHasEndEra",e.dateValueHasStartMonth=e.KnoraApiV2WithValueObjectPath+"dateValueHasStartMonth",e.dateValueHasEndMonth=e.KnoraApiV2WithValueObjectPath+"dateValueHasEndMonth",e.dateValueHasStartDay=e.KnoraApiV2WithValueObjectPath+"dateValueHasStartDay",e.dateValueHasEndDay=e.KnoraApiV2WithValueObjectPath+"dateValueHasEndDay",e.dateValueHasCalendar=e.KnoraApiV2WithValueObjectPath+"dateValueHasCalendar",e.linkValueHasTarget=e.KnoraApiV2WithValueObjectPath+"linkValueHasTarget",e.linkValueHasSource=e.KnoraApiV2WithValueObjectPath+"linkValueHasSource",e.linkValueHasSourceIri=e.KnoraApiV2WithValueObjectPath+"linkValueHasSourceIri",e.linkValueHasTargetIri=e.KnoraApiV2WithValueObjectPath+"linkValueHasTargetIri",e.integerValueAsInteger=e.KnoraApiV2WithValueObjectPath+"intValueAsInt",e.decimalValueAsDecimal=e.KnoraApiV2WithValueObjectPath+"decimalValueAsDecimal",e.fileValueAsUrl=e.KnoraApiV2WithValueObjectPath+"fileValueAsUrl",e.fileValueIsPreview=e.KnoraApiV2WithValueObjectPath+"fileValueIsPreview",e.fileValueHasFilename=e.KnoraApiV2WithValueObjectPath+"fileValueHasFilename",e.hasStillImageFileValue=e.KnoraApiV2WithValueObjectPath+"hasStillImageFileValue",e.stillImageFileValueHasDimX=e.KnoraApiV2WithValueObjectPath+"stillImageFileValueHasDimX",e.stillImageFileValueHasDimY=e.KnoraApiV2WithValueObjectPath+"stillImageFileValueHasDimY",e.stillImageFileValueHasIIIFBaseUrl=e.KnoraApiV2WithValueObjectPath+"stillImageFileValueHasIIIFBaseUrl",e.hasMovingImageFileValue=e.KnoraApiV2WithValueObjectPath+"hasMovingImageFileValue",e.movingImageFileValueHasDimX=e.KnoraApiV2WithValueObjectPath+"movingImageFileValueHasDimX",e.movingImageFileValueHasDimY=e.KnoraApiV2WithValueObjectPath+"movingImageFileValueHasDimY",e.movingImageFileValueHasDuration=e.KnoraApiV2WithValueObjectPath+"movingImageFileValueHasDuration",e.movingImageFileValueHasFps=e.KnoraApiV2WithValueObjectPath+"movingImageFileValueHasFps",e.hasAudioFileValue=e.KnoraApiV2WithValueObjectPath+"hasAudioFileValue",e.audioFileValueHasDuration=e.KnoraApiV2WithValueObjectPath+"audioFileValueHasDuration",e.hasDocumentFileValue=e.KnoraApiV2WithValueObjectPath+"hasDocumentFileValue",e.hasDDDFileValue=e.KnoraApiV2WithValueObjectPath+"hasDDDFileValue",e.colorValueAsColor=e.KnoraApiV2WithValueObjectPath+"colorValueAsColor",e.geometryValueAsGeometry=e.KnoraApiV2WithValueObjectPath+"geometryValueAsGeometry",e.uriValueAsUri=e.KnoraApiV2WithValueObjectPath+"uriValueAsUri",e.booleanValueAsBoolean=e.KnoraApiV2WithValueObjectPath+"booleanValueAsBoolean",e.intervalValueHasStart=e.KnoraApiV2WithValueObjectPath+"intervalValueHasStart",e.intervalValueHasEnd=e.KnoraApiV2WithValueObjectPath+"intervalValueHasEnd",e.listValueAsListNode=e.KnoraApiV2WithValueObjectPath+"listValueAsListNode",e.Xsd="http://www.w3.org/2001/XMLSchema#",e.xsdString=e.Xsd+"string",e.xsdBoolean=e.Xsd+"boolean",e.xsdInteger=e.Xsd+"integer",e.xsdDecimal=e.Xsd+"decimal",e.xsdUri=e.Xsd+"anyURI",e.resourceSimple=e.KnoraApiV2SimplePath+"Resource",e.dateSimple=e.KnoraApiV2SimplePath+"Date",e.intervalSimple=e.KnoraApiV2SimplePath+"Interval",e.geomSimple=e.KnoraApiV2SimplePath+"Geom",e.colorSimple=e.KnoraApiV2SimplePath+"Color",e.geonameSimple=e.KnoraApiV2SimplePath+"Geoname",e.fileSimple=e.KnoraApiV2SimplePath+"File",e.listNodeSimple=e.KnoraApiV2SimplePath+"ListNode",e.matchFunction=e.KnoraApiV2WithValueObjectPath+"match",e.EqualsComparisonOperator="=",e.EqualsComparisonLabel="is equal to",e.NotEqualsComparisonOperator="!=",e.NotEqualsComparisonLabel="is not equal to",e.GreaterThanComparisonOperator=">",e.GreaterThanComparisonLabel="is greater than",e.GreaterThanEqualsComparisonOperator=">=",e.GreaterThanEqualsComparisonLabel="is greater than equals to",e.LessThanComparisonOperator="<",e.LessThanComparisonLabel="is less than",e.LessThanEqualsComparisonOperator="<=",e.LessThanQualsComparisonLabel="is less than equals to",e.ExistsComparisonOperator="E",e.ExistsComparisonLabel="exists",e.LikeComparisonOperator="regex",e.LikeComparisonLabel="is like",e.MatchComparisonOperator="contains",e.MatchComparisonLabel="matches",e.SalsahLink="salsah-link",e.RefMarker="ref-marker",e.GNDPrefix="(DE-588)",e.GNDResolver="http://d-nb.info/gnd/",e.VIAFPrefix="(VIAF)",e.VIAFResolver="https://viaf.org/viaf/",e}();(f=e.KnoraSchema||(e.KnoraSchema={}))[f.complex=0]="complex",f[f.simple=1]="simple";var R,b=function(){function e(){}return e.getOntologyIriFromEntityIri=function(e){var t=e.split(S.PathSeparator);return 2!==t.length&&console.error("Error: "+e+" is not a valid entity IRI."),t[0]},e.convertComplexKnoraApiEntityIritoSimple=function(e){var t=e.split("v2"+S.PathSeparator);return 2!==t.length&&console.error("Error: "+e+" is not a valid entity IRI."),t[0]+"simple/v2"+S.PathSeparator+t[1]},e.RegexEmail=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,e.RegexUsername=/^[a-zA-Z0-9]+$/,e.RegexUrl=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,6}(:[0-9]{1,5})?(\/.*)?$/i,e.RegexPassword=/^(?=.*\d)(?=.*[a-zA-Z]).{8,}$/i,e.RegexHex=/^[0-9A-Fa-f]+$/,e.RegexShortname=/^[a-zA-Z]+\S*$/,e.filterOutDuplicates=function(e,t,r){return t===r.indexOf(e)},e}(),I=function(){function e(){this.value=undefined,this.language=""}return p([o.JsonProperty("value",String,!1),d("design:type",String)],e.prototype,"value",void 0),p([o.JsonProperty("language",String,!0),d("design:type",String)],e.prototype,"language",void 0),e=p([o.JsonObject("StringLiteral")],e)}();(R=e.Precision||(e.Precision={}))[R.yearPrecision=0]="yearPrecision",R[R.monthPrecision=1]="monthPrecision",R[R.dayPrecision=2]="dayPrecision";var P,O=function(){function t(t,r,n,o,i){this.calendar=t,this.era=r,this.year=n,this.month=o,this.day=i,this.month===undefined?this.precision=e.Precision.yearPrecision:this.day===undefined?this.precision=e.Precision.monthPrecision:this.precision=e.Precision.dayPrecision}return t.prototype.getDateAsStringWithoutCalendar=function(){var r="("+this.era+") ";switch(this.precision){case e.Precision.yearPrecision:r+=this.year.toString();break;case e.Precision.monthPrecision:r+=this.year+t.separator+this.month;break;case e.Precision.dayPrecision:r+=this.year+t.separator+this.month+t.separator+this.day}return r},t.prototype.getDateAsString=function(){return this.calendar+":"+this.getDateAsStringWithoutCalendar()},t.separator="-",t}(),C=function(){function e(e,t){this.start=e,this.end=t}return e.prototype.getDateAsString=function(){return this.start.getDateAsString()+":"+this.end.getDateAsStringWithoutCalendar()},e}(),j=function(){function e(){this.token=undefined}return p([o.JsonProperty("token",String),d("design:type",String)],e.prototype,"token",void 0),e=p([o.JsonObject("AuthenticationResponse")],e)}(),k=function(){function e(){this.id=undefined,this.shortname=undefined,this.shortcode=undefined,this.longname=undefined,this.description=[new I],this.keywords=undefined,this.logo=undefined,this.institution=undefined,this.ontologies=undefined,this.status=undefined,this.selfjoin=undefined}return p([o.JsonProperty("id",String),d("design:type",String)],e.prototype,"id",void 0),p([o.JsonProperty("shortname",String),d("design:type",String)],e.prototype,"shortname",void 0),p([o.JsonProperty("shortcode",String,!0),d("design:type",String)],e.prototype,"shortcode",void 0),p([o.JsonProperty("longname",String,!0),d("design:type",String)],e.prototype,"longname",void 0),p([o.JsonProperty("description",[I],!0),d("design:type",Array)],e.prototype,"description",void 0),p([o.JsonProperty("keywords",[String],!0),d("design:type",Array)],e.prototype,"keywords",void 0),p([o.JsonProperty("logo",String,!0),d("design:type",String)],e.prototype,"logo",void 0),p([o.JsonProperty("institution",String,!0),d("design:type",String)],e.prototype,"institution",void 0),p([o.JsonProperty("ontologies",[String]),d("design:type",Array)],e.prototype,"ontologies",void 0),p([o.JsonProperty("status",Boolean),d("design:type",Boolean)],e.prototype,"status",void 0),p([o.JsonProperty("selfjoin",Boolean),d("design:type",Boolean)],e.prototype,"selfjoin",void 0),e=p([o.JsonObject("Project")],e)}(),w=function(){function e(){this.id=undefined,this.name=undefined,this.description=undefined,this.project=undefined,this.status=undefined,this.selfjoin=undefined}return p([o.JsonProperty("id",String),d("design:type",String)],e.prototype,"id",void 0),p([o.JsonProperty("name",String),d("design:type",String)],e.prototype,"name",void 0),p([o.JsonProperty("description",String),d("design:type",String)],e.prototype,"description",void 0),p([o.JsonProperty("project",k,!1),d("design:type",k)],e.prototype,"project",void 0),p([o.JsonProperty("status",Boolean),d("design:type",Boolean)],e.prototype,"status",void 0),p([o.JsonProperty("selfjoin",Boolean),d("design:type",Boolean)],e.prototype,"selfjoin",void 0),e=p([o.JsonObject("Group")],e)}(),A=function(){function e(){this.group=undefined}return p([o.JsonProperty("group",w),d("design:type",w)],e.prototype,"group",void 0),e=p([o.JsonObject("GroupResponse")],e)}(),F=function(){function e(){this.groups=undefined}return p([o.JsonProperty("groups",[w]),d("design:type",Array)],e.prototype,"groups",void 0),e=p([o.JsonObject("GroupsResponse")],e)}(),L=function(){function e(){this.id=undefined,this.name=undefined,this.projectIri=undefined,this.isRootNode=undefined,this.labels=undefined,this.comments=undefined}return p([o.JsonProperty("id",String,!1),d("design:type",String)],e.prototype,"id",void 0),p([o.JsonProperty("name",String,!0),d("design:type",String)],e.prototype,"name",void 0),p([o.JsonProperty("projectIri",String,!0),d("design:type",String)],e.prototype,"projectIri",void 0),p([o.JsonProperty("isRootNode",Boolean,!0),d("design:type",Boolean)],e.prototype,"isRootNode",void 0),p([o.JsonProperty("labels",[I],!0),d("design:type",Array)],e.prototype,"labels",void 0),p([o.JsonProperty("comments",[I],!0),d("design:type",Array)],e.prototype,"comments",void 0),e=p([o.JsonObject("ListInfo")],e)}(),D=function(){function e(){this.id=undefined,this.name=undefined,this.hasRootNode=undefined,this.labels=undefined,this.comments=undefined,this.children=undefined,this.position=undefined}var t;return t=e,p([o.JsonProperty("id",String),d("design:type",String)],e.prototype,"id",void 0),p([o.JsonProperty("name",String,!0),d("design:type",String)],e.prototype,"name",void 0),p([o.JsonProperty("hasRootNode",String,!0),d("design:type",String)],e.prototype,"hasRootNode",void 0),p([o.JsonProperty("labels",[I]),d("design:type",Array)],e.prototype,"labels",void 0),p([o.JsonProperty("comments",[I]),d("design:type",Array)],e.prototype,"comments",void 0),p([o.JsonProperty("children",[t],!0),d("design:type",Array)],e.prototype,"children",void 0),p([o.JsonProperty("position",Number,!0),d("design:type",Number)],e.prototype,"position",void 0),e=t=p([o.JsonObject("ListNode")],e)}(),E=function(){function e(){this.listinfo=undefined,this.children=undefined}return p([o.JsonProperty("listinfo",L,!1),d("design:type",L)],e.prototype,"listinfo",void 0),p([o.JsonProperty("children",[D],!1),d("design:type",Array)],e.prototype,"children",void 0),e=p([o.JsonObject("List")],e)}(),x=function(){function e(){this.listinfo=undefined}return p([o.JsonProperty("listinfo",L,!1),d("design:type",L)],e.prototype,"listinfo",void 0),e=p([o.JsonObject("ListInfoResponse")],e)}(),T=function(){function e(){this.id=undefined,this.name=undefined,this.projectIri=undefined,this.isRootNode=undefined,this.labels=undefined,this.comments=undefined}return p([o.JsonProperty("id",String),d("design:type",String)],e.prototype,"id",void 0),p([o.JsonProperty("name",String,!0),d("design:type",String)],e.prototype,"name",void 0),p([o.JsonProperty("projectIri",String,!0),d("design:type",String)],e.prototype,"projectIri",void 0),p([o.JsonProperty("isRootNode",Boolean,!0),d("design:type",Boolean)],e.prototype,"isRootNode",void 0),p([o.JsonProperty("labels",[I]),d("design:type",Array)],e.prototype,"labels",void 0),p([o.JsonProperty("comments",[I]),d("design:type",Array)],e.prototype,"comments",void 0),e=p([o.JsonObject("ListNodeInfo")],e)}(),J=function(){function e(){this.nodeinfo=undefined}return p([o.JsonProperty("nodeinfo",D,!1),d("design:type",D)],e.prototype,"nodeinfo",void 0),e=p([o.JsonObject("ListNodeInfoResponse")],e)}(),N=function(){function e(){this.list=undefined}return p([o.JsonProperty("list",E,!1),d("design:type",E)],e.prototype,"list",void 0),e=p([o.JsonObject("ListResponse")],e)}(),H=function(){function e(){this.nodeinfo=undefined}return p([o.JsonProperty("nodeinfo",D,!1),d("design:type",D)],e.prototype,"nodeinfo",void 0),e=p([o.JsonObject("ListNodeResponse")],e)}(),K=function(){function e(){this.lists=undefined}return p([o.JsonProperty("lists",[D],!1),d("design:type",Array)],e.prototype,"lists",void 0),e=p([o.JsonObject("ListsResponse")],e)}(),U=function(){function e(){this.ontologyIri=undefined,this.ontologyName=undefined}return p([o.JsonProperty("ontologyIri",String),d("design:type",String)],e.prototype,"ontologyIri",void 0),p([o.JsonProperty("ontologyName",String),d("design:type",String)],e.prototype,"ontologyName",void 0),e=p([o.JsonObject("OntologyInfoShort")],e)}(),M=function(){function e(){this.groupsPerProject=undefined,this.administrativePermissionsPerProject=undefined}return p([o.JsonProperty("groupsPerProject",Object),d("design:type",Object)],e.prototype,"groupsPerProject",void 0),p([o.JsonProperty("administrativePermissionsPerProject",Object),d("design:type",Object)],e.prototype,"administrativePermissionsPerProject",void 0),e=p([o.JsonObject("PermissionData")],e)}(),W=function(){function e(){this.id=undefined,this.email=undefined,this.username=undefined,this.password=undefined,this.token=undefined,this.givenName=undefined,this.familyName=undefined,this.status=undefined,this.lang=undefined,this.groups=undefined,this.projects=undefined,this.sessionId=undefined,this.permissions=undefined,this.systemAdmin=!1}return p([o.JsonProperty("id",String),d("design:type",String)],e.prototype,"id",void 0),p([o.JsonProperty("email",String),d("design:type",String)],e.prototype,"email",void 0),p([o.JsonProperty("username",String),d("design:type",String)],e.prototype,"username",void 0),p([o.JsonProperty("password",String,!0),d("design:type",String)],e.prototype,"password",void 0),p([o.JsonProperty("token",String,!0),d("design:type",String)],e.prototype,"token",void 0),p([o.JsonProperty("givenName",String),d("design:type",String)],e.prototype,"givenName",void 0),p([o.JsonProperty("familyName",String),d("design:type",String)],e.prototype,"familyName",void 0),p([o.JsonProperty("status",Boolean),d("design:type",Boolean)],e.prototype,"status",void 0),p([o.JsonProperty("lang",String),d("design:type",String)],e.prototype,"lang",void 0),p([o.JsonProperty("groups",[w]),d("design:type",Array)],e.prototype,"groups",void 0),p([o.JsonProperty("projects",[k]),d("design:type",Array)],e.prototype,"projects",void 0),p([o.JsonProperty("sessionId",String,!0),d("design:type",String)],e.prototype,"sessionId",void 0),p([o.JsonProperty("permissions",M),d("design:type",M)],e.prototype,"permissions",void 0),p([o.JsonProperty("systemAdmin",Boolean,!0),d("design:type",Boolean)],e.prototype,"systemAdmin",void 0),e=p([o.JsonObject("User")],e)}(),G=function(){function e(){this.members=undefined}return p([o.JsonProperty("members",[W]),d("design:type",Array)],e.prototype,"members",void 0),e=p([o.JsonObject("ProjectMembersResponse")],e)}(),q=function(){function e(){this.project=undefined}return p([o.JsonProperty("project",k),d("design:type",k)],e.prototype,"project",void 0),e=p([o.JsonObject("ProjectResponse")],e)}(),B=function(){function e(){this.projects=undefined}return p([o.JsonProperty("projects",[k]),d("design:type",Array)],e.prototype,"projects",void 0),e=p([o.JsonObject("ProjectsResponse")],e)}(),X=function(){function e(){this.users=undefined}return p([o.JsonProperty("users",[W]),d("design:type",Array)],e.prototype,"users",void 0),e=p([o.JsonObject("UsersResponse")],e)}(),_=function(){function e(){this.user=undefined}return p([o.JsonProperty("user",W),d("design:type",W)],e.prototype,"user",void 0),e=p([o.JsonObject("UserResponse")],e)}(),Y=function(){return function(){this.type=S.TextValue}}(),Q=function(e){function t(t,r,n){var o=e.call(this)||this;return o.id=t,o.propIri=r,o.str=n,o}return l(t,e),t.prototype.getClassName=function(){return S.ReadTextValueAsString},t.prototype.getContent=function(){return this.str},t}(Y),z=function(){return function(){}}(),$=function(e){function t(t,r,n,o){var i=e.call(this)||this;return i.id=t,i.propIri=r,i.html=n,i.referredResources=o,i}return l(t,e),t.prototype.getReferredResourceInfo=function(e,t){if(this.referredResources!==undefined&&this.referredResources[e]!==undefined){var r=t.getLabelForResourceClass(this.referredResources[e].type);return this.referredResources[e].label+" ("+r+")"}return"no information found about referred resource (target of standoff link)"},t.prototype.getClassName=function(){return S.ReadTextValueAsHtml},t.prototype.getContent=function(){return this.html},t}(Y),Z=function(e){function t(t,r,n,o){var i=e.call(this)||this;return i.id=t,i.propIri=r,i.xml=n,i.mappingIri=o,i}return l(t,e),t.prototype.getClassName=function(){return S.ReadTextValueAsXml},t.prototype.getContent=function(){return this.xml},t}(Y),ee=function(){function e(e,t,r,n,o,i,a,s,u,l,p){this.id=e,this.propIri=t,this.calendar=r,this.startYear=n,this.endYear=o,this.startEra=i,this.endEra=a,this.startMonth=s,this.endMonth=u,this.startDay=l,this.endDay=p,this.type=S.DateValue,this.separator="/"}return e.prototype.getDateSalsah=function(){return this.startYear===this.endYear&&this.startMonth===this.endMonth&&this.startDay===this.endDay&&this.startEra===this.endEra?new O(this.calendar,this.startEra,this.startYear,this.startMonth,this.startDay):new C(new O(this.calendar,this.startEra,this.startYear,this.startMonth,this.startDay),new O(this.calendar,this.endEra,this.endYear,this.endMonth,this.endDay))},e.prototype.getClassName=function(){return S.ReadDateValue},e.prototype.getContent=function(){return this.getDateSalsah().getDateAsString()},e}(),te=function(){function e(e,t,r,n){this.id=e,this.propIri=t,this.referredResourceIri=r,this.referredResource=n,this.type=S.LinkValue}return e.prototype.getReferredResourceInfo=function(e){if(this.referredResource!==undefined){var t=e.getLabelForResourceClass(this.referredResource.type);return this.referredResource.label+" ("+t+")"}return this.referredResourceIri},e.prototype.getClassName=function(){return S.ReadLinkValue},e.prototype.getContent=function(){return this.referredResource!==undefined?this.referredResource.label:this.referredResourceIri},e}(),re=function(){function e(e,t,r){this.id=e,this.propIri=t,this.integer=r,this.type=S.IntValue}return e.prototype.getClassName=function(){return S.ReadIntegerValue},e.prototype.getContent=function(){return this.integer.toString()},e}(),ne=function(){function e(e,t,r){this.id=e,this.propIri=t,this.decimal=r,this.type=S.DecimalValue}return e.prototype.getClassName=function(){return S.ReadDecimalValue},e.prototype.getContent=function(){return this.decimal.toString()},e}(),oe=function(){return function(){}}(),ie=function(e){function t(t,r,n,o,i,a,s){var u=e.call(this)||this;return u.id=t,u.propIri=r,u.imageFilename=n,u.imageServerIIIFBaseURL=o,u.imagePath=i,u.dimX=a,u.dimY=s,u.type=S.StillImageFileValue,u.isPreview=n.endsWith(".jpg"),u}return l(t,e),t.prototype.makeIIIFUrl=function(e){if(this.isPreview)return this.imagePath;var t=Math.floor(100/e);return t=t>0&&t<=100?t:50,this.imageServerIIIFBaseURL+"/"+this.imageFilename+"/full/pct:"+t.toString()+"/0/default.jpg"},t.prototype.getClassName=function(){return S.ReadStillImageFileValue},t.prototype.getContent=function(){return this.imagePath},t}(oe),ae=function(e){function t(t,r,n,o,i,a,s,u){var l=e.call(this)||this;return l.id=t,l.propIri=r,l.filename=n,l.path=o,l.dimX=i,l.dimY=a,l.duration=s,l.fps=u,l.type=S.MovingImageFileValue,l}return l(t,e),t.prototype.getClassName=function(){return S.ReadMovingImageFileValue},t.prototype.getContent=function(){return this.path},t}(oe),se=function(e){function t(t,r,n,o,i){var a=e.call(this)||this;return a.id=t,a.propIri=r,a.filename=n,a.path=o,a.duration=i,a.type=S.AudioFileValue,a}return l(t,e),t.prototype.getClassName=function(){return S.ReadAudioFileValue},t.prototype.getContent=function(){return this.path},t}(oe),ue=function(e){function t(t,r,n,o){var i=e.call(this)||this;return i.id=t,i.propIri=r,i.filename=n,i.path=o,i.type=S.DDDFileValue,i}return l(t,e),t.prototype.getClassName=function(){return S.ReadDDDFileValue},t.prototype.getContent=function(){return this.path},t}(oe),le=function(e){function t(t,r,n,o){var i=e.call(this)||this;return i.id=t,i.propIri=r,i.filename=n,i.path=o,i.type=S.DocumentFileValue,i}return l(t,e),t.prototype.getClassName=function(){return S.ReadDocumentFileValue},t.prototype.getContent=function(){return this.path},t}(oe),pe=function(){function e(e,t,r,n){this.id=e,this.propIri=t,this.textFilename=r,this.textFileURL=n,this.type=S.TextFileValue}return e.prototype.getClassName=function(){return S.ReadTextFileValue},e.prototype.getContent=function(){return this.textFileURL},e}(),ce=function(){function e(e,t,r){this.id=e,this.propIri=t,this.colorHex=r,this.type=S.ColorValue}return e.prototype.getClassName=function(){return S.ReadColorValue},e.prototype.getContent=function(){return this.colorHex},e}(),de=function(){return function(e,t){this.x=e,this.y=t}}(),he=function(){return function(e,t,r,n,o,i){this.status=e,this.lineColor=t,this.lineWidth=r,this.points=n,this.type=o,this.radius=i}}(),fe=function(){function e(e,t,r){var n,o;this.id=e,this.propIri=t,this.geometryString=r,this.type=S.GeomValue;var i,a=JSON.parse(r),s=[];try{for(var u=h(a.points),l=u.next();!l.done;l=u.next()){var p=l.value;s.push(new de(p.x,p.y))}}catch(c){n={error:c}}finally{try{l&&!l.done&&(o=u["return"])&&o.call(u)}finally{if(n)throw n.error}}a.radius&&(i=new de(a.radius.x,a.radius.y)),this.geometry=new he(a.status,a.lineColor,a.lineWidth,s,a.type,i)}return e.prototype.getClassName=function(){return S.ReadGeomValue},e.prototype.getContent=function(){return this.geometryString},e}(),ge=function(){function e(e,t,r){this.id=e,this.propIri=t,this.uri=r,this.type=S.UriValue}return e.prototype.getClassName=function(){return S.ReadUriValue},e.prototype.getContent=function(){return this.uri},e}(),ye=function(){function e(e,t,r){this.id=e,this.propIri=t,this.bool=r,this.type=S.BooleanValue}return e.prototype.getClassName=function(){return S.ReadBooleanValue},e.prototype.getContent=function(){return this.bool.toString()},e}(),me=function(){function e(e,t,r,n){this.id=e,this.propIri=t,this.intervalStart=r,this.intervalEnd=n,this.type=S.IntervalValue}return e.prototype.getClassName=function(){return S.ReadIntervalValue},e.prototype.getContent=function(){return this.intervalStart.toString()+"-"+this.intervalEnd},e}(),ve=function(){function e(e,t,r){this.id=e,this.propIri=t,this.listNodeIri=r,this.type=S.ListValue}return e.prototype.getClassName=function(){return S.ReadListValue},e.prototype.getContent=function(){return this.listNodeIri},e}(),Ve=function(){return function(e,t,r,n,o,i,a,s){this.id=e,this.type=t,this.label=r,this.incomingRegions=n,this.incomingStillImageRepresentations=o,this.incomingLinks=i,this.stillImageRepresentationsToDisplay=a,this.properties=s}}(),Se=function(){return function(e,t,r,n,o,i,a,s){this.id=e,this.type=t,this.label=r,this.incomingAnnotations=n,this.incomingFileRepresentations=o,this.incomingLinks=i,this.fileRepresentationsToDisplay=a,this.properties=s}}(),Re=require("jsonld"),be=require("semver"),Ie=function(){function e(e,t){this.http=e,this.config=t,this.loading=!1}return e.prototype.httpGet=function(e,t){var r=this;return this.loading=!0,this.http.get(this.config.api+e,{observe:"response",params:t}).pipe(a.map(function(t){r.loading=!1;var n=new v;return n.header={server:t.headers.get("Server")},r.compareVersion(t.headers.get("Server")),n.status=t.status,n.statusText=t.statusText,n.url=e,n.body=t.body,n}),a.catchError(function(e){return r.loading=!1,r.handleRequestError(e)}))},e.prototype.processJSONLD=function(e){var t=Re.promises.compact(e.body,{});return i.from(t)},e.prototype.httpPost=function(e,t){var r=this;return this.loading=!0,this.http.post(this.config.api+e,t,{observe:"response"}).pipe(a.map(function(t){r.loading=!1;var n=new v;return n.header={server:t.headers.get("Server")},r.compareVersion(n.header.server),n.status=t.status,n.statusText=t.statusText,n.url=e,n.body=t.body,n}),a.catchError(function(e){return r.loading=!1,r.handleRequestError(e)}))},e.prototype.httpPut=function(e,t){var r=this;return this.loading=!0,this.http.put(this.config.api+e,t,{observe:"response"}).pipe(a.map(function(t){r.loading=!1;var n=new v;return n.header={server:t.headers.get("Server")},r.compareVersion(n.header.server),n.status=t.status,n.statusText=t.statusText,n.url=e,n.body=t.body,n}),a.catchError(function(e){return r.loading=!1,r.handleRequestError(e)}))},e.prototype.httpDelete=function(e){var t=this;return this.loading=!0,this.http["delete"](this.config.api+e,{observe:"response"}).pipe(a.map(function(r){t.loading=!1;var n=new v;return n.header={server:r.headers.get("Server")},t.compareVersion(n.header.server),n.status=r.status,n.statusText=r.statusText,n.url=e,n.body=r.body,n}),a.catchError(function(e){return t.loading=!1,t.handleRequestError(e)}))},e.prototype.handleRequestError=function(e){var t=new V;return t.header={server:e.headers.get("Server")},t.status=e.status,t.statusText=e.statusText,t.errorInfo=e.message,t.url=e.url,s.throwError(t)},e.prototype.handleJsonError=function(e){if(e instanceof V)return s.throwError(e);var t=new V;return t.header={server:e.headers.get("Server")},t.status=-1,t.statusText="Invalid JSON",t.errorInfo=e,t.url="",s.throwError(t)},e.prototype.compareVersion=function(e){var t=S.KnoraVersion;if(e){var r=e.split(" ")[0].split("/")[1];"major"===be.diff(r,t)&&console.warn("The version of the @knora/core module works with Knora v"+t+", but you are using it with Knora v"+r)}},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.HttpClient),t.ɵɵinject(g))},token:e,providedIn:"root"}),e=p([t.Injectable({providedIn:"root"}),c(1,t.Inject(g)),d("design:paramtypes",[n.HttpClient,Object])],e)}(),Pe=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return l(r,e),r.prototype.getOntologiesMetadata=function(){return this.httpGet("/v2/ontologies/metadata")},r.prototype.getAllOntologies=function(){return this.httpGet("/v2/ontologies/metadata")},r.prototype.getProjectOntologies=function(e){return this.httpGet("/v2/ontologies/metadata/"+encodeURIComponent(e))},r.prototype.getAllEntityDefinitionsForOntologies=function(e){return this.httpGet("/v2/ontologies/allentities/"+encodeURIComponent(e))},r.prototype.getResourceClasses=function(e){if(0===e.length)return i.Observable.create(function(e){return e.error("No resource class Iris given for call of OntologyService.getResourceClasses")});var t="";return e.forEach(function(e){t=t+"/"+encodeURIComponent(e.toString())}),this.httpGet("/v2/ontologies/classes"+t)},r.prototype.getProperties=function(e){if(0===e.length)return i.Observable.create(function(e){return e.error("No property Iris given for call of OntologyService.getProperties")});var t="";return e.forEach(function(e){t=t+"/"+encodeURIComponent(e.toString())}),this.httpGet("/v2/ontologies/properties"+t)},r.prototype.createOntology=function(e){var t={"knora-api:ontologyName":e.name,"knora-api:attachedToProject":{"@id":e.projectIri},"rdfs:label":e.label,"@context":{rdfs:S.RdfsSchema,"knora-api":S.KnoraApiV2WithValueObjectPath}};return this.httpPost("/v2/ontologies",t).pipe(a.map(function(e){return e.body}),a.catchError(this.handleJsonError))},r.prototype.createResourceClass=function(e){var t={"@id":void 0,"@type":"owl:Ontology","knora-api:lastModificationDate":void 0,"@graph":[{"@id":void 0+":"+e.name,"@type":"owl:Class","rdfs:label":e.labels,"rdfs:comment":e.comments,"rdfs:subClassOf":{"@id":e.subClassOf}}],"@context":{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#","knora-api":"http://api.knora.org/ontology/knora-api/v2#",owl:"http://www.w3.org/2002/07/owl#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",xsd:"http://www.w3.org/2001/XMLSchema#",onto_name:void 0+"#"}};return this.httpPost("/v2/ontologies/classes",t).pipe(a.map(function(e){return e.body}),a.catchError(this.handleJsonError))},r.prototype.createProperty=function(e){var t,r,n=[];try{for(var o=h(e),i=o.next();!i.done;i=o.next()){var s=i.value,u={"@id":void 0+":"+s.name,"@type":"owl:ObjectProperty","rdfs:label":s.labels,"rdfs:comment":s.comments,"rdfs:subPropertyOf":s.subPropertyOf,"salsah-gui:guiElement":{"@id":s.guiElement}};n.push(u)}}catch(p){t={error:p}}finally{try{i&&!i.done&&(r=o["return"])&&r.call(o)}finally{if(t)throw t.error}}var l={"@id":void 0,"@type":"owl:Ontology","knora-api:lastModificationDate":void 0,"@graph":[n],"@context":{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#","knora-api":"http://api.knora.org/ontology/knora-api/v2#","salsah-gui":"http://api.knora.org/ontology/salsah-gui/v2#",owl:"http://www.w3.org/2002/07/owl#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",xsd:"http://www.w3.org/2001/XMLSchema#",onto_name:void 0+"#"}};return this.httpPost("/v2/ontologies/properties",l).pipe(a.map(function(e){return e.body}),a.catchError(this.handleJsonError))},r.prototype.setCardinality=function(e){var t={"@id":void 0,"@type":"owl:Ontology","knora-api:lastModificationDate":void 0,"@graph":[{"@id":void 0,"@type":"owl:Class","rdfs:subClassOf":{"@type":"owl:Restriction","owl:onProperty":{"@id":void 0}}}],"@context":{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#","knora-api":"http://api.knora.org/ontology/knora-api/v2#",owl:"http://www.w3.org/2002/07/owl#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",xsd:"http://www.w3.org/2001/XMLSchema#",onto_name:void 0+"#"}};return this.httpPost("/v2/ontologies/cardinalities",t).pipe(a.map(function(e){return e.body}),a.catchError(this.handleJsonError))},r.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(n.HttpClient),t.ɵɵinject(g))},token:r,providedIn:"root"}),r=p([t.Injectable({providedIn:"root"})],r)}(Ie),Oe=require("jsonld"),Ce=function(e){function t(t){var r=e.call(this,t)||this;return r.message=t,r}return l(t,e),t}(Error),je=function(){return function(e,t){this.id=e,this.label=t}}();(P=e.CardinalityOccurrence||(e.CardinalityOccurrence={}))[P.minCard=0]="minCard",P[P.card=1]="card",P[P.maxCard=2]="maxCard";var ke=function(){return function(e,t,r){this.occurrence=e,this.value=t,this.property=r}}(),we=function(){return function(e,t){this.value=e,this.property=t}}(),Ae=function(){return function(e,t,r,n,o,i){this.id=e,this.icon=t,this.comment=r,this.label=n,this.cardinalities=o,this.guiOrder=i}}(),Fe=function(){return function(){}}(),Le=function(){return function(e,t,r,n,o,i,a,s,u){this.id=e,this.objectType=t,this.comment=r,this.label=n,this.subPropertyOf=o,this.isEditable=i,this.isLinkProperty=a,this.isLinkValueProperty=s,this.guiAttribute=u}}(),De=function(){return function(){}}(),Ee=function(){return function(){}}(),xe=function(){return function(){this.ontologies=[],this.resourceClassIrisForOntology=new Ee,this.resourceClasses=new Fe,this.properties=new De}}(),Te=function(){function e(e,t,r){this.resourceClassesForOntology=e,this.resourceClasses=t,this.properties=r}return e.sortFunc=function(e,t){if(e.label===undefined)return 1;if(t.label===undefined)return-1;var r=e.label.toLowerCase(),n=t.label.toLowerCase();return r<n?-1:r>n?1:0},e.prototype.updateOntologyInformation=function(e){var t=e.getResourceClassForOntology();for(var r in t)this.resourceClassesForOntology[r]=t[r];var n=e.getResourceClasses();for(var o in n)this.resourceClasses[o]=n[o];var i=e.getProperties();for(var a in i)this.properties[a]=i[a]},e.prototype.getResourceClassForOntology=function(){return this.resourceClassesForOntology},e.prototype.getResourceClasses=function(){return this.resourceClasses},e.prototype.getResourceClassesAsArray=function(t){void 0===t&&(t=!0);var r=[];for(var n in this.resourceClasses){var o=this.resourceClasses[n];r.push(o)}return r.sort(e.sortFunc),t||r.reverse(),r},e.prototype.getLabelForResourceClass=function(e){if(e!==undefined){var t=this.resourceClasses[e];if(t!==undefined&&t.label!==undefined)return t.label;console.log("cannot get label for "+e)}else console.log("call of OntologyInformation.getLabelForResourceClass without argument resClass")},e.prototype.getProperties=function(){return this.properties},e.prototype.getPropertiesAsArray=function(t){void 0===t&&(t=!0);var r=[];for(var n in this.properties){var o=this.properties[n];r.push(o)}return r.sort(e.sortFunc),t||r.reverse(),r},e.prototype.getLabelForProperty=function(e){if(e!==undefined){var t=this.properties[e];if(t!==undefined&&t.label!==undefined)return t.label;console.log("cannot get label for "+e)}else console.log("call of OntologyInformation.getLabelForProperty without argument property")},e}(),Je=function(){function r(e){this._ontologyService=e,this.excludedOntologies=[S.SalsahGuiOntology,S.StandoffOntology],this.excludedProperties=[S.RdfsLabel],this.nonResourceClasses=[S.ForbiddenResource,S.XMLToStandoffMapping,S.ListNode],this.cacheOntology=new xe}return r.prototype.getOntologiesMetadataFromKnora=function(){return this._ontologyService.getOntologiesMetadata().pipe(a.mergeMap(function(e){var t=Oe.promises.compact(e.body,{});return i.from(t)}))},r.prototype.getAllEntityDefinitionsForOntologyFromKnora=function(e){return this._ontologyService.getAllEntityDefinitionsForOntologies(e).pipe(a.mergeMap(function(e){var t=Oe.promises.compact(e.body,{});return i.from(t)}))},r.prototype.convertAndWriteOntologiesMetadataToCache=function(e){this.cacheOntology.ontologies=e.map(function(e){return new je(e["@id"],e[S.RdfsLabel])})},r.prototype.getAllOntologiesMetadataFromCache=function(){return this.cacheOntology.ontologies},r.prototype.getResourceClassIrisFromOntologyResponse=function(e){var t,r,n=[];try{for(var o=h(e),i=o.next();!i.done;i=o.next()){var a=i.value,s=a["@id"];s!==S.Resource&&-1===this.nonResourceClasses.indexOf(s)&&a[S.IsResourceClass]!==undefined&&!0===a[S.IsResourceClass]&&n.push(s)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(r=o["return"])&&r.call(o)}finally{if(t)throw t.error}}return n},r.prototype.convertAndWriteAllEntityDefinitionsForOntologyToCache=function(e){var t=e["@graph"],r=t.filter(function(e){return e["@type"]===S.OwlClass}),n=t.filter(function(e){var t=e["@type"];return t===S.OwlObjectProperty||t===S.OwlDatatypeProperty||t===S.OwlAnnotationProperty||t===S.RdfProperty});this.cacheOntology.resourceClassIrisForOntology[e["@id"]]=this.getResourceClassIrisFromOntologyResponse(r),this.convertAndWriteEntityDefinitionsToCache(r,n)},r.prototype.getOntologyInformationFromCache=function(e){var t,r,n=new Ee,o=[];try{for(var i=h(e),s=i.next();!s.done;s=i.next()){var u=s.value;if(this.cacheOntology.resourceClassIrisForOntology[u]===undefined)throw new Ce("getResourceClassesForOntologiesFromCache: ontology not found in cache: "+u);n[u]=this.cacheOntology.resourceClassIrisForOntology[u],o=o.concat(this.cacheOntology.resourceClassIrisForOntology[u])}}catch(l){t={error:l}}finally{try{s&&!s.done&&(r=i["return"])&&r.call(i)}finally{if(t)throw t.error}}return this.getResourceClassDefinitions(o).pipe(a.map(function(e){return new Te(n,e.getResourceClasses(),e.getProperties())}))},r.prototype.convertAndWriteEntityDefinitionsToCache=function(t,r){var n,o,i,a;try{for(var s=h(t),u=s.next();!u.done;u=s.next()){var l=u.value,p=l["@id"],c=[],d=[];if(l[S.RdfsSubclassOf]!==undefined){var f=void 0;f=Array.isArray(l[S.RdfsSubclassOf])?l[S.RdfsSubclassOf]:[l[S.RdfsSubclassOf]];try{for(var g=h(f),y=g.next();!y.done;y=g.next()){var m=y.value;if(m instanceof Object&&m["@type"]!==undefined&&m["@type"]===S.OwlRestriction){var v=void 0;if(m[S.OwlMinCardinality]!==undefined)v=new ke(e.CardinalityOccurrence.minCard,m[S.OwlMinCardinality],m[S.OwlOnProperty]["@id"]);else if(m[S.OwlCardinality]!==undefined)v=new ke(e.CardinalityOccurrence.card,m[S.OwlCardinality],m[S.OwlOnProperty]["@id"]);else{if(m[S.OwlMaxCardinality]===undefined)throw new TypeError("cardinality type invalid for "+l["@id"]+" "+m[S.OwlOnProperty]);v=new ke(e.CardinalityOccurrence.maxCard,m[S.OwlMaxCardinality],m[S.OwlOnProperty]["@id"])}c.push(v);var V=void 0;m[S.SalsahGuiOrder]!==undefined&&(V=new we(m[S.SalsahGuiOrder],m[S.OwlOnProperty]["@id"]),d.push(V))}}}catch(b){i={error:b}}finally{try{y&&!y.done&&(a=g["return"])&&a.call(g)}finally{if(i)throw i.error}}}var R=new Ae(p,l[S.ResourceIcon],l[S.RdfsComment],l[S.RdfsLabel],c,d);this.cacheOntology.resourceClasses[p]=R}}catch(I){n={error:I}}finally{try{u&&!u.done&&(o=s["return"])&&o.call(s)}finally{if(n)throw n.error}}this.convertAndWriteKnoraPropertyDefinitionsToOntologyCache(r)},r.prototype.getResourceClassDefinitionsFromCache=function(e){var t=this,r=new Fe,n=[];return e.forEach(function(e){r[e]=t.cacheOntology.resourceClasses[e],t.cacheOntology.resourceClasses[e].cardinalities.forEach(function(e){n.push(e.property)})}),this.getPropertyDefinitions(n).pipe(a.map(function(e){return new Te(new Ee,r,e.getProperties())}))},r.prototype.convertAndWriteKnoraPropertyDefinitionsToOntologyCache=function(e){var t,r,n,o;try{for(var i=h(e),a=i.next();!a.done;a=i.next()){var s=a.value,u=s["@id"],l=!1;s[S.isEditable]!==undefined&&!0===s[S.isEditable]&&(l=!0);var p=!1;s[S.isLinkProperty]!==undefined&&!0===s[S.isLinkProperty]&&(p=!0);var c=!1;s[S.isLinkValueProperty]!==undefined&&!0===s[S.isLinkValueProperty]&&(c=!0);var d=[];s[S.subPropertyOf]!==undefined&&Array.isArray(s[S.subPropertyOf])?d=s[S.subPropertyOf].map(function(e){return e["@id"]}):s[S.subPropertyOf]!==undefined&&d.push(s[S.subPropertyOf]["@id"]);var f=void 0;s[S.ObjectType]!==undefined&&(f=s[S.ObjectType]["@id"]);var g=[];if(s[S.SalsahGuiAttribute]!==undefined)if(Array.isArray(s[S.SalsahGuiAttribute]))try{for(var y=h(s[S.SalsahGuiAttribute]),m=y.next();!m.done;m=y.next()){var v=m.value;g.push(v)}}catch(V){n={error:V}}finally{try{m&&!m.done&&(o=y["return"])&&o.call(y)}finally{if(n)throw n.error}}else g.push(s[S.SalsahGuiAttribute]);this.cacheOntology.properties[u]=new Le(u,f,s[S.RdfsComment],s[S.RdfsLabel],d,l,p,c,g)}}catch(R){t={error:R}}finally{try{a&&!a.done&&(r=i["return"])&&r.call(i)}finally{if(t)throw t.error}}},r.prototype.getPropertyDefinitionsFromCache=function(e){var t=this,r=new De;return e.forEach(function(e){if(!(t.excludedProperties.indexOf(e)>-1)){if(t.cacheOntology.properties[e]===undefined)throw new Ce("getPropertyDefinitionsFromCache: property not found in cache: "+e);r[e]=t.cacheOntology.properties[e]}}),new Te(new Ee,new Fe,r)},r.prototype.getOntologiesMetadata=function(){var e=this;return 0===this.cacheOntology.ontologies.length?this.getOntologiesMetadataFromKnora().pipe(a.map(function(t){return e.convertAndWriteOntologiesMetadataToCache(t["@graph"].filter(function(t){return-1===e.excludedOntologies.indexOf(t["@id"])})),e.getAllOntologiesMetadataFromCache()})):i.of(this.getAllOntologiesMetadataFromCache())},r.prototype.getAndCacheOntologies=function(e){var t=this,r=[];return e.forEach(function(e){r.push(t.getAllEntityDefinitionsForOntologyFromKnora(e).pipe(a.map(function(e){t.convertAndWriteAllEntityDefinitionsForOntologyToCache(e)})))}),i.forkJoin(r)},r.prototype.getEntityDefinitionsForOntologies=function(e){var t=this,r=e.filter(function(e){return t.cacheOntology.resourceClassIrisForOntology[e]===undefined});return r.length>0?this.getAndCacheOntologies(r).pipe(a.mergeMap(function(){return t.getOntologyInformationFromCache(e)})):this.getOntologyInformationFromCache(e)},r.prototype.getResourceClassDefinitions=function(e){var t=this,r=e.filter(function(e){return t.cacheOntology.resourceClasses[e]===undefined});if(r.length>0){var n=r.map(function(e){return b.getOntologyIriFromEntityIri(e)}).filter(b.filterOutDuplicates);return this.getAndCacheOntologies(n).pipe(a.mergeMap(function(){return t.getResourceClassDefinitionsFromCache(e)}))}return this.getResourceClassDefinitionsFromCache(e)},r.prototype.getPropertyDefinitions=function(e){var t=this,r=e.filter(function(e){return!(t.excludedProperties.indexOf(e)>-1)&&t.cacheOntology.properties[e]===undefined});if(r.length>0){var n=r.map(function(e){return b.getOntologyIriFromEntityIri(e)}).filter(b.filterOutDuplicates);return this.getAndCacheOntologies(n).pipe(a.map(function(r){if(r)return t.getPropertyDefinitionsFromCache(e);throw new Error("Problem with: return this.getPropertyDefinitionsFromCache(propertyIris);")}))}return i.of(this.getPropertyDefinitionsFromCache(e))},r.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(Pe))},token:r,providedIn:"root"}),r=p([t.Injectable({providedIn:"root"}),d("design:paramtypes",[Pe])],r)}(),Ne=function(){return function(e,t){this.resources=e,this.numberOfResources=t,this.ontologyInformation=new Te({},{},{})}}(),He=function(){return function(e,t){this.resources=e,this.numberOfResources=t,this.ontologyInformation=new Te({},{},{})}}(),Ke=function(){return function(e){this.numberOfResults=e}}(),Ue=function(){return function(e,t,r){void 0===r&&(r=S.AudioFileValue),this.audioFileValue=e,this.sequences=t,this.type=r}}(),Me=function(){return function(e,t,r){this.fileValue=e,this.regions=t,this.sequences=r}}(),We=function(){return function(e,t,r){this.stillImage=e,this.movingImage=t,this.audio=r}}(),Ge=function(){return function(e,t,r){void 0===r&&(r=S.MovingImageFileValue),this.movingImageFileValue=e,this.sequences=t,this.type=r}}(),qe=function(){return function(e,t,r){void 0===r&&(r=S.StillImageFileValue),this.stillImageFileValue=e,this.regions=t,this.type=r}}(),Be=function(){function e(e){this.regionResource=e}return e.prototype.getGeometries=function(){return this.regionResource.properties[S.hasGeometry]},e}(),Xe=function(){function e(e){this.sequenceResource=e}return e.prototype.getIntervals=function(){return this.sequenceResource.properties[S.intervalValueHasStart]},e}(),_e=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.path="/admin/groups",t}return l(r,e),r.prototype.getAllGroups=function(){return this.httpGet(this.path).pipe(a.map(function(e){return e.getBody(F).groups}),a.catchError(this.handleJsonError))},r.prototype.getGroupByIri=function(e){return this.path+="/"+encodeURIComponent(e),this.httpGet(this.path).pipe(a.map(function(e){return e.getBody(A).group}),a.catchError(this.handleJsonError))},r.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(n.HttpClient),t.ɵɵinject(g))},token:r,providedIn:"root"}),r=p([t.Injectable({providedIn:"root"})],r)}(Ie),Ye=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.path="/admin/lists",t}return l(r,e),r.prototype.getLists=function(e){var t=this.path;return e&&(t+="?projectIri="+encodeURIComponent(e)),this.httpGet(t).pipe(a.map(function(e){return e.getBody(K).lists}),a.catchError(this.handleJsonError))},r.prototype.getList=function(e){return this.httpGet(this.path+"/"+encodeURIComponent(e)).pipe(a.map(function(e){return e.getBody(N).list}),a.catchError(this.handleJsonError))},r.prototype.getListInfo=function(e){return this.httpGet(this.path+"/infos/"+encodeURIComponent(e)).pipe(a.map(function(e){return e.getBody(x).listinfo}),a.catchError(this.handleJsonError))},r.prototype.getListNodeInfo=function(e){return this.httpGet(this.path+"/nodes/"+encodeURIComponent(e)).pipe(a.map(function(e){return e.getBody(H).nodeinfo}),a.catchError(this.handleJsonError))},r.prototype.createList=function(e){return this.httpPost(this.path,e).pipe(a.map(function(e){return e.getBody(N).list}),a.catchError(this.handleJsonError))},r.prototype.createListItem=function(e,t){return this.httpPost(this.path+"/"+encodeURIComponent(e),t).pipe(a.map(function(e){return e.getBody(H).nodeinfo}),a.catchError(this.handleJsonError))},r.prototype.updateListInfo=function(e){return this.httpPut(this.path+"/infos/"+encodeURIComponent(e.listIri),e).pipe(a.map(function(e){return e.getBody(x).listinfo}),a.catchError(this.handleJsonError))},r.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(n.HttpClient),t.ɵɵinject(g))},token:r,providedIn:"root"}),r=p([t.Injectable({providedIn:"root"})],r)}(Ie),Qe=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return l(r,e),r.prototype.getAllProjects=function(){return this.httpGet("/admin/projects").pipe(a.map(function(e){return e.getBody(B).projects}),a.catchError(this.handleJsonError))},r.prototype.getProjectByIri=function(e){var t="/admin/projects/iri/"+encodeURIComponent(e);return this.getProject(t)},r.prototype.getProjectByShortname=function(e){var t="/admin/projects/shortname/"+e;return this.getProject(t)},r.prototype.getProjectByShortcode=function(e){var t="/admin/projects/shortcode/"+e;return this.getProject(t)},r.prototype.getProject=function(e){return this.httpGet(e).pipe(a.map(function(e){return e.getBody(q).project}),a.catchError(this.handleJsonError))},r.prototype.getProjectMembersByIri=function(e){var t="/admin/projects/iri/"+encodeURIComponent(e)+"/members";return this.getProjectMembers(t)},r.prototype.getProjectMembersByShortname=function(e){var t="/admin/projects/shortname/"+e+"/members";return this.getProjectMembers(t)},r.prototype.getProjectMembersByShortcode=function(e){var t="/admin/projects/shortcode/"+e+"/members";return this.getProjectMembers(t)},r.prototype.getProjectMembers=function(e){return this.httpGet(e).pipe(a.map(function(e){return e.getBody(G).members}),a.catchError(this.handleJsonError))},r.prototype.createProject=function(e){return this.httpPost("/admin/projects",e).pipe(a.map(function(e){return e.getBody(q).project}),a.catchError(this.handleJsonError))},r.prototype.updateProject=function(e,t){var r="/admin/projects/iri/"+encodeURIComponent(e);return this.httpPut(r,t).pipe(a.map(function(e){return e.getBody(q).project}),a.catchError(this.handleJsonError))},r.prototype.activateProject=function(e){var t="/admin/projects/iri/"+encodeURIComponent(e);return this.httpPut(t,{status:!0}).pipe(a.map(function(e){return e.getBody(q).project}),a.catchError(this.handleJsonError))},r.prototype.deleteProject=function(e){var t="/admin/projects/iri/"+encodeURIComponent(e);return this.httpDelete(t).pipe(a.map(function(e){return e.getBody(q).project}),a.catchError(this.handleJsonError))},r.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(n.HttpClient),t.ɵɵinject(g))},token:r,providedIn:"root"}),r=p([t.Injectable({providedIn:"root"})],r)}(Ie),ze=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return l(r,e),r.prototype.getAllUsers=function(){return this.httpGet("/admin/users").pipe(a.map(function(e){return e.getBody(X).users}),a.catchError(this.handleJsonError))},r.prototype.getUser=function(e,t){var r="/admin/users/"+t+"/"+encodeURIComponent(e);return this.httpGet(r).pipe(a.map(function(e){return e.getBody(_).user}),a.catchError(this.handleJsonError))},r.prototype.getUserByIri=function(e){return this.getUser(e,"iri")},r.prototype.getUserByEmail=function(e){return this.getUser(e,"email")},r.prototype.getUserByUsername=function(e){return this.getUser(e,"username")},r.prototype.getUsersGroupMemberships=function(e){var t="/admin/users/iri/"+encodeURIComponent(e)+"/group-memberships";return this.httpGet(t).pipe(a.map(function(e){return e.getBody(F).groups}),a.catchError(this.handleJsonError))},r.prototype.createUser=function(e){return this.httpPost("/admin/users",e).pipe(a.map(function(e){return e.getBody(_).user}),a.catchError(this.handleJsonError))},r.prototype.addUserToProject=function(e,t){var r="/admin/users/iri/"+encodeURIComponent(e)+"/project-memberships/"+encodeURIComponent(t);return this.httpPost(r).pipe(a.map(function(e){return e.getBody(_).user}),a.catchError(this.handleJsonError))},r.prototype.removeUserFromProject=function(e,t){var r="/admin/users/iri/"+encodeURIComponent(e)+"/project-memberships/"+encodeURIComponent(t);return this.httpDelete(r).pipe(a.map(function(e){return e.getBody(_).user}),a.catchError(this.handleJsonError))},r.prototype.addUserToProjectAdmin=function(e,t){var r="/admin/users/iri/"+encodeURIComponent(e)+"/project-admin-memberships/"+encodeURIComponent(t);return this.httpPost(r).pipe(a.map(function(e){return e.getBody(_).user}),a.catchError(this.handleJsonError))},r.prototype.removeUserFromProjectAdmin=function(e,t){var r="/admin/users/iri/"+encodeURIComponent(e)+"/project-admin-memberships/"+encodeURIComponent(t);return this.httpDelete(r).pipe(a.map(function(e){return e.getBody(_).user}),a.catchError(this.handleJsonError))},r.prototype.addUserToGroup=function(e,t){var r="/admin/users/iri/"+encodeURIComponent(e)+"/group-memberships/"+encodeURIComponent(t);return this.httpPost(r).pipe(a.map(function(e){return e.getBody(_).user}),a.catchError(this.handleJsonError))},r.prototype.removeUserFromGroup=function(e,t){var r="/admin/users/iri/"+encodeURIComponent(e)+"/group-memberships/"+encodeURIComponent(t);return this.httpDelete(r).pipe(a.map(function(e){return e.getBody(_).user}),a.catchError(this.handleJsonError))},r.prototype.addUserToSystemAdmin=function(e){return this.updateUserSystemAdmin(e,{systemAdmin:!0})},r.prototype.removeUserFromSystemAdmin=function(e){return this.updateUserSystemAdmin(e,{systemAdmin:!1})},r.prototype.updateUserSystemAdmin=function(e,t){var r="/admin/users/iri/"+encodeURIComponent(e)+"/SystemAdmin";return this.httpPut(r,t).pipe(a.map(function(e){return e.getBody(_).user}),a.catchError(this.handleJsonError))},r.prototype.activateUser=function(e){var t="/admin/users/iri/"+encodeURIComponent(e)+"/Status";return this.httpPut(t,{status:!0}).pipe(a.map(function(e){return e.getBody(_).user}),a.catchError(this.handleJsonError))},r.prototype.updateOwnPassword=function(e,t,r){var n="/admin/users/iri/"+encodeURIComponent(e)+"/Password",o={newPassword:r,requesterPassword:t};return this.httpPut(n,o).pipe(a.map(function(e){return e.getBody(_).user}),a.catchError(this.handleJsonError))},r.prototype.updateUsersPassword=function(e,t,r){var n="/admin/users/iri/"+encodeURIComponent(e)+"/Password",o={newPassword:r,requesterPassword:t};return this.httpPut(n,o).pipe(a.map(function(e){return e.getBody(_).user}),a.catchError(this.handleJsonError))},r.prototype.updateBasicUserInformation=function(e,t){var r="/admin/users/iri/"+encodeURIComponent(e)+"/BasicUserInformation";return this.httpPut(r,t).pipe(a.map(function(e){return e.getBody(_).user}),a.catchError(this.handleJsonError))},r.prototype.deleteUser=function(e){var t="/admin/users/iri/"+encodeURIComponent(e);return this.httpDelete(t).pipe(a.map(function(e){return e.getBody(_).user}),a.catchError(this.handleJsonError))},r.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(n.HttpClient),t.ɵɵinject(g))},token:r,providedIn:"root"}),r=p([t.Injectable({providedIn:"root"})],r)}(Ie),$e=function(){function e(){this.subject=new i.Subject}return e.prototype.setLanguage=function(e){this.subject.next({"var":e})},e.prototype.getLanguage=function(){return this.subject.asObservable()},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e=p([t.Injectable({providedIn:"root"})],e)}(),Ze=function(){function e(e,t){this._http=e,this.config=t}return e.prototype.getStatusMsg=function(){return this._http.get(this.config.app+"/assets/i18n/statusMsg.json").pipe(a.map(function(e){return e},function(e){console.error(e)}))},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.HttpClient),t.ɵɵinject(g))},token:e,providedIn:"root"}),e=p([t.Injectable({providedIn:"root"}),c(1,t.Inject(g)),d("design:paramtypes",[n.HttpClient,Object])],e)}();!function(e){var t=function(e){return"@id"!==e&&"@type"!==e&&e!==S.RdfsLabel&&e!==S.attachedToProject&&e!==S.attachedToUser&&e!==S.creationDate&&e!==S.lastModificationDate&&e!==S.hasPermissions&&e!==S.userHasPermission&&e!==S.ArkUrl&&e!==S.versionArkUrl};function r(e){var t=i(e);return new Ve(e["@id"],e["@type"],e[S.RdfsLabel],[],[],[],[],t)}function n(e){var t=i(e);return new Se(e["@id"],e["@type"],e[S.RdfsLabel],[],[],[],{},t)}function o(e,t,n){var o,i,a;switch(e["@type"]){case S.TextValue:var s=void 0;if(e[S.valueAsString]!==undefined)s=new Q(e["@id"],t,e[S.valueAsString]);else if(e[S.textValueAsHtml]!==undefined){var u={};try{for(var l=h(n),p=l.next();!p.done;p=l.next()){var c=p.value.referredResource;u[c.id]=c}}catch(b){o={error:b}}finally{try{p&&!p.done&&(i=l["return"])&&i.call(l)}finally{if(o)throw o.error}}s=new $(e["@id"],t,e[S.textValueAsHtml],u)}else e[S.textValueAsXml]!==undefined&&e[S.textValueHasMapping]["@id"]!==undefined?s=new Z(e["@id"],t,e[S.textValueAsXml],e[S.textValueHasMapping]["@id"]):console.error("ERROR: Invalid text value: "+JSON.stringify(e));a=s;break;case S.DateValue:a=new ee(e["@id"],t,e[S.dateValueHasCalendar],e[S.dateValueHasStartYear],e[S.dateValueHasEndYear],e[S.dateValueHasStartEra],e[S.dateValueHasEndEra],e[S.dateValueHasStartMonth],e[S.dateValueHasEndMonth],e[S.dateValueHasStartDay],e[S.dateValueHasEndDay]);break;case S.LinkValue:var d=void 0;if(e[S.linkValueHasTarget]!==undefined){var f=r(e[S.linkValueHasTarget]);d=new te(e["@id"],t,f.id,f)}else if(e[S.linkValueHasTargetIri]!==undefined){var g=e[S.linkValueHasTargetIri]["@id"];d=new te(e["@id"],t,g)}else if(e[S.linkValueHasSource]!==undefined){var y=r(e[S.linkValueHasSource]);d=new te(e["@id"],t,y.id,y)}else if(e[S.linkValueHasSourceIri]!==undefined){var m=e[S.linkValueHasSourceIri]["@id"];d=new te(e["@id"],t,m)}a=d;break;case S.IntValue:a=new re(e["@id"],t,e[S.integerValueAsInteger]);break;case S.DecimalValue:var v=parseFloat(e[S.decimalValueAsDecimal]["@value"]);a=new ne(e["@id"],t,v);break;case S.StillImageFileValue:a=new ie(e["@id"],t,e[S.fileValueHasFilename],e[S.stillImageFileValueHasIIIFBaseUrl]["@value"],e[S.fileValueAsUrl]["@value"],e[S.stillImageFileValueHasDimX],e[S.stillImageFileValueHasDimY]);break;case S.MovingImageFileValue:a=new ae(e["@id"],t,e[S.fileValueHasFilename],e[S.fileValueAsUrl]["@value"],e[S.movingImageFileValueHasDimX],e[S.movingImageFileValueHasDimY],e[S.movingImageFileValueHasDuration],e[S.movingImageFileValueHasFps]);break;case S.AudioFileValue:a=new se(e["@id"],t,e[S.fileValueHasFilename],e[S.fileValueAsUrl]["@value"],e[S.audioFileValueHasDuration]);break;case S.DDDFileValue:a=new ue(e["@id"],t,e[S.fileValueHasFilename],e[S.fileValueAsUrl]["@value"]);break;case S.DocumentFileValue:a=new le(e["@id"],t,e[S.fileValueHasFilename],e[S.fileValueAsUrl]["@value"]);break;case S.TextFileValue:a=new pe(e["@id"],t,e[S.fileValueHasFilename],e[S.fileValueAsUrl]["@value"]);break;case S.ColorValue:a=new ce(e["@id"],t,e[S.colorValueAsColor]);break;case S.GeomValue:a=new fe(e["@id"],t,e[S.geometryValueAsGeometry]);break;case S.UriValue:a=new ge(e["@id"],t,e[S.uriValueAsUri]["@value"]);break;case S.BooleanValue:a=new ye(e["@id"],t,e[S.booleanValueAsBoolean]);break;case S.IntervalValue:var V=parseFloat(e[S.intervalValueHasStart]["@value"]),R=parseFloat(e[S.intervalValueHasEnd]["@value"]);a=new me(e["@id"],t,V,R);break;case S.ListValue:a=new ve(e["@id"],t,e[S.listValueAsListNode]["@id"]);break;default:console.error("ERROR: value type not implemented yet: "+e["@type"]+"("+e["@id"]+")")}return a}function i(e){var r,n,i,a,s,u,l=e[S.hasStandoffLinkToValue],p=[];if(l!==undefined&&Array.isArray(l))try{for(var c=h(l),d=c.next();!d.done;d=c.next()){var f=o(d.value,S.hasStandoffLinkToValue,[]);p.push(f)}}catch(O){r={error:O}}finally{try{d&&!d.done&&(n=c["return"])&&n.call(c)}finally{if(r)throw r.error}}else if(l!==undefined){f=o(l,S.hasStandoffLinkToValue,[]);p.push(f)}var g=Object.keys(e);g=g.filter(t);var y={};try{for(var m=h(g),v=m.next();!v.done;v=m.next()){var V=v.value,R=[];if(Array.isArray(e[V]))try{for(var b=h(e[V]),I=b.next();!I.done;I=b.next()){var P;(P=o(I.value,V,p))!==undefined&&R.push(P)}}catch(C){s={error:C}}finally{try{I&&!I.done&&(u=b["return"])&&u.call(b)}finally{if(s)throw s.error}}else(P=o(e[V],V,p))!==undefined&&R.push(P);y[V]=R}}catch(j){i={error:j}}finally{try{v&&!v.done&&(a=m["return"])&&a.call(m)}finally{if(i)throw i.error}}return y}function a(e){var r,n,o,i,a=Object.keys(e);a=a.filter(t);var s=[];try{for(var u=h(a),l=u.next();!l.done;l=u.next()){var p=l.value;if(Array.isArray(e[p]))try{for(var c=h(e[p]),d=c.next();!d.done;d=c.next()){var f=d.value;f["@type"]===S.LinkValue&&f[S.linkValueHasTarget]!==undefined?s.push(f[S.linkValueHasTarget]["@type"]):f["@type"]===S.LinkValue&&f[S.linkValueHasSource]!==undefined&&s.push(f[S.linkValueHasSource]["@type"])}}catch(g){o={error:g}}finally{try{d&&!d.done&&(i=c["return"])&&i.call(c)}finally{if(o)throw o.error}}else e[p]["@type"]===S.LinkValue&&e[p][S.linkValueHasTarget]!==undefined?s.push(e[p][S.linkValueHasTarget]["@type"]):e[p]["@type"]===S.LinkValue&&e[p][S.linkValueHasSource]!==undefined&&s.push(e[p][S.linkValueHasSource]["@type"])}}catch(y){r={error:y}}finally{try{l&&!l.done&&(n=u["return"])&&n.call(u)}finally{if(r)throw r.error}}return s}e.createReadResourcesSequenceFromJsonLD=function(e){var t,n,o,i=[],a=e["@graph"];if(a!==undefined){o=a.length;try{for(var s=h(a),u=s.next();!u.done;u=s.next()){var l=r(u.value);i.push(l)}}catch(p){t={error:p}}finally{try{u&&!u.done&&(n=s["return"])&&n.call(s)}finally{if(t)throw t.error}}}else 0===Object.keys(e).length?o=0:(o=1,l=r(e),i.push(l));return new Ne(i,o)},e.createResourcesSequenceFromJsonLD=function(e){var t,r,o,i=[],a=e["@graph"];if(a!==undefined){o=a.length;try{for(var s=h(a),u=s.next();!u.done;u=s.next()){var l=n(u.value);i.push(l)}}catch(p){t={error:p}}finally{try{u&&!u.done&&(r=s["return"])&&r.call(s)}finally{if(t)throw t.error}}}else 0===Object.keys(e).length?o=0:(o=1,l=n(e),i.push(l));return new He(i,o)},e.getResourceClassesFromJsonLD=function(e){var t,r,n=e["@graph"],o=[];if(n!==undefined)try{for(var i=h(n),s=i.next();!s.done;s=i.next()){var u=s.value;o.push(u["@type"]);var l=a(u);o=o.concat(l)}}catch(p){t={error:p}}finally{try{s&&!s.done&&(r=i["return"])&&r.call(i)}finally{if(t)throw t.error}}else{if(0===Object.keys(e).length)return[];o.push(e["@type"]),l=a(e),o=o.concat(l)}return o.filter(b.filterOutDuplicates)},e.createCountQueryResult=function(e){return new Ke(e[S.schemaNumberOfItems])}}(e.ConvertJSONLD||(e.ConvertJSONLD={}));var et=function(r){function o(t,n,o){var i=r.call(this,t,n)||this;return i.http=t,i.config=n,i._ontologyCacheService=o,i.convertJSONLDToReadResourceSequence=function(t){var r=e.ConvertJSONLD.createReadResourcesSequenceFromJsonLD(t),n=e.ConvertJSONLD.getResourceClassesFromJsonLD(t);return i._ontologyCacheService.getResourceClassDefinitions(n).pipe(a.map(function(e){return r.ontologyInformation.updateOntologyInformation(e),r}))},i.convertJSONLDToResourcesSequence=function(t){var r=e.ConvertJSONLD.createResourcesSequenceFromJsonLD(t),n=e.ConvertJSONLD.getResourceClassesFromJsonLD(t);return i._ontologyCacheService.getResourceClassDefinitions(n).pipe(a.map(function(e){return r.ontologyInformation.updateOntologyInformation(e),r}))},i}return l(o,r),o.prototype.processFulltextSearchParams=function(e,t){var r=t;return e.limitToProject!==undefined&&(r=r.set("limitToProject",e.limitToProject)),e.limitToResourceClass!==undefined&&(r=r.set("limitToResourceClass",e.limitToResourceClass)),e.limitToStandoffClass!==undefined&&(r=r.set("limitToStandoffClass",e.limitToStandoffClass)),r},o.prototype.processSearchByLabelParams=function(e,t){var r=t;return e.limitToResourceClass!==undefined&&(r=r.set("limitToResourceClass",e.limitToResourceClass)),e.limitToProject!==undefined&&(r=r.set("limitToProject",e.limitToProject)),r},o.prototype.doFulltextSearch=function(e,t,r){if(void 0===t&&(t=0),e===undefined||0===e.length)return i.Observable.create(function(e){return e.error("No search term given for call of SearchService.doFulltextSearch")});var o=new n.HttpParams;return o=o.set("offset",t.toString()),r!==undefined&&(o=this.processFulltextSearchParams(r,o)),this.httpGet("/v2/search/"+encodeURIComponent(e),o)},o.prototype.doFullTextSearchReadResourceSequence=function(e,t,r){if(void 0===t&&(t=0),e===undefined||0===e.length)return i.Observable.create(function(e){return e.error("No search term given for call of SearchService.doFulltextSearch")});var o=new n.HttpParams;return o=o.set("offset",t.toString()),r!==undefined&&(o=this.processFulltextSearchParams(r,o)),this.httpGet("/v2/search/"+encodeURIComponent(e),o).pipe(a.mergeMap(this.processJSONLD),a.mergeMap(this.convertJSONLDToReadResourceSequence))},o.prototype.doFulltextSearchCountQuery=function(e,t){if(e===undefined||0===e.length)return i.Observable.create(function(e){return e.error("No search term given for call of SearchService.doFulltextSearchCountQuery")});var r=new n.HttpParams;return t!==undefined&&(r=this.processFulltextSearchParams(t,r)),this.httpGet("/v2/search/count/"+encodeURIComponent(e),r)},o.prototype.doFullTextSearchCountQueryCountQueryResult=function(t,r){if(t===undefined||0===t.length)return i.Observable.create(function(e){return e.error("No search term given for call of SearchService.doFulltextSearchCountQuery")});var o=new n.HttpParams;return r!==undefined&&(o=this.processFulltextSearchParams(r,o)),this.httpGet("/v2/search/count/"+encodeURIComponent(t),o).pipe(a.mergeMap(this.processJSONLD),a.map(e.ConvertJSONLD.createCountQueryResult))},o.prototype.doExtendedSearch=function(e){return e===undefined||0===e.length?i.Observable.create(function(e){return e.error("No Sparql string given for call of SearchService.doExtendedSearch")}):this.httpPost("/v2/searchextended",e)},o.prototype.doExtendedSearchReadResourceSequence=function(e){return e===undefined||0===e.length?i.Observable.create(function(e){return e.error("No Sparql string given for call of SearchService.doExtendedSearch")}):this.httpPost("/v2/searchextended",e).pipe(a.mergeMap(this.processJSONLD),a.mergeMap(this.convertJSONLDToReadResourceSequence))},o.prototype.doExtendedSearchResourcesSequence=function(e){return e===undefined||0===e.length?i.Observable.create(function(e){return e.error("No Sparql string given for call of SearchService.doExtendedSearch")}):this.httpPost("/v2/searchextended",e).pipe(a.mergeMap(this.processJSONLD),a.mergeMap(this.convertJSONLDToResourcesSequence))},o.prototype.doExtendedSearchCountQuery=function(e){return e===undefined||0===e.length?i.Observable.create(function(e){return e.error("No Sparql string given for call of SearchService.doExtendedSearchCountQuery")}):this.httpPost("/v2/searchextended/count",e)},o.prototype.doExtendedSearchCountQueryCountQueryResult=function(t){return t===undefined||0===t.length?i.Observable.create(function(e){return e.error("No Sparql string given for call of SearchService.doExtendedSearchCountQuery")}):this.httpPost("/v2/searchextended/count",t).pipe(a.mergeMap(this.processJSONLD),a.map(e.ConvertJSONLD.createCountQueryResult))},o.prototype.searchByLabel=function(e,t,r){if(void 0===t&&(t=0),e===undefined||0===e.length)return i.Observable.create(function(e){return e.error("No search term given for call of SearchService.doFulltextSearch")});var o=new n.HttpParams;return o=o.set("offset",t.toString()),r!==undefined&&(o=this.processSearchByLabelParams(r,o)),this.httpGet("/v2/searchbylabel/"+encodeURIComponent(e),o)},o.prototype.searchByLabelReadResourceSequence=function(e,t,r){if(void 0===t&&(t=0),e===undefined||0===e.length)return i.Observable.create(function(e){return e.error("No search term given for call of SearchService.doFulltextSearch")});var o=new n.HttpParams;return o=o.set("offset",t.toString()),r!==undefined&&(o=this.processSearchByLabelParams(r,o)),this.httpGet("/v2/searchbylabel/"+encodeURIComponent(e),o).pipe(a.mergeMap(this.processJSONLD),a.mergeMap(this.convertJSONLDToReadResourceSequence))},o.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new o(t.ɵɵinject(n.HttpClient),t.ɵɵinject(g),t.ɵɵinject(Je))},token:o,providedIn:"root"}),o=p([t.Injectable({providedIn:"root"}),c(1,t.Inject(g)),d("design:paramtypes",[n.HttpClient,Object,Je])],o)}(Ie),tt=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return l(r,e),r.prototype.getIncomingRegions=function(e,t){var r="\nPREFIX knora-api: <http://api.knora.org/ontology/knora-api/simple/v2#>\n\nCONSTRUCT {\n?region knora-api:isMainResource true .\n\n?region knora-api:hasGeometry ?geom .\n\n?region knora-api:hasComment ?comment .\n\n?region knora-api:hasColor ?color .\n} WHERE {\n?region a knora-api:Region .\n?region a knora-api:Resource .\n\n?region knora-api:isRegionOf <"+e+"> .\nknora-api:isRegionOf knora-api:objectType knora-api:Resource .\n\n<"+e+"> a knora-api:Resource .\n\n?region knora-api:hasGeometry ?geom .\nknora-api:hasGeometry knora-api:objectType knora-api:Geom .\n\n?geom a knora-api:Geom .\n\n?region knora-api:hasComment ?comment .\nknora-api:hasComment knora-api:objectType xsd:string .\n\n?comment a xsd:string .\n\n?region knora-api:hasColor ?color .\nknora-api:hasColor knora-api:objectType knora-api:Color .\n\n?color a knora-api:Color .\n} OFFSET "+t+"\n";return this.doExtendedSearchReadResourceSequence(r)},r.prototype.getStillImageRepresentationsForCompoundResource=function(e,t){var r="\nPREFIX knora-api: <http://api.knora.org/ontology/knora-api/simple/v2#>\n\nCONSTRUCT {\n?page knora-api:isMainResource true .\n\n?page knora-api:seqnum ?seqnum .\n\n?page knora-api:hasStillImageFile ?file .\n} WHERE {\n\n?page a knora-api:StillImageRepresentation .\n?page a knora-api:Resource .\n\n?page knora-api:isPartOf <"+e+"> .\nknora-api:isPartOf knora-api:objectType knora-api:Resource .\n\n<"+e+"> a knora-api:Resource .\n\n?page knora-api:seqnum ?seqnum .\nknora-api:seqnum knora-api:objectType xsd:integer .\n\n?seqnum a xsd:integer .\n\n?page knora-api:hasStillImageFile ?file .\nknora-api:hasStillImageFile knora-api:objectType knora-api:File .\n\n?file a knora-api:File .\n\n} ORDER BY ?seqnum\nOFFSET "+t+"\n";return this.doExtendedSearchReadResourceSequence(r)},r.prototype.getIncomingLinksForResource=function(e,t){var r="\nPREFIX knora-api: <http://api.knora.org/ontology/knora-api/simple/v2#>\n\nCONSTRUCT {\n?incomingRes knora-api:isMainResource true .\n\n?incomingRes ?incomingProp <"+e+"> .\n\n} WHERE {\n\n?incomingRes a knora-api:Resource .\n\n?incomingRes ?incomingProp <"+e+"> .\n\n<"+e+"> a knora-api:Resource .\n\n?incomingProp knora-api:objectType knora-api:Resource .\n\nknora-api:isRegionOf knora-api:objectType knora-api:Resource .\nknora-api:isPartOf knora-api:objectType knora-api:Resource .\n\nFILTER NOT EXISTS {\n ?incomingRes  knora-api:isRegionOf <"+e+"> .\n}\n\nFILTER NOT EXISTS {\n ?incomingRes  knora-api:isPartOf <"+e+"> .\n}\n\n} OFFSET "+t+"\n";return this.doExtendedSearchReadResourceSequence(r)},r.prototype.getIncomingLinks=function(e,t){var r="\nPREFIX knora-api: <http://api.knora.org/ontology/knora-api/simple/v2#>\n\nCONSTRUCT {\n?incomingRes knora-api:isMainResource true .\n\n?incomingRes ?incomingProp <"+e+"> .\n\n} WHERE {\n\n?incomingRes a knora-api:Resource .\n\n?incomingRes ?incomingProp <"+e+"> .\n\n<"+e+"> a knora-api:Resource .\n\n?incomingProp knora-api:objectType knora-api:Resource .\n\nknora-api:isRegionOf knora-api:objectType knora-api:Resource .\nknora-api:isPartOf knora-api:objectType knora-api:Resource .\n\nFILTER NOT EXISTS {\n ?incomingRes  knora-api:isRegionOf <"+e+"> .\n}\n\nFILTER NOT EXISTS {\n ?incomingRes  knora-api:isPartOf <"+e+"> .\n}\n\n} OFFSET "+t+"\n";return this.doExtendedSearchResourcesSequence(r)},r.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(n.HttpClient),t.ɵɵinject(g),t.ɵɵinject(Je))},token:r,providedIn:"root"}),r=p([t.Injectable({providedIn:"root"})],r)}(et),rt=function(r){function o(e,t,n,o){var i=r.call(this,e,t)||this;return i.http=e,i.config=t,i._incomingService=n,i._ontologyCacheService=o,i}return l(o,r),o.prototype.getResource=function(t){var r=this;return this.httpGet("/v2/resources/"+encodeURIComponent(t)).pipe(a.mergeMap(this.processJSONLD),a.mergeMap(function(t){var n,o,i,s,u=e.ConvertJSONLD.createResourcesSequenceFromJsonLD(t),l=e.ConvertJSONLD.getResourceClassesFromJsonLD(t),p=u.resources[0],c=Object.keys(p.properties);switch(!0){case c.includes(S.hasStillImageFileValue):var d=[],f=p.properties[S.hasStillImageFileValue].filter(function(e){return!e.isPreview});try{for(var g=h(f),y=g.next();!y.done;y=g.next()){var m=y.value;try{for(var v=h(p.incomingAnnotations),V=v.next();!V.done;V=v.next())V.value}catch(b){i={error:b}}finally{try{V&&!V.done&&(s=v["return"])&&s.call(v)}finally{if(i)throw i.error}}var R=new qe(m,[]);d.push(R)}}catch(I){n={error:I}}finally{try{y&&!y.done&&(o=g["return"])&&o.call(g)}finally{if(n)throw n.error}}p.fileRepresentationsToDisplay.stillImage=d;break;case c.includes(S.hasMovingImageFileValue):case c.includes(S.hasAudioFileValue):case c.includes(S.hasDocumentFileValue):case c.includes(S.hasDDDFileValue):break;default:r._incomingService.getStillImageRepresentationsForCompoundResource(p.id,0).subscribe(function(e){var t,r,n,o;if(console.log("incomingFiles",e),e.resources.length>0){u.ontologyInformation.updateOntologyInformation(e.ontologyInformation),Array.prototype.push.apply(p.incomingFileRepresentations,e.resources);var i=[];try{for(var a=h(e.resources),s=a.next();!s.done;s=a.next()){var l=s.value.properties[S.hasStillImageFileValue].filter(function(e){return!e.isPreview});try{for(var c=h(l),d=c.next();!d.done;d=c.next()){var f=d.value,g=new qe(f,[]);i.push(g)}}catch(y){n={error:y}}finally{try{d&&!d.done&&(o=c["return"])&&o.call(c)}finally{if(n)throw n.error}}p.fileRepresentationsToDisplay.stillImage=i}}catch(m){t={error:m}}finally{try{s&&!s.done&&(r=a["return"])&&r.call(a)}finally{if(t)throw t.error}}}},function(e){console.error(e)})}return r._incomingService.getIncomingLinks(u.resources[0].id,0).subscribe(function(e){u.ontologyInformation.updateOntologyInformation(e.ontologyInformation),Array.prototype.push.apply(u.resources[0].incomingLinks,e.resources)}),r._ontologyCacheService.getResourceClassDefinitions(l).pipe(a.map(function(e){return u.ontologyInformation.updateOntologyInformation(e),console.log("resSeq -- resourceServie",u),u}))}))},o.prototype.getResourcesSequence=function(t){var r=this;return this.httpGet("/v2/resources/"+encodeURIComponent(t)).pipe(a.mergeMap(this.processJSONLD),a.mergeMap(function(t){var n=e.ConvertJSONLD.createResourcesSequenceFromJsonLD(t),o=e.ConvertJSONLD.getResourceClassesFromJsonLD(t);return r._ontologyCacheService.getResourceClassDefinitions(o).pipe(a.map(function(e){return n.ontologyInformation.updateOntologyInformation(e),n}))}))},o.prototype.requestIncomingResources=function(e){e!==undefined&&e.resources[0].properties[S.hasStillImageFileValue]},o.prototype.getReadResource=function(t){var r=this;return this.httpGet("/v2/resources/"+encodeURIComponent(t)).pipe(a.mergeMap(this.processJSONLD),a.mergeMap(function(t){var n=e.ConvertJSONLD.createReadResourcesSequenceFromJsonLD(t),o=e.ConvertJSONLD.getResourceClassesFromJsonLD(t);return r._ontologyCacheService.getResourceClassDefinitions(o).pipe(a.map(function(e){return n.ontologyInformation.updateOntologyInformation(e),n}))}))},o.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new o(t.ɵɵinject(n.HttpClient),t.ɵɵinject(g),t.ɵɵinject(tt),t.ɵɵinject(Je))},token:o,providedIn:"root"}),o=p([t.Injectable({providedIn:"root"}),c(1,t.Inject(g)),d("design:paramtypes",[n.HttpClient,Object,tt,Je])],o)}(Ie),nt=function(){return function(e){this.generateGravsearch=e}}(),ot=function(){function e(){this._currentSearchParams=new i.BehaviorSubject(new nt(function(e){return!1}))}return e.prototype.changeSearchParamsMsg=function(e){this._currentSearchParams.next(e)},e.prototype.getSearchParams=function(){return this._currentSearchParams.getValue()},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e=p([t.Injectable({providedIn:"root"}),d("design:paramtypes",[])],e)}(),it=function(){function r(e){this._searchParamsService=e}var n;return n=r,r.prototype.createGravsearchQuery=function(t,r,o){void 0===o&&(o=0);var i="";r!==undefined&&(i="?mainRes a <"+r+"> .");var a=[],s=[],u=t.map(function(t,r){var o;o=t.property.isLinkProperty&&"Exists"!==t.valueLiteral.comparisonOperator.getClassName()?t.valueLiteral.value.toSparql(e.KnoraSchema.complex):"?propVal"+r;var i="?mainRes <"+t.property.id+"> "+o+" .";t.property.isLinkProperty&&"NotEquals"===t.valueLiteral.comparisonOperator.getClassName()?i="FILTER NOT EXISTS {\n"+i+"\n\n\n}":(s.push(i),i="\n"+i+"\n\n\n");var u="";if(!t.property.isLinkProperty&&"Exists"!==t.valueLiteral.comparisonOperator.getClassName()){var l=o+"Literal";"Like"===t.valueLiteral.comparisonOperator.getClassName()?(u=o+" <"+n.complexTypeToProp[t.property.objectType]+"> "+l+"\n",u+="FILTER regex("+l+", "+t.valueLiteral.value.toSparql(e.KnoraSchema.complex)+', "i")'):"Match"===t.valueLiteral.comparisonOperator.getClassName()?(u=o+" <"+n.complexTypeToProp[t.property.objectType]+"> "+l+"\n",u+="FILTER <"+S.matchFunction+">("+l+", "+t.valueLiteral.value.toSparql(e.KnoraSchema.complex)+")"):t.property.objectType===S.DateValue?u="FILTER(knora-api:toSimpleDate("+o+") "+t.valueLiteral.comparisonOperator.type+" "+t.valueLiteral.value.toSparql(e.KnoraSchema.complex)+")":t.property.objectType===S.ListValue?(u=o+" <"+n.complexTypeToProp[t.property.objectType]+"> "+t.valueLiteral.value.toSparql(e.KnoraSchema.complex)+"\n","NotEquals"===t.valueLiteral.comparisonOperator.getClassName()&&(u="FILTER NOT EXISTS {\n                                "+u+"\n                            }")):(u=o+" <"+n.complexTypeToProp[t.property.objectType]+"> "+l+"\n",u+="FILTER("+l+" "+t.valueLiteral.comparisonOperator.type+" "+t.valueLiteral.value.toSparql(e.KnoraSchema.complex)+")")}return t.isSortCriterion&&a.push(o),i+"\n"+u+"\n"}),l="";a.length>0&&(l="\nORDER BY "+a.join(" ")+"\n");var p="\nPREFIX knora-api: <http://api.knora.org/ontology/knora-api/v2#>\nCONSTRUCT {\n\n?mainRes knora-api:isMainResource true .\n\n"+s.join("\n")+"\n\n} WHERE {\n\n?mainRes a knora-api:Resource .\n\n"+i+"\n\n"+u.join("")+"\n\n}\n"+l,c="\nOFFSET "+o+"\n";return 0===o&&this._searchParamsService.changeSearchParamsMsg(new nt(function(e){return p+"\nOFFSET "+e+"\n"})),p+c},r.typeConversionComplexToSimple={"http://api.knora.org/ontology/knora-api/v2#IntValue":S.xsdInteger,"http://api.knora.org/ontology/knora-api/v2#DecimalValue":S.xsdDecimal,"http://api.knora.org/ontology/knora-api/v2#BooleanValue":S.xsdBoolean,"http://api.knora.org/ontology/knora-api/v2#TextValue":S.xsdString,"http://api.knora.org/ontology/knora-api/v2#DateValue":S.dateSimple,"http://api.knora.org/ontology/knora-api/v2#IntervalValue":S.intervalSimple,"http://api.knora.org/ontology/knora-api/v2#GeomValue":S.geomSimple,"http://api.knora.org/ontology/knora-api/v2#ColorValue":S.colorSimple,"http://api.knora.org/ontology/knora-api/v2#GeonameValue":S.geonameSimple,"http://api.knora.org/ontology/knora-api/v2#UriValue":S.xsdUri,"http://api.knora.org/ontology/knora-api/v2#StillImageFileValue":S.fileSimple,"http://api.knora.org/ontology/knora-api/v2#FileValue":S.fileSimple,"http://api.knora.org/ontology/knora-api/v2#MovingImageFileValue":S.fileSimple,"http://api.knora.org/ontology/knora-api/v2#DDDFileValue":S.fileSimple,"http://api.knora.org/ontology/knora-api/v2#AudioFileValue":S.fileSimple,"http://api.knora.org/ontology/knora-api/v2#DocumentFileValue":S.fileSimple,"http://api.knora.org/ontology/knora-api/v2#TextFileValue":S.fileSimple,"http://api.knora.org/ontology/knora-api/v2#ListValue":S.listNodeSimple},r.complexTypeToProp={"http://api.knora.org/ontology/knora-api/v2#IntValue":S.integerValueAsInteger,"http://api.knora.org/ontology/knora-api/v2#DecimalValue":S.decimalValueAsDecimal,"http://api.knora.org/ontology/knora-api/v2#BooleanValue":S.booleanValueAsBoolean,"http://api.knora.org/ontology/knora-api/v2#TextValue":S.valueAsString,"http://api.knora.org/ontology/knora-api/v2#UriValue":S.uriValueAsUri,"http://api.knora.org/ontology/knora-api/v2#ListValue":S.listValueAsListNode},r.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(ot))},token:r,providedIn:"root"}),r=n=p([t.Injectable({providedIn:"root"}),d("design:paramtypes",[ot])],r)}(),at=function(){function e(e,t){this.http=e,this.config=t}return e.prototype.resetTriplestoreContent=function(e){return this.http.post(this.config.api+"/admin/store/ResetTriplestoreContent",e).pipe(a.map(function(e){return e.message},function(e){throw e.error instanceof Error?console.log("StoreService - resetTriplestoreContent - Client-side error occurred.",e):console.log("StoreService - resetTriplestoreContent - Server-side error occurred.",e),e}))},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.HttpClient),t.ɵɵinject(g))},token:e,providedIn:"root"}),e=p([t.Injectable({providedIn:"root"}),c(1,t.Inject(g)),d("design:paramtypes",[n.HttpClient,Object])],e)}(),st=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return l(r,e),r.prototype.getBasicOntology=function(){var e=this.config.app;return this.httpGet(e+"/data/base-data/basic-ontology.json")},r.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(n.HttpClient),t.ɵɵinject(g))},token:r,providedIn:"root"}),r=p([t.Injectable({providedIn:"root"})],r)}(Ie),ut=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return l(r,e),r.prototype.getResourceTypesByVoc=function(e){return this.httpGet("/v1/resourcetypes?vocabulary="+encodeURIComponent(e))},r.prototype.getResourceType=function(e){return this.httpGet("/v1/resourcetypes/"+encodeURIComponent(e))},r.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(n.HttpClient),t.ɵɵinject(g))},token:r,providedIn:"root"}),r=p([t.Injectable({providedIn:"root"})],r)}(Ie),lt=function(e){function r(t,r){var n=e.call(this,t,r)||this;return n.http=t,n.config=r,n}return l(r,e),r.prototype.getListFromKnora=function(e){return this.httpGet("/v2/lists/"+encodeURIComponent(e))},r.prototype.getList=function(e){return this.getListFromKnora(e).pipe(a.mergeMap(this.processJSONLD))},r.prototype.getListNodeFromKnora=function(e){return this.httpGet("/v2/node/"+encodeURIComponent(e))},r.prototype.getListNode=function(e){return this.getListNodeFromKnora(e).pipe(a.mergeMap(this.processJSONLD))},r.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(n.HttpClient),t.ɵɵinject(g))},token:r,providedIn:"root"}),r=p([t.Injectable({providedIn:"root"}),c(1,t.Inject(g)),d("design:paramtypes",[n.HttpClient,Object])],r)}(Ie),pt=function(){return function(e,t,r,n){this.id=e,this.label=t,this.position=r,this.hasRootNode=n,this.isRootNode=n===undefined,this.children=[]}}(),ct=function(){return function(){}}(),dt=function(){return function(){}}(),ht=function(){function e(e){var t=this;this._listService=e,this.listCache=new ct,this.listNodeIriToListNodeV2=new dt,this.convertJSONLDToListNode=function(e){var r,n,o=e["@id"],i=t.hasRootNode(e),a=new pt(o,e["http://www.w3.org/2000/01/rdf-schema#label"],e["http://api.knora.org/ontology/knora-api/v2#listNodePosition"],i);if(e["http://api.knora.org/ontology/knora-api/v2#hasSubListNode"]!==undefined)if(Array.isArray(e["http://api.knora.org/ontology/knora-api/v2#hasSubListNode"]))try{for(var s=h(e["http://api.knora.org/ontology/knora-api/v2#hasSubListNode"]),u=s.next();!u.done;u=s.next()){var l=u.value;a.children.push(t.convertJSONLDToListNode(l))}}catch(p){r={error:p}}finally{try{u&&!u.done&&(n=s["return"])&&n.call(s)}finally{if(r)throw r.error}}else a.children.push(t.convertJSONLDToListNode(e["http://api.knora.org/ontology/knora-api/v2#hasSubListNode"]));return t.listNodeIriToListNodeV2[o]=a,a}}return e.prototype.hasRootNode=function(e){var t;return e["http://api.knora.org/ontology/knora-api/v2#hasRootNode"]!==undefined&&(t=e["http://api.knora.org/ontology/knora-api/v2#hasRootNode"]["@id"]),t},e.prototype.getList=function(e){var t=this;return this.listCache[e]!==undefined?i.of(this.listCache[e]):this._listService.getList(e).pipe(a.map(this.convertJSONLDToListNode)).pipe(a.map(function(r){return t.listCache[e]=r,r}))},e.prototype.getListNode=function(e){var t=this;return this.listNodeIriToListNodeV2[e]!==undefined?i.of(this.listNodeIriToListNodeV2[e]):this._listService.getListNode(e).pipe(a.mergeMap(function(r){var n=t.hasRootNode(r);return n!==undefined?t.getList(n).pipe(a.map(function(r){return t.listNodeIriToListNodeV2[e]})):t.getList(e).pipe(a.map(function(r){return t.listNodeIriToListNodeV2[e]}))}))},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(lt))},token:e,providedIn:"root"}),e=p([t.Injectable({providedIn:"root"}),d("design:paramtypes",[lt])],e)}(),ft=function(){function e(){this.type=S.EqualsComparisonOperator,this.label=S.EqualsComparisonLabel}return e.prototype.getClassName=function(){return"Equals"},e}(),gt=function(){function e(){this.type=S.NotEqualsComparisonOperator,this.label=S.NotEqualsComparisonLabel}return e.prototype.getClassName=function(){return"NotEquals"},e}(),yt=function(){function e(){this.type=S.GreaterThanEqualsComparisonOperator,this.label=S.GreaterThanEqualsComparisonLabel}return e.prototype.getClassName=function(){return"GreaterThanEquals"},e}(),mt=function(){function e(){this.type=S.GreaterThanComparisonOperator,this.label=S.GreaterThanComparisonLabel}return e.prototype.getClassName=function(){return"GreaterThan"},e}(),vt=function(){function e(){this.type=S.LessThanComparisonOperator,this.label=S.LessThanComparisonLabel}return e.prototype.getClassName=function(){return"LessThan"},e}(),Vt=function(){function e(){this.type=S.LessThanEqualsComparisonOperator,this.label=S.LessThanQualsComparisonLabel}return e.prototype.getClassName=function(){return"LessThanEquals"},e}(),St=function(){function e(){this.type=S.ExistsComparisonOperator,this.label=S.ExistsComparisonLabel}return e.prototype.getClassName=function(){return"Exists"},e}(),Rt=function(){function e(){this.type=S.LikeComparisonOperator,this.label=S.LikeComparisonLabel}return e.prototype.getClassName=function(){return"Like"},e}(),bt=function(){function e(){this.type=S.MatchComparisonOperator,this.label=S.MatchComparisonLabel}return e.prototype.getClassName=function(){return"Match"},e}(),It=function(){return function(e,t){this.comparisonOperator=e,this.value=t}}(),Pt=function(){function t(e,t){this.value=e,this.type=t}return t.prototype.toSparql=function(t){var r;return r=t===e.KnoraSchema.simple&&it.typeConversionComplexToSimple[this.type]!==undefined?it.typeConversionComplexToSimple[this.type]:this.type,'"'+this.value+'"^^<'+r+">"},t}(),Ot=function(){function e(e){this.iri=e}return e.prototype.toSparql=function(e){return"<"+this.iri+">"},e}(),Ct=function(){return function(e,t,r){this.property=e,this.valueLiteral=t,this.isSortCriterion=r}}();e.ApiService=Ie,e.ApiServiceError=V,e.ApiServiceResult=v,e.AudioRepresentation=Ue,e.AuthenticationResponse=j,e.BasicOntologyService=st,e.Cardinality=ke,e.ComparisonOperatorAndValue=It,e.CountQueryResult=Ke,e.DateRangeSalsah=C,e.DateSalsah=O,e.Equals=ft,e.Exists=St,e.ExtendedSearchParams=nt,e.FileRepresentation=We,e.FileValue=oe,e.GravsearchGenerationService=it,e.GreaterThan=mt,e.GreaterThanEquals=yt,e.Group=w,e.GroupResponse=A,e.GroupsResponse=F,e.GroupsService=_e,e.GuiOrder=we,e.IRI=Ot,e.IncomingService=tt,e.KnoraConstants=S,e.KuiCoreConfig=m,e.KuiCoreConfigToken=g,e.KuiCoreModule=y,e.LanguageService=$e,e.LessThan=vt,e.LessThanEquals=Vt,e.Like=Rt,e.List=E,e.ListCacheService=ht,e.ListInfo=L,e.ListInfoResponse=x,e.ListNode=D,e.ListNodeInfo=T,e.ListNodeInfoResponse=J,e.ListNodeResponse=H,e.ListNodeV2=pt,e.ListResponse=N,e.ListsResponse=K,e.ListsService=Ye,e.Match=bt,e.MovingImageRepresentation=Ge,e.NotEquals=gt,e.OntologyCacheService=Je,e.OntologyInfoShort=U,e.OntologyInformation=Te,e.OntologyMetadata=je,e.OntologyService=Pe,e.PermissionData=M,e.Point2D=de,e.Project=k,e.ProjectMembersResponse=G,e.ProjectResponse=q,e.ProjectsResponse=B,e.ProjectsService=Qe,e.Properties=De,e.Property=Le,e.PropertyWithValue=Ct,e.ReadAudioFileValue=se,e.ReadBooleanValue=ye,e.ReadColorValue=ce,e.ReadDDDFileValue=ue,e.ReadDateValue=ee,e.ReadDecimalValue=ne,e.ReadDocumentFileValue=le,e.ReadGeomValue=fe,e.ReadIntegerValue=re,e.ReadIntervalValue=me,e.ReadLinkValue=te,e.ReadListValue=ve,e.ReadMovingImageFileValue=ae,e.ReadResource=Ve,e.ReadResourcesSequence=Ne,e.ReadStillImageFileValue=ie,e.ReadTextFileValue=pe,e.ReadTextValue=Y,e.ReadTextValueAsHtml=$,e.ReadTextValueAsString=Q,e.ReadTextValueAsXml=Z,e.ReadUriValue=ge,e.ReferredResourcesByStandoffLink=z,e.Region=Be,e.RegionGeometry=he,e.Resource=Se,e.ResourceClass=Ae,e.ResourceClassIrisForOntology=Ee,e.ResourceClasses=Fe,e.ResourceService=rt,e.ResourceTypesService=ut,e.ResourcesSequence=He,e.SearchParamsService=ot,e.SearchService=et,e.Sequence=Xe,e.StatusMsgService=Ze,e.StillImageRepresentation=qe,e.StoreService=at,e.StringLiteral=I,e.User=W,e.UserResponse=_,e.UsersResponse=X,e.UsersService=ze,e.Utils=b,e.ValueLiteral=Pt,e.oldFileRepresentation=Me,e.ɵa=Le,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=knora-core.umd.min.js.map