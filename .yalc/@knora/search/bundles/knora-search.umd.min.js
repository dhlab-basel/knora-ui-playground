!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/cdk/overlay"),require("@angular/cdk/portal"),require("@angular/router"),require("jdnconvertiblecalendar"),require("@angular/common"),require("@angular/platform-browser/animations"),require("@knora/action"),require("@knora/viewer"),require("jdnconvertiblecalendardateadapter"),require("@angular/forms"),require("@knora/core"),require("@angular/material"),require("@angular/core")):"function"==typeof define&&define.amd?define("@knora/search",["exports","@angular/cdk/overlay","@angular/cdk/portal","@angular/router","jdnconvertiblecalendar","@angular/common","@angular/platform-browser/animations","@knora/action","@knora/viewer","jdnconvertiblecalendardateadapter","@angular/forms","@knora/core","@angular/material","@angular/core"],t):t((e.knora=e.knora||{},e.knora.search={}),e.ng.cdk.overlay,e.ng.cdk.portal,e.ng.router,e.jdnconvertiblecalendar,e.ng.common,e.ng.platformBrowser.animations,e["@knora/action"],e["@knora/viewer"],e.jdnconvertiblecalendardateadapter,e.ng.forms,e["@knora/core"],e.ng.material,e.ng.core)}(this,function(e,r,o,t,a,i,n,s,u,c,l,p,h,m){"use strict";var d=function(){function e(e,t,i,r){this._overlay=e,this._router=t,this._viewContainerRef=i,this._projectsService=r,this.route="/search",this.projectfilter=!1,this.prevSearch=JSON.parse(localStorage.getItem("prevSearch")),this.projectLabel="Filter project",this.searchPanelFocus=!1}return e.prototype.ngOnInit=function(){this.filterbyproject&&this.getProject(this.filterbyproject),this.projectfilter&&(this.getAllProjects(),null!==localStorage.getItem("currentProject")&&this.setProject(JSON.parse(localStorage.getItem("currentProject"))))},e.prototype.openPanelWithBackdrop=function(){var e=this,t=new r.OverlayConfig({hasBackdrop:!0,backdropClass:"cdk-overlay-transparent-backdrop",positionStrategy:this.getOverlayPosition(),scrollStrategy:this._overlay.scrollStrategies.block()});this.overlayRef=this._overlay.create(t),this.overlayRef.attach(new o.TemplatePortal(this.searchMenu,this._viewContainerRef)),this.overlayRef.backdropClick().subscribe(function(){e.searchPanelFocus=!1,e.overlayRef.detach()})},e.prototype.getOverlayPosition=function(){var e=[new r.ConnectionPositionPair({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),new r.ConnectionPositionPair({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"})];return this._overlay.position().flexibleConnectedTo(this.searchPanel).withPositions(e).withLockedPosition(!1)},e.prototype.getAllProjects=function(){var t=this;this._projectsService.getAllProjects().subscribe(function(e){t.projects=e,null!==localStorage.getItem("currentProject")&&(t.project=JSON.parse(localStorage.getItem("currentProject")))},function(e){console.error(e),t.error=e})},e.prototype.getProject=function(e){var t=this;this._projectsService.getProjectByIri(e).subscribe(function(e){t.setProject(e)},function(e){console.error(e)})},e.prototype.setProject=function(e){e?(this.projectLabel=e.shortname,this.projectIri=e.id,localStorage.setItem("currentProject",JSON.stringify(e))):(this.projectLabel="Filter project",this.projectIri=undefined,localStorage.removeItem("currentProject"))},e.prototype.doSearch=function(){var e,t;if(this.searchQuery!==undefined&&null!==this.searchQuery){this.projectIri!==undefined?this._router.navigate([this.route+"/fulltext/"+this.searchQuery+"/"+encodeURIComponent(this.projectIri)]):this._router.navigate([this.route+"/fulltext/"+this.searchQuery]);var i=JSON.parse(localStorage.getItem("prevSearch"));null===i&&(i=[]);var r=0;try{for(var o=function u(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}(i),a=o.next();!a.done;a=o.next()){var n=a.value;this.searchQuery===n.query&&this.projectIri===n.projectIri&&i.splice(r,1),r++}}catch(c){e={error:c}}finally{try{a&&!a.done&&(t=o["return"])&&t.call(o)}finally{if(e)throw e.error}}if(2<this.searchQuery.length){var s={query:this.searchQuery};this.projectIri&&(s={projectIri:this.projectIri,projectLabel:this.projectLabel,query:this.searchQuery}),i.push(s),localStorage.setItem("prevSearch",JSON.stringify(i))}}this.resetSearch(),this.overlayRef.detach()},e.prototype.resetSearch=function(){this.searchPanelFocus=!1,this.searchInput.nativeElement.blur(),this.overlayRef.detach()},e.prototype.setFocus=function(){this.prevSearch=JSON.parse(localStorage.getItem("prevSearch")),this.searchPanelFocus=!0,this.openPanelWithBackdrop()},e.prototype.doPrevSearch=function(e){this.searchQuery=e.query,e.projectIri!==undefined?(this.projectIri=e.projectIri,this.projectLabel=e.projectLabel,this._router.navigate([this.route+"/fulltext/"+this.searchQuery+"/"+encodeURIComponent(e.projectIri)])):(this.projectIri=undefined,this.projectLabel="Filter project",this._router.navigate([this.route+"/fulltext/"+this.searchQuery])),this.resetSearch(),this.overlayRef.detach()},e.prototype.resetPrevSearch=function(e){if(e){var t=this.prevSearch.indexOf(e);this.prevSearch.splice(t,1),localStorage.setItem("prevSearch",JSON.stringify(this.prevSearch))}else localStorage.removeItem("prevSearch");this.prevSearch=JSON.parse(localStorage.getItem("prevSearch"))},e.prototype.changeFocus=function(){this.selectProject.closeMenu(),this.searchInput.nativeElement.focus(),this.setFocus()},e.decorators=[{type:m.Component,args:[{selector:"kui-fulltext-search",template:'\x3c!-- full-text search panel --\x3e\n<div class="kui-fulltext-search-panel" [class.active]="searchPanelFocus" [class.with-project-filter]="projectfilter"\n     #fulltextSearchPanel cdkOverlayOrigin>\n    <div class="kui-project-filter" *ngIf="projectfilter">\n        <button mat-button class="kui-project-filter-button" [matMenuTriggerFor]="selectProject"\n                #btnToSelectProject="matMenuTrigger" isIconButton>\n            <span class="label">{{projectLabel}}</span>\n            <mat-icon class="icon" matSuffix>keyboard_arrow_down</mat-icon>\n        </button>\n        <mat-menu #selectProject="matMenu" class="kui-project-filter-menu">\n            <button mat-menu-item class="center" (click)="setProject();changeFocus()">All Projects</button>\n            <mat-divider></mat-divider>\n            <button mat-menu-item *ngFor="let project of projects"\n                    (click)="setProject(project);changeFocus()">{{project.shortname}}</button>\n        </mat-menu>\n    </div>\n\n    <div class="kui-fulltext-search" [class.with-project-filter]="projectfilter">\n        <div class="kui-fulltext-search-field">\n            <input #fulltextSearchInput class="kui-fulltext-search-input" type="search" [(ngModel)]="searchQuery"\n                   name="search" minlength="3" autocomplete="off" [placeholder]="\'Search\'" (keyup.esc)="resetSearch()"\n                   (keyup.enter)="doSearch()" (click)="setFocus()">\n        </div>\n        <button class="kui-fulltext-search-button suffix" (click)="doSearch()" type="submit">\n            <mat-icon>search</mat-icon>\n        </button>\n    </div>\n\n</div>\n\n\x3c!-- full-text search menu --\x3e\n<ng-template #fulltextSearchMenu>\n    <div class="kui-search-menu" [class.with-project-filter]="projectfilter">\n        <mat-list class="kui-previous-search-list">\n            <div *ngFor="let item of prevSearch | kuiReverse; let i=index">\n                <mat-list-item *ngIf="i<10">\n                    <h4 mat-line (click)="doPrevSearch(item)" class="kui-previous-search-item">\n                        <div class="kui-project-filter-label" [class.not-empty]="item.projectIri"\n                             *ngIf="projectfilter && !error && projects?.length > 0">\n                            <span *ngIf="item.projectIri">{{item.projectLabel}}</span>\n                        </div>\n                        <div class="kui-previous-search-query">\n                            {{item.query}}\n                        </div>\n                    </h4>\n                    <button mat-icon-button (click)="resetPrevSearch(item)">\n                        <mat-icon aria-label="close">close</mat-icon>\n                    </button>\n                </mat-list-item>\n            </div>\n        </mat-list>\n\n        <div class="kui-menu-action" *ngIf="prevSearch">\n            <mat-divider></mat-divider>\n            <button mat-button color="primary" class="center" (click)="resetPrevSearch()">Clear\n                list</button>\n        </div>\n    </div>\n</ng-template>\n',styles:["input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.center{text-align:center}.kui-fulltext-search-panel{border-radius:4px;display:flex;height:40px;position:relative;width:480px;z-index:100;background-color:#f9f9f9}.kui-fulltext-search-panel.active{box-shadow:0 1px 3px rgba(0,0,0,.5)}.kui-fulltext-search-panel.with-project-filter{width:calc(480px + 160px)}.kui-fulltext-search-panel .kui-project-filter .kui-project-filter-button{font-size:inherit;overflow:hidden;text-overflow:ellipsis;width:160px;margin:1px;border-radius:4px 0 0 4px}.kui-fulltext-search-panel .kui-fulltext-search{background-color:#f9f9f9;border-radius:4px;display:inline-flex;position:relative;z-index:10}.kui-fulltext-search-panel .kui-fulltext-search.with-project-filter{width:calc(480px + 160px);border-top-left-radius:0;border-bottom-left-radius:0}.kui-fulltext-search-panel .kui-fulltext-search .kui-fulltext-search-field{flex:1;width:calc(480px - 40px);margin:1px}.kui-fulltext-search-panel .kui-fulltext-search .kui-fulltext-search-field .kui-fulltext-search-input{border-style:none;font-size:14pt;height:38px;position:absolute;padding-left:12px;width:calc(100% - 40px)}.kui-fulltext-search-panel .kui-fulltext-search .kui-fulltext-search-field .kui-fulltext-search-input.with-project-filter{width:calc(100% - 40px - 160px)}.kui-fulltext-search-panel .kui-fulltext-search .kui-fulltext-search-field .kui-fulltext-search-input:active,.kui-fulltext-search-panel .kui-fulltext-search .kui-fulltext-search-field .kui-fulltext-search-input:focus{outline:0}.kui-fulltext-search-panel .kui-fulltext-search .kui-fulltext-search-button{background-color:#fff}.kui-fulltext-search-panel .kui-fulltext-search .suffix{margin:1px 0 1px -3px;border-radius:0 4px 4px 0}.kui-fulltext-search-panel .kui-fulltext-search .prefix{margin:1px 0 1px 3px;border-radius:4px 0 0 4px}.kui-fulltext-search-panel .kui-fulltext-search .prefix,.kui-fulltext-search-panel .kui-fulltext-search .suffix{border-style:none;color:rgba(41,41,41,.4);cursor:pointer;height:38px;outline:0;position:relative;width:39px}.kui-fulltext-search-panel .kui-fulltext-search .prefix.disabled,.kui-fulltext-search-panel .kui-fulltext-search .suffix.disabled{cursor:auto}.kui-fulltext-search-panel .kui-fulltext-search .prefix:active,.kui-fulltext-search-panel .kui-fulltext-search .suffix:active{color:#515151}",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;height:100%;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%}.kui-form-content .kui-form-action{position:absolute;bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}@media screen and (max-width:1024px){.fulltext-search.input-field input{width:calc(360px - 80px)}.fulltext-search,.kui-menu.extended-search{width:360px}}@media screen and (max-width:768px){.fulltext-search.input-field input{width:calc(360px - 160px - 80px)}.fulltext-search,.kui-menu.extended-search{width:calc(360px - 80px)}}']}]}],e.ctorParameters=function(){return[{type:r.Overlay},{type:t.Router},{type:m.ViewContainerRef},{type:p.ProjectsService}]},e.propDecorators={route:[{type:m.Input}],projectfilter:[{type:m.Input}],filterbyproject:[{type:m.Input}],searchPanel:[{type:m.ViewChild,args:["fulltextSearchPanel"]}],searchInput:[{type:m.ViewChild,args:["fulltextSearchInput"]}],searchMenu:[{type:m.ViewChild,args:["fulltextSearchMenu"]}],selectProject:[{type:m.ViewChild,args:["btnToSelectProject"]}]},e}(),f=function(){function e(e,t){this._overlay=e,this._viewContainerRef=t,this.route="/search",this.projectfilter=!1,this.advanced=!1,this.expert=!1}return e.prototype.openPanelWithBackdrop=function(e){var t=this;this.showAdvanced="advanced"===e;var i=new r.OverlayConfig({hasBackdrop:!0,backdropClass:"cdk-overlay-transparent-backdrop",positionStrategy:this.getOverlayPosition(),scrollStrategy:this._overlay.scrollStrategies.block()});this.overlayRef=this._overlay.create(i),this.overlayRef.attach(new o.TemplatePortal(this.searchMenu,this._viewContainerRef)),this.overlayRef.backdropClick().subscribe(function(){t.overlayRef.detach()})},e.prototype.getOverlayPosition=function(){var e=[new r.ConnectionPositionPair({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),new r.ConnectionPositionPair({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"})];return this._overlay.position().flexibleConnectedTo(this.searchPanel).withPositions(e).withLockedPosition(!1)},e.prototype.closeMenu=function(){this.overlayRef.detach()},e.decorators=[{type:m.Component,args:[{selector:"kui-search-panel",template:'<div class="kui-search-panel" #fullSearchPanel cdkOverlayOrigin>\n\n    <kui-fulltext-search [route]="route" [projectfilter]="projectfilter" [filterbyproject]="filterbyproject">\n    </kui-fulltext-search>\n\n    \x3c!-- advanced search button: if advanced === true --\x3e\n    <button mat-button *ngIf="advanced && !expert" color="primary"\n            (click)="openPanelWithBackdrop(\'advanced\')">advanced</button>\n\n    \x3c!-- expert search button: if expert === true --\x3e\n    <button mat-button *ngIf="!advanced && expert" color="primary"\n            (click)="openPanelWithBackdrop(\'expert\')">expert</button>\n\n    \x3c!-- button to select advanced or expert search: if advanced AND expert === true; open menu to select --\x3e\n    <button mat-button *ngIf="advanced && expert" [matMenuTriggerFor]="selectSearch">\n        <mat-icon>filter_list</mat-icon>\n    </button>\n    <mat-menu #selectSearch="matMenu">\n        <button mat-menu-item (click)="openPanelWithBackdrop(\'advanced\')">\n            <span>Advanced search</span>\n        </button>\n        <button mat-menu-item (click)="openPanelWithBackdrop(\'expert\')">\n            <span>Expert search</span>\n        </button>\n    </mat-menu>\n\n</div>\n\n\x3c!-- full-text search menu --\x3e\n<ng-template #searchMenu>\n    <div class="kui-search-menu with-extended-search" [class.with-project-filter]="projectfilter">\n        <div class="kui-menu-header">\n            <span class="kui-menu-title">\n                <h4 *ngIf="showAdvanced">Advanced search</h4>\n                <h4 *ngIf="!showAdvanced">Expert search</h4>\n            </span>\n            <span class="fill-remaining-space"></span>\n            <span class="kui-menu-close">\n                <button mat-icon-button (click)="closeMenu()">\n                    <mat-icon>close</mat-icon>\n                </button>\n            </span>\n        </div>\n        <div class="kui-menu-content">\n            <kui-extended-search *ngIf="showAdvanced" [route]="route" (toggleExtendedSearchForm)="closeMenu()">\n            </kui-extended-search>\n            <kui-expert-search *ngIf="!showAdvanced" [route]="route" (toggleExtendedSearchForm)="closeMenu()">\n            </kui-expert-search>\n        </div>\n    </div>\n</ng-template>\n',styles:[".advanced-btn{margin-left:10px}.kui-search-panel{display:flex;position:relative;z-index:100}.extended-search-box{margin:12px}",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;height:100%;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%}.kui-form-content .kui-form-action{position:absolute;bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}@media screen and (max-width:1024px){.fulltext-search.input-field input{width:calc(360px - 80px)}.fulltext-search,.kui-menu.extended-search{width:360px}}@media screen and (max-width:768px){.fulltext-search.input-field input{width:calc(360px - 160px - 80px)}.fulltext-search,.kui-menu.extended-search{width:calc(360px - 80px)}}']}]}],e.ctorParameters=function(){return[{type:r.Overlay},{type:m.ViewContainerRef}]},e.propDecorators={route:[{type:m.Input}],projectfilter:[{type:m.Input}],filterbyproject:[{type:m.Input}],advanced:[{type:m.Input}],expert:[{type:m.Input}],searchPanel:[{type:m.ViewChild,args:["fullSearchPanel"]}],searchMenu:[{type:m.ViewChild,args:["searchMenu"]}]},e}(),x=function(){function e(e,t,i,r,o){this.fb=e,this._route=t,this._router=i,this._cacheService=r,this._gravSearchService=o,this.toggleExtendedSearchForm=new m.EventEmitter,this.gravsearch=new m.EventEmitter,this.ontologies=[],this.activeProperties=[],this.resourceClasses=[],this.result=new p.ReadResourcesSequence([],0),this.formValid=!1}return e.prototype.ngOnInit=function(){var t=this;this.form=this.fb.group({}),this.form.statusChanges.subscribe(function(e){t.formValid=t.validateForm()}),this.initializeOntologies()},e.prototype.addProperty=function(){this.activeProperties.push(!0)},e.prototype.removeProperty=function(){this.activeProperties.splice(-1,1)},e.prototype.initializeOntologies=function(){var t=this;this._cacheService.getOntologiesMetadata().subscribe(function(e){t.ontologies=e})},e.prototype.getResourceClassesAndPropertiesForOntology=function(e){var t=this;this.activeResourceClass=undefined,this.activeProperties=[],this.activeOntology=e,this._cacheService.getEntityDefinitionsForOntologies([e]).subscribe(function(e){t.resourceClasses=e.getResourceClassesAsArray(!0),t.properties=e.getProperties()})},e.prototype.getPropertiesForResourceClass=function(t){var i=this;this.activeProperties=[],null===t?this.getResourceClassesAndPropertiesForOntology(this.activeOntology):this._cacheService.getResourceClassDefinitions([t]).subscribe(function(e){i.properties=e.getProperties(),i.activeResourceClass=e.getResourceClasses()[t]})},e.prototype.validateForm=function(){return this.form.valid&&(0<this.propertyComponents.length||this.resourceClassComponent!==undefined&&!1!==this.resourceClassComponent.getResourceClassSelected())},e.prototype.resetForm=function(){this.activeOntology!==undefined&&this.getResourceClassesAndPropertiesForOntology(this.activeOntology)},e.prototype.submit=function(){if(this.formValid){var e,t=this.resourceClassComponent.getResourceClassSelected();!1!==t&&(e=t);var i=this.propertyComponents.map(function(e){return e.getPropertySelectedWithValue()}),r=this._gravSearchService.createGravsearchQuery(i,e,0);this.route?this._router.navigate([this.route+"/extended/",r],{relativeTo:this._route}):this.gravsearch.emit(r),this.toggleExtendedSearchForm.emit(!0)}},e.decorators=[{type:m.Component,args:[{selector:"kui-extended-search",template:'<form [formGroup]="form" (ngSubmit)="submit()" class="kui-form-content">\n\n  <div>\n    <kui-select-ontology *ngIf="ontologies.length > 0" [formGroup]="form" [ontologies]="ontologies"\n                         (ontologySelected)="getResourceClassesAndPropertiesForOntology($event)"></kui-select-ontology>\n  </div>\n\n  <div class="select-resource-class" *ngIf="resourceClasses?.length > 0">\n    <kui-select-resource-class #resourceClass [formGroup]="form" [resourceClasses]="resourceClasses"\n                               (resourceClassSelectedEvent)="getPropertiesForResourceClass($event)">\n    </kui-select-resource-class>\n  </div>\n\n  <div class="select-property" *ngIf="properties !== undefined">\n    <div *ngFor="let prop of activeProperties; let i = index">\n\n      <kui-select-property #property [activeResourceClass]="activeResourceClass" [formGroup]="form" [index]="i"\n                           [properties]="properties"></kui-select-property>\n\n    </div>\n  </div>\n\n\n  <div class="select-property buttons">\n    <button mat-mini-fab class="property-button add-property-button" color="primary" type="button"\n            (click)="addProperty()" [disabled]="activeOntology === undefined || activeProperties.length >= 4">\n      <mat-icon aria-label="add a property">add</mat-icon>\n    </button>\n\n    <button mat-mini-fab class="property-button remove-property-button" color="primary" type="button"\n            (click)="removeProperty()" [disabled]="activeProperties.length == 0">\n      <mat-icon aria-label="remove property">remove</mat-icon>\n    </button>\n  </div>\n\n  \x3c!--  <div>\n    <button mat-icon-button type="button" (click)="resetForm()" [disabled]="this.activeOntology === undefined">\n      <mat-icon aria-label="reset query form">clear</mat-icon>\n    </button>\n\n    <button mat-icon-button type="submit" [disabled]="!formValid">\n      <mat-icon aria-label="submit query">send</mat-icon>\n    </button>\n  </div> --\x3e\n\n  <div class="kui-form-action">\n    <button class="reset" mat-button type="button" (click)="resetForm()" [disabled]="this.activeOntology === undefined">\n      Reset\n    </button>\n    <span class="fill-remaining-space"></span>\n    <button class="extended-search-button" mat-raised-button color="primary" type="submit" [disabled]="!formValid">\n      Search\n    </button>\n  </div>\n\n</form>\n',styles:[".select-resource-class{margin-left:8px}.select-property{margin-left:16px}.select-property .property-button{margin:0 12px 64px 0}.kui-form-content{position:relative;min-height:320px;height:100%}",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;height:100%;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%}.kui-form-content .kui-form-action{position:absolute;bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}@media screen and (max-width:1024px){.fulltext-search.input-field input{width:calc(360px - 80px)}.fulltext-search,.kui-menu.extended-search{width:360px}}@media screen and (max-width:768px){.fulltext-search.input-field input{width:calc(360px - 160px - 80px)}.fulltext-search,.kui-menu.extended-search{width:calc(360px - 80px)}}']}]}],e.ctorParameters=function(){return[{type:l.FormBuilder,decorators:[{type:m.Inject,args:[l.FormBuilder]}]},{type:t.ActivatedRoute},{type:t.Router},{type:p.OntologyCacheService},{type:p.GravsearchGenerationService}]},e.propDecorators={route:[{type:m.Input}],toggleExtendedSearchForm:[{type:m.Output}],gravsearch:[{type:m.Output}],resourceClassComponent:[{type:m.ViewChild,args:["resourceClass"]}],propertyComponents:[{type:m.ViewChildren,args:["property"]}]},e}(),k=function(){function e(e,t,i,r,o,a){this.fb=e,this._route=t,this._router=i,this._searchService=r,this._searchParamsService=o,this.config=a,this.gravsearch=new m.EventEmitter}return e.prototype.ngOnInit=function(){this.initForm()},e.prototype.initForm=function(){this.expertSearchForm=this.fb.group({gravquery:["\nPREFIX knora-api: <http://api.knora.org/ontology/knora-api/simple/v2#>\nPREFIX incunabula: <"+this.config.api+"/ontology/0803/incunabula/simple/v2#>\n\nCONSTRUCT {\n    ?book knora-api:isMainResource true .\n    ?book incunabula:title ?title .\n\n} WHERE {\n    ?book a incunabula:book .\n    ?book incunabula:title ?title .\n}\n",l.Validators.required]})},e.prototype.submitQuery=function(){var e=this.generateGravsearch(0);this.route?this._router.navigate([this.route+"/extended/",e],{relativeTo:this._route}):this.gravsearch.emit(e)},e.prototype.generateGravsearch=function(e){void 0===e&&(e=0);var t=this.expertSearchForm.controls.gravquery.value,i="\n         OFFSET "+e+"\n         ";return 0===e&&this._searchParamsService.changeSearchParamsMsg(new p.ExtendedSearchParams(function(e){return t+"\n             OFFSET "+e+"\n             "})),t+i},e.prototype.resetForm=function(){this.initForm()},e.decorators=[{type:m.Component,args:[{selector:"kui-expert-search",template:'<div class="expert-search-container">\n  \x3c!-- The integration in container like the accordeon expansion panel should be handled on app side\n  <mat-expansion-panel [expanded]="true">\n    <mat-expansion-panel-header>\n      <mat-panel-title>\n        Expert search\n      </mat-panel-title>\n      <mat-panel-description> </mat-panel-description>\n    </mat-expansion-panel-header>\n  --\x3e\n  <form [formGroup]="expertSearchForm" class="expert-search-form kui-form-content">\n    <mat-form-field class="textarea-field large-field">\n      <textarea matInput formControlName="gravquery" matTextareaAutosize matAutosizeMinRows="12" matAutosizeMaxRows="24"\n                placeholder="Write your gravsearch query"></textarea>\n    </mat-form-field>\n\n    <div class="kui-form-action">\n      <button class="reset" mat-button type="button" (click)="resetForm()">\n        Reset\n      </button>\n      <span class="fill-remaining-space"></span>\n      <button mat-raised-button color="primary" type="submit" [disabled]="!expertSearchForm.valid"\n              (click)="submitQuery()">\n        Search\n      </button>\n    </div>\n\n  </form>\n\n  \x3c!-- </mat-expansion-panel> --\x3e\n</div>\n',styles:['.expert-search-container{min-height:100%}.expert-search-container .expert-search-form{min-width:150px;width:100%;margin:auto}.expert-search-container .expert-search-form .textarea-field{width:100%;display:block}.expert-search-container .expert-search-form .form-panel{width:100%}.mat-input-element{font-family:"Courier New",Courier,monospace}.form-content{margin:24px auto;width:472px}.form-content .large-field{min-width:472px}','input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;height:100%;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%}.kui-form-content .kui-form-action{position:absolute;bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}@media screen and (max-width:1024px){.fulltext-search.input-field input{width:calc(360px - 80px)}.fulltext-search,.kui-menu.extended-search{width:360px}}@media screen and (max-width:768px){.fulltext-search.input-field input{width:calc(360px - 160px - 80px)}.fulltext-search,.kui-menu.extended-search{width:calc(360px - 80px)}}']}]}],e.ctorParameters=function(){return[{type:l.FormBuilder},{type:t.ActivatedRoute},{type:t.Router},{type:p.SearchService},{type:p.SearchParamsService},{type:undefined,decorators:[{type:m.Inject,args:[p.KuiCoreConfigToken]}]}]},e.propDecorators={route:[{type:m.Input}],gravsearch:[{type:m.Output}]},e}(),y=function(){function e(e){this.fb=e,this.ontologySelected=new m.EventEmitter}return e.prototype.ngOnInit=function(){var t=this;this.form=this.fb.group({ontology:[null,l.Validators.required]}),this.form.valueChanges.subscribe(function(e){t.ontologySelected.emit(e.ontology)}),this.formGroup.addControl("ontology",this.form)},e.decorators=[{type:m.Component,args:[{selector:"kui-select-ontology",template:'<mat-form-field *ngIf="ontologies.length > 0" class="large-field">\n  <mat-select placeholder="Select an Ontology" [formControl]="form.controls[\'ontology\']">\n    <mat-option *ngFor="let onto of ontologies" [value]="onto.id">{{ onto.label }}</mat-option>\n  </mat-select>\n</mat-form-field>\n',styles:["",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;height:100%;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%}.kui-form-content .kui-form-action{position:absolute;bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}@media screen and (max-width:1024px){.fulltext-search.input-field input{width:calc(360px - 80px)}.fulltext-search,.kui-menu.extended-search{width:360px}}@media screen and (max-width:768px){.fulltext-search.input-field input{width:calc(360px - 160px - 80px)}.fulltext-search,.kui-menu.extended-search{width:calc(360px - 80px)}}']}]}],e.ctorParameters=function(){return[{type:l.FormBuilder,decorators:[{type:m.Inject,args:[l.FormBuilder]}]}]},e.propDecorators={formGroup:[{type:m.Input}],ontologies:[{type:m.Input}],ontologySelected:[{type:m.Output}]},e}(),b=Promise.resolve(null),g=function(){function e(e){this.fb=e}return Object.defineProperty(e.prototype,"properties",{get:function(){return this._properties},set:function(e){this.propertySelected=undefined,this._properties=e,this.updatePropertiesArray()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeResourceClass",{set:function(e){this._activeResourceClass=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var i=this;this.form=this.fb.group({property:[null,l.Validators.required],isSortCriterion:[!1,l.Validators.required]}),this.form.valueChanges.subscribe(function(e){var t=e.property;i.propertySelected=i._properties[t]}),b.then(function(){i.propIndex="property"+i.index,i.formGroup.addControl(i.propIndex,i.form)})},e.prototype.ngOnDestroy=function(){var e=this;b.then(function(){e.formGroup.removeControl(e.propIndex)})},e.prototype.sortCriterion=function(){var t=this;return this._activeResourceClass!==undefined&&this.propertySelected!==undefined&&!this.propertySelected.isLinkProperty&&1===this._activeResourceClass.cardinalities.filter(function(e){return e.property===t.propertySelected.id&&1===e.value&&(e.occurrence===p.CardinalityOccurrence.card||e.occurrence===p.CardinalityOccurrence.maxCard)}).length},e.prototype.updatePropertiesArray=function(){var e=[];for(var t in this._properties)if(this._properties.hasOwnProperty(t)){var i=this._properties[t];i.isEditable&&!i.isLinkValueProperty&&e.push(this._properties[t])}e.sort(p.OntologyInformation.sortFunc),this.propertiesAsArray=e},e.prototype.getPropertySelectedWithValue=function(){var e=this.specifyPropertyValue.getComparisonOperatorAndValueLiteralForProperty(),t=!1;return this.propertySelected.isLinkProperty||(t=this.form.value.isSortCriterion),new p.PropertyWithValue(this.propertySelected,e,t)},e.decorators=[{type:m.Component,args:[{selector:"kui-select-property",template:'<mat-form-field class="search-property-field medium-field" *ngIf="propertiesAsArray?.length > 0">\n  <mat-select placeholder="Select Properties" [formControl]="form.controls[\'property\']">\n    <mat-option *ngFor="let prop of propertiesAsArray" [value]="prop.id">{{ prop.label }}</mat-option>\n  </mat-select>\n</mat-form-field>\n\n<kui-specify-property-value #specifyPropertyValue [formGroup]="form" *ngIf="propertySelected !== undefined"\n                            [property]="propertySelected"></kui-specify-property-value>\n\n<mat-checkbox matTooltip="Sort criterion" *ngIf="propertySelected !== undefined && sortCriterion()"\n              [formControl]="form.controls[\'isSortCriterion\']"></mat-checkbox>\n',styles:[".search-property-field{margin-right:8px}",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;height:100%;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%}.kui-form-content .kui-form-action{position:absolute;bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}@media screen and (max-width:1024px){.fulltext-search.input-field input{width:calc(360px - 80px)}.fulltext-search,.kui-menu.extended-search{width:360px}}@media screen and (max-width:768px){.fulltext-search.input-field input{width:calc(360px - 160px - 80px)}.fulltext-search,.kui-menu.extended-search{width:calc(360px - 80px)}}']}]}],e.ctorParameters=function(){return[{type:l.FormBuilder,decorators:[{type:m.Inject,args:[l.FormBuilder]}]}]},e.propDecorators={formGroup:[{type:m.Input}],index:[{type:m.Input}],properties:[{type:m.Input}],activeResourceClass:[{type:m.Input}],specifyPropertyValue:[{type:m.ViewChild,args:["specifyPropertyValue"]}]},e}(),v=Promise.resolve(null),w=function(){function e(e){this.fb=e,this.KnoraConstants=p.KnoraConstants,this.comparisonOperators=[]}return Object.defineProperty(e.prototype,"property",{get:function(){return this._property},set:function(e){this.comparisonOperatorSelected=undefined,this._property=e,this.resetComparisonOperators()},enumerable:!0,configurable:!0}),e.prototype.resetComparisonOperators=function(){switch(this._property.isLinkProperty?this.propertyValueType=p.KnoraConstants.Resource:this.propertyValueType=this._property.objectType,this.propertyValueType){case p.KnoraConstants.TextValue:this.comparisonOperators=[new p.Like,new p.Match,new p.Equals,new p.NotEquals,new p.Exists];break;case p.KnoraConstants.BooleanValue:case p.KnoraConstants.Resource:case p.KnoraConstants.UriValue:this.comparisonOperators=[new p.Equals,new p.NotEquals,new p.Exists];break;case p.KnoraConstants.IntValue:case p.KnoraConstants.DecimalValue:case p.KnoraConstants.DateValue:this.comparisonOperators=[new p.Equals,new p.NotEquals,new p.LessThan,new p.LessThanEquals,new p.GreaterThan,new p.GreaterThanEquals,new p.Exists];break;case p.KnoraConstants.ListValue:this.comparisonOperators=[new p.Equals,new p.NotEquals,new p.Exists];break;case p.KnoraConstants.GeomValue:case p.KnoraConstants.FileValue:case p.KnoraConstants.AudioFileValue:case p.KnoraConstants.StillImageFileValue:case p.KnoraConstants.DDDFileValue:case p.KnoraConstants.MovingImageFileValue:case p.KnoraConstants.TextFileValue:case p.KnoraConstants.ColorValue:case p.KnoraConstants.IntervalValue:this.comparisonOperators=[new p.Exists];break;default:console.log("ERROR: Unsupported value type "+this._property.objectType)}},e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(){var t=this;this.form=this.fb.group({comparisonOperator:[null,l.Validators.required]}),this.form.valueChanges.subscribe(function(e){t.comparisonOperatorSelected=e.comparisonOperator}),v.then(function(){t.formGroup.removeControl("comparisonOperator"),t.formGroup.addControl("comparisonOperator",t.form)})},e.prototype.getComparisonOperatorAndValueLiteralForProperty=function(){var e;return"Exists"!==this.comparisonOperatorSelected.getClassName()&&(e=this.propertyValueComponent.getValue()),new p.ComparisonOperatorAndValue(this.comparisonOperatorSelected,e)},e.decorators=[{type:m.Component,args:[{selector:"kui-specify-property-value",template:'<mat-form-field class="search-operator-field small-field" *ngIf="comparisonOperators?.length > 0">\n  <mat-select placeholder="Comparison Operator" [formControl]="form.controls[\'comparisonOperator\']">\n    <mat-option *ngFor="let compOp of comparisonOperators" [value]="compOp">{{ compOp.label }}</mat-option>\n  </mat-select>\n</mat-form-field>\n\n\x3c!-- select apt component for value specification using a switch case statement--\x3e\n<span *ngIf="comparisonOperatorSelected !== undefined && comparisonOperatorSelected !== null && comparisonOperatorSelected.getClassName() != \'Exists\'"\n      [ngSwitch]="propertyValueType">\n  <boolean-value #propertyValue [formGroup]="form" *ngSwitchCase="KnoraConstants.BooleanValue"></boolean-value>\n  <date-value #propertyValue [formGroup]="form" *ngSwitchCase="KnoraConstants.DateValue"></date-value>\n  <decimal-value #propertyValue [formGroup]="form" *ngSwitchCase="KnoraConstants.DecimalValue"></decimal-value>\n  <integer-value #propertyValue [formGroup]="form" *ngSwitchCase="KnoraConstants.IntValue"></integer-value>\n  <link-value #propertyValue [formGroup]="form" [restrictResourceClass]="property.objectType"\n              *ngSwitchCase="KnoraConstants.Resource"></link-value>\n  <text-value #propertyValue [formGroup]="form" *ngSwitchCase="KnoraConstants.TextValue"></text-value>\n  <uri-value #propertyValue [formGroup]="form" *ngSwitchCase="KnoraConstants.UriValue"></uri-value>\n  <list-value #propertyValue [formGroup]="form" [property]="property" *ngSwitchCase="KnoraConstants.ListValue">\n  </list-value>\n\n  \x3c!-- TODO: Resource: handle linking properties with target class restriction: access property member to get objectClass via property() getter method --\x3e\n  <span *ngSwitchDefault="">Not supported {{propertyValueType}}</span>\n</span>\n',styles:[".search-operator-field{margin-right:8px}",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;height:100%;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%}.kui-form-content .kui-form-action{position:absolute;bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}@media screen and (max-width:1024px){.fulltext-search.input-field input{width:calc(360px - 80px)}.fulltext-search,.kui-menu.extended-search{width:360px}}@media screen and (max-width:768px){.fulltext-search.input-field input{width:calc(360px - 160px - 80px)}.fulltext-search,.kui-menu.extended-search{width:calc(360px - 80px)}}']}]}],e.ctorParameters=function(){return[{type:l.FormBuilder,decorators:[{type:m.Inject,args:[l.FormBuilder]}]}]},e.propDecorators={formGroup:[{type:m.Input}],propertyValueComponent:[{type:m.ViewChild,args:["propertyValue"]}],property:[{type:m.Input}]},e}(),C=Promise.resolve(null),S=function(){function e(e){this.fb=e,this.type=p.KnoraConstants.BooleanValue}return e.prototype.ngOnInit=function(){var e=this;this.form=this.fb.group({booleanValue:[!1,l.Validators.compose([l.Validators.required])]}),C.then(function(){e.formGroup.addControl("propValue",e.form)})},e.prototype.ngOnDestroy=function(){var e=this;C.then(function(){e.formGroup.removeControl("propValue")})},e.prototype.getValue=function(){return new p.ValueLiteral(String(this.form.value.booleanValue),p.KnoraConstants.xsdBoolean)},e.decorators=[{type:m.Component,args:[{selector:"boolean-value",template:"<mat-checkbox [formControl]=\"form.controls['booleanValue']\"> true</mat-checkbox>\n",styles:[""]}]}],e.ctorParameters=function(){return[{type:l.FormBuilder,decorators:[{type:m.Inject,args:[l.FormBuilder]}]}]},e.propDecorators={formGroup:[{type:m.Input}]},e}(),j=function(){function e(e,t,i,r){this._calendar=e,this._dateAdapter=t,this._datepickerContent=i,this.fb=r,this.supportedCalendarFormats=a.JDNConvertibleCalendar.supportedCalendars}return e.prototype.ngOnInit=function(){var t=this;this._dateAdapter instanceof c.JDNConvertibleCalendarDateAdapter?this.activeFormat=this._dateAdapter.activeCalendarFormat:console.log("date adapter is expected to be an instance of JDNConvertibleCalendarDateAdapter"),this.form=this.fb.group({calendar:[this.activeFormat,l.Validators.required]}),this.form.valueChanges.subscribe(function(e){t.convertDate(e.calendar)})},e.prototype.convertDate=function(e){if(this._dateAdapter instanceof c.JDNConvertibleCalendarDateAdapter){var t=this._dateAdapter.convertCalendarFormat(this._calendar.activeDate,e);this._calendar.activeDate=t,this._datepickerContent.datepicker.select(t),this._calendar.updateTodaysDate()}else console.log("date adapter is expected to be an instance of JDNConvertibleCalendarDateAdapter")},e.decorators=[{type:m.Component,args:[{selector:"kui-calendar-header",template:'\n      <mat-select placeholder="Calendar Format" class="kui-calendar-header" [formControl]="form.controls[\'calendar\']">\n        <mat-option *ngFor="let cal of supportedCalendarFormats" [value]="cal">{{cal}}</mat-option>\n      </mat-select>\n      <mat-calendar-header></mat-calendar-header>\n    ',styles:[".mat-select.kui-calendar-header{margin:12px!important;width:calc(100% - 24px)!important}"]}]}],e.ctorParameters=function(){return[{type:h.MatCalendar,decorators:[{type:m.Host}]},{type:h.DateAdapter},{type:h.MatDatepickerContent},{type:l.FormBuilder,decorators:[{type:m.Inject,args:[l.FormBuilder]}]}]},e}(),V=Promise.resolve(null),I=function(){function e(e){this.fb=e,this.type=p.KnoraConstants.DateValue,this.headerComponent=j}return e.prototype.ngOnInit=function(){var e=this;this.form=this.fb.group({dateValue:[null,l.Validators.compose([l.Validators.required])]}),this.form.valueChanges.subscribe(function(e){}),V.then(function(){e.formGroup.addControl("propValue",e.form)})},e.prototype.ngOnDestroy=function(){var e=this;V.then(function(){e.formGroup.removeControl("propValue")})},e.prototype.getValue=function(){var e=this.form.value.dateValue,t=e.calendarName,i=e.toCalendarPeriod(),r=t.toUpperCase()+":"+i.periodStart.year+"-"+i.periodStart.month+"-"+i.periodStart.day+":"+i.periodEnd.year+"-"+i.periodEnd.month+"-"+i.periodEnd.day;return new p.ValueLiteral(String(r),p.KnoraConstants.dateSimple)},e.decorators=[{type:m.Component,args:[{selector:"date-value",template:'<mat-form-field class="large-field">\n    <kuiJdnDatepicker>\n        <input matInput [matDatepicker]="picker" placeholder="Choose a date" [formControl]="form.controls[\'dateValue\']">\n        <mat-datepicker #picker [calendarHeaderComponent]="headerComponent"></mat-datepicker>\n    </kuiJdnDatepicker>\n    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>\n</mat-form-field>\n',styles:["",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;height:100%;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%}.kui-form-content .kui-form-action{position:absolute;bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}@media screen and (max-width:1024px){.fulltext-search.input-field input{width:calc(360px - 80px)}.fulltext-search,.kui-menu.extended-search{width:360px}}@media screen and (max-width:768px){.fulltext-search.input-field input{width:calc(360px - 160px - 80px)}.fulltext-search,.kui-menu.extended-search{width:calc(360px - 80px)}}']}]}],e.ctorParameters=function(){return[{type:l.FormBuilder,decorators:[{type:m.Inject,args:[l.FormBuilder]}]}]},e.propDecorators={formGroup:[{type:m.Input}]},e}(),P=Promise.resolve(null),O=function(){function e(e){this.fb=e,this.type=p.KnoraConstants.DecimalValue}return e.prototype.ngOnInit=function(){var e=this;this.form=this.fb.group({decimalValue:[null,l.Validators.compose([l.Validators.required])]}),P.then(function(){e.formGroup.addControl("propValue",e.form)})},e.prototype.ngOnDestroy=function(){var e=this;P.then(function(){e.formGroup.removeControl("propValue")})},e.prototype.getValue=function(){return new p.ValueLiteral(String(this.form.value.decimalValue),p.KnoraConstants.xsdDecimal)},e.decorators=[{type:m.Component,args:[{selector:"decimal-value",template:'<mat-form-field class="large-field">\n    <input matInput [formControl]="form.controls[\'decimalValue\']" placeholder="Decimal value" value="" type="number">\n</mat-form-field>\n',styles:["",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;height:100%;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%}.kui-form-content .kui-form-action{position:absolute;bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}@media screen and (max-width:1024px){.fulltext-search.input-field input{width:calc(360px - 80px)}.fulltext-search,.kui-menu.extended-search{width:360px}}@media screen and (max-width:768px){.fulltext-search.input-field input{width:calc(360px - 160px - 80px)}.fulltext-search,.kui-menu.extended-search{width:calc(360px - 80px)}}']}]}],e.ctorParameters=function(){return[{type:l.FormBuilder,decorators:[{type:m.Inject,args:[l.FormBuilder]}]}]},e.propDecorators={formGroup:[{type:m.Input}]},e}(),F=Promise.resolve(null),R=function(){function e(e){this.fb=e,this.type=p.KnoraConstants.IntValue}return e.prototype.ngOnInit=function(){var e=this;this.form=this.fb.group({integerValue:[null,l.Validators.compose([l.Validators.required,l.Validators.pattern(/^-?\d+$/)])]}),F.then(function(){e.formGroup.addControl("propValue",e.form)})},e.prototype.ngOnDestroy=function(){var e=this;F.then(function(){e.formGroup.removeControl("propValue")})},e.prototype.getValue=function(){return new p.ValueLiteral(String(this.form.value.integerValue),p.KnoraConstants.xsdInteger)},e.decorators=[{type:m.Component,args:[{selector:"integer-value",template:'<mat-form-field class="large-field">\n    <input matInput [formControl]="form.controls[\'integerValue\']" placeholder="Integer value" value="" type="number">\n</mat-form-field>\n',styles:["",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;height:100%;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%}.kui-form-content .kui-form-action{position:absolute;bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}@media screen and (max-width:1024px){.fulltext-search.input-field input{width:calc(360px - 80px)}.fulltext-search,.kui-menu.extended-search{width:360px}}@media screen and (max-width:768px){.fulltext-search.input-field input{width:calc(360px - 160px - 80px)}.fulltext-search,.kui-menu.extended-search{width:calc(360px - 80px)}}']}]}],e.ctorParameters=function(){return[{type:l.FormBuilder,decorators:[{type:m.Inject,args:[l.FormBuilder]}]}]},e.propDecorators={formGroup:[{type:m.Input}]},e}(),M=(require("jsonld"),Promise.resolve(null)),_=function(){function e(e,t,i){this.fb=e,this._searchService=t,this._cacheService=i,this.type=p.KnoraConstants.LinkValue}return Object.defineProperty(e.prototype,"restrictResourceClass",{get:function(){return this._restrictToResourceClass},set:function(e){this._restrictToResourceClass=e},enumerable:!0,configurable:!0}),e.prototype.displayResource=function(e){if(null!==e)return e.label},e.prototype.searchByLabel=function(e){var t=this;3<=e.length?this._searchService.searchByLabelReadResourceSequence(e,0,{limitToResourceClass:this._restrictToResourceClass}).subscribe(function(e){t.resources=e.resources},function(e){console.log("JSONLD of full resource request could not be expanded:"+e)}):this.resources=undefined},e.prototype.validateResource=function(e){return e.value instanceof p.ReadResource?null:{noResource:{value:e.value}}},e.prototype.ngOnInit=function(){var t=this;this.form=this.fb.group({resource:[null,l.Validators.compose([l.Validators.required,this.validateResource])]}),this.form.valueChanges.subscribe(function(e){t.searchByLabel(e.resource)}),M.then(function(){t.formGroup.addControl("propValue",t.form)})},e.prototype.ngOnDestroy=function(){var e=this;M.then(function(){e.formGroup.removeControl("propValue")})},e.prototype.getValue=function(){return new p.IRI(this.form.value.resource.id)},e.decorators=[{type:m.Component,args:[{selector:"link-value",template:'<mat-form-field class="large-field">\n    <input matInput placeholder="resource" aria-label="resource" [matAutocomplete]="auto"\n           [formControl]="form.controls[\'resource\']">\n    <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayResource">\n        <mat-option *ngFor="let res of resources" [value]="res">\n            {{res?.label}}\n        </mat-option>\n    </mat-autocomplete>\n</mat-form-field>\n',styles:["",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;height:100%;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%}.kui-form-content .kui-form-action{position:absolute;bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}@media screen and (max-width:1024px){.fulltext-search.input-field input{width:calc(360px - 80px)}.fulltext-search,.kui-menu.extended-search{width:360px}}@media screen and (max-width:768px){.fulltext-search.input-field input{width:calc(360px - 160px - 80px)}.fulltext-search,.kui-menu.extended-search{width:calc(360px - 80px)}}']}]}],e.ctorParameters=function(){return[{type:l.FormBuilder,decorators:[{type:m.Inject,args:[l.FormBuilder]}]},{type:p.SearchService},{type:p.OntologyCacheService}]},e.propDecorators={formGroup:[{type:m.Input}],restrictResourceClass:[{type:m.Input}]},e}(),q=Promise.resolve(null),D=function(){function e(e){this.fb=e,this.type=p.KnoraConstants.TextValue}return e.prototype.ngOnInit=function(){var e=this;this.form=this.fb.group({textValue:[null,l.Validators.required]}),q.then(function(){e.formGroup.addControl("propValue",e.form)})},e.prototype.ngOnDestroy=function(){var e=this;q.then(function(){e.formGroup.removeControl("propValue")})},e.prototype.getValue=function(){return new p.ValueLiteral(String(this.form.value.textValue),p.KnoraConstants.xsdString)},e.decorators=[{type:m.Component,args:[{selector:"text-value",template:'<mat-form-field class="large-field">\n    <input matInput [formControl]="form.controls[\'textValue\']" placeholder="text value" value="">\n</mat-form-field>\n',styles:["",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;height:100%;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%}.kui-form-content .kui-form-action{position:absolute;bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}@media screen and (max-width:1024px){.fulltext-search.input-field input{width:calc(360px - 80px)}.fulltext-search,.kui-menu.extended-search{width:360px}}@media screen and (max-width:768px){.fulltext-search.input-field input{width:calc(360px - 160px - 80px)}.fulltext-search,.kui-menu.extended-search{width:calc(360px - 80px)}}']}]}],e.ctorParameters=function(){return[{type:l.FormBuilder,decorators:[{type:m.Inject,args:[l.FormBuilder]}]}]},e.propDecorators={formGroup:[{type:m.Input}]},e}(),E=Promise.resolve(null),G=function(){function e(e){this.fb=e,this.type=p.KnoraConstants.UriValue}return e.prototype.ngOnInit=function(){var e=this;this.form=this.fb.group({uriValue:[null,l.Validators.compose([l.Validators.required,l.Validators.pattern(p.Utils.RegexUrl)])]}),E.then(function(){e.formGroup.addControl("propValue",e.form)})},e.prototype.ngOnDestroy=function(){var e=this;E.then(function(){e.formGroup.removeControl("propValue")})},e.prototype.getValue=function(){return new p.ValueLiteral(String(this.form.value.uriValue),p.KnoraConstants.xsdUri)},e.decorators=[{type:m.Component,args:[{selector:"uri-value",template:'<mat-form-field class="large-field">\n    <input matInput [formControl]="form.controls[\'uriValue\']" placeholder="URI" value="">\n</mat-form-field>\n',styles:["",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;height:100%;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%}.kui-form-content .kui-form-action{position:absolute;bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}@media screen and (max-width:1024px){.fulltext-search.input-field input{width:calc(360px - 80px)}.fulltext-search,.kui-menu.extended-search{width:360px}}@media screen and (max-width:768px){.fulltext-search.input-field input{width:calc(360px - 160px - 80px)}.fulltext-search,.kui-menu.extended-search{width:calc(360px - 80px)}}']}]}],e.ctorParameters=function(){return[{type:l.FormBuilder,decorators:[{type:m.Inject,args:[l.FormBuilder]}]}]},e.propDecorators={formGroup:[{type:m.Input}]},e}(),A=Promise.resolve(null),B=function(){function e(e){this.fb=e,this.resourceClassSelectedEvent=new m.EventEmitter}return Object.defineProperty(e.prototype,"resourceClasses",{get:function(){return this._resourceClasses},set:function(e){this.resourceClassSelected=undefined,this._resourceClasses=e},enumerable:!0,configurable:!0}),e.prototype.getResourceClassSelected=function(){return this.resourceClassSelected!==undefined&&null!==this.resourceClassSelected&&this.resourceClassSelected},e.prototype.initForm=function(){var t=this;this.form=this.fb.group({resourceClass:[null]}),this.form.valueChanges.subscribe(function(e){t.resourceClassSelected=e.resourceClass,t.resourceClassSelectedEvent.emit(t.resourceClassSelected)})},e.prototype.ngOnInit=function(){this.initForm(),this.formGroup.addControl("resourceClass",this.form)},e.prototype.ngOnChanges=function(){var e=this;this.form!==undefined&&A.then(function(){e.formGroup.removeControl("resourceClass"),e.initForm(),e.formGroup.addControl("resourceClass",e.form)})},e.decorators=[{type:m.Component,args:[{selector:"kui-select-resource-class",template:'<mat-form-field *ngIf="resourceClasses.length > 0" class="large-field">\n  <mat-select placeholder="Select a Resource Class (optional)" [formControl]="form.controls[\'resourceClass\']">\n    <mat-option [value]="null">no selection</mat-option>\n    \x3c!-- undo selection of a resource class --\x3e\n    <mat-option *ngFor="let resourceClass of resourceClasses" [value]="resourceClass.id">{{ resourceClass.label }}\n    </mat-option>\n  </mat-select>\n</mat-form-field>\n',styles:["",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;height:100%;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%}.kui-form-content .kui-form-action{position:absolute;bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}@media screen and (max-width:1024px){.fulltext-search.input-field input{width:calc(360px - 80px)}.fulltext-search,.kui-menu.extended-search{width:360px}}@media screen and (max-width:768px){.fulltext-search.input-field input{width:calc(360px - 160px - 80px)}.fulltext-search,.kui-menu.extended-search{width:calc(360px - 80px)}}']}]}],e.ctorParameters=function(){return[{type:l.FormBuilder,decorators:[{type:m.Inject,args:[l.FormBuilder]}]}]},e.propDecorators={formGroup:[{type:m.Input}],resourceClasses:[{type:m.Input}],resourceClassSelectedEvent:[{type:m.Output}]},e}(),T=Promise.resolve(null),N=function(){function e(e,t){this.fb=e,this._listCacheService=t,this.type=p.KnoraConstants.ListValue}return e.prototype.getRootNodeIri=function(){var e=this.property.guiAttribute;if(1===e.length&&e[0].startsWith("hlist="))return e[0].substr(7,e[0].length-8);console.log("No root node Iri given for property")},e.prototype.ngOnInit=function(){var t=this;this.form=this.fb.group({listValue:[null,l.Validators.required]}),T.then(function(){t.formGroup.addControl("propValue",t.form)});var e=this.getRootNodeIri();this._listCacheService.getList(e).subscribe(function(e){t.listRootNode=e})},e.prototype.ngOnDestroy=function(){var e=this;T.then(function(){e.formGroup.removeControl("propValue")})},e.prototype.getValue=function(){return new p.IRI(this.form.value.listValue)},e.prototype.getSelectedNode=function(e){this.menuTrigger.closeMenu(),this.selectedNode=e,this.form.controls.listValue.setValue(e.id)},e.decorators=[{type:m.Component,args:[{selector:"list-value",template:'<span *ngIf="listRootNode !== undefined">\n    <button mat-stroked-button [matMenuTriggerFor]="mainMenu" type="button">\n        <span *ngIf="!selectedNode">Select list value</span>\n        <span *ngIf="selectedNode">{{selectedNode.label}}</span>\n    </button>\n\n    <mat-menu #mainMenu="matMenu" [overlapTrigger]="false">\n        <span *ngFor="let child of listRootNode.children">\n            <span *ngIf="child.children && child.children.length > 0">\n                <button mat-menu-item [matMenuTriggerFor]="menu.childMenu" (click)="getSelectedNode(child)"\n                        type="button">\n                    {{child.label}}\n                </button>\n                <list-display #menu [children]="child.children" (selectedNode)="getSelectedNode($event)">\n                </list-display>\n            </span>\n\n            <span *ngIf="!child.children || child.children.length === 0">\n                <button mat-menu-item (click)="getSelectedNode(child)" type="button">\n                    {{child.label}}\n                </button>\n            </span>\n        </span>\n    </mat-menu>\n</span>\n\n\x3c!-- hidden input field for the selected list item (listNode iri) --\x3e\n<mat-form-field class="hidden">\n    <input matInput [formControl]="form.controls[\'listValue\']" placeholder="list value">\n</mat-form-field>\n',styles:[".hidden{display:none}",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;height:100%;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%}.kui-form-content .kui-form-action{position:absolute;bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}@media screen and (max-width:1024px){.fulltext-search.input-field input{width:calc(360px - 80px)}.fulltext-search,.kui-menu.extended-search{width:360px}}@media screen and (max-width:768px){.fulltext-search.input-field input{width:calc(360px - 160px - 80px)}.fulltext-search,.kui-menu.extended-search{width:calc(360px - 80px)}}']}]}],e.ctorParameters=function(){return[{type:l.FormBuilder,decorators:[{type:m.Inject,args:[l.FormBuilder]}]},{type:p.ListCacheService}]},e.propDecorators={formGroup:[{type:m.Input}],property:[{type:m.Input}],menuTrigger:[{type:m.ViewChild,args:[h.MatMenuTrigger]}]},e}(),K=function(){function e(){this.selectedNode=new m.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.setValue=function(e){this.selectedNode.emit(e)},e.decorators=[{type:m.Component,args:[{selector:"list-display",template:'<mat-menu #childMenu="matMenu" [overlapTrigger]="false">\n    <span *ngFor="let child of children">\n        <span *ngIf="child.children && child.children.length > 0">\n            <button mat-menu-item [matMenuTriggerFor]="menu.childMenu" (click)="setValue(child)" type="button">\n                {{child.label}}\n            </button>\n            <list-display #menu [children]="child.children" (selectedNode)="setValue($event)"></list-display>\n        </span>\n\n        <span *ngIf="!child.children || child.children.length === 0">\n            <button mat-menu-item (click)="setValue(child)" type="button">\n                {{child.label}}\n            </button>\n        </span>\n    </span>\n</mat-menu>\n',styles:[""]}]}],e.ctorParameters=function(){return[]},e.propDecorators={children:[{type:m.Input}],selectedNode:[{type:m.Output}],childMenu:[{type:m.ViewChild,args:["childMenu"]}]},e}(),z=function(){function e(){}return e.decorators=[{type:m.NgModule,args:[{imports:[i.CommonModule,n.BrowserAnimationsModule,h.MatAutocompleteModule,h.MatButtonModule,h.MatCheckboxModule,h.MatDatepickerModule,h.MatExpansionModule,h.MatFormFieldModule,h.MatInputModule,h.MatIconModule,h.MatListModule,h.MatMenuModule,h.MatSelectModule,h.MatTooltipModule,l.FormsModule,l.ReactiveFormsModule,p.KuiCoreModule,s.KuiActionModule,u.KuiViewerModule,c.MatJDNConvertibleCalendarDateAdapterModule],declarations:[y,x,B,g,w,S,I,O,R,_,D,G,j,d,f,N,K,k],exports:[f,d,x,k,I],entryComponents:[j]}]}],e}();e.b=K,e.a=N,e.FulltextSearchComponent=d,e.SearchPanelComponent=f,e.ExtendedSearchComponent=x,e.ExpertSearchComponent=k,e.SelectOntologyComponent=y,e.SelectPropertyComponent=g,e.SpecifyPropertyValueComponent=w,e.BooleanValueComponent=S,e.DateValueComponent=I,e.HeaderComponent=j,e.DecimalValueComponent=O,e.IntegerValueComponent=R,e.LinkValueComponent=_,e.TextValueComponent=D,e.UriValueComponent=G,e.SelectResourceClassComponent=B,e.KuiSearchModule=z,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=knora-search.umd.min.js.map