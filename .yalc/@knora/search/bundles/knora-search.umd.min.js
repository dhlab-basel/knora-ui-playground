!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/cdk/overlay"),require("@angular/cdk/portal"),require("@angular/core"),require("@angular/router"),require("@knora/core"),require("@angular/material"),require("@angular/forms"),require("@angular/material/core"),require("@angular/material/datepicker"),require("jdnconvertiblecalendardateadapter"),require("@angular/common"),require("@angular/platform-browser/animations"),require("@angular/material/autocomplete"),require("@angular/material/button"),require("@angular/material/checkbox"),require("@angular/material/expansion"),require("@angular/material/form-field"),require("@angular/material/icon"),require("@angular/material/input"),require("@angular/material/list"),require("@angular/material/menu"),require("@angular/material/select"),require("@angular/material/tooltip"),require("@knora/action"),require("@knora/viewer")):"function"==typeof define&&define.amd?define("@knora/search",["exports","@angular/cdk/overlay","@angular/cdk/portal","@angular/core","@angular/router","@knora/core","@angular/material","@angular/forms","@angular/material/core","@angular/material/datepicker","jdnconvertiblecalendardateadapter","@angular/common","@angular/platform-browser/animations","@angular/material/autocomplete","@angular/material/button","@angular/material/checkbox","@angular/material/expansion","@angular/material/form-field","@angular/material/icon","@angular/material/input","@angular/material/list","@angular/material/menu","@angular/material/select","@angular/material/tooltip","@knora/action","@knora/viewer"],t):t(((e=e||self).knora=e.knora||{},e.knora.search={}),e.ng.cdk.overlay,e.ng.cdk.portal,e.ng.core,e.ng.router,e["@knora/core"],e.ng.material,e.ng.forms,e.ng.material.core,e.ng.material.datepicker,e.jdnconvertiblecalendardateadapter,e.ng.common,e.ng.platformBrowser.animations,e.ng.material.autocomplete,e.ng.material.button,e.ng.material.checkbox,e.ng.material.expansion,e.ng.material["form-field"],e.ng.material.icon,e.ng.material.input,e.ng.material.list,e.ng.material.menu,e.ng.material.select,e.ng.material.tooltip,e["@knora/action"],e["@knora/viewer"])}(this,function(e,t,i,r,o,a,n,s,l,u,c,p,h,m,d,f,x,k,g,b,y,v,w,C,j,S){"use strict";function I(e,t,i,r){var o,a=arguments.length,n=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(n=(a<3?o(n):a>3?o(t,i,n):o(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n}function V(e,t){return function(i,r){t(i,r,e)}}function P(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var O=function(){function e(e,t,i,o){this._overlay=e,this._router=t,this._viewContainerRef=i,this._projectsService=o,this.route="/search",this.projectfilter=!1,this.showState=new r.EventEmitter,this.prevSearch=JSON.parse(localStorage.getItem("prevSearch")),this.defaultProjectLabel="All projects",this.projectLabel=this.defaultProjectLabel,this.searchPanelFocus=!1,this.doNotDisplay=[a.KnoraConstants.SystemProjectIRI,a.KnoraConstants.DefaultSharedOntologyIRI]}return e.prototype.ngOnInit=function(){this.filterbyproject&&this.getProject(this.filterbyproject),this.projectfilter&&(this.getAllProjects(),null!==localStorage.getItem("currentProject")&&this.setProject(JSON.parse(localStorage.getItem("currentProject"))))},e.prototype.openPanelWithBackdrop=function(){var e=this,r=new t.OverlayConfig({hasBackdrop:!0,backdropClass:"cdk-overlay-transparent-backdrop",positionStrategy:this.getOverlayPosition(),scrollStrategy:this._overlay.scrollStrategies.block()});this.overlayRef=this._overlay.create(r),this.overlayRef.attach(new i.TemplatePortal(this.searchMenu,this._viewContainerRef)),this.overlayRef.backdropClick().subscribe(function(){e.searchPanelFocus=!1,e.overlayRef.detach()})},e.prototype.getOverlayPosition=function(){var e=[new t.ConnectionPositionPair({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),new t.ConnectionPositionPair({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"})];return this._overlay.position().flexibleConnectedTo(this.searchPanel).withPositions(e).withLockedPosition(!1)},e.prototype.getAllProjects=function(){var e=this;this._projectsService.getAllProjects().subscribe(function(t){e.projects=t,null!==localStorage.getItem("currentProject")&&(e.project=JSON.parse(localStorage.getItem("currentProject")))},function(t){console.error(t),e.error=t})},e.prototype.getProject=function(e){var t=this;this._projectsService.getProjectByIri(e).subscribe(function(e){t.setProject(e)},function(e){console.error(e)})},e.prototype.setProject=function(e){e?(this.projectLabel=e.shortname,this.projectIri=e.id,localStorage.setItem("currentProject",JSON.stringify(e))):(this.projectLabel=this.defaultProjectLabel,this.projectIri=undefined,localStorage.removeItem("currentProject"))},e.prototype.doSearch=function(){var e,t;if(this.searchQuery!==undefined&&null!==this.searchQuery){this.projectIri!==undefined?this._router.navigate([this.route+"/fulltext/"+this.searchQuery+"/"+encodeURIComponent(this.projectIri)]):this._router.navigate([this.route+"/fulltext/"+this.searchQuery]);var i=JSON.parse(localStorage.getItem("prevSearch"));null===i&&(i=[]);var r=0;try{for(var o=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}(i),a=o.next();!a.done;a=o.next()){var n=a.value;this.searchQuery===n.query&&this.projectIri===n.projectIri&&i.splice(r,1),r++}}catch(l){e={error:l}}finally{try{a&&!a.done&&(t=o["return"])&&t.call(o)}finally{if(e)throw e.error}}if(this.searchQuery.length>2){var s={query:this.searchQuery};this.projectIri&&(s={projectIri:this.projectIri,projectLabel:this.projectLabel,query:this.searchQuery}),i.push(s),localStorage.setItem("prevSearch",JSON.stringify(i))}}this.resetSearch(),this.overlayRef.detach(),this.show=!1,this.showState.emit(this.show)},e.prototype.resetSearch=function(){this.searchPanelFocus=!1,this.searchInput.nativeElement.blur(),this.overlayRef.detach()},e.prototype.setFocus=function(){this.prevSearch=JSON.parse(localStorage.getItem("prevSearch")),this.searchPanelFocus=!0,this.openPanelWithBackdrop()},e.prototype.doPrevSearch=function(e){this.searchQuery=e.query,e.projectIri!==undefined?(this.projectIri=e.projectIri,this.projectLabel=e.projectLabel,this._router.navigate([this.route+"/fulltext/"+this.searchQuery+"/"+encodeURIComponent(e.projectIri)])):(this.projectIri=undefined,this.projectLabel=this.defaultProjectLabel,this._router.navigate([this.route+"/fulltext/"+this.searchQuery])),this.resetSearch(),this.overlayRef.detach()},e.prototype.resetPrevSearch=function(e){if(e){var t=this.prevSearch.indexOf(e);this.prevSearch.splice(t,1),localStorage.setItem("prevSearch",JSON.stringify(this.prevSearch))}else localStorage.removeItem("prevSearch");this.prevSearch=JSON.parse(localStorage.getItem("prevSearch"))},e.prototype.changeFocus=function(){this.selectProject.closeMenu(),this.searchInput.nativeElement.focus(),this.setFocus()},I([r.Input(),P("design:type",String)],e.prototype,"route",void 0),I([r.Input(),P("design:type",Boolean)],e.prototype,"projectfilter",void 0),I([r.Input(),P("design:type",String)],e.prototype,"filterbyproject",void 0),I([r.Input(),P("design:type",Boolean)],e.prototype,"show",void 0),I([r.Output(),P("design:type",Object)],e.prototype,"showState",void 0),I([r.ViewChild("fulltextSearchPanel",{"static":!1}),P("design:type",r.ElementRef)],e.prototype,"searchPanel",void 0),I([r.ViewChild("fulltextSearchInput",{"static":!1}),P("design:type",r.ElementRef)],e.prototype,"searchInput",void 0),I([r.ViewChild("fulltextSearchMenu",{"static":!1}),P("design:type",r.TemplateRef)],e.prototype,"searchMenu",void 0),I([r.ViewChild("btnToSelectProject",{"static":!1}),P("design:type",n.MatMenuTrigger)],e.prototype,"selectProject",void 0),e=I([r.Component({selector:"kui-fulltext-search",template:'\x3c!-- full-text search panel --\x3e\n<div class="kui-fulltext-search-panel" [class.active]="searchPanelFocus" [class.with-project-filter]="projectfilter" #fulltextSearchPanel cdkOverlayOrigin>\n\n    \x3c!-- DESKTOP / TABLET VERSION --\x3e\n    <div class="kui-project-filter" *ngIf="projectfilter">\n        <button mat-button class="kui-project-filter-button" [matMenuTriggerFor]="selectProject" #btnToSelectProject="matMenuTrigger" isIconButton>\n            <span class="label">{{projectLabel}}</span>\n            <mat-icon class="icon" matSuffix>keyboard_arrow_down</mat-icon>\n        </button>\n        <mat-menu #selectProject="matMenu">\n            <div class="kui-project-filter-menu">\n                <button mat-menu-item class="center" (click)="setProject();changeFocus()">{{defaultProjectLabel}}</button>\n                <mat-divider></mat-divider>\n                <span *ngFor="let project of projects | kuiSortBy: \'shortname\'">\n                    <button mat-menu-item *ngIf="!doNotDisplay.includes(project.id)" (click)="setProject(project);changeFocus()" [matTooltip]="project.longname" [matTooltipPosition]="\'after\'">{{project.shortname}}</button>\n                </span>\n            </div>\n        </mat-menu>\n    </div>\n\n    <div class="kui-fulltext-search" [class.with-project-filter]="projectfilter">\n        <div class="kui-fulltext-search-field">\n            <input #fulltextSearchInput class="kui-fulltext-search-input" type="search" [(ngModel)]="searchQuery" name="search" minlength="3" autocomplete="off" [placeholder]="\'Search\'" (keyup.esc)="resetSearch()" (keyup.enter)="doSearch()" (click)="setFocus()">\n        </div>\n        <button class="kui-fulltext-search-button suffix" (click)="doSearch()" type="submit">\n            <mat-icon>search</mat-icon>\n        </button>\n    </div>\n\n    \x3c!-- PHONE VERSION *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** --\x3e\n    <div class="kui-project-filter-mobile" *ngIf="projectfilter">\n        <button mat-stroked-button class="kui-project-filter-button-mobile" [matMenuTriggerFor]="selectProject" #btnToSelectProject="matMenuTrigger" isIconButton>\n            <span class="label">{{projectLabel}}</span>\n            <mat-icon class="icon" matSuffix>keyboard_arrow_down</mat-icon>\n        </button>\n        <mat-menu #selectProject="matMenu">\n            <div class="kui-project-filter-menu-mobile">\n                <button mat-menu-item class="center" (click)="setProject();changeFocus()">{{defaultProjectLabel}}</button>\n                <mat-divider></mat-divider>\n                <span *ngFor="let project of projects | kuiSortBy: \'shortname\'">\n                    <button mat-menu-item *ngIf="!doNotDisplay.includes(project.id)" (click)="setProject(project);changeFocus()" [matTooltip]="project.longname" [matTooltipPosition]="\'after\'">{{project.shortname}}</button>\n                </span>\n            </div>\n        </mat-menu>\n        \x3c!--  <mat-form-field class="kui-project-filter-select-mobile">\n            <mat-select [(ngModel)]="All projects">\n                <mat-option *ngFor="let project of projects | kuiSortBy: \'shortname\'" [value]="project.shortname">\n                    {{project.shortname}}\n                </mat-option>\n            </mat-select>\n        </mat-form-field> --\x3e\n    </div>\n\n    <div class="kui-fulltext-search-mobile" [class.with-project-filter]="projectfilter">\n        <div class="kui-fulltext-search-field-mobile">\n            <input #fulltextSearchInput class="kui-fulltext-search-input-mobile" type="search" [(ngModel)]="searchQuery" name="search" minlength="3" autocomplete="off" [placeholder]="\'Search\'" (keyup.esc)="resetSearch()" (keyup.enter)="doSearch()" (click)="setFocus()">\n        </div>\n        <button mat-stroked-button class="kui-fulltext-search-button-mobile suffix-mobile" (click)="doSearch()" type="submit">\n            Search\n        </button>\n    </div>\n    \x3c!-- *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** --\x3e\n\n</div>\n\n\x3c!-- full-text search menu - only for desktop/tablet versions --\x3e\n<ng-template #fulltextSearchMenu>\n\n    <div class="kui-search-menu" [class.with-project-filter]="projectfilter">\n        <div class="kui-menu-content">\n            <mat-list class="kui-previous-search-list">\n                <div *ngFor="let item of prevSearch | kuiReverse; let i=index">\n                    <mat-list-item *ngIf="i<10">\n                        <h4 mat-line (click)="doPrevSearch(item)" class="kui-previous-search-item">\n                            <div class="kui-project-filter-label" [class.not-empty]="item.projectIri" *ngIf="projectfilter && !error && projects?.length > 0">\n                                <span *ngIf="item.projectIri">{{item.projectLabel}}</span>\n                            </div>\n                            <div class="kui-previous-search-query" [class.fix-width]="projectfilter">\n                                {{item.query}}\n                            </div>\n                        </h4>\n                        <button mat-icon-button (click)="resetPrevSearch(item)">\n                            <mat-icon class="mat-list-close-icon" aria-label="close">close</mat-icon>\n                        </button>\n                    </mat-list-item>\n                </div>\n            </mat-list>\n        </div>\n\n        <div class="kui-menu-action" *ngIf="prevSearch">\n            <mat-divider></mat-divider>\n            <button mat-button color="primary" class="center" (click)="resetPrevSearch()">Clear list\n            </button>\n        </div>\n    </div>\n\n</ng-template>\n',styles:["input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.center{text-align:center}.kui-fulltext-search-panel{border-radius:4px;display:flex;height:40px;position:relative;width:480px;z-index:100;background-color:#f9f9f9}.kui-fulltext-search-panel.active{box-shadow:0 1px 3px rgba(0,0,0,.5)}.kui-fulltext-search-panel.with-project-filter{width:calc(480px + 160px)}.kui-fulltext-search-panel .kui-project-filter-button{font-size:inherit;overflow:hidden;text-overflow:ellipsis;width:160px;margin:1px;border-radius:4px 0 0 4px}.kui-fulltext-search-panel .kui-fulltext-search{background-color:#f9f9f9;border-radius:4px;display:inline-flex;position:relative;z-index:10}.kui-fulltext-search-panel .kui-fulltext-search.with-project-filter{width:calc(480px + 160px);border-top-left-radius:0;border-bottom-left-radius:0}.kui-fulltext-search-panel .kui-fulltext-search .kui-fulltext-search-field{flex:1;width:calc(480px - 40px);margin:1px}.kui-fulltext-search-panel .kui-fulltext-search .kui-fulltext-search-field .kui-fulltext-search-input{border-style:none;font-size:14pt;height:38px;position:absolute;padding-left:12px;width:calc(100% - 40px)}.kui-fulltext-search-panel .kui-fulltext-search .kui-fulltext-search-field .kui-fulltext-search-input.with-project-filter{width:calc(100% - 40px - 160px)}.kui-fulltext-search-panel .kui-fulltext-search .kui-fulltext-search-field .kui-fulltext-search-input:active,.kui-fulltext-search-panel .kui-fulltext-search .kui-fulltext-search-field .kui-fulltext-search-input:focus{outline:0}.kui-fulltext-search-panel .kui-fulltext-search .kui-fulltext-search-button{background-color:#fff}.kui-fulltext-search-panel .kui-fulltext-search .suffix{margin:1px 0 1px -3px;border-radius:0 4px 4px 0}.kui-fulltext-search-panel .kui-fulltext-search .prefix{margin:1px 0 1px 3px;border-radius:4px 0 0 4px}.kui-fulltext-search-panel .kui-fulltext-search .prefix,.kui-fulltext-search-panel .kui-fulltext-search .suffix{border-style:none;color:rgba(41,41,41,.4);cursor:pointer;height:38px;outline:0;position:relative;width:39px}.kui-fulltext-search-panel .kui-fulltext-search .prefix.disabled,.kui-fulltext-search-panel .kui-fulltext-search .suffix.disabled{cursor:auto}.kui-fulltext-search-panel .kui-fulltext-search .prefix:active,.kui-fulltext-search-panel .kui-fulltext-search .suffix:active{color:#515151}.kui-search-menu{height:100%}.kui-search-menu .kui-menu-content{display:block}.kui-search-menu .kui-menu-content .mat-list{padding-bottom:8px}.kui-search-menu .kui-menu-content .mat-list .kui-previous-search-query{overflow:hidden;text-overflow:ellipsis}.kui-search-menu .kui-menu-content .mat-list .kui-previous-search-query.fix-width{width:calc(100% - 160px)}.kui-project-filter-menu{width:160px}.kui-project-filter-menu .mat-menu-item{text-transform:capitalize}@media (min-width:576px){.kui-fulltext-search-mobile,.kui-fulltext-search-mobile.with-project-filter,.kui-project-filter-mobile{display:none}}@media (max-width:576px){.kui-fulltext-search,.kui-project-filter{display:none}.kui-fulltext-search.with-project-filter{display:none!important}.kui-search-menu{display:none}.kui-search-menu.with-project-filter{display:none!important}.kui-fulltext-search-panel{height:100vh!important;background-color:rgba(220,218,218,.9);position:relative;width:100%!important;z-index:100;display:block;border-radius:0}.kui-fulltext-search-panel.with-project-filter{width:100%!important}.kui-fulltext-search-panel .kui-project-filter-mobile{height:54px;margin:0 2% 5%;padding-top:3%}.kui-fulltext-search-panel .kui-project-filter-mobile.mat-stroked-button{padding:0}.kui-fulltext-search-panel .kui-project-filter-mobile .kui-project-filter-button-mobile{width:calc(100% - 16px);margin:8px;height:100%;background-color:#b8b8b8;cursor:pointer}.kui-fulltext-search-panel .kui-project-filter-mobile .kui-project-filter-menu-mobile{width:calc(100% - 16px)!important;margin:0 8px;height:100%!important}.kui-fulltext-search-panel .kui-fulltext-search-mobile{display:flex;height:64px;margin-top:5%;margin-right:4%;margin-left:4%}.kui-fulltext-search-panel .kui-fulltext-search-mobile .kui-fulltext-search-field-mobile{width:80%;margin-right:2px}.kui-fulltext-search-panel .kui-fulltext-search-mobile .kui-fulltext-search-field-mobile .kui-fulltext-search-input-mobile{width:72%;height:64px;font-size:14pt;position:absolute;padding-left:12px;border-radius:5px;border:.6px solid #b8b8b8}.kui-fulltext-search-panel .kui-fulltext-search-mobile .kui-fulltext-search-field-mobile .kui-fulltext-search-input-mobile:active,.kui-fulltext-search-panel .kui-fulltext-search-mobile .kui-fulltext-search-field-mobile .kui-fulltext-search-input-mobile:focus{outline:0}.kui-fulltext-search-panel .kui-fulltext-search-mobile .kui-fulltext-search-button-mobile{background-color:#fff;width:20%;height:64px;padding:0;margin-left:2px;border-radius:5px;border:.8px solid #b8b8b8}.kui-fulltext-search-panel .kui-fulltext-search-mobile .suffix{margin:1px 0 1px -3px;border-radius:0 4px 4px 0}.kui-fulltext-search-panel .kui-fulltext-search-mobile .prefix,.kui-fulltext-search-panel .kui-fulltext-search-mobile .suffix{border-style:none;color:rgba(41,41,41,.4);cursor:pointer;height:100%;outline:0;position:relative;width:20%}.kui-fulltext-search-panel .kui-fulltext-search-mobile .prefix.disabled,.kui-fulltext-search-panel .kui-fulltext-search-mobile .suffix.disabled{cursor:auto}.kui-fulltext-search-panel .kui-fulltext-search-mobile .prefix:active,.kui-fulltext-search-panel .kui-fulltext-search-mobile .suffix:active{color:#515151}::ng-deep .cdk-overlay-pane .mat-menu-panel{box-shadow:none}::ng-deep .cdk-overlay-pane .mat-select-panel-wrap{margin-top:20%}::ng-deep .cdk-overlay-pane .mat-select-panel-wrap .mat-select-panel{max-height:100%!important}}",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%;position:relative;min-height:320px;height:100%}.kui-form-content .kui-form-action{position:absolute;bottom:0;width:100%;display:inline-flex}.kui-form-content .kui-form-expert-search{bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}.mat-datepicker-content .mat-calendar{height:auto!important}@media (max-width:1200px) and (min-width:768px){.kui-fulltext-search.input-field input{width:calc(360px - 80px)}.kui-fulltext-search,.kui-menu.extended-search{width:360px}}@media (max-width:768px) and (min-width:576px){.kui-fulltext-search-panel{width:360px}.kui-fulltext-search-panel.with-project-filter{width:calc(360px + 160px)}.kui-fulltext-search,.kui-menu.extended-search{width:calc(360px - 160px)}.kui-fulltext-search.with-project-filter,.kui-menu.extended-search.with-project-filter{width:360px!important}}']}),P("design:paramtypes",[t.Overlay,o.Router,r.ViewContainerRef,a.ProjectsService])],e)}(),F=function(){function e(e,t){this._overlay=e,this._viewContainerRef=t,this.route="/search",this.projectfilter=!1,this.advanced=!1,this.expert=!1}return e.prototype.openPanelWithBackdrop=function(e){var r=this;this.showAdvanced="advanced"===e;var o=new t.OverlayConfig({hasBackdrop:!0,backdropClass:"cdk-overlay-transparent-backdrop",positionStrategy:this.getOverlayPosition(),scrollStrategy:this._overlay.scrollStrategies.block()});this.overlayRef=this._overlay.create(o),this.overlayRef.attach(new i.TemplatePortal(this.searchMenu,this._viewContainerRef)),this.overlayRef.backdropClick().subscribe(function(){r.overlayRef.detach()})},e.prototype.getOverlayPosition=function(){var e=[new t.ConnectionPositionPair({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),new t.ConnectionPositionPair({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"})];return this._overlay.position().flexibleConnectedTo(this.searchPanel).withPositions(e).withLockedPosition(!1)},e.prototype.closeMenu=function(){this.overlayRef.detach()},I([r.Input(),P("design:type",String)],e.prototype,"route",void 0),I([r.Input(),P("design:type",Boolean)],e.prototype,"projectfilter",void 0),I([r.Input(),P("design:type",String)],e.prototype,"filterbyproject",void 0),I([r.Input(),P("design:type",Boolean)],e.prototype,"advanced",void 0),I([r.Input(),P("design:type",Boolean)],e.prototype,"expert",void 0),I([r.ViewChild("fullSearchPanel",{"static":!1}),P("design:type",r.ElementRef)],e.prototype,"searchPanel",void 0),I([r.ViewChild("searchMenu",{"static":!1}),P("design:type",r.TemplateRef)],e.prototype,"searchMenu",void 0),e=I([r.Component({selector:"kui-search-panel",template:'<div class="kui-search-panel" #fullSearchPanel cdkOverlayOrigin>\n\n    \x3c!-- DESKTOP VERSION --\x3e\n    <kui-fulltext-search class="kui-fulltext-search" [route]="route" [projectfilter]="projectfilter" [filterbyproject]="filterbyproject">\n    </kui-fulltext-search>\n\n    \x3c!-- advanced search button: if advanced === true --\x3e\n    <button mat-button *ngIf="advanced && !expert" color="primary" (click)="openPanelWithBackdrop(\'advanced\')">advanced</button>\n\n    \x3c!-- expert search button: if expert === true --\x3e\n    <button mat-button *ngIf="!advanced && expert" color="primary" (click)="openPanelWithBackdrop(\'expert\')">expert</button>\n\n    \x3c!-- button to select advanced or expert search: if advanced AND expert === true; open menu to select --\x3e\n    <button mat-button *ngIf="advanced && expert" [matMenuTriggerFor]="selectSearch">\n        <mat-icon>filter_list</mat-icon>\n    </button>\n    <mat-menu #selectSearch="matMenu">\n        <button mat-menu-item (click)="openPanelWithBackdrop(\'advanced\')">\n            <span>Advanced search</span>\n        </button>\n        <button mat-menu-item (click)="openPanelWithBackdrop(\'expert\')">\n            <span>Expert search</span>\n        </button>\n    </mat-menu>\n\n</div>\n\n\x3c!-- full-text search menu --\x3e\n<ng-template #searchMenu>\n    <div class="kui-search-menu with-extended-search" [class.with-project-filter]="projectfilter">\n        <div class="kui-menu-header">\n            <span class="kui-menu-title">\n                <h4 *ngIf="showAdvanced">Advanced search</h4>\n                <h4 *ngIf="!showAdvanced">Expert search</h4>\n            </span>\n            <span class="fill-remaining-space"></span>\n            <span class="kui-menu-close">\n                <button mat-icon-button (click)="closeMenu()">\n                    <mat-icon>close</mat-icon>\n                </button>\n            </span>\n        </div>\n        <div class="kui-menu-content">\n            <kui-extended-search *ngIf="showAdvanced" [route]="route" (toggleExtendedSearchForm)="closeMenu()">\n            </kui-extended-search>\n            <kui-expert-search *ngIf="!showAdvanced" [route]="route" (toggleExpertSearchForm)="closeMenu()">\n            </kui-expert-search>\n        </div>\n    </div>\n</ng-template>\n',styles:[".advanced-btn{margin-left:10px}.kui-search-panel{display:flex;position:relative;z-index:100}.extended-search-box{margin:12px}@media (max-width:576px){.kui-fulltext-search{height:100%;width:100%!important}}",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%;position:relative;min-height:320px;height:100%}.kui-form-content .kui-form-action{position:absolute;bottom:0;width:100%;display:inline-flex}.kui-form-content .kui-form-expert-search{bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}.mat-datepicker-content .mat-calendar{height:auto!important}@media (max-width:1200px) and (min-width:768px){.kui-fulltext-search.input-field input{width:calc(360px - 80px)}.kui-fulltext-search,.kui-menu.extended-search{width:360px}}@media (max-width:768px) and (min-width:576px){.kui-fulltext-search-panel{width:360px}.kui-fulltext-search-panel.with-project-filter{width:calc(360px + 160px)}.kui-fulltext-search,.kui-menu.extended-search{width:calc(360px - 160px)}.kui-fulltext-search.with-project-filter,.kui-menu.extended-search.with-project-filter{width:360px!important}}']}),P("design:paramtypes",[t.Overlay,r.ViewContainerRef])],e)}(),R=Promise.resolve(null),M=function(){function e(e){this.fb=e,this.resourceClassSelectedEvent=new r.EventEmitter}return Object.defineProperty(e.prototype,"resourceClasses",{get:function(){return this._resourceClasses},set:function(e){this.resourceClassSelected=undefined,this._resourceClasses=e},enumerable:!0,configurable:!0}),e.prototype.getResourceClassSelected=function(){return this.resourceClassSelected!==undefined&&null!==this.resourceClassSelected&&this.resourceClassSelected},e.prototype.initForm=function(){var e=this;this.form=this.fb.group({resourceClass:[null]}),this.form.valueChanges.subscribe(function(t){e.resourceClassSelected=t.resourceClass,e.resourceClassSelectedEvent.emit(e.resourceClassSelected)})},e.prototype.ngOnInit=function(){this.initForm(),this.formGroup.addControl("resourceClass",this.form)},e.prototype.ngOnChanges=function(){var e=this;this.form!==undefined&&R.then(function(){e.formGroup.removeControl("resourceClass"),e.initForm(),e.formGroup.addControl("resourceClass",e.form)})},I([r.Input(),P("design:type",s.FormGroup)],e.prototype,"formGroup",void 0),I([r.Input(),P("design:type",Array),P("design:paramtypes",[Array])],e.prototype,"resourceClasses",null),I([r.Output(),P("design:type",Object)],e.prototype,"resourceClassSelectedEvent",void 0),e=I([r.Component({selector:"kui-select-resource-class",template:'<mat-form-field *ngIf="resourceClasses.length > 0" class="large-field">\n  <mat-select placeholder="Select a Resource Class (optional)" [formControl]="form.controls[\'resourceClass\']">\n    <mat-option [value]="null">no selection</mat-option>\n    \x3c!-- undo selection of a resource class --\x3e\n    <mat-option *ngFor="let resourceClass of resourceClasses" [value]="resourceClass.id">{{ resourceClass.label }}\n    </mat-option>\n  </mat-select>\n</mat-form-field>\n',styles:["",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%;position:relative;min-height:320px;height:100%}.kui-form-content .kui-form-action{position:absolute;bottom:0;width:100%;display:inline-flex}.kui-form-content .kui-form-expert-search{bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}.mat-datepicker-content .mat-calendar{height:auto!important}@media (max-width:1200px) and (min-width:768px){.kui-fulltext-search.input-field input{width:calc(360px - 80px)}.kui-fulltext-search,.kui-menu.extended-search{width:360px}}@media (max-width:768px) and (min-width:576px){.kui-fulltext-search-panel{width:360px}.kui-fulltext-search-panel.with-project-filter{width:calc(360px + 160px)}.kui-fulltext-search,.kui-menu.extended-search{width:calc(360px - 160px)}.kui-fulltext-search.with-project-filter,.kui-menu.extended-search.with-project-filter{width:360px!important}}']}),V(0,r.Inject(s.FormBuilder)),P("design:paramtypes",[s.FormBuilder])],e)}(),q=function(){function e(e,t,i,o,n){this.fb=e,this._route=t,this._router=i,this._cacheService=o,this._gravSearchService=n,this.toggleExtendedSearchForm=new r.EventEmitter,this.gravsearch=new r.EventEmitter,this.ontologies=[],this.activeProperties=[],this.resourceClasses=[],this.result=new a.ReadResourcesSequence([],0),this.formValid=!1}return e.prototype.ngOnInit=function(){var e=this;this.form=this.fb.group({}),this.form.statusChanges.subscribe(function(t){e.formValid=e.validateForm()}),this.initializeOntologies()},e.prototype.addProperty=function(){this.activeProperties.push(!0)},e.prototype.removeProperty=function(){this.activeProperties.splice(-1,1)},e.prototype.initializeOntologies=function(){var e=this;this._cacheService.getOntologiesMetadata().subscribe(function(t){e.ontologies=t})},e.prototype.getResourceClassesAndPropertiesForOntology=function(e){var t=this;this.activeResourceClass=undefined,this.activeProperties=[],this.activeOntology=e,this._cacheService.getEntityDefinitionsForOntologies([e]).subscribe(function(e){t.resourceClasses=e.getResourceClassesAsArray(!0),t.properties=e.getProperties()})},e.prototype.getPropertiesForResourceClass=function(e){var t=this;this.activeProperties=[],null===e?this.getResourceClassesAndPropertiesForOntology(this.activeOntology):this._cacheService.getResourceClassDefinitions([e]).subscribe(function(i){t.properties=i.getProperties(),t.activeResourceClass=i.getResourceClasses()[e]})},e.prototype.validateForm=function(){return this.form.valid&&(this.propertyComponents.length>0||this.resourceClassComponent!==undefined&&!1!==this.resourceClassComponent.getResourceClassSelected())},e.prototype.resetForm=function(){this.activeOntology!==undefined&&this.getResourceClassesAndPropertiesForOntology(this.activeOntology)},e.prototype.submit=function(){if(this.formValid){var e,t=this.resourceClassComponent.getResourceClassSelected();!1!==t&&(e=t);var i=this.propertyComponents.map(function(e){return e.getPropertySelectedWithValue()}),r=this._gravSearchService.createGravsearchQuery(i,e,0);this.route?this._router.navigate([this.route+"/extended/",r],{relativeTo:this._route}):this.gravsearch.emit(r),this.toggleExtendedSearchForm.emit(!0)}},I([r.Input(),P("design:type",Object)],e.prototype,"route",void 0),I([r.Output(),P("design:type",Object)],e.prototype,"toggleExtendedSearchForm",void 0),I([r.Output(),P("design:type",Object)],e.prototype,"gravsearch",void 0),I([r.ViewChild("resourceClass",{"static":!1}),P("design:type",M)],e.prototype,"resourceClassComponent",void 0),I([r.ViewChildren("property"),P("design:type",r.QueryList)],e.prototype,"propertyComponents",void 0),e=I([r.Component({selector:"kui-extended-search",template:'<form [formGroup]="form" (ngSubmit)="submit()" class="kui-form-content">\n\n  <div>\n    <kui-select-ontology *ngIf="ontologies.length > 0" [formGroup]="form" [ontologies]="ontologies"\n                         (ontologySelected)="getResourceClassesAndPropertiesForOntology($event)"></kui-select-ontology>\n  </div>\n\n  <div class="select-resource-class" *ngIf="resourceClasses?.length > 0">\n    <kui-select-resource-class #resourceClass [formGroup]="form" [resourceClasses]="resourceClasses"\n                               (resourceClassSelectedEvent)="getPropertiesForResourceClass($event)">\n    </kui-select-resource-class>\n  </div>\n\n  <div class="select-property" *ngIf="properties !== undefined">\n    <div *ngFor="let prop of activeProperties; let i = index">\n\n      <kui-select-property #property [activeResourceClass]="activeResourceClass" [formGroup]="form" [index]="i"\n                           [properties]="properties"></kui-select-property>\n\n    </div>\n  </div>\n\n\n  <div class="select-property buttons">\n    <button mat-mini-fab class="property-button add-property-button" color="primary" type="button"\n            (click)="addProperty()" [disabled]="activeOntology === undefined || activeProperties.length >= 4">\n      <mat-icon aria-label="add a property">add</mat-icon>\n    </button>\n\n    <button mat-mini-fab class="property-button remove-property-button" color="primary" type="button"\n            (click)="removeProperty()" [disabled]="activeProperties.length == 0">\n      <mat-icon aria-label="remove property">remove</mat-icon>\n    </button>\n  </div>\n\n  \x3c!--  <div>\n    <button mat-icon-button type="button" (click)="resetForm()" [disabled]="this.activeOntology === undefined">\n      <mat-icon aria-label="reset query form">clear</mat-icon>\n    </button>\n\n    <button mat-icon-button type="submit" [disabled]="!formValid">\n      <mat-icon aria-label="submit query">send</mat-icon>\n    </button>\n  </div> --\x3e\n\n  <div class="kui-form-action">\n    <button class="reset" mat-button type="button" (click)="resetForm()" [disabled]="this.activeOntology === undefined">\n      Reset\n    </button>\n    <span class="fill-remaining-space"></span>\n    <button class="extended-search-button" mat-raised-button color="primary" type="submit" [disabled]="!formValid">\n      Search\n    </button>\n  </div>\n\n</form>\n',styles:[".select-resource-class{margin-left:8px}.select-property{margin-left:16px}.select-property .property-button{margin:0 12px 64px 0}",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%;position:relative;min-height:320px;height:100%}.kui-form-content .kui-form-action{position:absolute;bottom:0;width:100%;display:inline-flex}.kui-form-content .kui-form-expert-search{bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}.mat-datepicker-content .mat-calendar{height:auto!important}@media (max-width:1200px) and (min-width:768px){.kui-fulltext-search.input-field input{width:calc(360px - 80px)}.kui-fulltext-search,.kui-menu.extended-search{width:360px}}@media (max-width:768px) and (min-width:576px){.kui-fulltext-search-panel{width:360px}.kui-fulltext-search-panel.with-project-filter{width:calc(360px + 160px)}.kui-fulltext-search,.kui-menu.extended-search{width:calc(360px - 160px)}.kui-fulltext-search.with-project-filter,.kui-menu.extended-search.with-project-filter{width:360px!important}}']}),V(0,r.Inject(s.FormBuilder)),P("design:paramtypes",[s.FormBuilder,o.ActivatedRoute,o.Router,a.OntologyCacheService,a.GravsearchGenerationService])],e)}(),_=function(){function e(e,t,i,o,a,n){this.fb=e,this._route=t,this._router=i,this._searchService=o,this._searchParamsService=a,this.config=n,this.gravsearch=new r.EventEmitter,this.toggleExpertSearchForm=new r.EventEmitter}return e.prototype.ngOnInit=function(){this.initForm()},e.prototype.initForm=function(){this.expertSearchForm=this.fb.group({gravquery:["\nPREFIX knora-api: <http://api.knora.org/ontology/knora-api/simple/v2#>\nPREFIX incunabula: <"+this.config.ontologyIRI+"/ontology/0803/incunabula/simple/v2#>\n\nCONSTRUCT {\n    ?book knora-api:isMainResource true .\n    ?book incunabula:title ?title .\n\n} WHERE {\n    ?book a incunabula:book .\n    ?book incunabula:title ?title .\n}\n",s.Validators.required]})},e.prototype.submitQuery=function(){var e=this.generateGravsearch(0);this.route?this._router.navigate([this.route+"/extended/",e],{relativeTo:this._route}):this.gravsearch.emit(e),this.toggleExpertSearchForm.emit(!0)},e.prototype.generateGravsearch=function(e){void 0===e&&(e=0);var t=this.expertSearchForm.controls.gravquery.value,i="\n         OFFSET "+e+"\n         ";return 0===e&&this._searchParamsService.changeSearchParamsMsg(new a.ExtendedSearchParams(function(e){return t+"\n             OFFSET "+e+"\n             "})),t+i},e.prototype.resetForm=function(){this.initForm()},I([r.Input(),P("design:type",Object)],e.prototype,"route",void 0),I([r.Output(),P("design:type",Object)],e.prototype,"gravsearch",void 0),I([r.Output(),P("design:type",Object)],e.prototype,"toggleExpertSearchForm",void 0),e=I([r.Component({selector:"kui-expert-search",template:'<div class="expert-search-container">\n  \x3c!-- The integration in container like the accordeon expansion panel should be handled on app side\n  <mat-expansion-panel [expanded]="true">\n    <mat-expansion-panel-header>\n      <mat-panel-title>\n        Expert search\n      </mat-panel-title>\n      <mat-panel-description> </mat-panel-description>\n    </mat-expansion-panel-header>\n  --\x3e\n  <form [formGroup]="expertSearchForm" class="expert-search-form kui-form-content">\n    <mat-form-field class="textarea-field large-field">\n      <textarea matInput formControlName="gravquery" matTextareaAutosize matAutosizeMinRows="12" matAutosizeMaxRows="24"\n                placeholder="Write your gravsearch query"></textarea>\n    </mat-form-field>\n\n    <div class="kui-form-action">\n      <button class="reset" mat-button type="button" (click)="resetForm()">\n        Reset\n      </button>\n      <span class="fill-remaining-space"></span>\n      <button mat-raised-button color="primary" type="submit" [disabled]="!expertSearchForm.valid"\n              (click)="submitQuery()">\n        Search\n      </button>\n    </div>\n\n  </form>\n\n  \x3c!-- </mat-expansion-panel> --\x3e\n</div>\n',styles:['.expert-search-container{min-height:100%}.expert-search-container .expert-search-form{min-width:150px;width:100%;margin:auto}.expert-search-container .expert-search-form .textarea-field{width:100%;display:block;margin-bottom:24px}.expert-search-container .expert-search-form .form-panel{width:100%}.mat-input-element{font-family:"Courier New",Courier,monospace}.form-content{margin:24px auto;width:472px}.form-content .large-field{min-width:472px}','input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%;position:relative;min-height:320px;height:100%}.kui-form-content .kui-form-action{position:absolute;bottom:0;width:100%;display:inline-flex}.kui-form-content .kui-form-expert-search{bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}.mat-datepicker-content .mat-calendar{height:auto!important}@media (max-width:1200px) and (min-width:768px){.kui-fulltext-search.input-field input{width:calc(360px - 80px)}.kui-fulltext-search,.kui-menu.extended-search{width:360px}}@media (max-width:768px) and (min-width:576px){.kui-fulltext-search-panel{width:360px}.kui-fulltext-search-panel.with-project-filter{width:calc(360px + 160px)}.kui-fulltext-search,.kui-menu.extended-search{width:calc(360px - 160px)}.kui-fulltext-search.with-project-filter,.kui-menu.extended-search.with-project-filter{width:360px!important}}']}),V(5,r.Inject(a.KuiCoreConfigToken)),P("design:paramtypes",[s.FormBuilder,o.ActivatedRoute,o.Router,a.SearchService,a.SearchParamsService,Object])],e)}(),E=function(){function e(e){this.fb=e,this.ontologySelected=new r.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.form=this.fb.group({ontology:[null,s.Validators.required]}),this.form.valueChanges.subscribe(function(t){e.ontologySelected.emit(t.ontology)}),this.formGroup.addControl("ontology",this.form)},I([r.Input(),P("design:type",s.FormGroup)],e.prototype,"formGroup",void 0),I([r.Input(),P("design:type",Array)],e.prototype,"ontologies",void 0),I([r.Output(),P("design:type",Object)],e.prototype,"ontologySelected",void 0),e=I([r.Component({selector:"kui-select-ontology",template:'<mat-form-field *ngIf="ontologies.length > 0" class="large-field">\n  <mat-select placeholder="Select an Ontology" [formControl]="form.controls[\'ontology\']">\n    <mat-option *ngFor="let onto of ontologies" [value]="onto.id">{{ onto.label }}</mat-option>\n  </mat-select>\n</mat-form-field>\n',styles:["",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%;position:relative;min-height:320px;height:100%}.kui-form-content .kui-form-action{position:absolute;bottom:0;width:100%;display:inline-flex}.kui-form-content .kui-form-expert-search{bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}.mat-datepicker-content .mat-calendar{height:auto!important}@media (max-width:1200px) and (min-width:768px){.kui-fulltext-search.input-field input{width:calc(360px - 80px)}.kui-fulltext-search,.kui-menu.extended-search{width:360px}}@media (max-width:768px) and (min-width:576px){.kui-fulltext-search-panel{width:360px}.kui-fulltext-search-panel.with-project-filter{width:calc(360px + 160px)}.kui-fulltext-search,.kui-menu.extended-search{width:calc(360px - 160px)}.kui-fulltext-search.with-project-filter,.kui-menu.extended-search.with-project-filter{width:360px!important}}']}),V(0,r.Inject(s.FormBuilder)),P("design:paramtypes",[s.FormBuilder])],e)}(),G=Promise.resolve(null),T=function(){function e(e){this.fb=e,this.KnoraConstants=a.KnoraConstants,this.comparisonOperators=[]}return Object.defineProperty(e.prototype,"property",{get:function(){return this._property},set:function(e){this.comparisonOperatorSelected=undefined,this._property=e,this.resetComparisonOperators()},enumerable:!0,configurable:!0}),e.prototype.resetComparisonOperators=function(){switch(this._property.isLinkProperty?this.propertyValueType=a.KnoraConstants.Resource:this.propertyValueType=this._property.objectType,this.propertyValueType){case a.KnoraConstants.TextValue:this.comparisonOperators=[new a.Like,new a.Match,new a.Equals,new a.NotEquals,new a.Exists];break;case a.KnoraConstants.BooleanValue:case a.KnoraConstants.Resource:case a.KnoraConstants.UriValue:this.comparisonOperators=[new a.Equals,new a.NotEquals,new a.Exists];break;case a.KnoraConstants.IntValue:case a.KnoraConstants.DecimalValue:case a.KnoraConstants.DateValue:this.comparisonOperators=[new a.Equals,new a.NotEquals,new a.LessThan,new a.LessThanEquals,new a.GreaterThan,new a.GreaterThanEquals,new a.Exists];break;case a.KnoraConstants.ListValue:this.comparisonOperators=[new a.Equals,new a.NotEquals,new a.Exists];break;case a.KnoraConstants.GeomValue:case a.KnoraConstants.FileValue:case a.KnoraConstants.AudioFileValue:case a.KnoraConstants.StillImageFileValue:case a.KnoraConstants.DDDFileValue:case a.KnoraConstants.MovingImageFileValue:case a.KnoraConstants.TextFileValue:case a.KnoraConstants.ColorValue:case a.KnoraConstants.IntervalValue:this.comparisonOperators=[new a.Exists];break;default:console.log("ERROR: Unsupported value type "+this._property.objectType)}},e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(){var e=this;this.form=this.fb.group({comparisonOperator:[null,s.Validators.required]}),this.form.valueChanges.subscribe(function(t){e.comparisonOperatorSelected=t.comparisonOperator}),G.then(function(){e.formGroup.removeControl("comparisonOperator"),e.formGroup.addControl("comparisonOperator",e.form)})},e.prototype.getComparisonOperatorAndValueLiteralForProperty=function(){var e;return"Exists"!==this.comparisonOperatorSelected.getClassName()&&(e=this.propertyValueComponent.getValue()),new a.ComparisonOperatorAndValue(this.comparisonOperatorSelected,e)},I([r.Input(),P("design:type",s.FormGroup)],e.prototype,"formGroup",void 0),I([r.ViewChild("propertyValue",{"static":!1}),P("design:type",Object)],e.prototype,"propertyValueComponent",void 0),I([r.Input(),P("design:type",a.Property),P("design:paramtypes",[a.Property])],e.prototype,"property",null),e=I([r.Component({selector:"kui-specify-property-value",template:'<mat-form-field class="search-operator-field small-field" *ngIf="comparisonOperators?.length > 0">\n  <mat-select placeholder="Comparison Operator" [formControl]="form.controls[\'comparisonOperator\']">\n    <mat-option *ngFor="let compOp of comparisonOperators" [value]="compOp">{{ compOp.label }}</mat-option>\n  </mat-select>\n</mat-form-field>\n\n\x3c!-- select apt component for value specification using a switch case statement--\x3e\n<span *ngIf="comparisonOperatorSelected !== undefined && comparisonOperatorSelected !== null && comparisonOperatorSelected.getClassName() != \'Exists\'"\n      [ngSwitch]="propertyValueType">\n  <boolean-value #propertyValue [formGroup]="form" *ngSwitchCase="KnoraConstants.BooleanValue"></boolean-value>\n  <date-value #propertyValue [formGroup]="form" *ngSwitchCase="KnoraConstants.DateValue"></date-value>\n  <decimal-value #propertyValue [formGroup]="form" *ngSwitchCase="KnoraConstants.DecimalValue"></decimal-value>\n  <integer-value #propertyValue [formGroup]="form" *ngSwitchCase="KnoraConstants.IntValue"></integer-value>\n  <link-value #propertyValue [formGroup]="form" [restrictResourceClass]="property.objectType"\n              *ngSwitchCase="KnoraConstants.Resource"></link-value>\n  <text-value #propertyValue [formGroup]="form" *ngSwitchCase="KnoraConstants.TextValue"></text-value>\n  <uri-value #propertyValue [formGroup]="form" *ngSwitchCase="KnoraConstants.UriValue"></uri-value>\n  <list-value #propertyValue [formGroup]="form" [property]="property" *ngSwitchCase="KnoraConstants.ListValue">\n  </list-value>\n\n  \x3c!-- TODO: Resource: handle linking properties with target class restriction: access property member to get objectClass via property() getter method --\x3e\n  <span *ngSwitchDefault="">Not supported {{propertyValueType}}</span>\n</span>\n',styles:[".search-operator-field{margin-right:8px}",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%;position:relative;min-height:320px;height:100%}.kui-form-content .kui-form-action{position:absolute;bottom:0;width:100%;display:inline-flex}.kui-form-content .kui-form-expert-search{bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}.mat-datepicker-content .mat-calendar{height:auto!important}@media (max-width:1200px) and (min-width:768px){.kui-fulltext-search.input-field input{width:calc(360px - 80px)}.kui-fulltext-search,.kui-menu.extended-search{width:360px}}@media (max-width:768px) and (min-width:576px){.kui-fulltext-search-panel{width:360px}.kui-fulltext-search-panel.with-project-filter{width:calc(360px + 160px)}.kui-fulltext-search,.kui-menu.extended-search{width:calc(360px - 160px)}.kui-fulltext-search.with-project-filter,.kui-menu.extended-search.with-project-filter{width:360px!important}}']}),V(0,r.Inject(s.FormBuilder)),P("design:paramtypes",[s.FormBuilder])],e)}(),B=Promise.resolve(null),A=function(){function e(e){this.fb=e}return Object.defineProperty(e.prototype,"properties",{get:function(){return this._properties},set:function(e){this.propertySelected=undefined,this._properties=e,this.updatePropertiesArray()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeResourceClass",{set:function(e){this._activeResourceClass=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.form=this.fb.group({property:[null,s.Validators.required],isSortCriterion:[!1,s.Validators.required]}),this.form.valueChanges.subscribe(function(t){var i=t.property;e.propertySelected=e._properties[i]}),B.then(function(){e.propIndex="property"+e.index,e.formGroup.addControl(e.propIndex,e.form)})},e.prototype.ngOnDestroy=function(){var e=this;B.then(function(){e.formGroup.removeControl(e.propIndex)})},e.prototype.sortCriterion=function(){var e=this;return this._activeResourceClass!==undefined&&this.propertySelected!==undefined&&!this.propertySelected.isLinkProperty&&1===this._activeResourceClass.cardinalities.filter(function(t){return t.property===e.propertySelected.id&&1===t.value&&(t.occurrence===a.CardinalityOccurrence.card||t.occurrence===a.CardinalityOccurrence.maxCard)}).length},e.prototype.updatePropertiesArray=function(){var e=[];for(var t in this._properties)if(this._properties.hasOwnProperty(t)){var i=this._properties[t];i.isEditable&&!i.isLinkValueProperty&&e.push(this._properties[t])}e.sort(a.OntologyInformation.sortFunc),this.propertiesAsArray=e},e.prototype.getPropertySelectedWithValue=function(){var e=this.specifyPropertyValue.getComparisonOperatorAndValueLiteralForProperty(),t=!1;return this.propertySelected.isLinkProperty||(t=this.form.value.isSortCriterion),new a.PropertyWithValue(this.propertySelected,e,t)},I([r.Input(),P("design:type",s.FormGroup)],e.prototype,"formGroup",void 0),I([r.Input(),P("design:type",Number)],e.prototype,"index",void 0),I([r.Input(),P("design:type",a.Properties),P("design:paramtypes",[a.Properties])],e.prototype,"properties",null),I([r.Input(),P("design:type",a.ResourceClass),P("design:paramtypes",[a.ResourceClass])],e.prototype,"activeResourceClass",null),I([r.ViewChild("specifyPropertyValue",{"static":!1}),P("design:type",T)],e.prototype,"specifyPropertyValue",void 0),e=I([r.Component({selector:"kui-select-property",template:'<mat-form-field class="search-property-field medium-field" *ngIf="propertiesAsArray?.length > 0">\n  <mat-select placeholder="Select Properties" [formControl]="form.controls[\'property\']">\n    <mat-option *ngFor="let prop of propertiesAsArray" [value]="prop.id">{{ prop.label }}</mat-option>\n  </mat-select>\n</mat-form-field>\n\n<kui-specify-property-value #specifyPropertyValue [formGroup]="form" *ngIf="propertySelected !== undefined"\n                            [property]="propertySelected"></kui-specify-property-value>\n\n<mat-checkbox matTooltip="Sort criterion" *ngIf="propertySelected !== undefined && sortCriterion()"\n              [formControl]="form.controls[\'isSortCriterion\']"></mat-checkbox>\n',styles:[".search-property-field{margin-right:8px}",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%;position:relative;min-height:320px;height:100%}.kui-form-content .kui-form-action{position:absolute;bottom:0;width:100%;display:inline-flex}.kui-form-content .kui-form-expert-search{bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}.mat-datepicker-content .mat-calendar{height:auto!important}@media (max-width:1200px) and (min-width:768px){.kui-fulltext-search.input-field input{width:calc(360px - 80px)}.kui-fulltext-search,.kui-menu.extended-search{width:360px}}@media (max-width:768px) and (min-width:576px){.kui-fulltext-search-panel{width:360px}.kui-fulltext-search-panel.with-project-filter{width:calc(360px + 160px)}.kui-fulltext-search,.kui-menu.extended-search{width:calc(360px - 160px)}.kui-fulltext-search.with-project-filter,.kui-menu.extended-search.with-project-filter{width:360px!important}}']}),V(0,r.Inject(s.FormBuilder)),P("design:paramtypes",[s.FormBuilder])],e)}(),D=Promise.resolve(null),N=function(){function e(e){this.fb=e,this.type=a.KnoraConstants.BooleanValue}return e.prototype.ngOnInit=function(){var e=this;this.form=this.fb.group({booleanValue:[!1,s.Validators.compose([s.Validators.required])]}),D.then(function(){e.formGroup.addControl("propValue",e.form)})},e.prototype.ngOnDestroy=function(){var e=this;D.then(function(){e.formGroup.removeControl("propValue")})},e.prototype.getValue=function(){return new a.ValueLiteral(String(this.form.value.booleanValue),a.KnoraConstants.xsdBoolean)},I([r.Input(),P("design:type",s.FormGroup)],e.prototype,"formGroup",void 0),e=I([r.Component({selector:"boolean-value",template:"<mat-checkbox [formControl]=\"form.controls['booleanValue']\"> true</mat-checkbox>\n",styles:[""]}),V(0,r.Inject(s.FormBuilder)),P("design:paramtypes",[s.FormBuilder])],e)}(),K=function(){function e(e,t,i,r){this._calendar=e,this._dateAdapter=t,this._datepickerContent=i,this.fb=r,this.supportedCalendarFormats=["Gregorian","Julian"]}return e.prototype.ngOnInit=function(){var e=this;this._dateAdapter instanceof c.JDNConvertibleCalendarDateAdapter?this.activeFormat=this._dateAdapter.activeCalendar:console.log("date adapter is expected to be an instance of JDNConvertibleCalendarDateAdapter"),this.form=this.fb.group({calendar:[this.activeFormat,s.Validators.required]}),this.form.valueChanges.subscribe(function(t){e.convertDate(t.calendar)})},e.prototype.convertDate=function(e){if(this._dateAdapter instanceof c.JDNConvertibleCalendarDateAdapter){var t=this._dateAdapter.convertCalendar(this._calendar.activeDate,e);this._calendar.activeDate=t,this._datepickerContent.datepicker.select(t),this._calendar.updateTodaysDate()}else console.log("date adapter is expected to be an instance of JDNConvertibleCalendarDateAdapter")},e=I([r.Component({selector:"kui-calendar-header",template:'\n      <mat-select placeholder="Calendar Format" class="kui-calendar-header" [formControl]="form.controls[\'calendar\']">\n        <mat-option *ngFor="let cal of supportedCalendarFormats" [value]="cal">{{cal}}</mat-option>\n      </mat-select>\n      <mat-calendar-header></mat-calendar-header>\n    ',styles:[":host .mat-select.kui-calendar-header{margin:16px 16px 0!important;width:calc(100% - 32px)!important}"]}),V(0,r.Host()),V(3,r.Inject(s.FormBuilder)),P("design:paramtypes",[u.MatCalendar,l.DateAdapter,u.MatDatepickerContent,s.FormBuilder])],e)}(),L=Promise.resolve(null),z=function(){function e(e){this.fb=e,this.type=a.KnoraConstants.DateValue,this.headerComponent=K}return e.prototype.ngOnInit=function(){var e=this;this.form=this.fb.group({dateValue:[null,s.Validators.compose([s.Validators.required])]}),this.form.valueChanges.subscribe(function(e){}),L.then(function(){e.formGroup.addControl("propValue",e.form)})},e.prototype.ngOnDestroy=function(){var e=this;L.then(function(){e.formGroup.removeControl("propValue")})},e.prototype.getValue=function(){var e=this.form.value.dateValue,t=e.calendarName,i=e.toCalendarPeriod(),r=t.toUpperCase()+":"+i.periodStart.year+"-"+i.periodStart.month+"-"+i.periodStart.day+":"+i.periodEnd.year+"-"+i.periodEnd.month+"-"+i.periodEnd.day;return new a.ValueLiteral(String(r),a.KnoraConstants.dateSimple)},I([r.Input(),P("design:type",s.FormGroup)],e.prototype,"formGroup",void 0),e=I([r.Component({selector:"date-value",template:'<mat-form-field class="large-field">\n    <kuiJdnDatepicker>\n        <input matInput [matDatepicker]="picker" placeholder="Choose a date" [formControl]="form.controls[\'dateValue\']">\n        <mat-datepicker #picker [calendarHeaderComponent]="headerComponent"></mat-datepicker>\n    </kuiJdnDatepicker>\n    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>\n</mat-form-field>\n',styles:[".cdk-overlay-pane .mat-datepicker-content .mat-calendar{height:auto!important}",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%;position:relative;min-height:320px;height:100%}.kui-form-content .kui-form-action{position:absolute;bottom:0;width:100%;display:inline-flex}.kui-form-content .kui-form-expert-search{bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}.mat-datepicker-content .mat-calendar{height:auto!important}@media (max-width:1200px) and (min-width:768px){.kui-fulltext-search.input-field input{width:calc(360px - 80px)}.kui-fulltext-search,.kui-menu.extended-search{width:360px}}@media (max-width:768px) and (min-width:576px){.kui-fulltext-search-panel{width:360px}.kui-fulltext-search-panel.with-project-filter{width:calc(360px + 160px)}.kui-fulltext-search,.kui-menu.extended-search{width:calc(360px - 160px)}.kui-fulltext-search.with-project-filter,.kui-menu.extended-search.with-project-filter{width:360px!important}}']}),V(0,r.Inject(s.FormBuilder)),P("design:paramtypes",[s.FormBuilder])],e)}(),J=Promise.resolve(null),Q=function(){function e(e){this.fb=e,this.type=a.KnoraConstants.DecimalValue}return e.prototype.ngOnInit=function(){var e=this;this.form=this.fb.group({decimalValue:[null,s.Validators.compose([s.Validators.required])]}),J.then(function(){e.formGroup.addControl("propValue",e.form)})},e.prototype.ngOnDestroy=function(){var e=this;J.then(function(){e.formGroup.removeControl("propValue")})},e.prototype.getValue=function(){return new a.ValueLiteral(String(this.form.value.decimalValue),a.KnoraConstants.xsdDecimal)},I([r.Input(),P("design:type",s.FormGroup)],e.prototype,"formGroup",void 0),e=I([r.Component({selector:"decimal-value",template:'<mat-form-field class="large-field">\n    <input matInput [formControl]="form.controls[\'decimalValue\']" placeholder="Decimal value" value="" type="number">\n</mat-form-field>\n',styles:["",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%;position:relative;min-height:320px;height:100%}.kui-form-content .kui-form-action{position:absolute;bottom:0;width:100%;display:inline-flex}.kui-form-content .kui-form-expert-search{bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}.mat-datepicker-content .mat-calendar{height:auto!important}@media (max-width:1200px) and (min-width:768px){.kui-fulltext-search.input-field input{width:calc(360px - 80px)}.kui-fulltext-search,.kui-menu.extended-search{width:360px}}@media (max-width:768px) and (min-width:576px){.kui-fulltext-search-panel{width:360px}.kui-fulltext-search-panel.with-project-filter{width:calc(360px + 160px)}.kui-fulltext-search,.kui-menu.extended-search{width:calc(360px - 160px)}.kui-fulltext-search.with-project-filter,.kui-menu.extended-search.with-project-filter{width:360px!important}}']}),V(0,r.Inject(s.FormBuilder)),P("design:paramtypes",[s.FormBuilder])],e)}(),W=Promise.resolve(null),U=function(){function e(e){this.fb=e,this.type=a.KnoraConstants.IntValue}return e.prototype.ngOnInit=function(){var e=this;this.form=this.fb.group({integerValue:[null,s.Validators.compose([s.Validators.required,s.Validators.pattern(/^-?\d+$/)])]}),W.then(function(){e.formGroup.addControl("propValue",e.form)})},e.prototype.ngOnDestroy=function(){var e=this;W.then(function(){e.formGroup.removeControl("propValue")})},e.prototype.getValue=function(){return new a.ValueLiteral(String(this.form.value.integerValue),a.KnoraConstants.xsdInteger)},I([r.Input(),P("design:type",s.FormGroup)],e.prototype,"formGroup",void 0),e=I([r.Component({selector:"integer-value",template:'<mat-form-field class="large-field">\n    <input matInput [formControl]="form.controls[\'integerValue\']" placeholder="Integer value" value="" type="number">\n</mat-form-field>\n',styles:["",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%;position:relative;min-height:320px;height:100%}.kui-form-content .kui-form-action{position:absolute;bottom:0;width:100%;display:inline-flex}.kui-form-content .kui-form-expert-search{bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}.mat-datepicker-content .mat-calendar{height:auto!important}@media (max-width:1200px) and (min-width:768px){.kui-fulltext-search.input-field input{width:calc(360px - 80px)}.kui-fulltext-search,.kui-menu.extended-search{width:360px}}@media (max-width:768px) and (min-width:576px){.kui-fulltext-search-panel{width:360px}.kui-fulltext-search-panel.with-project-filter{width:calc(360px + 160px)}.kui-fulltext-search,.kui-menu.extended-search{width:calc(360px - 160px)}.kui-fulltext-search.with-project-filter,.kui-menu.extended-search.with-project-filter{width:360px!important}}']}),V(0,r.Inject(s.FormBuilder)),P("design:paramtypes",[s.FormBuilder])],e)}(),X=(require("jsonld"),Promise.resolve(null)),Y=function(){function e(e,t,i){this.fb=e,this._searchService=t,this._cacheService=i,this.type=a.KnoraConstants.LinkValue}return Object.defineProperty(e.prototype,"restrictResourceClass",{get:function(){return this._restrictToResourceClass},set:function(e){this._restrictToResourceClass=e},enumerable:!0,configurable:!0}),e.prototype.displayResource=function(e){if(null!==e)return e.label},e.prototype.searchByLabel=function(e){var t=this;e.length>=3?this._searchService.searchByLabelReadResourceSequence(e,0,{limitToResourceClass:this._restrictToResourceClass}).subscribe(function(e){t.resources=e.resources},function(e){console.log("JSONLD of full resource request could not be expanded:"+e)}):this.resources=undefined},e.prototype.validateResource=function(e){return e.value instanceof a.ReadResource?null:{noResource:{value:e.value}}},e.prototype.ngOnInit=function(){var e=this;this.form=this.fb.group({resource:[null,s.Validators.compose([s.Validators.required,this.validateResource])]}),this.form.valueChanges.subscribe(function(t){e.searchByLabel(t.resource)}),X.then(function(){e.formGroup.addControl("propValue",e.form)})},e.prototype.ngOnDestroy=function(){var e=this;X.then(function(){e.formGroup.removeControl("propValue")})},e.prototype.getValue=function(){return new a.IRI(this.form.value.resource.id)},I([r.Input(),P("design:type",s.FormGroup)],e.prototype,"formGroup",void 0),I([r.Input(),P("design:type",String),P("design:paramtypes",[String])],e.prototype,"restrictResourceClass",null),e=I([r.Component({selector:"link-value",template:'<mat-form-field class="large-field">\n    <input matInput placeholder="resource" aria-label="resource" [matAutocomplete]="auto"\n           [formControl]="form.controls[\'resource\']">\n    <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayResource">\n        <mat-option *ngFor="let res of resources" [value]="res">\n            {{res?.label}}\n        </mat-option>\n    </mat-autocomplete>\n</mat-form-field>\n',styles:["",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%;position:relative;min-height:320px;height:100%}.kui-form-content .kui-form-action{position:absolute;bottom:0;width:100%;display:inline-flex}.kui-form-content .kui-form-expert-search{bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}.mat-datepicker-content .mat-calendar{height:auto!important}@media (max-width:1200px) and (min-width:768px){.kui-fulltext-search.input-field input{width:calc(360px - 80px)}.kui-fulltext-search,.kui-menu.extended-search{width:360px}}@media (max-width:768px) and (min-width:576px){.kui-fulltext-search-panel{width:360px}.kui-fulltext-search-panel.with-project-filter{width:calc(360px + 160px)}.kui-fulltext-search,.kui-menu.extended-search{width:calc(360px - 160px)}.kui-fulltext-search.with-project-filter,.kui-menu.extended-search.with-project-filter{width:360px!important}}']}),V(0,r.Inject(s.FormBuilder)),P("design:paramtypes",[s.FormBuilder,a.SearchService,a.OntologyCacheService])],e)}(),H=Promise.resolve(null),$=function(){function e(e){this.fb=e,this.type=a.KnoraConstants.TextValue}return e.prototype.ngOnInit=function(){var e=this;this.form=this.fb.group({textValue:[null,s.Validators.required]}),H.then(function(){e.formGroup.addControl("propValue",e.form)})},e.prototype.ngOnDestroy=function(){var e=this;H.then(function(){e.formGroup.removeControl("propValue")})},e.prototype.getValue=function(){return new a.ValueLiteral(String(this.form.value.textValue),a.KnoraConstants.xsdString)},I([r.Input(),P("design:type",s.FormGroup)],e.prototype,"formGroup",void 0),e=I([r.Component({selector:"text-value",template:'<mat-form-field class="large-field">\n    <input matInput [formControl]="form.controls[\'textValue\']" placeholder="text value" value="">\n</mat-form-field>\n',styles:["",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%;position:relative;min-height:320px;height:100%}.kui-form-content .kui-form-action{position:absolute;bottom:0;width:100%;display:inline-flex}.kui-form-content .kui-form-expert-search{bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}.mat-datepicker-content .mat-calendar{height:auto!important}@media (max-width:1200px) and (min-width:768px){.kui-fulltext-search.input-field input{width:calc(360px - 80px)}.kui-fulltext-search,.kui-menu.extended-search{width:360px}}@media (max-width:768px) and (min-width:576px){.kui-fulltext-search-panel{width:360px}.kui-fulltext-search-panel.with-project-filter{width:calc(360px + 160px)}.kui-fulltext-search,.kui-menu.extended-search{width:calc(360px - 160px)}.kui-fulltext-search.with-project-filter,.kui-menu.extended-search.with-project-filter{width:360px!important}}']}),V(0,r.Inject(s.FormBuilder)),P("design:paramtypes",[s.FormBuilder])],e)}(),Z=Promise.resolve(null),ee=function(){function e(e){this.fb=e,this.type=a.KnoraConstants.UriValue}return e.prototype.ngOnInit=function(){var e=this;this.form=this.fb.group({uriValue:[null,s.Validators.compose([s.Validators.required,s.Validators.pattern(a.Utils.RegexUrl)])]}),Z.then(function(){e.formGroup.addControl("propValue",e.form)})},e.prototype.ngOnDestroy=function(){var e=this;Z.then(function(){e.formGroup.removeControl("propValue")})},e.prototype.getValue=function(){return new a.ValueLiteral(String(this.form.value.uriValue),a.KnoraConstants.xsdUri)},I([r.Input(),P("design:type",s.FormGroup)],e.prototype,"formGroup",void 0),e=I([r.Component({selector:"uri-value",template:'<mat-form-field class="large-field">\n    <input matInput [formControl]="form.controls[\'uriValue\']" placeholder="URI" value="">\n</mat-form-field>\n',styles:["",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%;position:relative;min-height:320px;height:100%}.kui-form-content .kui-form-action{position:absolute;bottom:0;width:100%;display:inline-flex}.kui-form-content .kui-form-expert-search{bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}.mat-datepicker-content .mat-calendar{height:auto!important}@media (max-width:1200px) and (min-width:768px){.kui-fulltext-search.input-field input{width:calc(360px - 80px)}.kui-fulltext-search,.kui-menu.extended-search{width:360px}}@media (max-width:768px) and (min-width:576px){.kui-fulltext-search-panel{width:360px}.kui-fulltext-search-panel.with-project-filter{width:calc(360px + 160px)}.kui-fulltext-search,.kui-menu.extended-search{width:calc(360px - 160px)}.kui-fulltext-search.with-project-filter,.kui-menu.extended-search.with-project-filter{width:360px!important}}']}),V(0,r.Inject(s.FormBuilder)),P("design:paramtypes",[s.FormBuilder])],e)}(),te=Promise.resolve(null),ie=function(){function e(e,t){this.fb=e,this._listCacheService=t,this.type=a.KnoraConstants.ListValue}return e.prototype.getRootNodeIri=function(){var e=this.property.guiAttribute;if(1===e.length&&e[0].startsWith("hlist="))return e[0].substr(7,e[0].length-8);console.log("No root node Iri given for property")},e.prototype.ngOnInit=function(){var e=this;this.form=this.fb.group({listValue:[null,s.Validators.required]}),te.then(function(){e.formGroup.addControl("propValue",e.form)});var t=this.getRootNodeIri();this._listCacheService.getList(t).subscribe(function(t){e.listRootNode=t})},e.prototype.ngOnDestroy=function(){var e=this;te.then(function(){e.formGroup.removeControl("propValue")})},e.prototype.getValue=function(){return new a.IRI(this.form.value.listValue)},e.prototype.getSelectedNode=function(e){this.menuTrigger.closeMenu(),this.selectedNode=e,this.form.controls.listValue.setValue(e.id)},I([r.Input(),P("design:type",s.FormGroup)],e.prototype,"formGroup",void 0),I([r.Input(),P("design:type",a.Property)],e.prototype,"property",void 0),I([r.ViewChild(v.MatMenuTrigger,{"static":!1}),P("design:type",v.MatMenuTrigger)],e.prototype,"menuTrigger",void 0),e=I([r.Component({selector:"list-value",template:'<span *ngIf="listRootNode !== undefined">\n    <button mat-stroked-button [matMenuTriggerFor]="mainMenu" type="button">\n        <span *ngIf="!selectedNode">Select list value</span>\n        <span *ngIf="selectedNode">{{selectedNode.label}}</span>\n    </button>\n\n    <mat-menu #mainMenu="matMenu" [overlapTrigger]="false">\n        <span *ngFor="let child of listRootNode.children">\n            <span *ngIf="child.children && child.children.length > 0">\n                <button mat-menu-item [matMenuTriggerFor]="menu.childMenu" (click)="getSelectedNode(child)"\n                        type="button">\n                    {{child.label}}\n                </button>\n                <list-display #menu [children]="child.children" (selectedNode)="getSelectedNode($event)">\n                </list-display>\n            </span>\n\n            <span *ngIf="!child.children || child.children.length === 0">\n                <button mat-menu-item (click)="getSelectedNode(child)" type="button">\n                    {{child.label}}\n                </button>\n            </span>\n        </span>\n    </mat-menu>\n</span>\n\n\x3c!-- hidden input field for the selected list item (listNode iri) --\x3e\n<mat-form-field class="hidden">\n    <input matInput [formControl]="form.controls[\'listValue\']" placeholder="list value">\n</mat-form-field>\n',styles:[".hidden{display:none}",'input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}input[type=search]{-moz-appearance:none;-webkit-appearance:none}.fill-remaining-space{flex:1 1 auto}.kui-search-menu{box-shadow:0 1px 3px rgba(0,0,0,.5);background-color:#f9f9f9;border-radius:4px;overflow-y:auto;width:calc(480px - 32px);min-height:320px;margin-top:6px;padding:16px;z-index:-1;position:relative}.kui-search-menu.with-project-filter{width:calc(480px + 160px - 32px)}.kui-search-menu.with-extended-search{width:calc(740px - 32px)}.kui-search-menu .kui-menu-header{background-color:#f9f9f9;border-top-left-radius:4px;border-top-right-radius:4px;display:inline-flex;height:48px;width:100%;margin-bottom:12px}.kui-search-menu .kui-menu-header .kui-menu-title h4{margin:12px 0}.kui-search-menu .kui-previous-search-list .mat-list-item:hover{background-color:#b8b8b8}.kui-search-menu .kui-previous-search-list .mat-list-item:hover .mat-icon{display:inline-block}.kui-search-menu .kui-previous-search-list .mat-list-item .mat-icon{display:none}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item{cursor:pointer;padding:12px!important;display:inherit}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label{overflow:hidden;text-overflow:ellipsis;width:160px}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::before{content:"["}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-project-filter-label.not-empty::after{content:"]"}.kui-search-menu .kui-previous-search-list .mat-list-item .kui-previous-search-item .kui-previous-search-query{font-weight:700}.kui-search-menu .kui-menu-action{position:absolute;bottom:0;width:calc(100% - 32px)}.kui-search-menu .kui-menu-action .center{display:block;margin:12px auto}.kui-form-content{width:100%;position:relative;min-height:320px;height:100%}.kui-form-content .kui-form-action{position:absolute;bottom:0;width:100%;display:inline-flex}.kui-form-content .kui-form-expert-search{bottom:16px;width:calc(100% - 32px);display:inline-flex}.small-field{width:121px}.medium-field{width:195px}.large-field{min-width:320px}.input-icon{color:rgba(11,11,11,.6)}.mat-datepicker-content .mat-calendar{height:auto!important}@media (max-width:1200px) and (min-width:768px){.kui-fulltext-search.input-field input{width:calc(360px - 80px)}.kui-fulltext-search,.kui-menu.extended-search{width:360px}}@media (max-width:768px) and (min-width:576px){.kui-fulltext-search-panel{width:360px}.kui-fulltext-search-panel.with-project-filter{width:calc(360px + 160px)}.kui-fulltext-search,.kui-menu.extended-search{width:calc(360px - 160px)}.kui-fulltext-search.with-project-filter,.kui-menu.extended-search.with-project-filter{width:360px!important}}']}),V(0,r.Inject(s.FormBuilder)),P("design:paramtypes",[s.FormBuilder,a.ListCacheService])],e)}(),re=function(){function e(){this.selectedNode=new r.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.setValue=function(e){this.selectedNode.emit(e)},I([r.Input(),P("design:type",Array)],e.prototype,"children",void 0),I([r.Output(),P("design:type",r.EventEmitter)],e.prototype,"selectedNode",void 0),I([r.ViewChild("childMenu",{"static":!0}),P("design:type",v.MatMenuTrigger)],e.prototype,"childMenu",void 0),e=I([r.Component({selector:"list-display",template:'<mat-menu #childMenu="matMenu" [overlapTrigger]="false">\n    <span *ngFor="let child of children">\n        <span *ngIf="child.children && child.children.length > 0">\n            <button mat-menu-item [matMenuTriggerFor]="menu.childMenu" (click)="setValue(child)" type="button">\n                {{child.label}}\n            </button>\n            <list-display #menu [children]="child.children" (selectedNode)="setValue($event)"></list-display>\n        </span>\n\n        <span *ngIf="!child.children || child.children.length === 0">\n            <button mat-menu-item (click)="setValue(child)" type="button">\n                {{child.label}}\n            </button>\n        </span>\n    </span>\n</mat-menu>\n',styles:[""]}),P("design:paramtypes",[])],e)}(),oe=function(){function e(){}return e=I([r.NgModule({imports:[p.CommonModule,h.BrowserAnimationsModule,m.MatAutocompleteModule,d.MatButtonModule,f.MatCheckboxModule,u.MatDatepickerModule,x.MatExpansionModule,k.MatFormFieldModule,b.MatInputModule,g.MatIconModule,y.MatListModule,v.MatMenuModule,w.MatSelectModule,C.MatTooltipModule,s.FormsModule,s.ReactiveFormsModule,a.KuiCoreModule,j.KuiActionModule,S.KuiViewerModule,c.MatJDNConvertibleCalendarDateAdapterModule],declarations:[E,q,M,A,T,N,z,Q,U,Y,$,ee,K,O,F,ie,re,_],exports:[F,O,q,_,z],entryComponents:[K]})],e)}();e.BooleanValueComponent=N,e.DateValueComponent=z,e.DecimalValueComponent=Q,e.ExpertSearchComponent=_,e.ExtendedSearchComponent=q,e.FulltextSearchComponent=O,e.HeaderComponent=K,e.IntegerValueComponent=U,e.KuiSearchModule=oe,e.LinkValueComponent=Y,e.SearchPanelComponent=F,e.SelectOntologyComponent=E,e.SelectPropertyComponent=A,e.SelectResourceClassComponent=M,e.SpecifyPropertyValueComponent=T,e.TextValueComponent=$,e.UriValueComponent=ee,e.a=ie,e.b=re,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=knora-search.umd.min.js.map